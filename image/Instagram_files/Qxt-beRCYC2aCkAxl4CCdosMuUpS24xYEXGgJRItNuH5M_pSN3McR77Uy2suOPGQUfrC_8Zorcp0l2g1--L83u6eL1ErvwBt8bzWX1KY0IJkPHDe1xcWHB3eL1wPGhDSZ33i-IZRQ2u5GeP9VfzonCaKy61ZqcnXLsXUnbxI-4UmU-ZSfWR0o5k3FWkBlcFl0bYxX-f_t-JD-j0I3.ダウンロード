;/*FB_PKG_DELIM*/

__d("EBSMProperties",[],(function(a,b,c,d,e,f){"use strict";a=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"];b=new Set(["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"]);c={dbVersion:5,mandatoryTables:b,persistedTables:new Set(a),persistedTablesArray:a};d=c;f["default"]=d}),66);
__d("IndexedDbPolyfills",[],(function(a,b,c,d,e,f){"use strict";var g=function(){function a(){this.$1=new Map()}var b=a.prototype;b.emit=function(a){var b=this.$1.get(a);for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];if(b!==void 0)for(var f=b,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}var j=i;j.apply(void 0,d)}var k=this["on"+a];k!=null&&k.apply(void 0,d)};b.addEventListener=function(a,b,c){var d=this;c===void 0&&(c={});c=c;c=c.signal;var e=this.$1.get(a);e===void 0&&(e=new Set(),this.$1.set(a,e));e.add(b);c!=null&&(c.onabort=function(){d.removeEventListener(a,b)})};b.removeEventListener=function(a,b){a=this.$1.get(a);if(a===void 0)return;a["delete"](b)};return a}();a=function(){return function(a,b){a=this.openCursor((a=a)!=null?a:null);var c=[],d=new g();a.onsuccess=function(a){a=a.target.result;if(a!=null&&(b===void 0||c.length<b))c.push(a.value),a["continue"]();else{d.result=c;d.onsuccess==null?void 0:d.onsuccess({target:{readyState:"done",result:c}});return}};a.onerror=function(a){d.onerror==null?void 0:d.onerror(a)};return d}};b=typeof window!=="undefined"?window:self;typeof b.IDBObjectStore!=="undefined"&&b.IDBObjectStore.prototype.getAll===void 0&&(b.IDBObjectStore.prototype.getAll=a());f.IDBRequest=g;f.getAll=a}),66);
__d("LSAppendDataTraceAddonStoredProcedure",["LSAppendDataTraceAddon","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSAppendDataTraceAddon"),e.dataTraceId,e.checkPointId,e.syncChannel,e.errorMessage,e.tags);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSMessagingThreadAttributionType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,UNKNOWN_TEST:1,UNKNOWN_FAILURE_RETRY:2,MESSENGER_INBOX:65536,MESSENGER_INBOX_IN_THREAD:65537,MESSENGER_INBOX_THREAD_LIST:65538,MESSENGER_INBOX_NESTED_FOLDER:65539,MESSENGER_INBOX_RECENT_THREADS:65540,MESSENGER_INBOX_REMAINING_THREADS:65541,MESSENGER_INBOX_MESSAGE_SEARCH:65542,MESSENGER_INBOX_IMAGE_SENDING:65543,MESSENGER_INBOX_FORWARD:65544,MESSENGER_INBOX_ARCHIVED_THREADS:65545,MESSENGER_INBOX_PENDING_REQUESTS:65546,MESSENGER_INBOX_ACTIVE_CONTACTS:65547,MESSENGER_INBOX_THREAD_BANNER_BOTTOM_SHEET:65548,MESSENGER_INBOX_PEOPLE_YOU_MAY_KNOW:65549,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET:65550,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET_QP:65551,MESSENGER_INBOX_META_AI_FAB:65552,MESSENGER_INBOX_META_AI_LONG_PRESS_MENU:65553,MESSENGER_INBOX_PINNED_THREAD:65554,MESSENGER_INBOX_PEOPLE_YOU_MAY_MESSAGE:65555,MESSENGER_UNIVERSAL_SEARCH:131072,MESSENGER_UNIVERSAL_SEARCH_NULL_STATE:131073,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED:131074,MESSENGER_UNIVERSAL_SEARCH_MESSAGE_SEARCH:131075,MESSENGER_UNIVERSAL_SEARCH_ADVANCED_CONTENT_SEARCH:131076,MESSENGER_UNIVERSAL_SEARCH_AI_PROMPT:131077,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD:131078,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_AIRPLANE_SEND:131079,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND:131080,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_DONUT:131081,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_DONUT:131082,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_AIRPLANE_SEND:131083,MESSENGER_UNIVERSAL_SEARCH_META_AI_SEARCH_RESULT:131084,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_SNIPPET:131085,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND_SNIPPET:131086,MESSENGER_UNIVERSAL_SEARCH_SERP_SNIPPET:131087,MESSENGER_UNIVERSAL_SEARCH_SERP_SNIPPET_PILL:131088,MESSENGER_UNIVERSAL_SEARCH_AI_DISCOVERY_MODULE:131089,MONTAGE_AND_ACTIVE_NOW:196608,MONTAGE_AND_ACTIVE_NOW_MONTAGE_INBOX_UNIT:196609,MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW:196610,MONTAGE_AND_ACTIVE_NOW_INBOX_COMPOSER:196611,MONTAGE_AND_ACTIVE_NOW_ACTIVE_AND_HAS_STORY:196612,MONTAGE_AND_ACTIVE_NOW_CUSTOM_STATUS:196613,MONTAGE_AND_ACTIVE_NOW_NOTES:196614,MONTAGE_AND_ACTIVE_NOW_SEE_ALL_ACTIVE:196615,MONTAGE_AND_ACTIVE_NOW_AN_TRAY_STORY_REPLY:196616,MESSENGER_ACTIVE_NOW_FRIENDS_TAB:262144,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_FRIENDS_TAB:262145,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_PLACE_HOLDER:262146,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE:262147,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE_AND_STORY:262148,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_CONTENT_DISCOVERY:262149,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_META_AI_FAB:262150,MESSENGER_PENDING_REQUESTS:327680,MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST:327681,MESSENGER_PENDING_REQUESTS_PENDING_REQUESTS_PAGE:327682,MESSENGER_BROADCAST_FLOW:393216,MESSENGER_BROADCAST_FLOW_FROM_MESSENGER:393217,MESSENGER_BROADCAST_FLOW_FROM_FB:393218,MESSENGER_BROADCAST_FLOW_FROM_EXTERNAL:393219,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_SHARESHEET:393220,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_GOODWILL_COMPOSER:393221,MESSENGER_BROADCAST_FLOW_FROM_FB__SHORTS_VIEWER:393222,MESSENGER_BROADCAST_FLOW_FORWARD_GUTTER:393223,MESSENGER_BROADCAST_FLOW_FORWARD_LONGCLICK:393224,MESSENGER_BROADCAST_FLOW_MESSENGER_PHOTO_VIEW:393225,MESSENGER_OMNIPICKER:458752,MESSENGER_OMNIPICKER_NULL_STATE:458753,MESSENGER_OMNIPICKER_KEY_PRESSED:458754,MESSENGER_NOTIFICATION:524288,MESSENGER_NOTIFICATION_IN_THREAD_REPLY:524289,MESSENGER_NOTIFICATION_LONGPRESS_REPLY:524290,MESSENGER_NOTIFICATION_LONGPRESS_REACTION:524291,CLICK_TO_MESSENGER_AD:589824,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED:589825,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA:589826,CLICK_TO_MESSENGER_AD_VIEW_AND_MESSAGE:589827,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA__NEWSFEED_CTM_ADS_CTA:589828,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED_OPTIMISTIC_LTV:589829,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED_LEAD_GEN:589830,PAYMENTS:655360,PAYMENTS_BUBBLE_CLICK:655361,RTC:720896,RTC_VOIP_INCALL:720897,RTC_DRAWER_PROMOTION:720898,FB_PAGE:786432,FB_PAGE_ABOUT_CARD:786433,FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON:786434,FB_PAGE_PROFILE_FOOTER_MESSAGE_BUTTON:786435,FB_PAGE_PROFILE_MORE_DRAWER:786436,FB_PAGE_RESPONSIVENESS_CONTEXT_CARD:786437,FB_PAGE_PYMM_RHC:786439,FB_PAGE_PAGES_HOME_FRIENDS_DIALOG:786440,FB_PAGE_PAGES_PRIVATE_REPLY:786441,FB_PROFILE:851968,FB_PROFILE_TIMELINE_MESSAGE_BUTTON:851969,FB_PROFILE_FACEBOOK_PROFILE:851970,FB_PROFILE_MESSAGE_BUTTON:851971,FB_PROFILE_MESSAGE_BUTTON_BLOKS_URL:851972,FB_PROFILE_PROFILE_HEADER_COMPOSER:851973,FB_PROFILE_MUTUAL_FRIENDS_DIALOG:851974,FB_SEARCH:917504,FB_SEARCH_CONTEXTUAL_PROFILE_ACTION_BAR_FROM_SEARCH:917505,FB_SEARCH_SEARCH_MESSAGE_BUTTON:917506,FB_SEARCH_FB_MESSAGE_SEARCH_RESULTS:917507,FB_SEARCH_HIGH_CONFIDENCE_CARD:917508,FB_SEARCH_MENTIONS:917509,FB_SEARCH_NULLSTATE_CTA:917510,FB_SEARCH_NULL_STATE:917511,FB_SEARCH_TYPEAHEAD:917512,FB_SEARCH_TYPEAHEAD_AIRPLANE_SEND:917513,FB_SEARCH_TYPEAHEAD_KEYBOARD_SEND:917514,FB_SEARCH_TYPEAHEAD_DONUT:917515,FB_SEARCH_NULL_STATE_DONUT:917516,FB_SEARCH_NULL_STATE_AIRPLANE_SEND:917517,FB_SEARCH_NULL_STATE_KEYBOARD_SEND:917518,FB_SEARCH_SERP_PROMPT_SUGGESTIONS:917519,FB_SEARCH_AI_DISCOVERY_MODULE:917520,FB_SEARCH_TYPEAHEAD_AI_SHORTCUT:917521,CRYPTO:983040,MESSENGER_MONTAGE_COMPOSER:1048576,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB:1048577,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB_STORY_AND_ACTIVE_NOW:1048578,MESSENGER_MONTAGE_REPLY:1114112,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE:1114113,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT:1114114,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR:1114115,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE_AUTHOR_PROFILE:1114116,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT_AUTHOR_PROFILE:1114117,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR_AUTHOR_PROFILE:1114118,MESSENGER_MONTAGE_REPLY_ONE_TO_ONE_CHAT_THREAD_STORY_BUBBLE:1114119,MESSENGER_THREAD_MEMBERS_LIST:1179648,MARKETPLACE:1245184,MARKETPLACE_ACTIVITY_BANNER:1245185,MARKETPLACE_SEND_MESSAGE:1245186,MARKETPLACE_GEN_AI_ACCORDION_META_AI_PILL:1245187,MARKETPLACE_GEN_AI_ACCORDION_FOLLOW_UP_QUESTION:1245188,MARKETPLACE_GEN_AI_PRICE_CHECK_META_AI_PILL:1245189,MARKETPLACE_GEN_AI_PRICE_CHECK_FOLLOW_UP_QUESTION:1245190,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_GENERIC:1245191,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_WITH_PROMPT:1245192,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_GENERIC:1245193,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_WITH_PROMPT:1245194,FB_STORY:1310720,FB_STORY_VIEWER_SHEET_MENU:1310721,FB_STORY_VIEWER_SHEET_ROW:1310722,FB_STORY_STORIES_JEWEL_NOTIFICATION:1310723,FB_STORY_STORIES_PUSH_NOTIFICATION:1310724,FB_STORY_STORIES_VIEWER_CONSUMER_REPLY:1310725,FB_STORY_STORIES_VIEWER_CONSUMER_ARTIFACT:1310726,FB_STORY_STORIES_PAGE_STORY_CONVERSATIONS:1310727,FB_STORY_SOCIAL_CONTEXT_CONVERSATIONS:1310728,FB_STORY_MENTIONS:1310729,FB_STORY_SELF_STORY_SEND:1310730,FB_STORY_SHARESHEET:1310731,FB_STORY_NOTES:1310732,FB_STORY_TRY_META_AI_STICKER:1310733,FB_STORY_CHALLENGES_NOMINATION:1310734,WORKSPEED:1376256,WORKSPEED_COMPOSER_LIKE_BUTTON:1376257,WORKSPEED_COMPOSER_GIF_PICKER:1376258,MDOTME:1441792,MDOTME_ORGANIC_POST:1441793,MDOTME_MARKETING_EMAIL:1441794,MDOTME_MBS_OFFSITE_EMAIL:1441795,CUSTOMER_CHAT_PLUGIN:1507328,CUSTOMER_CHAT_PLUGIN_MOBILE_REDIRECT:1507329,CUSTOMER_CHAT_PLUGIN_UPGRADE_FLOW:1507330,CUSTOMER_CHAT_PLUGIN_RE_ENGAGEMENT:1507331,FB_FEED:1572864,FB_FEED_ORGANIC_POST:1572865,FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE:1572866,FB_FEED_QUESTION_TRIGGERED_CONVO:1572867,FB_FEED_DYNAMIC_HOVER_CARD:1572868,FB_FEED_ORGANIC_POST__NEWSFEED_PAGE_POST_CTA:1572869,FB_FEED_ORGANIC_POST__NEWSFEED_BUMPER_SMCTA:1572870,FB_FEED_BCF_OPEN_CHAT_BUTTON:1572871,FB_FEED_REACTORS_LIST_MESSAGE_BUTTON:1572872,FB_FEED_REPLY_TO_AUTHOR:1572873,FB_FEED_UFI_SEND_SUGGESTIONS:1572874,FB_FEED_BCF:1572875,FB_FEED_COMMUNITY_CHATS_FEED_POST:1572876,FB_FEED_SOCIAL_CONNECTIONS_QP:1572877,FB_FEED_META_AI_DEEP_DIVES:1572878,FB_FEED_META_AI_SHARE_SHEET:1572879,FB_FEED_META_AI_TRENDING_DISCOVER_UNIT:1572880,FB_FEED_META_AI_POST_DEEPDIVE_PILL:1572881,FB_FEED_META_AI_EDUCATIONAL_QP:1572882,FB_FEED_META_AI_ENTITY_SUMMARIZATION_DISCOVER_UNIT:1572883,FB_FEED_META_AI_COMMENTS_SUMMARY:1572884,FB_FEED_META_AI_FAB:1572885,FB_FEED_META_AI_ADS_CAMPAIGN:1572886,FB_FEED_META_AI_ANSWERSHEET:1572887,FB_FEED_META_AI_BOOKMARK:1572888,FB_FEED_META_AI_FAB_COMMENTS_SUMMARY:1572889,FB_FEED_META_AI_FAB_CONTEXTUAL:1572890,FB_FEED_FEED_POLL:1572891,FB_NOTIFICATION:1638400,FB_NOTIFICATION_JEWEL_NOTIF:1638401,FB_NOTIFICATION_PUSH_NOTIF:1638402,FB_EVENT:1703936,FB_EVENT_MESSAGE_HOST:1703937,FB_EVENT_SHARE_CLASS_MATERIALS:1703938,SUPPORT_RESOURCES:1769472,SUPPORT_RESOURCES_FRX_ACTION:1769473,LEAD_GEN_MESSAGING:1835008,LEAD_GEN_MESSAGING_PRE_SUBMISSION:1835009,LEAD_GEN_MESSAGING_POST_SUBMISSION:1835010,LEAD_GEN_MESSAGING_CROSS_CHANNEL_VERTICAL_PRESENT_ANDROID:1835011,LEAD_GEN_MESSAGING_CROSS_CHANNEL_HSCROLL_ANDROID:1835012,MESSENGER_GRAPH:1900544,MESSENGER_GRAPH_SELECT_CONTACT:1900545,MESSENGER_CHAT:1966080,MESSENGER_CHAT_FROM_JEWEL__THREAD_LIST:1966081,MESSENGER_CHAT_IN_THREAD:1966082,MESSENGER_CHAT_FORWARD:1966083,MESSENGER_ARCHIVED_THREADS:2031616,MESSENGER_ARCHIVED_THREADS_ARCHIVED_THREADS_FOLDER:2031617,JEWEL:2097152,JEWEL_THREAD_LIST:2097153,JEWEL_SEARCH:2097154,JEWEL_NEW_MESSAGE:2097155,JEWEL_NESTED_FOLDER:2097156,CHATHEADS:2162688,CHATHEADS_RECENT_THREADS:2162689,CHATHEADS_OVERFLOW:2162690,CHATHEADS_NEW_MESSAGE:2162691,SIDEBAR:2228224,SIDEBAR_CONTACTS_LIST:2228225,SIDEBAR_CONTACTS_SEARCH:2228226,SIDEBAR_CONTACTS_GROUPS:2228227,SIDEBAR_CONTACTS_COMMUNITY_CHATS:2228228,MESSENGER_COMMUNITY_MESSAGING:2293760,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_CHANNEL:2293761,MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT:2293762,MESSENGER_COMMUNITY_MESSAGING_CHANNEL_CREATION_NOTIFICATION:2293763,MESSENGER_COMMUNITY_MESSAGING_FRIEND_JOINED_COMMUNITY_CHAT_NOTIFICATION:2293764,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_FRIENDS_DIALOG:2293765,FB_PLATFORM_LOGIN:2359296,FB_PLATFORM_LOGIN_LOGIN_CONNECT_WITH_MESSENGER:2359297,CONTACT_MANAGER:2424832,CONTACT_MANAGER_CONTACT_SHARE:2424833,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_LIST:2424834,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_SEARCH:2424835,CONTACT_MANAGER_ICON_CONTACT_LIST:2424836,CONTACT_MANAGER_ICON_CONTACT_SEARCH:2424837,MESSAGING_INBOX_IN_BLUE:2490368,MESSAGING_INBOX_IN_BLUE_THREAD_LIST:2490369,MESSAGING_INBOX_IN_BLUE_PEOPLE_PICKER:2490370,MESSAGING_INBOX_IN_BLUE_INBOX_ICON:2490371,MESSAGING_INBOX_IN_BLUE_SWIPE_FROM_RIGHT:2490372,MESSAGING_INBOX_IN_BLUE_MIB_NOTIFICATION:2490373,MESSAGING_INBOX_IN_BLUE_ACTIVE_NOW:2490374,MESSAGING_INBOX_IN_BLUE_SUGGESTED_CHATS:2490375,MESSAGING_INBOX_IN_BLUE_CHAT_PREVIEW_BANNER:2490376,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_CORE_NULL_STATE:2490377,MESSAGING_INBOX_IN_BLUE_MESSAGE_REQUESTS:2490378,MESSAGING_INBOX_IN_BLUE_SPAM:2490379,MESSAGING_INBOX_IN_BLUE_FB_GROUPS:2490380,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_BUTTON:2490381,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_TOOLTIP:2490382,MESSAGING_INBOX_IN_BLUE_BROADCAST_FLOW:2490383,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_HEADER:2490384,MESSAGING_INBOX_IN_BLUE_PRIVACY_SETTINGS:2490385,MESSAGING_INBOX_IN_BLUE_ARCHIVED_CHATS:2490386,MESSAGING_INBOX_IN_BLUE_UNIVERSAL_SEARCH:2490387,MESSAGING_INBOX_IN_BLUE_INBOX_SEARCH_BAR:2490388,MIB_NOTIFICATION:2555904,MIB_NOTIFICATION_PUSH_NOTIFICATION:2555905,MIB_NOTIFICATION_JEWEL_NOTIFICATION:2555906,MIB_NOTIFICATION_DIRECT_PUSH_NOTIF:2555907,MIB_NOTIFICATION_DIRECT_JEWEL_NOTIF:2555908,MESSENGER_RESTRICTED_ACCOUNTS:2621440,ARMADILLO_CUTOVER_THREAD_LINKING_MESSAGE:2686976,CALLS_TAB:2752512,MINI_SHOP_VIEW_MENU_BUTTON:2818048,SHARESHEET:2883584,SHARESHEET_GENERALIZED_BROADCAST_FLOW:2883585,SHARESHEET_OFF_PLATFORM_SHARING_H_SCROLL:2883586,SHARESHEET_BROADCAST_CHANNEL:2883587,UFI:2949120,UFI_GENERALIZED_BROADCAST_FLOW:2949121,CHATHEAD_CLICK_COLLAPSED:3014656,TIMELINE_MESSAGE_BUTTON:3080192,DIRECT_REPLY_INTENT:3145728,FB_GROUPS:3211264,FB_GROUPS_INBOX:3211265,FB_GROUPS_PICKER_EXISTING_CHAT:3211266,FB_GROUPS_PICKER_JOIN_CHAT:3211267,FB_GROUPS_MEMBER_LIST:3211268,FB_GROUPS_INLINE_COMPOSER:3211269,FB_GROUPS_SCOPED_SEARCH:3211270,FB_GROUPS_UNJOINED_MALL_HEADER:3211271,FB_GROUPS_DISCOVER_FEED_UNIT:3211272,FB_GROUPS_ANSWER_AGENT_CONTEXTUAL_PROFILE:3211273,FB_GROUPS_ANSWER_AGENT_FOLLOWUP_SECTION:3211274,FB_GROUPS_NOTIFICATION_MESSAGING_IN_BLUE_DIRECT_MESSAGE:3211275,FB_GROUPS_UGC:3211276,FB_GROUPS_UGC_POST:3211277,FB_GROUPS_UGC_MALL_PLINK:3211278,FB_GROUPS_UGC_MALL_NUX:3211279,FB_GROUPS_UGC_ADMIN_TESTING:3211280,FB_GROUPS_UGC_INTRO_POST:3211281,FB_GROUPS_UGC_QP:3211282,FB_GROUPS_UGC_DEEP_DIVE_GET_ANSWER_PILL:3211283,FB_GROUPS_UGC_DEEP_DIVE_PILL:3211284,FB_GROUPS_UGC_FAB:3211285,FB_GROUPS_UGC_REMINDER_NOTIF:3211286,FB_GROUPS_UGC_COMMENT_RESPONSE_UPSELL:3211287,FB_GROUPS_UGC_CONTEXTUAL_PROFILE:3211288,FB_GROUPS_UGC_DEEP_DIVE_ASK_SOMETHING_ELSE:3211289,FB_GROUPS_UGC_CONTEXTUAL_CARD_ASK_SOMETHING_ELSE:3211290,DEVICES:3276800,DEVICES_STELLA:3276801,FB_WELLBEING:3342336,FB_WELLBEING_INCALL_UNBLOCKING_NOTIFICATION:3342337,MESSENGER_DEEP_LINKING:3407872,READ_ONLY_CUTOVER_THREAD:3473408,READ_ONLY_CUTOVER_THREAD_ARMADILLO_THREAD:3473409,ARMADILLO_THREAD:3538944,ARMADILLO_THREAD_READ_ONLY_CUTOVER_THREAD:3538945,ARMADILLO_THREAD_EXTERNAL_LINK:3538946,FB_SHORTS:3604480,FB_SHORTS_PROFILE:3604481,FB_SHORTS_REACTORS_LIST_MESSAGE_BUTTON:3604482,SEND_PLUGIN:3670016,SEND_AS_MESSAGE_FROM_NT:3735552,MESSENGER_PUBLIC_CHATS_MESSAGING:3801088,MESSENGER_GROWTH:3866624,MESSENGER_GROWTH_NOTIFICATIONS_ENTRYPOINT:3866625,MESSENGER_GROWTH_MESSAGE_REQUEST_JEWEL:3866626,FRIENDS_HOME:3932160,FRIENDS_HOME_ACTIVE_NOW:3932161,FRIENDS_HOME_MESSAGE_NEW_FRIENDS:3932162,FRIENDS_HOME_POST_ACCEPT_MESSAGING:3932163,FRIENDS_HOME_SENDER_POST_ACCEPT_WAVE:3932164,EXTERNAL_LINK_XMA:3997696,EXTERNAL_LINK_XMA_FROM_COMPOSER:3997697,EXTERNAL_LINK_XMA_FROM_DEEP_LINKING:3997698,EXTERNAL_LINK_XMA_FROM_SHARE_EXTENSION:3997699,FB_NOTIFICATIONS:4063232,QUICK_PROMOTION:4128768,QUICK_PROMOTION_CTA:4128769,QUICK_PROMOTION_INTERSTITIAL:4128770,QUICK_PROMOTION_TOP_BANNER:4128771,FBM_IN_APP_NOTIFS:4194304,CREATOR_SUPPORT:4259840,CREATOR_SUPPORT_MESSENGER_TOAST:4259841,FB_INSTANT_GAME:4325376,COMMUNITY_CHATS_IN_FEED:4390912,COMMUNITY_CHATS_IN_FEED_PERMALINK:4390913,UNIFIED_BUSINESS_INBOX:4456448,ROLLCALL:4521984,HIGHLIGHTS_TAB:4587520,HIGHLIGHTS_TAB_FEED_INLINE:4587521,HIGHLIGHTS_TAB_MEDIA_VIEWER:4587522,HIGHLIGHTS_TAB_THREAD_VIEW:4587523,HIGHLIGHTS_TAB_FEED_INLINE_CONNECTED_CHAT:4587524,HIGHLIGHTS_TAB_FEED_INLINE_LOCAL_EVENT:4587525,HIGHLIGHTS_TAB_FEED_INLINE_FRIENDS_UPDATE:4587526,HIGHLIGHTS_TAB_FEED_INLINE_BIRTHDAY:4587527,HIGHLIGHTS_TAB_MEDIA_VIEWER_CONNECTED_CHAT:4587528,HIGHLIGHTS_TAB_MEDIA_VIEWER_FRIENDS_UPDATE:4587529,HIGHLIGHTS_TAB_THREAD_VIEW_CONNECTED_CHAT:4587530,HIGHLIGHTS_TAB_THREAD_VIEW_LOCAL_EVENT:4587531,HIGHLIGHTS_TAB_THREAD_VIEW_FRIENDS_UPDATE:4587532,HIGHLIGHTS_TAB_THREAD_VIEW_BIRTHDAY:4587533,HIGHLIGHTS_TAB_THREAD_VIEW_NOTE:4587534,HIGHLIGHTS_TAB_FEED_INLINE_NOTE:4587535,HIGHLIGHTS_TAB_CONNECTED_BROADCAST_CHANNEL_SHARE_SHEET:4587536,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_BIRTHDAY:4587537,HIGHLIGHTS_TAB_SHARE_SHEET_HOLIDAY_CARD:4587538,HIGHLIGHTS_TAB_META_AI_BIRTHDAY:4587539,HIGHLIGHTS_TAB_QUICK_REACT_CONNECTED_CHAT:4587540,HIGHLIGHTS_TAB_QUICK_REACT_LOCAL_EVENT:4587541,HIGHLIGHTS_TAB_QUICK_REACT_FRIENDS_UPDATE:4587542,HIGHLIGHTS_TAB_QUICK_REACT_BIRTHDAY:4587543,HIGHLIGHTS_TAB_QUICK_REACT_STORIES:4587544,HIGHLIGHTS_TAB_QUICK_REACT_NOTE:4587545,HIGHLIGHTS_TAB_QUICK_REACT_LIFE_EVENT:4587546,HIGHLIGHTS_TAB_META_AI_FAB:4587547,HIGHLIGHTS_TAB_FEED_INLINE_CHAT_WITH_FRIENDS:4587548,HIGHLIGHTS_TAB_THREAD_VIEW_CHAT_WITH_FRIENDS:4587549,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_LOCAL_EVENT:4587550,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_FRIENDS_UPDATE:4587551,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_NOTE:4587552,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_CHAT_WITH_FRIENDS:4587553,HIGHLIGHTS_TAB_FB_POST_MEMORIES_SHARE_SHEET:4587554,HIGHLIGHTS_TAB_FEED_INLINE_FB_POST_MEMORIES:4587555,HIGHLIGHTS_TAB_THREAD_VIEW_FB_POST_MEMORIES:4587556,HIGHLIGHTS_TAB_QUICK_REACT_FB_POST_MEMORIES:4587557,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_FB_POST_MEMORIES:4587558,MARKETPLACE_INBOX:4653056,ONE_TAP_MESSAGE_QUICK_SHARE:4718592,HIGHLIGHTS_TAB_STORIES_TRAY:4784128,FB_BIRTHDAY_CENTER:4849664,MESSENGER_SIRIKIT:4915200,MESSENGER_SIRIKIT_CALLKIT_QUICK_REPLY:4915201,MESSENGER_SIRIKIT_VOICE_COMMAND:4915202,CLICK_TO_SUBSCRIBE_AD:4980736,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER:5046272,FB_UNIVERSAL_SEARCH:5111808,FB_UNIVERSAL_SEARCH_NULL_STATE_SUGGESTED:5111809,FB_UNIVERSAL_SEARCH_NULL_STATE_RECENT:5111810,FB_UNIVERSAL_SEARCH_QUERY_RESULTS:5111811,FBLITE_MESSAGING:5177344,FBLITE_MESSAGING_FROM_EXTERNAL:5177345,FBLITE_MESSAGING_FORWARD_FROM_BROADCAST_FLOW:5177346,FBLITE_MESSAGING_IN_THREAD:5177349,FBLITE_MESSAGING_ACTIVE_NOW:5177352,FBLITE_MESSAGING_ARCHIVED_CHATS:5177353,FBLITE_MESSAGING_SPAM:5177354,FBLITE_MESSAGING_MESSAGE_REQUESTS:5177355,FBLITE_MESSAGING_MARKETPLACE:5177356,FBLITE_MESSAGING_THREAD_MEMBERS_LIST:5177357,FBLITE_MESSAGING_READONLY_VERSION_OF_CUTOVER_THREAD:5177358,FBLITE_MESSAGING_QP:5177359,FBLITE_MESSAGING_NOTIFICATION:5242880,FBLITE_MESSAGING_NOTIFICATION_IN_THREAD_REPLY:5242881,FBLITE_MESSAGING_NOTIFICATION_DIRECT_REPLY:5242882,FBLITE_INBOX:5308416,FBLITE_INBOX_UNIVERSAL_SEARCH:5308417,FBLITE_INBOX_PEOPLE_PICKER:5308418,FBLITE_INBOX_RECENT_THREADS:5308419,FBLITE_INBOX_REMAINING_THREADS:5308420,FBLITE_INBOX_INBOX_FOLLOWUP:5308421,SHARED_ALBUM:5373952,QUICK_REPLIES:5439488,QUICK_REPLIES_TRAY:5439489,MESSENGER_CTA_AFTER_CALL_ENDS:5505024,MESSENGER_CONVERSATION_SHORTCUT:5570560,CC_ADMIN_SEND_MESSAGE_HINT_CARD:5636096,CC_MEMBER_SEND_MESSAGE_HINT_CARD:5701632,MSGR_AVATAR_DETAILS:5767168,PRIVATE_SHARING_FORWARD_SUPER_SHARE_SHEET:5832704,MEMORIES:5898240,META_AI_TAB:5963776,MEMORIES_NOTIFICATION:6029312,MEMORIES_QUICK_PROMOTION:6094848,MEMORIES_HIGHLIGHTS_TAB:6160384,MEMORIES_LIST:6225920,MSGR_PYMK_LIST_SCREEN:6291456,INSTAGRAM_WEB_SENDS:6356992,AI_SUGGESTED_PROMPT_TRAY:6422528,AI_SUGGESTED_PROMPT_ICEBREAKER:6488064,COMMUNITY_INVITE:6553600,COMMUNITY_CHAT_INVITE:6619136,AI_DISCOVERY_BOTTOM_SHEET:6684672,IN_THREAD_INVITE_MODEL:6750208,SUPPORT_FOLDER:6815744,MARKETPLACE_PDP:6881280,QR_CODE:6946816,WRITE_WITH_AI:7012352,AI_HOME_CHAT_WITH_AI:7077888,AI_HOME_INBOX_QP:7143424,AI_AGENT_MESSAGE_SHARE:7208960,AI_HOME_FROM_THREAD:7274496,AI_HOME_FROM_THREAD_DETAIL:7274497,AI_HOME_FROM_THREAD_HEADER:7274498,AI_HOME_FROM_THREAD_META_AI_THREAD_DETAIL:7274499,AI_HOME_FROM_THREAD_META_AI_THREAD_HEADER:7274500,AI_HOME_FROM_FOLDER_LIST:7340032,AI_HOME_FROM_FB_BOOKMARK:7405568,FB_FANDOM:7471104,AI_HOME_INBOX_RETENTION_QP:7536640,MEMORIES_INBOX_TRAY:7602176,MESSENGER_VOICEMAIL:7667712,AI_UGC_FB_FEED_QP:7733248,MESSENGER_INBOX_IP_QP:7798784,COMMUNITY_GROUP_CHAT_UPGRADES_INVITE:7864320,MESSENGER_SECRET_CONVERSATIONS:7929856,MESSENGER_SECRET_CONVERSATIONS_SECRET_CONVERSATIONS_FOLDER:7929857,CROSS_CUSTOMER_SUPPORT:7995392,CROSS_CUSTOMER_SUPPORT_FB_HELP_CENTER_META_AI_CARD:7995393,AI_LOOKUP:8060928,PINNED_MESSAGES_THREAD_DETAILS:8126464,CM_MEMBER_REPORTS_BLOKS:8192e3,MEMORIES_TEMPLATE:8257536,FB_TREP_UGC_CREATION:8323072,MESSENGER_STORIES_TAB:8388608,MESSENGER_STORIES_TAB_META_AI_FAB:8388609,META_AI_ENTITY_DETECTION:8454144,AI_HOME_FROM_AI_STUDIO_TAB:8519680,QR_CODE_LINK:8585216,META_AI_PROMPT_SHEET:8650752,UGC_BOT_IMMERSIVE_THREAD:8716288,UGC_BOT_IMMERSIVE_THREAD_AI_STUDIO_TAB:8716289,UGC_BOT_IMMERSIVE_THREAD_INBOX:8716290,UGC_BOT_IMMERSIVE_THREAD_AI_HOME:8716291,IGD_WEB_CHAT_TAB:8781824,IGD_WEB_CHAT_TAB_IN_THREAD:8781825,IGD_WEB_CHAT_TAB_NOTIFICATION:8781826,FB_PYMK_FEED_MESSAGE_BUTTON:8847360,MSGR_UGC_IMMERSIVE_THREAD:8912896,MSGR_UGC_IMMERSIVE_THREAD_AI_STUDIO_TAB:8912897,MSGR_UGC_IMMERSIVE_THREAD_LEFT_NAV_AI_STUDIO_TAB:8912898,MSGR_UGC_IMMERSIVE_THREAD_MORE_MENU_AI_STUDIO_TAB:8912899,MSGR_UGC_IMMERSIVE_THREAD_AI_STUDIO_TAB_AI_HOME:8912900,MSGR_UGC_IMMERSIVE_THREAD_COMPOSER_AI_HOME:8912901,MSGR_UGC_IMMERSIVE_THREAD_INBOX:8912902,MSGR_UGC_IMMERSIVE_THREAD_ACTIVE_NOW:8912903,MSGR_UGC_IMMERSIVE_THREAD_META_AI_HEADER_AI_HOME:8912904,MSGR_UGC_IMMERSIVE_THREAD_UGC_HEADER_AI_HOME:8912905,MSGR_UGC_IMMERSIVE_THREAD_THREAD_DETAIL_AI_HOME:8912906,MSGR_UGC_IMMERSIVE_THREAD_META_AI_THREAD_DETAIL_AI_HOME:8912907,MSGR_UGC_IMMERSIVE_THREAD_DEEPLINK:8912908,MSGR_UGC_IMMERSIVE_THREAD_NOTIFICATION:8912909,MSGR_UGC_IMMERSIVE_THREAD_AI_CREATION:8912910,MSGR_UGC_IMMERSIVE_THREAD_LEFT_NAV_AI_STUDIO_TAB_AI_HOME:8912911,MSGR_UGC_IMMERSIVE_THREAD_MORE_MENU_AI_STUDIO_TAB_AI_HOME:8912912,AI_THREAD_FROM_FF_THREAD:8978432,AI_THREAD_FROM_FF_THREAD_FF_THREAD_VIEW_META_AI_TASK:8978433,PHONE_NUMBER_MESSAGES:9043968,FUNDRAISER_SUPPORTERS_LIST:9109504});f["default"]=a}),66);
__d("LocalStorageWrapper",["CurrentMessengerUser","WAResultOrError","isQuotaExceededError","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("PersistedQueue").__setRef("LocalStorageWrapper");function i(a){var b=null;try{b=window.localStorage;if(b!=null&&typeof b.setItem==="function"&&typeof b.removeItem==="function"){var c="__test__"+Date.now();b.setItem(c,"");b.removeItem(c)}else return null}catch(c){if(d("isQuotaExceededError").isStorageQuotaExceededError(b,c)===!1){a("Failed to get localstorage");return null}}return b}function a(a){try{a=i(a);return a!=null}catch(a){return!1}}function j(a){try{var b=0,c={};for(var d in a){if(!Object.prototype.hasOwnProperty.call(a,d))continue;var e=(a[d].length+d.length)*2;b+=e;e/1024>1e3&&(c[d.substr(0,50)]=(e/1024).toFixed(2))}c.total=(b/1024).toFixed(2);return JSON.stringify(c)}catch(a){return"Can't calculate localStorage"}}function b(a,b,c,e,f){if(a==null)return d("WAResultOrError").makeError("null-storage");try{f!==void 0?k(a,b,c,f):a.setItem(b,c)}catch(f){if(d("CurrentMessengerUser").isEmployee()){var g=j(a);h.onReady(function(a){a=a.isQueueActivateExperiment().toString();e(f+" - Storage quota exceeded while setting "+b+":"+c+", queueActivateExp:"+a+" "+g)})}else e(f+" - Storage quota exceeded while setting "+b+":"+c);return d("WAResultOrError").makeError("quota-exceeded")}return d("WAResultOrError").makeResult()}function k(a,b,c,d){try{a.setItem(b,c)}catch(e){d(e),a.setItem(b,c)}}function e(a,b,c){a==null?c("not storage found"):a.removeItem(b)}function f(a,b,c){if(a==null){c("not storage found");return null}else return a.getItem(b)}g.getStorage=i;g.isLocalStorageAvailable=a;g.setItemGuarded=b;g.removeItemGuarded=e;g.getItemGuarded=f}),98);
__d("MAWCryptoConsts",[],(function(a,b,c,d,e,f){"use strict";a=60*60;b=24*a;c=32;d=new Uint8Array(0).buffer;e=128;a=256;var g=12,h=1,i=2,j=2,k=4;b=b*30*6;var l=3,m="AES-GCM",n="HKDF",o="SHA-256";f.HKDF_SEED_LENGTH_IN_BYTES=c;f.HKDF_INFO=d;f.AES_GCM_TAG_LENGTH=e;f.AES_GCM_KEY_LENGTH=a;f.AES_GCM_IV_LENGTH_IN_BYTES=g;f.VERSION=h;f.CIPHER_ID=i;f.ADDITIONAL_DATA_LENGTH_IN_BYTES=j;f.EXTRA_ADDITIONAL_DATA_LENGTH_IN_BYTES=k;f.ENC_KEY_TTL=b;f.MAX_KEYCHAIN_SETUP_RETRIES=l;f.AES_GCM=m;f.HKDF=n;f.SHA256=o}),66);
__d("MAWKeychainUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return self.crypto.getRandomValues(new Uint8Array(a))}function b(a){var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(new Uint8Array(b),a);return a+b.byteLength},0);return c.buffer}function c(a,b){return new Uint8Array([a,b]).buffer}function d(a){var b=a.length;if(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)){var c=[];for(var d=0,b=b/2;d<b;++d){var e=parseInt(a.substring(d*2,d*2+2),16);c.push(e)}return new Uint8Array(c)}else return null}f.getBufferWithRandomValuesFromLength=a;f.mergeBuffers=b;f.makeAAD=c;f.fromHexString=d}),66);
__d("MAWSubtleCrypto",[],(function(a,b,c,d,e,f){a=self.crypto;b=a&&(a.subtle||a.webkitSubtle||a.subtle);f.MAWSubtleCrypto=b}),66);
__d("MAWWebInitDataHelpers",["MessengerWebInitData","err"],(function(a,b,c,d,e,f,g){"use strict";function a(){return 2}function b(a){switch(a){case 2:return[c("MessengerWebInitData").accountKeyV2];case 1:return[c("MessengerWebInitData").accountKey].concat((a=c("MessengerWebInitData").additionalAccountKeysV1)!=null?a:[]);default:throw c("err")("Invalid format version, should never happen.")}}g.getLastAccountKeyFormatVersion=a;g.getAccountKeysString=b}),98);
__d("MAWKeychainCrypto",["FBLogger","MAWCryptoConsts","MAWKeychainUtil","MAWSubtleCrypto","MAWWebInitDataHelpers","Promise","WABase64","asyncToGeneratorRuntime","err","memoizeOneWithArgs"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MAWKeychainUtil").makeAAD(d("MAWCryptoConsts").VERSION,d("MAWCryptoConsts").CIPHER_ID);function a(a,b,e){var f=d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").AES_GCM_IV_LENGTH_IN_BYTES),g=e?e:i;return d("MAWSubtleCrypto").MAWSubtleCrypto.encrypt({additionalData:g,iv:new Uint8Array(f),name:d("MAWCryptoConsts").AES_GCM,tagLength:d("MAWCryptoConsts").AES_GCM_TAG_LENGTH},a,b).then(function(a){a=d("MAWKeychainUtil").mergeBuffers([g,f,a]);return d("WABase64").encodeB64(a)})["catch"](function(b){throw c("FBLogger")("messenger_web").catching(b).mustfixThrow("Failed to encryptDataToStringBuffer",typeof a,a.constructor.name)})}function e(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;b=new Uint8Array(d("WABase64").decodeB64(b));var e=b.subarray(0,(c=d("MAWCryptoConsts")).ADDITIONAL_DATA_LENGTH_IN_BYTES),f=b.subarray(c.ADDITIONAL_DATA_LENGTH_IN_BYTES,c.AES_GCM_IV_LENGTH_IN_BYTES+c.ADDITIONAL_DATA_LENGTH_IN_BYTES);b=b.subarray(c.AES_GCM_IV_LENGTH_IN_BYTES+c.ADDITIONAL_DATA_LENGTH_IN_BYTES);e=(yield d("MAWSubtleCrypto").MAWSubtleCrypto.decrypt({additionalData:e,iv:f,name:c.AES_GCM,tagLength:c.AES_GCM_TAG_LENGTH},a,b));return e});return j.apply(this,arguments)}function k(a){a=d("MAWWebInitDataHelpers").getAccountKeysString(a);return a.map(function(a){var b=d("MAWKeychainUtil").fromHexString(a);if(b==null)throw c("err")("Invalid value for account key. Is empty="+String(a.length===0)+";");return b.buffer})}function l(a){return(h||(h=b("Promise"))).all(k(a).map(function(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",a,{name:d("MAWCryptoConsts").AES_GCM},!1,["encrypt","decrypt"])}))}function f(){return d("WABase64").encodeB64(d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES))}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WABase64").decodeB64(a);try{a=(yield d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",a,{name:d("MAWCryptoConsts").HKDF},!1,["deriveKey"]));return a}catch(a){c("FBLogger")("messenger_web").catching(a).mustfix("Failed to importBrowserEncryptionKey");throw a}});return n.apply(this,arguments)}function o(){return d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES)}function p(a,b){var c;return d("MAWSubtleCrypto").MAWSubtleCrypto.deriveKey({hash:{name:(c=d("MAWCryptoConsts")).SHA256},info:c.HKDF_INFO,name:c.HKDF,salt:b},a,{length:c.AES_GCM_KEY_LENGTH,name:c.AES_GCM},!0,["encrypt","decrypt"]).then(function(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.exportKey("raw",a)})}function q(a){var b=a.slice(0,d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES);b=new DataView(b).getUint8(0);if(b===0){var c,e=a.slice((c=d("MAWCryptoConsts")).ADDITIONAL_DATA_LENGTH_IN_BYTES,c.ADDITIONAL_DATA_LENGTH_IN_BYTES*2);return{aadLengthInBytes:c.ADDITIONAL_DATA_LENGTH_IN_BYTES*2+c.EXTRA_ADDITIONAL_DATA_LENGTH_IN_BYTES,keyVersion:new DataView(e).getUint8(0),originRandomisedVersion:new DataView(a).getUint32(c.ADDITIONAL_DATA_LENGTH_IN_BYTES*2,!0)}}return{aadLengthInBytes:d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES,keyVersion:b}}function r(a){return q(a)}var s=c("memoizeOneWithArgs")(function(a){return l(a)});function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WABase64").decodeB64(a);a=(yield d("MAWSubtleCrypto").MAWSubtleCrypto.digest(d("MAWCryptoConsts").SHA256,a));return d("WABase64").encodeB64(a)});return u.apply(this,arguments)}g.ADDITIONAL_DATA=i;g.encryptDataToStringBuffer=a;g.decryptDataToArrayBuffer=e;g.getAccountKeysBuffers=k;g.genAccountKeys=l;g.genBrowserEncryptionKeyString=f;g.importBrowserEncryptionKey=m;g.genDatabaseEncryptionSeed=o;g.genDatabaseEncryptionKey=p;g.getKeyVersionFromCipherData=q;g.getKeyVersionFromCipherDataString=r;g.getAccountKeys=s;g.generateHashString=t}),98);
__d("MAWEARGenNewKeychainCryptoKey",["FBLogger","MAWCryptoConsts","MAWKeychainCrypto","MAWWebInitDataHelpers","MessengerWebInitData","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a,b=d("MAWWebInitDataHelpers").getLastAccountKeyFormatVersion(),e=(yield (a=d("MAWKeychainCrypto")).getAccountKeys(b))[0],f=a.genBrowserEncryptionKeyString(),g=a.genDatabaseEncryptionSeed();e=(yield a.encryptDataToStringBuffer(e,g));g=d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+d("MAWCryptoConsts").ENC_KEY_TTL);return{accountKeyString:yield a.generateHashString(d("MAWWebInitDataHelpers").getAccountKeysString(b)[0]),appIdOrigin:c("MessengerWebInitData").appId,expiration:g,formatVersion:b,key:f,seed:e,userKeyBaseString:yield a.generateHashString(c("MessengerWebInitData").userKeyBase)}}catch(a){throw c("FBLogger")("messenger_web").catching(a).mustfixThrow("Failed to generateNewKey")}});return h.apply(this,arguments)}g["default"]=a}),98);
__d("MAWEARKeychainDecryptionError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.name="MAWEARKeychainDecryptionError";c.message=b;return c}return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("MAWFrontendMediaUtils",["MAWDbMedia"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){if(a==="image/gif")return{mediaType:d("MAWDbMedia").MEDIA_TYPE.GIF,serverMediaType:"gif"};if(a==="image/webp"&&b!==!0)return{mediaType:d("MAWDbMedia").MEDIA_TYPE.STICKER,serverMediaType:"sticker"};c=(c=c)!=null?c:a.split("/")[0];switch(c){case"image":if(b===!0)return{mediaType:d("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"xma-image"};else return{mediaType:d("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"image"};case"video":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.VIDEO,serverMediaType:"video"};case"audio":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.PTT,serverMediaType:"ptt"};case"application":default:return{mediaType:d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE,serverMediaType:"document"}}}g.getMediaTypeAndServerMediaTypeFromBlob=a}),98);
__d("MAWWorkerSetupArgs",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(a){g=a}function b(){return g}function c(){g=null}f.setWorkerSetupArgs=a;f.getWorkerSetupArgs=b;f.resetWorkerSetupArgs=c}),66);
__d("MAWGenKeychainCryptoKeyWithVersion",["ExecutionEnvironment","FBLogger","MAWCurrentUser","MAWEARKeychainDecryptionError","MAWKeychainCrypto","MAWWebInitDataHelpers","MAWWorkerSetupArgs","MessengerWebInitData","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c,d,e,f,g){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,j,k,l){g===void 0&&(g=1);try{var m=(yield d("MAWKeychainCrypto").getAccountKeys(g));a=(yield (i||(i=b("Promise"))).all([d("MAWKeychainCrypto").importBrowserEncryptionKey(a),i.all(m.map(function(a){return d("MAWKeychainCrypto").decryptDataToArrayBuffer(a,e)["catch"](function(){return null})}))]));var n=a[0];m=a[1];a=(yield i.all(m.filter(Boolean).map(function(a){return d("MAWKeychainCrypto").genDatabaseEncryptionKey(n,a)["catch"](function(){return null})})));m=a.filter(Boolean);if(m.length===0)throw new(c("MAWEARKeychainDecryptionError"))("Failed to generate keys from seed");return{keys:m,version:f}}catch(b){a=null;m=null;f=d("MAWWorkerSetupArgs").getWorkerSetupArgs();(h||(h=c("ExecutionEnvironment"))).isInWorker&&f!=null&&(a=f.userKeyBase===c("MessengerWebInitData").userKeyBase,m=f.fbId===d("MAWCurrentUser").getID());f=d("MAWWebInitDataHelpers").getAccountKeysString(g);var o=f&&f[0]!=null?yield d("MAWKeychainCrypto").generateHashString(f[0]):null;c("FBLogger")("messenger_web").catching(b).mustfix("Failed to genKeyWithVersion: accountKeyBackfilled = %s; accountKeyExists = %s; acccountKeyMatches = %s; userKeyBaseBackilled = %s; userKeyBaseExists = %s; userKeyBaseMatches = %s; appIdOrigin = %s; appIdInitData = %s; userIdMatches = %s; isInWorker = %s; userKeyBase_match_between_threads = %s; userId_match_between_threads = %s; formatVersion = %s;",j!=null,f!=null,j===o,k!=null,c("MessengerWebInitData").userKeyBase!=null,k===(yield d("MAWKeychainCrypto").generateHashString(c("MessengerWebInitData").userKeyBase)),l,c("MessengerWebInitData").appId,d("MAWCurrentUser").getID()===String(c("MessengerWebInitData").userId),(h||(h=c("ExecutionEnvironment"))).isInWorker,a,m,g);throw b}});return j.apply(this,arguments)}g["default"]=a}),98);
__d("MAWKeychainNaClCrypto",["MAWKeychainCrypto","WABase64","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.name="EARError";c.message=a;return c}return a}(babelHelpers.wrapNativeSuper(Error));function i(a,b,c){c=new Uint8Array(c);var e=d("tweetnacl").randomBytes(d("tweetnacl").secretbox.nonceLength);b=d("tweetnacl").secretbox(b,e,new Uint8Array(a));a=new Uint8Array(c.length+e.length+b.length);a.set(c);a.set(e,c.length);a.set(b,c.length+e.length);return a.buffer}function j(a,b,c){return d("WABase64").encodeB64(i(a,b,c!=null?c:d("MAWKeychainCrypto").ADDITIONAL_DATA))}function k(a,b,c,e,f){b.slice(0,f);var g=b.slice(f,f+d("tweetnacl").secretbox.nonceLength);b=b.slice(f+d("tweetnacl").secretbox.nonceLength);f=d("tweetnacl").secretbox.open(new Uint8Array(b),new Uint8Array(g),new Uint8Array(a));if(f==null){throw new h("decryptTweetNaCl was unable to decrypt an entity. Attempting to use key version : "+((b=c)!=null?b:"non-provided")+". Format version "+((g=e)!=null?g:"unknown")+".")}return f}function l(a,b,c,e){return k(a,d("WABase64").decodeB64(b),c,void 0,e)}function a(a,b,c){return j(a,b,c)}function b(a,b,c,d){return l(a,b,c,d)}function c(a,b,c,d,e){return k(a,b,c,d,e)}g.EARDecryptionError=h;g.encryptTweetNaClArrayBuffer=i;g.encryptTweetNaCl=j;g.decryptTweetNaClArrayBuffer=k;g.decryptTweetNaCl=l;g.encrypt=a;g.decrypt=b;g.decryptArrayBuffer=c}),98);
__d("MAWLoggerDeferred",["promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("WATagsLogger").__setRef("MAWLoggerDeferred");function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){var d;return(d=b.TAGS([])).DEV.apply(d,[a].concat(c))})})}function b(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){var d;return(d=b.TAGS([])).DEV_XMPP.apply(d,[a].concat(c))})})}function d(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){var d;return(d=b.TAGS([])).LOG.apply(d,[a].concat(c))})})}function e(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){var d;return(d=b.TAGS([])).WARN.apply(d,[a].concat(c))})})}function f(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){var d;return(d=b.TAGS([])).ERROR.apply(d,[a].concat(c))})})}function i(a,b,c){return h.load().then(function(d){return d.whenReady().then(function(){return d.TAGS(a)}).then(function(a){a[c](b)})})}function j(a,b){for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];c("promiseDone")(h.load().then(function(c){return c.whenReady().then(function(){return c.TAGS(a)}).then(function(a){a.LOG.apply(a,[[b]].concat(e))})}))}g.DEV=a;g.DEV_XMPP=b;g.LOG=d;g.WARN=e;g.ERROR=f;g.logWithTags=i;g.TAGS=j}),98);
__d("MAWLoggerUtils",["Random"],(function(a,b,c,d,e,f,g){"use strict";c={CleanerPurge:"CleanerPurge",CleanerStart:"CleanerStart",CleanerTimestamp:"CleanerTimestamp",CleanerUpdate:"CleanerUpdate",Countdown:"Countdown",Ephemeral:"Ephemeral",Incoming:"Incoming",MsgCleaner:"MsgCleaner",OnLoad:"OnLoad",OnRead:"OnRead",Outgoing:"Outgoing",PeerReceipt:"PeerReceipt",SettingChange:"SettingChange",SettingSync:"SettingSync",DeviceRegistration:"DeviceRegistration",MessageReceive:"MessageReceive",MediaDownload:"MediaDownload",WorkerSetup:"WorkerSetup",MAWWorker:"MAWWorker",MAWInit:"MAWInit",LogoutHandler:"LogoutHandler",MiActMapping:"MiActMapping",ThreadReady:"ThreadReady"};function a(){return Math.floor(Date.now()+d("Random").random()*1e4+1e4)}function b(a){a=a.split("");return a.reduce(function(a,b){b=b.charCodeAt(0);a=(a<<5)-a+b;a&=a;return a},0)}g.Tag=c;g.getInstanceKey=a;g.getInstanceKeyFromId=b}),98);
__d("MAWMiActMappingTableAPI",["MAWJids","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,c){return c==null?(h||(h=b("Promise"))).resolve(null):d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table).getKeyRange(c))}function j(a,c){return c==null?(h||(h=b("Promise"))).resolve(null):d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(c))}function a(a,b){return j(a,d("MAWJids").convertChatJidToIntJid(b))}function c(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.intJid;b=b.threadKey;b=(yield i(a,b));return b!=null?b:j(a,c)});return k.apply(this,arguments)}g.getMappingRowForThreadKey=i;g.getMappingRowForIntJid=j;g.getMappingRowForChatJid=a;g.getMappingRowForThreadKeyOrJid=c}),98);
__d("MAWQplProxy",["Deferred","ExecutionEnvironment","MAWBridge","MAWSendQplToServer","QPLEvent","asyncToGeneratorRuntime","gkx","justknobx","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(h=c("gkx")("23949"))!=null?h:!1,m=new Set([25313175,25310776,1056839232,1056836502,1056847537,521478596,521479468,521476165,521480391]),n=0,o=(j||(j=c("performanceAbsoluteNow")))()-Date.now();function p(){return Date.now()}var q=new(c("Deferred"))();h=function(){q.resolve()};function r(a,b,e,f,g){f===void 0&&(f=!1),c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{name:b,type:"point"},annotations:e==null?void 0:e.annotations,event:a,instanceKey:e==null?void 0:e.instanceKey,performanceAndDateSkew:o,timestamp:f?p():void 0},!0,void 0,g)})}function a(a,b,c,d,e){t(a,{bool:(a={},a[b]=c,a)},d,e)}function e(a,b,c,d,e){t(a,{string:(a={},a[b]=c,a)},d,e)}function f(a,b,c,d,e){t(a,{"int":(a={},a[b]=c,a)},d,e)}function s(a,b,c,d){t(a,{"double":b},c,d)}function t(a,b,e,f){c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"annotations"},annotations:b,event:a,instanceKey:e},!0,void 0,f)})}function u(a,b,e,f,g,h){g===void 0&&(g=!1);var i=p();c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{name:b,type:"failure"},annotations:e,event:a,instanceKey:f,timestamp:g?i:void 0},!0,void 0,h)})}function v(a,b,e,f,g){f===void 0&&(f=!1);var h=p();c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"success"},annotations:b,event:a,instanceKey:e,timestamp:f?h:void 0},!0,void 0,g)})}function w(a,b,e,f,g){f===void 0&&(f=!1);var h=p();c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"cancel"},annotations:b,event:a,instanceKey:e,timestamp:f?h:void 0},!0,void 0,g)})}function x(a,b,e,f){c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{name:b,type:"error"},debugInfo:e==null?void 0:e.debugInfo,error:e==null?void 0:e.error,event:a,instanceKey:e==null?void 0:e.instanceKey},!0,void 0,f)})}function y(a,b,c,d,e){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e){r(a,b+"_start",{annotations:d,instanceKey:e});d=(yield c());r(a,b+"_end",{instanceKey:e});return d});return z.apply(this,arguments)}function A(a,b,c){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a.addPoint(b+"_start");c=(yield c);a.addPoint(b+"_end");return c});return B.apply(this,arguments)}var C=c("justknobx")._("2596");function D(a,b,e){e===void 0&&(e={});e=e;var f=e.callBridgeWithTimestamp,g=f===void 0?!1:f;f=e.providedInstanceKey;var h=e.providedTimeoutInMs;e=e.sendThroughBridge;e=e===void 0?!1:e;f==null&&n++;var i=(f=f)!=null?f:n,j=(f=h)!=null?f:C;h=!(k||(k=c("ExecutionEnvironment"))).isInWorker;f=e||F(a);if(h||!f)return d("MAWSendQplToServer").startQplUserFlow(a,b,i,j);var l=e?{toLastActiveClient:!0}:void 0;c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"start"},annotations:babelHelpers["extends"]({},b||{},{bool:babelHelpers["extends"]({},(b==null?void 0:b.bool)||{})}),event:a,instanceKey:i,timeoutInMs:j,timestamp:g?p():void 0},!0,void 0,l)});return{addAnnotations:function(b){return t(a,b,i,l)},addPoint:function(b,c){return r(a,b,{annotations:c,instanceKey:i},void 0,l)},endCancel:function(b){return w(a,b,i,void 0,l)},endFail:function(b,c){return u(a,b,c,i,void 0,l)},endSuccess:function(b){return v(a,b,i,void 0,l)},markError:function(b,c,d){return x(a,b,{debugInfo:c,error:d,instanceKey:i},l)}}}function E(a,b){return!(k||(k=c("ExecutionEnvironment"))).isInWorker||!F(a)?d("MAWSendQplToServer").makeMAWQPLProxyForExistingQPLUserFlow(a,b):{addAnnotations:function(c){return t(a,c,b)},addPoint:function(c,d){return r(a,c,{annotations:d,instanceKey:b})},endCancel:function(c){return w(a,c,b)},endFail:function(c,d){return u(a,c,d,b)},endSuccess:function(c){return v(a,c,b)},markError:function(c,d,e){return x(a,c,{debugInfo:d,error:e,instanceKey:b})}}}function F(a){return l||m.has((i||(i=d("QPLEvent"))).getMarkerId(a))}g.performanceAbsoluteNow=p;g.resolveWorkerBridge=h;g.sendQplPointThroughBridge=r;g.sendQPLBoolAnnotationThroughBridge=a;g.sendQPLStringAnnotationThroughBridge=e;g.sendQPLIntAnnotationThroughBridge=f;g.sendQPLDoubleAnnotationsThroughBridge=s;g.sendQPLAnnotationsThroughBridge=t;g.sendQPLFailThroughBridge=u;g.sendQPLSuccessThroughBridge=v;g.sendQPLCancelThroughBridge=w;g.sendQPLErrorThroughBridge=x;g.measurePerfInQPL_USE_WITH_CARE=y;g.measurePerfInQPL=A;g.DEFAULT_WORKER_QPL_TIMEOUT_MS=C;g.startQplUserFlow=D;g.makeQplUserFlowFromExistedInstance=E}),98);
__d("MAWTimeUtils",["FBLogger","I64","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return(h||(h=d("I64"))).of_float(a*1e3)}function j(a){a=Number(a);return a<=d("WATimeUtils").MAX_INT&&a!==-1e3&&a!==0}function a(a){if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to millisTimeToTimestamp: %s",Number(a));return i(a)}return(h||(h=d("I64"))).of_float(a)}function b(a,b){var c=Date.now();c=c-b*24*60*60*1e3;b=d("WATimeUtils").castMilliSecondsToUnixTime(c);return a>=b}function e(a){if(a==null)return;if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to ensureValidMillisTime: %s",Number(a));return d("WATimeUtils").castToMillisTime(a*1e3)}return a}f=(h||(h=d("I64"))).of_string("9999999999999");var k=Number.MAX_VALUE;g.toTimestamp=i;g.millisTimeToTimestamp=a;g.isTimestampNewerThanXDays=b;g.ensureValidMillisTime=e;g.MAX_TIMESTAMP_MS=f;g.MAX_TIMESTAMP=k;g.MIN_TIMESTAMP_MS=h.zero}),98);
__d("MAWXMAUtils",["I64","LSIntEnum","LSXmaContentType","MAWMsgType","WAArmadilloXMA.pb","WALogger","WATimeUtils","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Hit Unreachable XMAType "," - checking isXMAShare"]);j=function(){return a};return a}function a(a){return!a||a.type!==d("MAWMsgType").MSG_TYPE.XMA?null:a}function b(a){if(a==null)return!1;switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return c("gkx")("2605");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return c("gkx")("6952");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return c("gkx")("4902");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return c("gkx")("9339");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return!1;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:return!0;default:d("WALogger").ERROR(j(),a);return!1}}function e(a){return a!=null&&((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_REPLY))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_SHARE))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_MENTION))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_PRODUCER_STORY_REPLY)))}function f(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function k(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE}function l(a){return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").MSG_CONTACT))}function m(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH}function n(a){return a==null?!1:a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function o(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY}function p(a,b){return a!=null&&a||b!=null&&b<d("WATimeUtils").unixTime()}function q(a){a=a.ctas;a!=null&&(a=a.filter(function(a){return a.buttonType!==d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE}));return a}function r(a){return babelHelpers["extends"]({},a,{ctas:void 0,defaultCTA:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0})}function s(a){a=babelHelpers["extends"]({},a,{ctas:void 0,defaultCTA:void 0,defaultPreviewMediaId:void 0,defaultPreviewMediaPlaintextHash:void 0,faviconMediaId:void 0,faviconPlaintextHash:void 0,headerMediaId:void 0,headerMediaPlaintextHash:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,previewMediaIds:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0});c("justknobx")._("3897")&&(a.targetExpiringAtSec=void 0);return a}function t(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return!0;default:return!1}}function u(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY}function v(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION}function w(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION?!0:!1}function x(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION}function y(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return!0;default:return!1}}function z(a){return w(a)||y(a)}function A(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE}function B(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE}function C(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY}function D(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:return!0;default:return!1}}g.maybeXMAMessage=a;g.isXMAShare_DO_NOT_USE=b;g.isXMAFBStory=e;g.isXMAStoryShare=f;g.isXMAExternalLinkShare=k;g.isXMAContactShare=l;g.isReceiverFetchXMA=m;g.isIGXMAStoryShare=n;g.isXMAPostPrivateReply=o;g.isXMAExpired=p;g.removeCTAsForStoryMentionXMA=q;g.buildUnstoredTombstonedXMA=r;g.buildTombstonedDbXMA=s;g.isXMAStoryReply=t;g.isXMAStoryProducerReply=u;g.isXMAStoryReaction=v;g.isFBXMAStoryMention=w;g.isFBXMAPostMention=x;g.isIGXMAStoryMention=y;g.isXMAStoryMention=z;g.isIGXMAPostShare=A;g.isXMAStoryHighlightShare=B;g.isXMAMsgHighlightsTabFriendUpdatesReply=C;g.isRtcXMA=D}),98);
__d("MWBroadcastChannelPolyfill",["FBLogger","LocalStorageWrapper","MessengerLogHistory","Random","recoverableViolation","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MessengerLogHistory").getInstance("client_init");function a(a){h.debug("[MWBroadcastChannelPolyfill] "+a)}function i(a){c("FBLogger")("messenger_web").mustfix(a)}var j={},k=d("LocalStorageWrapper").getStorage(a);function b(a){var b="$BroadcastChannel$"+a+"$",e=!1,f=function(a){if(a.storageArea!==k)return;var c=a.newValue;if(c==null||c==="")return;if(((a=a.key)==null?void 0:a.substring(0,b.length))!==b)return;var d=JSON.parse(c);(a=j[b])==null?void 0:a.forEach(function(a){a({data:d})})};window.addEventListener("storage",f);return{addEventListener:function(a,c){j[b]=j[b]||new Set(),j[b].add(c)},close:function(){if(e)return;e=!0;j={};window.removeEventListener("storage",f)},postMessage:function(a){if(e){c("recoverableViolation")("Broadcast channel is closed","ls_web_init");return}a=JSON.stringify(a);var f=b+String(Date.now())+"$"+String(c("Random").uint32());d("LocalStorageWrapper").setItemGuarded(k,f,a,i);c("setTimeout")(function(){d("LocalStorageWrapper").removeItemGuarded(k,f,i)},500)},removeEventListener:function(a,c){(a=j[b])==null?void 0:a["delete"](c)}}}g["default"]=b}),98);
__d("MWBroadcastChannel",["MWBroadcastChannelPolyfill"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return self.BroadcastChannel!=null?new self.BroadcastChannel(a):c("MWBroadcastChannelPolyfill")(a)}g.MWBroadcastChannel=a}),98);
__d("MWEARKeychainV3Errors",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.name="EARKeychainNotFoundError";c.message=b;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.EARKeychainNotFoundError=a}),66);
__d("MWLSDatabaseNames",[],(function(a,b,c,d,e,f){"use strict";a="LightSpeed";b=a+"V3";f.name=a;f.lightspeedPrefix=b}),66);
__d("MWLSIndexedDBName",["MAWCurrentUser","MWLSDatabaseNames"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MAWCurrentUser").getID();return d("MWLSDatabaseNames").lightspeedPrefix+a}g.dbName=a}),98);
__d("MWLocalStorageErrorHandler",["cr:3449"],(function(a,b,c,d,e,f,g){"use strict";function a(){b("cr:3449")&&b("cr:3449").clearLocalStorageBigValues()}g.onQuotaExceeded=a}),98);
__d("MWPreloadableQueries",["I64","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;b=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_nullstate).getKeyRange(b)};c=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_nullstate_ctas.index("threadKeyCtaId")).getKeyRange(b)};e=function(a,b){return d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange(b)};f=function(a,b){return d("ReQL").fromTableAscending(a.tables.community_folders).getKeyRange(b)};var i=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_proactive_warning_settings).getKeyRange(b)},j=function(a,b){return d("ReQL").fromTableAscending(a.tables.in_thread_banner).getKeyRange(b)};function a(a,b){return d("ReQL").fromTableAscending(a.tables.media_staging).filter(function(a){return!a.isSent&&(h||(h=d("I64"))).equal(a.threadKey,b)})}g.threadNullStateQuery=b;g.threadNullStateCtaQuery=c;g.getCutoverThreadByThreadKey=e;g.getCommunityFolderQuery=f;g.getProactiveWarningsForThreadQuery=i;g.getThreadBannerQuery=j;g.getMediaStagingQuery=a}),98);
__d("ReStoreLocalStorageQuotaExceed",["FBLogger","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h="Failed to execute 'setItem' on 'Storage'",i="ReStoreLocalStorageQuotaExceed";function j(){try{var a=window.localStorage,b=[],d=[];if(a!=null&&a.length!==0)for(var e in a){b.length===0&&d.length===0&&(e.includes("falco_queue_log")&&d.push(e));if(!Object.prototype.hasOwnProperty.call(a,e))continue;var f=((a[e]||"").length+e.length)*2;f/1024>2e3&&b.push(e)}c("FBLogger")("messenger_web").mustfix(h+": QuotaExceeded - trying to clean up %s or %s",b.join(","),d.join(","));return b.length!==0?b:d}catch(a){c("FBLogger")("messenger_web").mustfix("Error getting local storage big values for cleanup.");return[]}}function a(){try{var a=window.localStorage,b=j();b.forEach(function(b){a.removeItem(b)})}catch(a){c("recoverableViolation")("Couldn't remove vals from localStorage","maw_db",a)}}b=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;b=h+": "+b+"; Keys to delete: "+j().join(",");c=a.call(this,b)||this;c.message=b;c.name=i;return c}return b}(babelHelpers.wrapNativeSuper(Error));g.ERROR_NAME=i;g.getLocalStorageValuesToRemoveOnExceed=j;g.clearLocalStorageBigValues=a;g.ReStoreLocalStorageQuotaExceed=b}),98);
__d("ReStoreTabNotifier",["CurrentMessengerUser","FBLogger","MWBroadcastChannel","MWLSIndexedDBName"],(function(a,b,c,d,e,f,g){"use strict";var h=d("CurrentMessengerUser").getIDorEIMU();function a(a){var b=d("MWBroadcastChannel").MWBroadcastChannel(a==="restore-table-"+h+"-"+d("MWLSIndexedDBName").dbName()?"mwChat-"+h:a);function e(a,d){try{b.postMessage([a,d])}catch(a){c("FBLogger")("messenger_web").catching(a).warn("Failed to broadcast changes")}}function f(a,c){b.addEventListener("message",function(b){b=b.data;var d=b[0];d===a&&c(b[1])})}return{onEventReceive:f,postMessage:e}}g["default"]=a}),98);
__d("WebStorageLockManager",["FBLogger","LocalStorageWrapper","LockManager","Promise","Run","asyncToGeneratorRuntime","clearInterval","err","promiseDone","setInterval","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){c("FBLogger")("messenger_web").mustfix(a)}function a(a,e){var f="Failed to execute 'request' on 'LockManager'",g="Lock broken by another request with the 'steal' option.",j=function(a,b,c){var d=a.get(b);if(d!=null)return d;d=c();a.set(b,d);return d};try{var k=d("LocalStorageWrapper").getStorage(i),l=function(a,b){d("LocalStorageWrapper").setItemGuarded(k,a,b,i,e==null?void 0:e.onQuotaExceeded)},m=function(a){d("LocalStorageWrapper").removeItemGuarded(k,a,i)},n=function(a){return d("LocalStorageWrapper").getItemGuarded(k,a,i)},o=function(){function a(a,b){this.lockName=a,this.tabId=b,this.lockA=this.lockName+"-a",this.lockB=this.lockName+"-b"}var d=a.prototype;d.run=function(a){return this.$1(a,0)};d.$1=function(a,d){var e=this,f=function(b){return window.requestAnimationFrame(function(){return e.$1(a,d+1).then(b)})},g=function(a){return n(a)==null};l(this.lockA,this.tabId);return new(h||(h=b("Promise")))(function(b){var h=function(){try{a(),b()}finally{m(e.lockB),m(e.lockA)}};g(e.lockB)||d>10?(d>10&&c("FBLogger")("messenger_web").warn("web-lock polyfill: Had to steal lock"),l(e.lockB,e.tabId),n(e.lockA)===e.tabId?h():window.requestAnimationFrame(function(){n(e.lockB)===e.tabId?h():f(b)})):f(b)})};return a}(),p=function(){function a(b){this.tabId=b,this.lock=new o(a.tabsKey,b),c("promiseDone")(this.$1()),this.$2(),this.keepOnlyTabs(function(b){return a.isAlive(b)})}a.isAlive=function(b){b=n(a.$3(b));return b==null?!1:Date.now()-parseFloat(b)<1e3};var e=a.prototype;e.keepOnlyTabs=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield this.lock.run(function(){var c;c=JSON.parse((c=n(a.tabsKey))!=null?c:"[]").filter(b);c.length>0?l(a.tabsKey,JSON.stringify(c)):m(a.tabsKey)})});function d(a){return c.apply(this,arguments)}return d}();e.$2=function(){var b=a.$3(this.tabId);l(b,Date.now().toString());var e=c("setInterval")(function(){l(b,Date.now().toString())},500);d("Run").onUnload(function(){c("clearInterval")(e),m(b)})};e.$1=function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=this;yield this.lock.run(function(){var c;c=JSON.parse((c=n(a.tabsKey))!=null?c:"[]");l(a.tabsKey,JSON.stringify([].concat(c,[b.tabId])))});d("Run").onUnload(function(){return c("promiseDone")(b.keepOnlyTabs(function(a){return a!==b.tabId}))})});function f(){return e.apply(this,arguments)}return f}();a.$3=function(a){return"$navigator.heartbeat-"+a};return a}();p.tabsKey="$navigator.heartbeat-tabs";var q=function(){function a(b,e){var f=this;this.requests=new Map();this.name=b;this.tabId=e;this.queueKey=a.storagePrefix+"-"+b+"-q";this.currentOwnerKey=a.storagePrefix+"-"+b+"-o";this.lock=new o(a.storagePrefix+"-"+b,this.tabId);d("Run").onUnload(function(){c("promiseDone")(f.keepOnlyRequests(function(a){return(a==null?void 0:a.t)!==f.tabId}))})}var e=a.prototype;e.enqueue=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,d,a){var e=this,f=c("uuidv4")().toString(),g={t:this.tabId,u:f},h=function(){b(null),e.markRequestReleased(f)},i=function(){b(f),e.markRequestReleased(f)};this.requests.set(f,[function(){return b(f)},function(){d(),e.markRequestReleased(f)}]);if((a==null?void 0:a.signal)!=null){a.signal.onabort=function(){c("promiseDone")(e.keepOnlyRequests(function(a){return(a==null?void 0:a.u)!==f})),i()};if(a.signal.aborted)return i()}yield this.lock.run(function(){var b=e.getOwner();(a==null?void 0:a.steal)===!0&&e.$1(b==null?void 0:b.u);if(b==null||(a==null?void 0:a.steal)===!0||!p.isAlive(b.t))e.$2(e.currentOwnerKey,babelHelpers["extends"]({},g,(a==null?void 0:a.steal)===!0?{s:!0}:{})),e.$3(f);else if((a==null?void 0:a.ifAvailable)!==!0){b=e.getQueue();b.push(g);e.$2(e.queueKey,b)}else h()})});function d(b,c,d){return a.apply(this,arguments)}return d}();e.dequeue=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=this,d,e=null;yield this.lock.run(function(){var d=c.getOwner();if((d==null?void 0:d.t)!==c.tabId||(d==null?void 0:d.u)!==b)return;d=c.getQueue();d=a.getNextOwner(d);var f=d[0];d=d[1];e=f;c.$2(c.currentOwnerKey,f);c.$2(c.queueKey,d)});this.$3((d=e)==null?void 0:d.u)});function d(a){return c.apply(this,arguments)}return d}();e.storageChangedOnOtherTab=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=this;a==="o"&&(yield this.lock.run(function(){var a=c.getOwner();if(a==null)return;c.$3(a==null?void 0:a.u);if(a.s===!0){a=b==null?void 0:b.oldValue;if(a!=null){a=JSON.parse(a);a.t===c.tabId&&c.$1(a.u)}}}))});function c(b,c){return a.apply(this,arguments)}return c}();e.getQueue=function(){var a;return(a=this.$4(this.queueKey))!=null?a:[]};e.getOwner=function(){return this.$4(this.currentOwnerKey)};a.getQueueNameAndStorageType=function(b){if(!b.startsWith(a.storagePrefix))return null;var d=b.slice(a.storagePrefix.length+1,b.length-2),e=b.charAt(b.length-1);switch(e){case"q":case"o":case"a":case"b":break;default:throw c("err")("Queue was stored with a suffix other than q or o. This is either a bug in the web lock api polyfill code, or it means that something overwrote localStorage with a weird key. Key: "+b)}return[d,e]};a.getNextOwner=function(a){for(var b=0;b<a.length;b+=1)if(p.isAlive(a[b].t))return[a[b],a.slice(b+1)];return[null,[]]};e.$4=function(a){a=n(a);return a!=null?JSON.parse(a):null};e.$2=function(a,b){b=b==null||Array.isArray(b)&&b.length===0?null:JSON.stringify(b);b==null?m(a):l(a,b)};e.keepOnlyRequests=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=this;yield this.lock.run(function(){var d=c.getOwner(),e=c.getQueue().filter(b);if(b(d))c.$2(c.queueKey,e);else{d=a.getNextOwner(e);e=d[0];d=d[1];c.$2(c.currentOwnerKey,e);c.$2(c.queueKey,d)}})});function d(a){return c.apply(this,arguments)}return d}();e.markRequestReleased=function(a){a!=null&&this.requests["delete"](a)};e.$3=function(a){if(a!=null){a=this.requests.get(a);if(a!=null){a=a[0];a()}}};e.$1=function(a){if(a!=null){a=this.requests.get(a);if(a!=null){a[0];a=a[1];a()}}};return a}();q.storagePrefix="$navigator.locks";var r=function(){function a(a){this.$1=new Map(),this.storage=d("LocalStorageWrapper").getStorage(i),this.tabId=a,new p(this.tabId),c("promiseDone")(this.$2()),this.$3()}var e=a.prototype;e.request=function(){var a=this;for(var e=arguments.length,i=new Array(e),j=0;j<e;j++)i[j]=arguments[j];return new(h||(h=b("Promise")))(function(e,j){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var k,l=i[0],e=i.length===3?i[1]:null,m=i.length===2?i[1]:i[2];if(l.startsWith("-"))throw new DOMException("Names cannot start with '-'.",f);if((e==null?void 0:e.ifAvailable)===!0&&(e==null?void 0:e.signal)!=null)throw new DOMException("The 'signal' and 'ifAvailable' options cannot be used together.",f);var n=a.$4(l),o=(yield new(h||(h=b("Promise")))(function(a){c("promiseDone")(n.enqueue(a,function(){j(new DOMException(g,f))},e))}));if((e==null?void 0:(k=e.signal)==null?void 0:k.aborted)===!0)throw new DOMException("The request was aborted.",f);try{yield m(o!=null?{mode:(k=e==null?void 0:e.mode)!=null?k:d("LockManager").LockMode.Exclusive,name:l}:null)}finally{o!=null&&(yield n.dequeue(o)),n.markRequestReleased(o)}})(),e,j)})};e.query=function(){var a=[],c=[];for(var e of this.$5())if(e!=null){var f={mode:d("LockManager").LockMode.Exclusive,name:e.name};if(e.getOwner()!=null)a.push(f);else for(var g of e.getQueue())c.push(f)}return(h||(h=b("Promise"))).resolve({held:a,pending:c})};e.$4=function(a){var b=this;return j(this.$1,a,function(){return new q(a,b.tabId)})};e.$3=function(){var a=this;window.addEventListener("storage",function(b){var d=b.key;if(b.storageArea!==a.storage||d==null)return;d=q.getQueueNameAndStorageType(d);if(d==null)return;var e=d[0];d=d[1];c("promiseDone")((e=a.$4(e))==null?void 0:e.storageChangedOnOtherTab(d,b))})};e.$2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).all(this.$5().map(function(a){return a==null?void 0:a.keepOnlyRequests(function(a){return a==null?!1:p.isAlive(a.t)})}))});function c(){return a.apply(this,arguments)}return c}();e.$5=function(){var a=this;return k==null?[]:Object.keys(k).map(function(b){b=q.getQueueNameAndStorageType(b);if(b==null)return;b=b[0];return a.$4(b)})};return a}();return new r(a)}catch(a){return null}}g.make=a}),98);
__d("cometIsMimeTypeForMedia",["FBLogger","UFICommentFileInputAcceptValues"],(function(a,b,c,d,e,f,g){"use strict";var h={file:null,photo:null,video:null},i={"image/gif":"video","image/webp":"video"};function j(a){return a.split(",").map(function(a){return a.trim()}).map(function(a){return a.replace(/\/\*$/,"/")})}function k(a,b,d){h[a]==null&&(h[a]=j(d));d=h[a];if(d==null)throw c("FBLogger")("ufi2").mustfixThrow("CometIsMimeTypeForMedia prefixes can't be null");var e=i[b];return e!=null?e===a:d.some(function(a){return b.startsWith(a)})}function a(a){return k("photo",a,d("UFICommentFileInputAcceptValues").photos)}function b(a){return k("video",a,d("UFICommentFileInputAcceptValues").videos)}function e(a){return k("file",a,d("UFICommentFileInputAcceptValues").files)}g.mimeTypeAcceptStringToArray=j;g.isMimeTypeForPhoto=a;g.isMimeTypeForVideo=b;g.isMimeTypeForFile=e}),98);
__d("promiseFromRequest",[],(function(a,b,c,d,e,f){"use strict";function a(a){return new self.Promise(function(b,c){a.onsuccess=function(a){b(a.target.result)},a.onerror=function(a){c(a)}})}f["default"]=a}),66);/*FB_PKG_DELIM*/
/**
 *
 * This file is generated from fbsource. Please do not modify it directly.
 *
 *
 * @nolint
 * @generated
 * @nopackage
 * @fullSyntaxTransform
 * @preserve-whitespace
 */__d("ls_voprf_utils_v2",["Promise"],(function $module_ls_voprf_utils_v2(global,require,requireDynamic,requireLazy,module,exports){var _require_closure_Promise;


var Module=function(){
var _scriptDir=typeof document!=='undefined'&&document.currentScript?document.currentScript.src:undefined;

return(
function(moduleArg){if(moduleArg===void 0){moduleArg={};}

var Module=moduleArg;var readyPromiseResolve,readyPromiseReject;Module["ready"]=new(_require_closure_Promise||(_require_closure_Promise=require("Promise")))(function(resolve,reject){readyPromiseResolve=resolve;readyPromiseReject=reject;});["_main","getExceptionMessage","___get_exception_message","_free","_memory","_curve_create","_curve_free","_curve_init_ristretto","_get_curve_element_bytes","_get_curve_scalar_bytes","_kdf_create","_kdf_free","_kdf_init_naor_reingold","_sodiumInit","_voprf_create","_voprf_free","_voprf_init_exp_twohashdh","_blind","_verifiable_unblind","_voprf_client_finalize","_voprf_setup","_voprf_evaluate","_voprf_server_finalize","_get_voprf_final_evaluation_bytes","___indirect_function_table","__embind_initialize_bindings","_fflush","___start_em_asm","___stop_em_asm","onRuntimeInitialized"].forEach(function(prop){if(!Object.getOwnPropertyDescriptor(Module["ready"],prop)){Object.defineProperty(Module["ready"],prop,{get:function get(){return abort("You are getting "+prop+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js");},set:function set(){return abort("You are setting "+prop+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js");}});}});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram="./this.program";var quit_=function quit_(status,toThrow){throw toThrow;};var ENVIRONMENT_IS_WEB=true;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_IS_SHELL=false;if(Module["ENVIRONMENT"]){throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");}var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory);}return scriptDirectory+path;}var read_,readAsync,readBinary,setWindowTitle;if(ENVIRONMENT_IS_SHELL){if(typeof process=="object"&&typeof require==="function"||typeof window=="object"||typeof importScripts=="function")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");if(typeof read!="undefined"){read_=read;}readBinary=function readBinary(f){if(typeof readbuffer=="function"){return new Uint8Array(readbuffer(f));}var data=read(f,"binary");assert(typeof data=="object");return data;};readAsync=function readAsync(f,onload,onerror){setTimeout(function(){return onload(readBinary(f));});};if(typeof clearTimeout=="undefined"){globalThis.clearTimeout=function(id){};}if(typeof setTimeout=="undefined"){globalThis.setTimeout=function(f){return typeof f=="function"?f():abort();};}if(typeof scriptArgs!="undefined"){arguments_=scriptArgs;}else if(typeof arguments!="undefined"){arguments_=arguments;}if(typeof quit=="function"){quit_=function quit_(status,toThrow){setTimeout(function(){if(!(toThrow instanceof ExitStatus)){var toLog=toThrow;if(toThrow&&typeof toThrow=="object"&&toThrow.stack){toLog=[toThrow,toThrow.stack];}err("exiting due to exception: "+toLog);}quit(status);});throw toThrow;};}if(typeof print!="undefined"){if(typeof console=="undefined")console={};console.log=print;console.warn=console.error=typeof printErr!="undefined"?printErr:print;}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href;}else if(typeof document!="undefined"&&document.currentScript){scriptDirectory=document.currentScript.src;}if(_scriptDir){scriptDirectory=_scriptDir;}if(scriptDirectory.indexOf("blob:")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1);}else{scriptDirectory="";}if(!(typeof window=="object"||typeof importScripts=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");{read_=function read_(url){var xhr=new XMLHttpRequest();xhr.open("GET",url,false);xhr.send(null);return xhr.responseText;};if(ENVIRONMENT_IS_WORKER){readBinary=function readBinary(url){var xhr=new XMLHttpRequest();xhr.open("GET",url,false);xhr.responseType="arraybuffer";xhr.send(null);return new Uint8Array(xhr.response);};}readAsync=function readAsync(url,onload,onerror){var xhr=new XMLHttpRequest();xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return;}onerror();};xhr.onerror=onerror;xhr.send(null);};}setWindowTitle=function setWindowTitle(title){return document.title=title;};}else{throw new Error("environment detection error");}var out=Module["print"]||console.log.bind(console);var err=Module["printErr"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;checkIncomingModuleAPI();if(Module["arguments"])arguments_=Module["arguments"];legacyModuleProp("arguments","arguments_");if(Module["thisProgram"])thisProgram=Module["thisProgram"];legacyModuleProp("thisProgram","thisProgram");if(Module["quit"])quit_=Module["quit"];legacyModuleProp("quit","quit_");assert(typeof Module["memoryInitializerPrefixURL"]=="undefined","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["pthreadMainPrefixURL"]=="undefined","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["cdInitializerPrefixURL"]=="undefined","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["filePackagePrefixURL"]=="undefined","Module.filePackagePrefixURL option was removed, use Module.locateFile instead");assert(typeof Module["read"]=="undefined","Module.read option was removed (modify read_ in JS)");assert(typeof Module["readAsync"]=="undefined","Module.readAsync option was removed (modify readAsync in JS)");assert(typeof Module["readBinary"]=="undefined","Module.readBinary option was removed (modify readBinary in JS)");assert(typeof Module["setWindowTitle"]=="undefined","Module.setWindowTitle option was removed (modify setWindowTitle in JS)");assert(typeof Module["TOTAL_MEMORY"]=="undefined","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY");legacyModuleProp("asm","wasmExports");legacyModuleProp("read","read_");legacyModuleProp("readAsync","readAsync");legacyModuleProp("readBinary","readBinary");legacyModuleProp("setWindowTitle","setWindowTitle");assert(!ENVIRONMENT_IS_WORKER,"worker environment detected but not enabled at build time.  Add 'worker' to `-sENVIRONMENT` to enable.");assert(!ENVIRONMENT_IS_NODE,"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable.");assert(!ENVIRONMENT_IS_SHELL,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable.");var wasmBinary;if(Module["wasmBinary"])wasmBinary=Module["wasmBinary"];legacyModuleProp("wasmBinary","wasmBinary");var noExitRuntime=Module["noExitRuntime"]||true;legacyModuleProp("noExitRuntime","noExitRuntime");if(typeof WebAssembly!="object"){abort("no native wasm support detected");}var wasmMemory;var wasmExports;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort("Assertion failed"+(text?": "+text:""));}}var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module["HEAP8"]=HEAP8=new Int8Array(b);Module["HEAP16"]=HEAP16=new Int16Array(b);Module["HEAP32"]=HEAP32=new Int32Array(b);Module["HEAPU8"]=HEAPU8=new Uint8Array(b);Module["HEAPU16"]=HEAPU16=new Uint16Array(b);Module["HEAPU32"]=HEAPU32=new Uint32Array(b);Module["HEAPF32"]=HEAPF32=new Float32Array(b);Module["HEAPF64"]=HEAPF64=new Float64Array(b);}assert(!Module["STACK_SIZE"],"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time");assert(typeof Int32Array!="undefined"&&typeof Float64Array!=="undefined"&&Int32Array.prototype.subarray!=undefined&&Int32Array.prototype.set!=undefined,"JS engine does not provide full typed array support");assert(!Module["wasmMemory"],"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally");assert(!Module["INITIAL_MEMORY"],"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var wasmTable;function writeStackCookie(){var max=_emscripten_stack_get_end2();assert((max&3)==0);if(max==0){max+=4;}HEAPU32[max>>2]=34821223;HEAPU32[max+4>>2]=2310721022;HEAPU32[0>>2]=1668509029;}function checkStackCookie(){if(ABORT)return;var max=_emscripten_stack_get_end2();if(max==0){max+=4;}var cookie1=HEAPU32[max>>2];var cookie2=HEAPU32[max+4>>2];if(cookie1!=34821223||cookie2!=2310721022){abort("Stack overflow! Stack cookie has been overwritten at "+ptrToString(max)+", expected hex dwords 0x89BACDFE and 0x2135467, but received "+ptrToString(cookie2)+" "+ptrToString(cookie1));}if(HEAPU32[0>>2]!=1668509029){abort("Runtime error: The application has corrupted its heap memory area (address zero)!");}}(function(){var h16=new Int16Array(1);var h8=new Int8Array(h16.buffer);h16[0]=25459;if(h8[0]!==115||h8[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)";})();var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;var runtimeKeepaliveCounter=0;function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift());}}callRuntimeCallbacks(__ATPRERUN__);}function initRuntime(){assert(!runtimeInitialized);runtimeInitialized=true;checkStackCookie();callRuntimeCallbacks(__ATINIT__);}function postRun(){checkStackCookie();if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift());}}callRuntimeCallbacks(__ATPOSTRUN__);}function addOnPreRun(cb){__ATPRERUN__.unshift(cb);}function addOnInit(cb){__ATINIT__.unshift(cb);}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb);}assert(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");assert(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");assert(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");assert(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;var runDependencyTracking={};function addRunDependency(id){runDependencies++;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies);}if(id){assert(!runDependencyTracking[id]);runDependencyTracking[id]=1;if(runDependencyWatcher===null&&typeof setInterval!="undefined"){runDependencyWatcher=setInterval(function(){if(ABORT){clearInterval(runDependencyWatcher);runDependencyWatcher=null;return;}var shown=false;for(var dep in runDependencyTracking){if(!shown){shown=true;err("still waiting on run dependencies:");}err("dependency: "+dep);}if(shown){err("(end of list)");}},1e4);}}else{err("warning: run dependency added without ID");}}function removeRunDependency(id){runDependencies--;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies);}if(id){assert(runDependencyTracking[id]);delete runDependencyTracking[id];}else{err("warning: run dependency removed without ID");}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null;}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback();}}}function abort(what){if(Module["onAbort"]){Module["onAbort"](what);}what="Aborted("+what+")";err(what);ABORT=true;EXITSTATUS=1;var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e;}var FS={error:function error(){abort("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM");},init:function init(){FS.error();},createDataFile:function createDataFile(){FS.error();},createPreloadedFile:function createPreloadedFile(){FS.error();},createLazyFile:function createLazyFile(){FS.error();},open:function open(){FS.error();},mkdev:function mkdev(){FS.error();},registerDevice:function registerDevice(){FS.error();},analyzePath:function analyzePath(){FS.error();},ErrnoError:function ErrnoError(){FS.error();}};Module["FS_createDataFile"]=FS.createDataFile;Module["FS_createPreloadedFile"]=FS.createPreloadedFile;var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return filename.startsWith(dataURIPrefix);}function isFileURI(filename){return filename.startsWith("file://");}function createExportWrapper(name){return function(){assert(runtimeInitialized,"native function `"+name+"` called before runtime initialization");var f=wasmExports[name];assert(f,"exported native function `"+name+"` not found");return f.apply(null,arguments);};}var EmscriptenEH=function(_Error){"use strict";babelHelpers.inheritsLoose(EmscriptenEH,_Error);function EmscriptenEH(){return _Error.apply(this,arguments)||this;}return EmscriptenEH;}(babelHelpers.wrapNativeSuper(Error));var EmscriptenSjLj=function(_EmscriptenEH){"use strict";babelHelpers.inheritsLoose(EmscriptenSjLj,_EmscriptenEH);function EmscriptenSjLj(){return _EmscriptenEH.apply(this,arguments)||this;}return EmscriptenSjLj;}(EmscriptenEH);var CppException=function(_EmscriptenEH2){"use strict";babelHelpers.inheritsLoose(CppException,_EmscriptenEH2);function CppException(excPtr){var _this;_this=_EmscriptenEH2.call(this,excPtr)||this;_this.excPtr=excPtr;var excInfo=getExceptionMessage(excPtr);_this.name=excInfo[0];_this.message=excInfo[1];return _this;}return CppException;}(EmscriptenEH);var wasmBinaryFile;wasmBinaryFile="crypto_utils_v2.wasm";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile);}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary);}if(readBinary){return readBinary(file);}throw"both async and sync fetching of the wasm failed";}function getBinaryPromise(binaryFile){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"){return fetch(binaryFile,{credentials:"same-origin"}).then(function(response){if(!response["ok"]){throw"failed to load wasm binary file at '"+binaryFile+"'";}return response["arrayBuffer"]();})["catch"](function(){return getBinarySync(binaryFile);});}}return(_require_closure_Promise||(_require_closure_Promise=require("Promise"))).resolve().then(function(){return getBinarySync(binaryFile);});}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(function(binary){return WebAssembly.instantiate(binary,imports);}).then(function(instance){return instance;}).then(receiver,function(reason){err("failed to asynchronously prepare wasm: "+reason);if(isFileURI(wasmBinaryFile)){err("warning: Loading from a file URI ("+wasmBinaryFile+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing");}abort(reason);});}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming=="function"&&!isDataURI(binaryFile)&&typeof fetch=="function"){return fetch(binaryFile,{credentials:"same-origin"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err("wasm streaming compile failed: "+reason);err("falling back to ArrayBuffer instantiation");return instantiateArrayBuffer(binaryFile,imports,callback);});});}return instantiateArrayBuffer(binaryFile,imports,callback);}function createWasm(){var info={"env":wasmImports,"wasi_snapshot_preview1":wasmImports};function receiveInstance(instance,module){var exports=instance.exports;wasmExports=exports;wasmMemory=wasmExports["memory"];Module["wasmMemory"]=wasmMemory;assert(wasmMemory,"memory not found in wasm exports");updateMemoryViews();wasmTable=wasmExports["__indirect_function_table"];assert(wasmTable,"table not found in wasm exports");addOnInit(wasmExports["__wasm_call_ctors"]);removeRunDependency("wasm-instantiate");return exports;}addRunDependency("wasm-instantiate");var trueModule=Module;function receiveInstantiationResult(result){assert(Module===trueModule,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?");trueModule=null;receiveInstance(result["instance"]);}if(Module["instantiateWasm"]){try{return Module["instantiateWasm"](info,receiveInstance);}catch(e){err("Module.instantiateWasm callback failed with error: "+e);readyPromiseReject(e);}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult)["catch"](readyPromiseReject);return{};}function legacyModuleProp(prop,newName,incomming){if(incomming===void 0){incomming=true;}if(!Object.getOwnPropertyDescriptor(Module,prop)){Object.defineProperty(Module,prop,{configurable:true,get:function get(){var extra=incomming?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":"";abort("`Module."+prop+"` has been replaced by `"+newName+"`"+extra);}});}}function ignoredModuleProp(prop){if(Object.getOwnPropertyDescriptor(Module,prop)){abort("`Module."+prop+"` was supplied but `"+prop+"` not included in INCOMING_MODULE_JS_API");}}function isExportedByForceFilesystem(name){return name==="FS_createPath"||name==="FS_createDataFile"||name==="FS_createPreloadedFile"||name==="FS_unlink"||name==="addRunDependency"||name==="FS_createLazyFile"||name==="FS_createDevice"||name==="removeRunDependency";}function missingGlobal(sym,msg){if(typeof globalThis!=="undefined"){Object.defineProperty(globalThis,sym,{configurable:true,get:function get(){warnOnce("`"+sym+"` is not longer defined by emscripten. "+msg);return undefined;}});}}missingGlobal("buffer","Please use HEAP8.buffer or wasmMemory.buffer");function missingLibrarySymbol(sym){if(typeof globalThis!=="undefined"&&!Object.getOwnPropertyDescriptor(globalThis,sym)){Object.defineProperty(globalThis,sym,{configurable:true,get:function get(){var msg="`"+sym+"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line";var librarySymbol=sym;if(!librarySymbol.startsWith("_")){librarySymbol="$"+sym;}msg+=" (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='"+librarySymbol+"')";if(isExportedByForceFilesystem(sym)){msg+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you";}warnOnce(msg);return undefined;}});}unexportedRuntimeSymbol(sym);}function unexportedRuntimeSymbol(sym){if(!Object.getOwnPropertyDescriptor(Module,sym)){Object.defineProperty(Module,sym,{configurable:true,get:function get(){var msg="'"+sym+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)";if(isExportedByForceFilesystem(sym)){msg+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you";}abort(msg);}});}}var ASM_CONSTS={50356:function _(){return Module.getRandomValue();},50392:function _(){if(Module.getRandomValue===undefined){try{var window_="object"===typeof window?window:self;var crypto_=typeof window_.crypto!=="undefined"?window_.crypto:window_.msCrypto;var randomValuesStandard=function randomValuesStandard(){var buf=new Uint32Array(1);crypto_.getRandomValues(buf);return buf[0]>>>0;};randomValuesStandard();Module.getRandomValue=randomValuesStandard;}catch(e){{throw"No secure random number generator found";}}}}};function ExitStatus(status){this.name="ExitStatus";this.message="Program terminated with exit("+status+")";this.status=status;}var callRuntimeCallbacks=function callRuntimeCallbacks(callbacks){while(callbacks.length>0){callbacks.shift()(Module);}};var withStackSave=function withStackSave(f){var stack=stackSave();var ret=f();stackRestore(stack);return ret;};var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):undefined;var UTF8ArrayToString=function UTF8ArrayToString(heapOrArray,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx)){++endPtr;}if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr));}var str="";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue;}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue;}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2;}else{if((u0&248)!=240)warnOnce("Invalid UTF-8 leading byte "+ptrToString(u0)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!");u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63;}if(u0<65536){str+=String.fromCharCode(u0);}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023);}}return str;};var UTF8ToString=function UTF8ToString(ptr,maxBytesToRead){assert(typeof ptr=="number");return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):"";};var getExceptionMessageCommon=function getExceptionMessageCommon(ptr){return withStackSave(function(){var type_addr_addr=stackAlloc(4);var message_addr_addr=stackAlloc(4);___get_exception_message(ptr,type_addr_addr,message_addr_addr);var type_addr=HEAPU32[type_addr_addr>>2];var message_addr=HEAPU32[message_addr_addr>>2];var type=UTF8ToString(type_addr);_free(type_addr);var message;if(message_addr){message=UTF8ToString(message_addr);_free(message_addr);}return[type,message];});};function getExceptionMessage(ptr){return getExceptionMessageCommon(ptr);}Module["getExceptionMessage"]=getExceptionMessage;function getValue(ptr,type){if(type===void 0){type="i8";}if(type.endsWith("*"))type="*";switch(type){case"i1":return HEAP8[ptr>>0];case"i8":return HEAP8[ptr>>0];case"i16":return HEAP16[ptr>>1];case"i32":return HEAP32[ptr>>2];case"i64":abort("to do getValue(i64) use WASM_BIGINT");case"float":return HEAPF32[ptr>>2];case"double":return HEAPF64[ptr>>3];case"*":return HEAPU32[ptr>>2];default:abort("invalid type for getValue: "+type);}}var ptrToString=function ptrToString(ptr){assert(typeof ptr==="number");ptr>>>=0;return"0x"+ptr.toString(16).padStart(8,"0");};var warnOnce=function warnOnce(text){if(!warnOnce.shown)warnOnce.shown={};if(!warnOnce.shown[text]){warnOnce.shown[text]=1;err(text);}};var ___assert_fail=function ___assert_fail(condition,filename,line,func){abort("Assertion failed: "+UTF8ToString(condition)+", at: "+[filename?UTF8ToString(filename):"unknown filename",line,func?UTF8ToString(func):"unknown function"]);};var exceptionCaught=[];var uncaughtExceptionCount=0;function ___cxa_begin_catch(ptr){var info=new ExceptionInfo(ptr);if(!info.get_caught()){info.set_caught(true);uncaughtExceptionCount--;}info.set_rethrown(false);exceptionCaught.push(info);___cxa_increment_exception_refcount(info.excPtr);return info.get_exception_ptr();}var exceptionLast=0;function ExceptionInfo(excPtr){this.excPtr=excPtr;this.ptr=excPtr-24;this.set_type=function(type){HEAPU32[this.ptr+4>>2]=type;};this.get_type=function(){return HEAPU32[this.ptr+4>>2];};this.set_destructor=function(destructor){HEAPU32[this.ptr+8>>2]=destructor;};this.get_destructor=function(){return HEAPU32[this.ptr+8>>2];};this.set_caught=function(caught){caught=caught?1:0;HEAP8[this.ptr+12>>0]=caught;};this.get_caught=function(){return HEAP8[this.ptr+12>>0]!=0;};this.set_rethrown=function(rethrown){rethrown=rethrown?1:0;HEAP8[this.ptr+13>>0]=rethrown;};this.get_rethrown=function(){return HEAP8[this.ptr+13>>0]!=0;};this.init=function(type,destructor){this.set_adjusted_ptr(0);this.set_type(type);this.set_destructor(destructor);};this.set_adjusted_ptr=function(adjustedPtr){HEAPU32[this.ptr+16>>2]=adjustedPtr;};this.get_adjusted_ptr=function(){return HEAPU32[this.ptr+16>>2];};this.get_exception_ptr=function(){var isPointer=___cxa_is_pointer_type(this.get_type());if(isPointer){return HEAPU32[this.excPtr>>2];}var adjusted=this.get_adjusted_ptr();if(adjusted!==0)return adjusted;return this.excPtr;};}function ___resumeException(ptr){if(!exceptionLast){exceptionLast=new CppException(ptr);}throw exceptionLast;}var findMatchingCatch=function findMatchingCatch(args){var thrown=exceptionLast&&exceptionLast.excPtr;if(!thrown){setTempRet0(0);return 0;}var info=new ExceptionInfo(thrown);info.set_adjusted_ptr(thrown);var thrownType=info.get_type();if(!thrownType){setTempRet0(0);return thrown;}for(var arg in args){var caughtType=args[arg];if(caughtType===0||caughtType===thrownType){break;}var adjusted_ptr_addr=info.ptr+16;if(___cxa_can_catch(caughtType,thrownType,adjusted_ptr_addr)){setTempRet0(caughtType);return thrown;}}setTempRet0(thrownType);return thrown;};var ___cxa_find_matching_catch_2=function ___cxa_find_matching_catch_2(){return findMatchingCatch([]);};var ___cxa_find_matching_catch_3=function ___cxa_find_matching_catch_3(arg0){return findMatchingCatch([arg0]);};function __embind_register_bigint(primitiveType,name,size,minRange,maxRange){}function getShiftFromSize(size){switch(size){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+size);}}function embind_init_charCodes(){var codes=new Array(256);for(var i=0;i<256;++i){codes[i]=String.fromCharCode(i);}embind_charCodes=codes;}var embind_charCodes=undefined;function readLatin1String(ptr){var ret="";var c=ptr;while(HEAPU8[c]){ret+=embind_charCodes[HEAPU8[c++]];}return ret;}var awaitingDependencies={};var registeredTypes={};var typeDependencies={};var BindingError=undefined;function throwBindingError(message){throw new BindingError(message);}var InternalError=undefined;function throwInternalError(message){throw new InternalError(message);}function sharedRegisterType(rawType,registeredInstance,options){if(options===void 0){options={};}var name=registeredInstance.name;if(!rawType){throwBindingError("type \""+name+"\" must have a positive integer typeid pointer");}if(Object.prototype.hasOwnProperty.call(registeredTypes,rawType)){if(options.ignoreDuplicateRegistrations){return;}else{throwBindingError("Cannot register type '"+name+"' twice");}}registeredTypes[rawType]=registeredInstance;delete typeDependencies[rawType];if(Object.prototype.hasOwnProperty.call(awaitingDependencies,rawType)){var callbacks=awaitingDependencies[rawType];delete awaitingDependencies[rawType];callbacks.forEach(function(cb){return cb();});}}function registerType(rawType,registeredInstance,options){if(options===void 0){options={};}if(!("argPackAdvance"in registeredInstance)){throw new TypeError("registerType registeredInstance requires argPackAdvance");}return sharedRegisterType(rawType,registeredInstance,options);}function __embind_register_bool(rawType,name,size,trueValue,falseValue){var shift=getShiftFromSize(size);name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function fromWireType(wt){return!!wt;},"toWireType":function toWireType(destructors,o){return o?trueValue:falseValue;},"argPackAdvance":8,"readValueFromPointer":function readValueFromPointer(pointer){var heap;if(size===1){heap=HEAP8;}else if(size===2){heap=HEAP16;}else if(size===4){heap=HEAP32;}else{throw new TypeError("Unknown boolean type size: "+name);}return this["fromWireType"](heap[pointer>>shift]);},destructorFunction:null});}function handleAllocatorInit(){Object.assign(HandleAllocator.prototype,{get:function get(id){assert(this.allocated[id]!==undefined,"invalid handle: "+id);return this.allocated[id];},has:function has(id){return this.allocated[id]!==undefined;},allocate:function allocate(handle){var id=this.freelist.pop()||this.allocated.length;this.allocated[id]=handle;return id;},free:function free(id){assert(this.allocated[id]!==undefined);this.allocated[id]=undefined;this.freelist.push(id);}});}function HandleAllocator(){this.allocated=[undefined];this.freelist=[];}var emval_handles=new HandleAllocator();function __emval_decref(handle){if(handle>=emval_handles.reserved&&0===--emval_handles.get(handle).refcount){emval_handles.free(handle);}}function count_emval_handles(){var count=0;for(var i=emval_handles.reserved;i<emval_handles.allocated.length;++i){if(emval_handles.allocated[i]!==undefined){++count;}}return count;}function init_emval(){emval_handles.allocated.push({value:undefined},{value:null},{value:true},{value:false});emval_handles.reserved=emval_handles.allocated.length;Module["count_emval_handles"]=count_emval_handles;}var Emval={toValue:function toValue(handle){if(!handle){throwBindingError("Cannot use deleted val. handle = "+handle);}return emval_handles.get(handle).value;},toHandle:function toHandle(value){switch(value){case undefined:return 1;case null:return 2;case true:return 3;case false:return 4;default:{return emval_handles.allocate({refcount:1,value:value});}}}};function simpleReadValueFromPointer(pointer){return this["fromWireType"](HEAP32[pointer>>2]);}function __embind_register_emval(rawType,name){name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function fromWireType(handle){var rv=Emval.toValue(handle);__emval_decref(handle);return rv;},"toWireType":function toWireType(destructors,value){return Emval.toHandle(value);},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:null});}function embindRepr(v){if(v===null){return"null";}var t=typeof v;if(t==="object"||t==="array"||t==="function"){return v.toString();}else{return""+v;}}function floatReadValueFromPointer(name,shift){switch(shift){case 2:return function(pointer){return this["fromWireType"](HEAPF32[pointer>>2]);};case 3:return function(pointer){return this["fromWireType"](HEAPF64[pointer>>3]);};default:throw new TypeError("Unknown float type: "+name);}}function __embind_register_float(rawType,name,size){var shift=getShiftFromSize(size);name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":function fromWireType(value){return value;},"toWireType":function toWireType(destructors,value){if(typeof value!="number"&&typeof value!="boolean"){throw new TypeError("Cannot convert "+embindRepr(value)+" to "+this.name);}return value;},"argPackAdvance":8,"readValueFromPointer":floatReadValueFromPointer(name,shift),destructorFunction:null});}function integerReadValueFromPointer(name,shift,signed){switch(shift){case 0:return signed?function readS8FromPointer(pointer){return HEAP8[pointer];}:function readU8FromPointer(pointer){return HEAPU8[pointer];};case 1:return signed?function readS16FromPointer(pointer){return HEAP16[pointer>>1];}:function readU16FromPointer(pointer){return HEAPU16[pointer>>1];};case 2:return signed?function readS32FromPointer(pointer){return HEAP32[pointer>>2];}:function readU32FromPointer(pointer){return HEAPU32[pointer>>2];};default:throw new TypeError("Unknown integer type: "+name);}}function __embind_register_integer(primitiveType,name,size,minRange,maxRange){name=readLatin1String(name);if(maxRange===-1){maxRange=4294967295;}var shift=getShiftFromSize(size);var fromWireType=function fromWireType(value){return value;};if(minRange===0){var bitshift=32-8*size;fromWireType=function fromWireType(value){return value<<bitshift>>>bitshift;};}var isUnsignedType=name.includes("unsigned");var checkAssertions=function checkAssertions(value,toTypeName){if(typeof value!="number"&&typeof value!="boolean"){throw new TypeError("Cannot convert \""+embindRepr(value)+"\" to "+toTypeName);}if(value<minRange||value>maxRange){throw new TypeError("Passing a number \""+embindRepr(value)+"\" from JS side to C/C++ side to an argument of type \""+name+"\", which is outside the valid range ["+minRange+", "+maxRange+"]!");}};var toWireType;if(isUnsignedType){toWireType=function toWireType(destructors,value){checkAssertions(value,this.name);return value>>>0;};}else{toWireType=function toWireType(destructors,value){checkAssertions(value,this.name);return value;};}registerType(primitiveType,{name:name,"fromWireType":fromWireType,"toWireType":toWireType,"argPackAdvance":8,"readValueFromPointer":integerReadValueFromPointer(name,shift,minRange!==0),destructorFunction:null});}function __embind_register_memory_view(rawType,dataTypeIndex,name){var typeMapping=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];var TA=typeMapping[dataTypeIndex];function decodeMemoryView(handle){handle=handle>>2;var heap=HEAPU32;var size=heap[handle];var data=heap[handle+1];return new TA(heap.buffer,data,size);}name=readLatin1String(name);registerType(rawType,{name:name,"fromWireType":decodeMemoryView,"argPackAdvance":8,"readValueFromPointer":decodeMemoryView},{ignoreDuplicateRegistrations:true});}var stringToUTF8Array=function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){assert(typeof str==="string");if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023;}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u;}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63;}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63;}else{if(outIdx+3>=endIdx)break;if(u>1114111)warnOnce("Invalid Unicode code point "+ptrToString(u)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF).");heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63;}}heap[outIdx]=0;return outIdx-startIdx;};var stringToUTF8=function stringToUTF8(str,outPtr,maxBytesToWrite){assert(typeof maxBytesToWrite=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!");return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);};var lengthBytesUTF8=function lengthBytesUTF8(str){var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++;}else if(c<=2047){len+=2;}else if(c>=55296&&c<=57343){len+=4;++i;}else{len+=3;}}return len;};function __embind_register_std_string(rawType,name){name=readLatin1String(name);var stdStringIsUTF8=name==="std::string";registerType(rawType,{name:name,"fromWireType":function fromWireType(value){var length=HEAPU32[value>>2];var payload=value+4;var str;if(stdStringIsUTF8){var decodeStartPtr=payload;for(var i=0;i<=length;++i){var currentBytePtr=payload+i;if(i==length||HEAPU8[currentBytePtr]==0){var maxRead=currentBytePtr-decodeStartPtr;var stringSegment=UTF8ToString(decodeStartPtr,maxRead);if(str===undefined){str=stringSegment;}else{str+=String.fromCharCode(0);str+=stringSegment;}decodeStartPtr=currentBytePtr+1;}}}else{var a=new Array(length);for(var i=0;i<length;++i){a[i]=String.fromCharCode(HEAPU8[payload+i]);}str=a.join("");}_free(value);return str;},"toWireType":function toWireType(destructors,value){if(value instanceof ArrayBuffer){value=new Uint8Array(value);}var length;var valueIsOfTypeString=typeof value=="string";if(!(valueIsOfTypeString||value instanceof Uint8Array||value instanceof Uint8ClampedArray||value instanceof Int8Array)){throwBindingError("Cannot pass non-string to std::string");}if(stdStringIsUTF8&&valueIsOfTypeString){length=lengthBytesUTF8(value);}else{length=value.length;}var base=_malloc(4+length+1);var ptr=base+4;HEAPU32[base>>2]=length;if(stdStringIsUTF8&&valueIsOfTypeString){stringToUTF8(value,ptr,length+1);}else{if(valueIsOfTypeString){for(var i=0;i<length;++i){var charCode=value.charCodeAt(i);if(charCode>255){_free(ptr);throwBindingError("String has UTF-16 code units that do not fit in 8 bits");}HEAPU8[ptr+i]=charCode;}}else{for(var i=0;i<length;++i){HEAPU8[ptr+i]=value[i];}}}if(destructors!==null){destructors.push(_free,base);}return base;},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:function destructorFunction(ptr){_free(ptr);}});}var UTF16Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf-16le"):undefined;var UTF16ToString=function UTF16ToString(ptr,maxBytesToRead){assert(ptr%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");var endPtr=ptr;var idx=endPtr>>1;var maxIdx=idx+maxBytesToRead/2;while(!(idx>=maxIdx)&&HEAPU16[idx]){++idx;}endPtr=idx<<1;if(endPtr-ptr>32&&UTF16Decoder)return UTF16Decoder.decode(HEAPU8.subarray(ptr,endPtr));var str="";for(var i=0;!(i>=maxBytesToRead/2);++i){var codeUnit=HEAP16[ptr+i*2>>1];if(codeUnit==0)break;str+=String.fromCharCode(codeUnit);}return str;};var stringToUTF16=function stringToUTF16(str,outPtr,maxBytesToWrite){assert(outPtr%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!");assert(typeof maxBytesToWrite=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!");if(maxBytesToWrite===undefined){maxBytesToWrite=2147483647;}if(maxBytesToWrite<2)return 0;maxBytesToWrite-=2;var startPtr=outPtr;var numCharsToWrite=maxBytesToWrite<str.length*2?maxBytesToWrite/2:str.length;for(var i=0;i<numCharsToWrite;++i){var codeUnit=str.charCodeAt(i);HEAP16[outPtr>>1]=codeUnit;outPtr+=2;}HEAP16[outPtr>>1]=0;return outPtr-startPtr;};var lengthBytesUTF16=function lengthBytesUTF16(str){return str.length*2;};var UTF32ToString=function UTF32ToString(ptr,maxBytesToRead){assert(ptr%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");var i=0;var str="";while(!(i>=maxBytesToRead/4)){var utf32=HEAP32[ptr+i*4>>2];if(utf32==0)break;++i;if(utf32>=65536){var ch=utf32-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023);}else{str+=String.fromCharCode(utf32);}}return str;};var stringToUTF32=function stringToUTF32(str,outPtr,maxBytesToWrite){assert(outPtr%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!");assert(typeof maxBytesToWrite=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!");if(maxBytesToWrite===undefined){maxBytesToWrite=2147483647;}if(maxBytesToWrite<4)return 0;var startPtr=outPtr;var endPtr=startPtr+maxBytesToWrite-4;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343){var trailSurrogate=str.charCodeAt(++i);codeUnit=65536+((codeUnit&1023)<<10)|trailSurrogate&1023;}HEAP32[outPtr>>2]=codeUnit;outPtr+=4;if(outPtr+4>endPtr)break;}HEAP32[outPtr>>2]=0;return outPtr-startPtr;};var lengthBytesUTF32=function lengthBytesUTF32(str){var len=0;for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343)++i;len+=4;}return len;};var __embind_register_std_wstring=function __embind_register_std_wstring(rawType,charSize,name){name=readLatin1String(name);var decodeString,encodeString,getHeap,lengthBytesUTF,shift;if(charSize===2){decodeString=UTF16ToString;encodeString=stringToUTF16;lengthBytesUTF=lengthBytesUTF16;getHeap=function getHeap(){return HEAPU16;};shift=1;}else if(charSize===4){decodeString=UTF32ToString;encodeString=stringToUTF32;lengthBytesUTF=lengthBytesUTF32;getHeap=function getHeap(){return HEAPU32;};shift=2;}registerType(rawType,{name:name,"fromWireType":function fromWireType(value){var length=HEAPU32[value>>2];var HEAP=getHeap();var str;var decodeStartPtr=value+4;for(var i=0;i<=length;++i){var currentBytePtr=value+4+i*charSize;if(i==length||HEAP[currentBytePtr>>shift]==0){var maxReadBytes=currentBytePtr-decodeStartPtr;var stringSegment=decodeString(decodeStartPtr,maxReadBytes);if(str===undefined){str=stringSegment;}else{str+=String.fromCharCode(0);str+=stringSegment;}decodeStartPtr=currentBytePtr+charSize;}}_free(value);return str;},"toWireType":function toWireType(destructors,value){if(!(typeof value=="string")){throwBindingError("Cannot pass non-string to C++ string type "+name);}var length=lengthBytesUTF(value);var ptr=_malloc(4+length+charSize);HEAPU32[ptr>>2]=length>>shift;encodeString(value,ptr+4,length+charSize);if(destructors!==null){destructors.push(_free,ptr);}return ptr;},"argPackAdvance":8,"readValueFromPointer":simpleReadValueFromPointer,destructorFunction:function destructorFunction(ptr){_free(ptr);}});};function __embind_register_void(rawType,name){name=readLatin1String(name);registerType(rawType,{isVoid:true,name:name,"argPackAdvance":0,"fromWireType":function fromWireType(){return undefined;},"toWireType":function toWireType(destructors,o){return undefined;}});}var _abort=function _abort(){abort("native code called abort()");};var readEmAsmArgsArray=[];var readEmAsmArgs=function readEmAsmArgs(sigPtr,buf){assert(Array.isArray(readEmAsmArgsArray));assert(buf%16==0);readEmAsmArgsArray.length=0;var ch;buf>>=2;while(ch=HEAPU8[sigPtr++]){var chr=String.fromCharCode(ch);var validChars=["d","f","i"];assert(validChars.includes(chr),"Invalid character "+ch+"(\""+chr+"\") in readEmAsmArgs! Use only ["+validChars+"], and do not specify \"v\" for void return argument.");buf+=ch!=105&buf;readEmAsmArgsArray.push(ch==105?HEAP32[buf]:HEAPF64[buf++>>1]);++buf;}return readEmAsmArgsArray;};var runEmAsmFunction=function runEmAsmFunction(code,sigPtr,argbuf){var args=readEmAsmArgs(sigPtr,argbuf);if(!Object.prototype.hasOwnProperty.call(ASM_CONSTS,code))abort("No EM_ASM constant found at address "+code);return ASM_CONSTS[code].apply(null,args);};var _emscripten_asm_const_int=function _emscripten_asm_const_int(code,sigPtr,argbuf){return runEmAsmFunction(code,sigPtr,argbuf);};var getHeapMax=function getHeapMax(){return 1048576;};var _emscripten_get_heap_max=function _emscripten_get_heap_max(){return getHeapMax();};var growMemory=function growMemory(size){var b=wasmMemory.buffer;var pages=size-b.byteLength+65535>>>16;try{wasmMemory.grow(pages);updateMemoryViews();return 1;}catch(e){err("growMemory: Attempted to grow heap from "+b.byteLength+" bytes to "+size+" bytes, but got error: "+e);}};var _emscripten_resize_heap=function _emscripten_resize_heap(requestedSize){var oldSize=HEAPU8.length;requestedSize>>>=0;assert(requestedSize>oldSize);var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){err("Cannot enlarge memory, asked to go up to "+requestedSize+" bytes, but the limit is "+maxHeapSize+" bytes!");return false;}var alignUp=function alignUp(x,multiple){return x+(multiple-x%multiple)%multiple;};for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true;}}err("Failed to grow the heap from "+oldSize+" bytes to "+newSize+" bytes, not enough memory!");return false;};var SYSCALLS={varargs:undefined,get:function get(){assert(SYSCALLS.varargs!=undefined);SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret;},getStr:function getStr(ptr){var ret=UTF8ToString(ptr);return ret;}};var _fd_close=function _fd_close(fd){abort("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM");};function convertI32PairToI53Checked(lo,hi){assert(lo==lo>>>0||lo==(lo|0));assert(hi===(hi|0));return hi+2097152>>>0<4194305-!!lo?(lo>>>0)+hi*4294967296:NaN;}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){var offset=convertI32PairToI53Checked(offset_low,offset_high);return 70;}var printCharBuffers=[null,[],[]];var printChar=function printChar(stream,curr){var buffer=printCharBuffers[stream];assert(buffer);if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0;}else{buffer.push(curr);}};var flush_NO_FILESYSTEM=function flush_NO_FILESYSTEM(){_fflush(0);if(printCharBuffers[1].length)printChar(1,10);if(printCharBuffers[2].length)printChar(2,10);};var _fd_write=function _fd_write(fd,iov,iovcnt,pnum){var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;for(var j=0;j<len;j++){printChar(fd,HEAPU8[ptr+j]);}num+=len;}HEAPU32[pnum>>2]=num;return 0;};var getWasmTableEntry=function getWasmTableEntry(funcPtr){return wasmTable.get(funcPtr);};var writeArrayToMemory=function writeArrayToMemory(array,buffer){assert(array.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)");HEAP8.set(array,buffer);};embind_init_charCodes();BindingError=Module["BindingError"]=function(_Error2){"use strict";babelHelpers.inheritsLoose(BindingError,_Error2);function BindingError(message){var _this2;_this2=_Error2.call(this,message)||this;_this2.name="BindingError";return _this2;}return BindingError;}(babelHelpers.wrapNativeSuper(Error));InternalError=Module["InternalError"]=function(_Error3){"use strict";babelHelpers.inheritsLoose(InternalError,_Error3);function InternalError(message){var _this3;_this3=_Error3.call(this,message)||this;_this3.name="InternalError";return _this3;}return InternalError;}(babelHelpers.wrapNativeSuper(Error));handleAllocatorInit();init_emval();function checkIncomingModuleAPI(){ignoredModuleProp("fetchSettings");}var wasmImports={__assert_fail:___assert_fail,__cxa_begin_catch:___cxa_begin_catch,__cxa_find_matching_catch_2:___cxa_find_matching_catch_2,__cxa_find_matching_catch_3:___cxa_find_matching_catch_3,__resumeException:___resumeException,_embind_register_bigint:__embind_register_bigint,_embind_register_bool:__embind_register_bool,_embind_register_emval:__embind_register_emval,_embind_register_float:__embind_register_float,_embind_register_integer:__embind_register_integer,_embind_register_memory_view:__embind_register_memory_view,_embind_register_std_string:__embind_register_std_string,_embind_register_std_wstring:__embind_register_std_wstring,_embind_register_void:__embind_register_void,abort:_abort,emscripten_asm_const_int:_emscripten_asm_const_int,emscripten_get_heap_max:_emscripten_get_heap_max,emscripten_resize_heap:_emscripten_resize_heap,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,invoke_ii:invoke_ii,invoke_iii:invoke_iii,invoke_iiii:invoke_iiii,invoke_v:invoke_v,invoke_vi:invoke_vi,invoke_vii:invoke_vii,invoke_viii:invoke_viii,invoke_viiii:invoke_viiii};var asm=createWasm();var ___wasm_call_ctors=createExportWrapper("__wasm_call_ctors");var _curve_create=Module["_curve_create"]=createExportWrapper("curve_create");var _malloc=Module["_malloc"]=createExportWrapper("malloc");var _curve_free=Module["_curve_free"]=createExportWrapper("curve_free");var _free=Module["_free"]=createExportWrapper("free");var _curve_init_ristretto=Module["_curve_init_ristretto"]=createExportWrapper("curve_init_ristretto");var _get_curve_element_bytes=Module["_get_curve_element_bytes"]=createExportWrapper("get_curve_element_bytes");var _get_curve_scalar_bytes=Module["_get_curve_scalar_bytes"]=createExportWrapper("get_curve_scalar_bytes");var _kdf_create=Module["_kdf_create"]=createExportWrapper("kdf_create");var _kdf_free=Module["_kdf_free"]=createExportWrapper("kdf_free");var _kdf_init_naor_reingold=Module["_kdf_init_naor_reingold"]=createExportWrapper("kdf_init_naor_reingold");var _sodiumInit=Module["_sodiumInit"]=createExportWrapper("sodiumInit");var _voprf_create=Module["_voprf_create"]=createExportWrapper("voprf_create");var _voprf_free=Module["_voprf_free"]=createExportWrapper("voprf_free");var _voprf_init_exp_twohashdh=Module["_voprf_init_exp_twohashdh"]=createExportWrapper("voprf_init_exp_twohashdh");var _blind=Module["_blind"]=createExportWrapper("blind");var _verifiable_unblind=Module["_verifiable_unblind"]=createExportWrapper("verifiable_unblind");var _voprf_client_finalize=Module["_voprf_client_finalize"]=createExportWrapper("voprf_client_finalize");var _voprf_setup=Module["_voprf_setup"]=createExportWrapper("voprf_setup");var _voprf_evaluate=Module["_voprf_evaluate"]=createExportWrapper("voprf_evaluate");var _voprf_server_finalize=Module["_voprf_server_finalize"]=createExportWrapper("voprf_server_finalize");var _get_voprf_final_evaluation_bytes=Module["_get_voprf_final_evaluation_bytes"]=createExportWrapper("get_voprf_final_evaluation_bytes");var ___errno_location=createExportWrapper("__errno_location");var ___getTypeName=createExportWrapper("__getTypeName");var __embind_initialize_bindings=Module["__embind_initialize_bindings"]=createExportWrapper("_embind_initialize_bindings");var _fflush=Module["_fflush"]=createExportWrapper("fflush");var _emscripten_builtin_memalign=createExportWrapper("emscripten_builtin_memalign");var _setThrew=createExportWrapper("setThrew");var setTempRet0=createExportWrapper("setTempRet0");var _emscripten_stack_init2=function _emscripten_stack_init(){return(_emscripten_stack_init2=wasmExports["emscripten_stack_init"])();};var _emscripten_stack_get_free2=function _emscripten_stack_get_free(){return(_emscripten_stack_get_free2=wasmExports["emscripten_stack_get_free"])();};var _emscripten_stack_get_base2=function _emscripten_stack_get_base(){return(_emscripten_stack_get_base2=wasmExports["emscripten_stack_get_base"])();};var _emscripten_stack_get_end2=function _emscripten_stack_get_end(){return(_emscripten_stack_get_end2=wasmExports["emscripten_stack_get_end"])();};var stackSave=createExportWrapper("stackSave");var stackRestore=createExportWrapper("stackRestore");var stackAlloc=createExportWrapper("stackAlloc");var _emscripten_stack_get_current2=function _emscripten_stack_get_current(){return(_emscripten_stack_get_current2=wasmExports["emscripten_stack_get_current"])();};var ___cxa_free_exception=createExportWrapper("__cxa_free_exception");var ___cxa_increment_exception_refcount=createExportWrapper("__cxa_increment_exception_refcount");var ___cxa_decrement_exception_refcount=createExportWrapper("__cxa_decrement_exception_refcount");var ___get_exception_message=Module["___get_exception_message"]=createExportWrapper("__get_exception_message");var ___cxa_can_catch=createExportWrapper("__cxa_can_catch");var ___cxa_is_pointer_type=createExportWrapper("__cxa_is_pointer_type");var dynCall_iiiji=Module["dynCall_iiiji"]=createExportWrapper("dynCall_iiiji");var dynCall_iiij=Module["dynCall_iiij"]=createExportWrapper("dynCall_iiij");var dynCall_iijii=Module["dynCall_iijii"]=createExportWrapper("dynCall_iijii");var dynCall_iiijiji=Module["dynCall_iiijiji"]=createExportWrapper("dynCall_iiijiji");var dynCall_iiijiii=Module["dynCall_iiijiii"]=createExportWrapper("dynCall_iiijiii");var dynCall_jiji=Module["dynCall_jiji"]=createExportWrapper("dynCall_jiji");function invoke_v(index){var sp=stackSave();try{getWasmTableEntry(index)();}catch(e){stackRestore(sp);if(!(e instanceof EmscriptenEH))throw e;_setThrew(1,0);}}function invoke_vii(index,a1,a2){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2);}catch(e){stackRestore(sp);if(!(e instanceof EmscriptenEH))throw e;_setThrew(1,0);}}function invoke_viiii(index,a1,a2,a3,a4){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3,a4);}catch(e){stackRestore(sp);if(!(e instanceof EmscriptenEH))throw e;_setThrew(1,0);}}function invoke_ii(index,a1){var sp=stackSave();try{return getWasmTableEntry(index)(a1);}catch(e){stackRestore(sp);if(!(e instanceof EmscriptenEH))throw e;_setThrew(1,0);}}function invoke_iii(index,a1,a2){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2);}catch(e){stackRestore(sp);if(!(e instanceof EmscriptenEH))throw e;_setThrew(1,0);}}function invoke_viii(index,a1,a2,a3){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3);}catch(e){stackRestore(sp);if(!(e instanceof EmscriptenEH))throw e;_setThrew(1,0);}}function invoke_vi(index,a1){var sp=stackSave();try{getWasmTableEntry(index)(a1);}catch(e){stackRestore(sp);if(!(e instanceof EmscriptenEH))throw e;_setThrew(1,0);}}function invoke_iiii(index,a1,a2,a3){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2,a3);}catch(e){stackRestore(sp);if(!(e instanceof EmscriptenEH))throw e;_setThrew(1,0);}}Module["wasmMemory"]=wasmMemory;Module["getValue"]=getValue;Module["stringToUTF8"]=stringToUTF8;Module["lengthBytesUTF8"]=lengthBytesUTF8;Module["writeArrayToMemory"]=writeArrayToMemory;var missingLibrarySymbols=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","zeroMemory","exitJS","isLeapYear","ydayFromDate","arraySum","addDays","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","getHostByName","initRandomFill","randomFill","getCallstack","emscriptenLog","convertPCtoSourceLocation","runMainThreadEmAsm","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","setWasmTableEntry","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","stringToNewUTF8","stringToUTF8OnStack","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","getEnvStrings","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","createDyncallWrapper","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","getPromise","makePromise","idsToPromises","makePromiseCallback","setMainLoop","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","_setNetworkCallback","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","__glGenObject","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","SDL_unicode","SDL_ttfContext","SDL_audio","GLFW_Window","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","getTypeName","heap32VectorToArray","requireRegisteredType","init_embind","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","extendError","createNamedFunction","getBasestPointer","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","enumReadValueFromPointer","runDestructors","craftInvokerFunction","embind__requireFunction","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_getPointee","RegisteredPointer_destructor","RegisteredPointer_deleteObject","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","ClassHandle_isAliasOf","throwInstanceAlreadyDeleted","ClassHandle_clone","ClassHandle_delete","ClassHandle_isDeleted","ClassHandle_deleteLater","flushPendingDeletes","setDelayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","getStringOrSymbol","craftEmvalAllocator","emval_get_global","emval_lookupTypes","emval_allocateDestructors","emval_addMethodCaller"];missingLibrarySymbols.forEach(missingLibrarySymbol);var unexportedSymbols=["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createDataFile","FS_createLazyFile","FS_createLink","FS_createDevice","FS_unlink","out","err","callMain","abort","keepRuntimeAlive","wasmTable","wasmExports","stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0","writeStackCookie","checkStackCookie","convertI32PairToI53Checked","ptrToString","getHeapMax","growMemory","ENV","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","ERRNO_CODES","ERRNO_MESSAGES","DNS","Protocols","Sockets","timers","warnOnce","UNWIND_CACHE","readEmAsmArgsArray","readEmAsmArgs","runEmAsmFunction","getWasmTableEntry","handleAllocatorInit","HandleAllocator","freeTableIndexes","functionsInTableMap","setValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","JSEvents","specialHTMLTargets","currentFullscreenStrategy","restoreOldWindowedStyle","ExitStatus","flush_NO_FILESYSTEM","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","findMatchingCatch","getExceptionMessageCommon","incrementExceptionRefcount","decrementExceptionRefcount","getExceptionMessage","Browser","wget","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","emscripten_webgl_power_preferences","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","GLFW","allocateUTF8","allocateUTF8OnStack","InternalError","BindingError","throwInternalError","throwBindingError","registeredTypes","awaitingDependencies","typeDependencies","tupleRegistrations","structRegistrations","sharedRegisterType","whenDependentTypesAreResolved","embind_charCodes","embind_init_charCodes","readLatin1String","UnboundTypeError","PureVirtualError","embindRepr","registeredInstances","registeredPointers","registerType","getShiftFromSize","integerReadValueFromPointer","floatReadValueFromPointer","simpleReadValueFromPointer","finalizationRegistry","detachFinalizer_deps","deletionQueue","delayFunction","emval_handles","emval_symbols","init_emval","count_emval_handles","Emval","emval_newers","emval_methodCallers","emval_registeredMethods"];unexportedSymbols.forEach(unexportedRuntimeSymbol);var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller;};function stackCheckInit(){_emscripten_stack_init2();writeStackCookie();}function run(){if(runDependencies>0){return;}stackCheckInit();preRun();if(runDependencies>0){return;}function doRun(){if(calledRun)return;calledRun=true;Module["calledRun"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module["onRuntimeInitialized"])Module["onRuntimeInitialized"]();assert(!Module["_main"],'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]');postRun();}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){Module["setStatus"]("");},1);doRun();},1);}else{doRun();}checkStackCookie();}if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()();}}run();


return moduleArg.ready;
});


}();
if(typeof exports==='object'&&typeof module==='object')
module.exports=Module;else
if(typeof define==='function'&&define['amd'])
define([],function(){return Module;});}),null);/*FB_PKG_DELIM*/
__d("ArmadilloCutoverClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("699");b=d("FalcoLoggerInternal").create("armadillo_cutover_client",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupdDYIFileSaver",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("file-saver").__setRef("EncryptedBackupdDYIFileSaver");function a(a,b){h.onReadyImmediately(function(c){c=c.saveAs;c(b,a)})}g.saveFile=a}),98);
__d("LSInitSyncCompleteSubscription",["I64","LSIntEnum","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,c){return new(j||(j=b("Promise")))(function(b,e){var f=d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(c).subscribe(function(a,c){if(c.operation==="delete")return;if((h||(h=d("I64"))).equal(c.value.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2))){f();return b()}})})}function a(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(b)).then(function(c){if(c!=null&&(h||(h=d("I64"))).equal(c.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2)))return;return k(a,b)})}function c(a){return k(a,(i||(i=d("LSIntEnum"))).ofNumber(1))}g.maybeWaitForSyncGroup=a;g.use=c}),98);
__d("MAWTrackPendingOccamadilloThreads",["Deferred","LSDatabaseSingleton","LSInitSyncCompleteSubscription","LSIntEnum","LSPlatformLsInitLog","MAWMIC","MAWMICSchema","QuickPerformanceLogger","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(h={},h[d("MAWMICSchema").ANNOTATIONS.occamadilloBatchesSentToWorker]=0,h[d("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync]=0,h[d("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads]=0,h);(function(){Object.keys(l).forEach(function(a){d("MAWMIC").addIntAnnotation(a,0)})})();function m(a){d("MAWMIC").addIntAnnotation(a,++l[a])}function a(){return l.occamadilloBatchesSentToWorker}var n=new(c("Deferred"))(),o=new Set(),p=new Set(),q=new Set(),r=new Set();function e(a){a=a.callingSource;r.add((k||(k=d("LSIntEnum"))).toNumber(a));d("MAWMIC").addIntArrayAnnotation(d("MAWMICSchema").ANNOTATIONS.occamadilloCallingSources,Array.from(r))}function f(a){d("MAWMIC").addPoint(d("MAWMICSchema").POINTS.thread_mapping_start);if(o.has(a)){m(d("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads);return}p.add(a);d("LSPlatformLsInitLog").LsSync.isRunning()&&q.add(a);(i||(i=c("QuickPerformanceLogger"))).currentTimestamp();o.add(a);d("MAWMIC").addIntAnnotation("occamadilloThreadCount",o.size);d("LSPlatformLsInitLog").LsSync.hasEnded()&&m(d("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync)}function s(){d("MAWMIC").addBoolAnnotation("threadMappingAcked",!0)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(c("gkx")("2661"))yield n.getPromise();else{var b=(yield (j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton);yield d("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(b,(k||(k=d("LSIntEnum"))).ofNumber(95))}p["delete"](a);q["delete"](a);d("MAWMIC").addIntAnnotation("occamadilloCompleteThreadCount",o.size-p.size);w()});return u.apply(this,arguments)}function v(){n.resolve(),w()}function w(){d("MAWMIC").addIntAnnotation("occamadilloThreadCount",o.size);if(d("LSPlatformLsInitLog").LsSync.hasEnded()&&q.size===0){d("MAWMIC").addPoint(d("MAWMICSchema").POINTS.thread_mapping_end);return}p.size===0&&d("MAWMIC").addPoint(d("MAWMICSchema").POINTS.thread_mapping_end)}g.incrementCounter=m;g.getBatchesSentNumber=a;g.markThreadPassedToNativeOp=e;g.addPendingThread=f;g.markBridgeCallAcked=s;g.removePendingThread=t;g.completeSync=v;g.maybeEndOccamadilloThreadMapping=w}),98);
__d("MAWWorkerEvent",["FBLogger","MAWMIC","MAWReliabilityMonitor","MAWSetupWorkerAuxStateForLogging","MAWTrackPendingOccamadilloThreads","MAWWaitForBackendSetup","MultipleTabsLogger","QPLUserFlow","pageID","performanceNow","promiseDone","qpl","requireDeferred","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("MAWBridgeObserver").__setRef("MAWWorkerEvent"),j=new Set(),k=new Set(["addEbUploadTrackingWorkerQPL","ackWithInstanceKey","addMediaDownloadQpl","searchGetFTSRestoreSessionId","none"]),l=new Set(["bulkCreateThread","bulkCreateOrUpdateThread","createThread","createOrUpdateThread"]),m=new Map(),n=function(a){switch(a){case"sendAndReceive":return 1e4;case"fireAndForget":return 4e3;case"waitUntilCompleted":return 1e4;case"waitUntilPersisted":return 1e4;default:return 1e4}},o=function(a,b,d){d=window.setTimeout(function(){u(a,"ack_timeout"),c("promiseDone")(i.load().then(function(a){a.notifyUnackedEvent({route:b,timestamp:(h||(h=c("performanceNow")))()})}))},n(d));m.set(a,d);return d},p=function(a){var b=m.get(a);b!=null&&(window.clearTimeout(b),c("promiseDone")(i.load().then(function(a){a.resetUnackedMessages()})),m["delete"](a))};function a(a,b,e){if(j.has(e)||k.has(b))return;j.add(e);c("QPLUserFlow").start(c("qpl")._(1056842055,"807"),{annotations:{bool:{duringMIC:d("MAWMIC").duringMIC(),useSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()},"int":{key:e},string:{callType:a,event:b,pageID:c("pageID"),workerID:d("MAWWaitForBackendSetup").getCurrentWorkerID()}},instanceKey:e});void d("MultipleTabsLogger").hasMultipleTabs().then(function(a){c("QPLUserFlow").addAnnotations(c("qpl")._(1056842055,"807"),{bool:{isMultiTabs:a}},{instanceKey:e})})}function b(a){if(!j.has(a))return;j["delete"](a);c("QPLUserFlow").endSuccess(c("qpl")._(1056842055,"807"),{instanceKey:a})}function e(a,b){if(!j.has(a))return;j["delete"](a);c("QPLUserFlow").endFailure(c("qpl")._(1056842055,"807"),"fail",{annotations:{bool:{workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{error:b},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:a})}function f(a,b,e){if(!j.has(a))return;j["delete"](a);c("QPLUserFlow").endFailure(c("qpl")._(1056842055,"807"),"timeout",{annotations:{bool:{workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{error:b,workerHealthStatus:e.tag},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:a})}function q(a,b){if(!j.has(a))return;c("QPLUserFlow").addAnnotations(c("qpl")._(1056842055,"807"),b,{instanceKey:a})}function r(a,b){if(!j.has(a))return;try{if(Array.isArray(b)){var e=b.every(function(a){return typeof a==="object"&&a!=null&&"state"in a&&a.state===d("MAWReliabilityMonitor").HealthReportState.OK.valueOf()});b=b.reduce(function(a,b){typeof b==="object"&&b!=null&&"state"in b&&"identifier"in b&&"reason"in b&&b.state!==d("MAWReliabilityMonitor").HealthReportState.OK.valueOf()&&typeof b.state==="string"&&typeof b.reason==="string"&&typeof b.identifier==="string"&&a.push([b.identifier,b.state,b.reason].join(":"));return a},[]);q(a,{bool:{workerHealthStatus:e},string:{error:(a=b[0])!=null?a:void 0},string_array:{errors:b}})}}catch(a){c("FBLogger")("messenger_web").catching(a).mustfix("Failed to log ack result annotations");return!1}}function s(a,b,c){if(typeof c==="object"&&typeof (c==null?void 0:c.timestamp)==="number"){c=c.payload;p(a);u(a,"ack");r(a,c);l.has(b)&&d("MAWTrackPendingOccamadilloThreads").markBridgeCallAcked()}}function t(a,b,c){k.has(b)||o(a,b,c),u(a,"send")}function u(a,b,d){if(!j.has(a))return;c("QPLUserFlow").addPoint(c("qpl")._(1056842055,"807"),b,{instanceKey:a,timestamp:d})}g.getUnackedEventTimeout=n;g.logStart=a;g.logSuccess=b;g.logFailure=e;g.logTimeoutFailure=f;g.logAnnotations=q;g.logAck=s;g.logSend=t}),98);
__d("MAWBridgeLoggingUtils",["MAWWorkerEvent","ODS","Random","WAHashStringToNumber"],(function(a,b,c,d,e,f,g){"use strict";var h,i=3185,j="armadillo_worker_runtime",k="getWorkerHeartbeat",l=10,m=new Array(l);function n(a,b,c){(h||(h=d("ODS"))).bumpEntityKey(i,j,a+"_"+b+"_"+c)}function a(a){return d("WAHashStringToNumber").hashStringToNumber(a+Math.round(d("Random").random()*1e4)+1e4)}function b(a,b,c,e){n(b,c,"start");if(c===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_start");d("MAWWorkerEvent").logStart(a,c,e);m.length===l&&m.shift();m.push(b+"_"+c)}function o(a){m.filter(Boolean).forEach(function(b){(h||(h=d("ODS"))).bumpEntityKey(i,j,b+a)})}function c(a,b,c){n(a,b,"success");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_success");d("MAWWorkerEvent").logSuccess(c)}function e(a,b,c,e){n(a,b,"fail");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_fail");d("MAWWorkerEvent").logFailure(e,c)}function f(a,b,c,e){n(a,b,"timeout");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_timeout");d("MAWWorkerEvent").logTimeoutFailure(c,"Route timeout",e)}function p(){o("_before_unresponsive"),m.fill(null)}g.CAT_ID=i;g.ENT=j;g.HEARTBEAT_ROUTE=k;g.RECENT_ROUTES_NUM=l;g.getBridgeEventInstanceKey=a;g.routeStart=b;g.logRecentRoutes=o;g.routeSuccess=c;g.routeFail=e;g.routeTimeoutFail=f;g.logRecentBridgeEvents=p}),98);
__d("MAWTimedBridge",["MAWBridgeLoggingUtils","MAWMaybeWithTimeout","MAWWaitForBackendSetup","MAWWebWorkerSingleton","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["route.",""]);h=function(){return a};return a}var i=17e4;function a(a,b,c,e,f){f===void 0&&(f=i);return d("MAWWaitForBackendSetup").waitForBackendSetup(c).then(function(){return d("MAWMaybeWithTimeout").maybeWithTimeout(a(),f,function(){return d("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(a){d("MAWBridgeLoggingUtils").routeTimeoutFail(b,c,e,a);d("WALogger").COUNT(h(),c).tags("bridge_timeout");throw new j("Bridge route "+c+" timed out, WorkerHealthStatus: "+a.tag)})},c)})}var j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.name="BridgeTimeoutError";c.message=a;return c}return a}(babelHelpers.wrapNativeSuper(Error));g.DEFAULT_MAW_BRIDGE_TIMEOUT_MS=i;g.bridgeTimeout=a;g.MAWBridgeTimeoutError=j}),98);
__d("MAWBridgeSendAndReceive",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWorkerEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){var f=d("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(b),g=(e==null?void 0:e.isLoggingDisabled)!==!0,h=d("MAWTimedBridge").bridgeTimeout(function(){g&&d("MAWBridgeLoggingUtils").routeStart("sendAndReceive",a,b,f);return d("MAWBridge").getBridge().sendAndReceive(a,b,c,e==null?void 0:e.isLoggingDisabled,{onAck:function(a){g&&d("MAWWorkerEvent").logAck(f,b,a)},onSend:function(a){var c=a.queueMsgs;a=a.queueSize;g&&(d("MAWWorkerEvent").logSend(f,b,"sendAndReceive"),d("MAWWorkerEvent").logAnnotations(f,{"int":{bridgeSize:a},string_array:{bridgeMsgs:c}}))}},{bridgeQPLInstanceKey:f}).then(function(c){g&&d("MAWBridgeLoggingUtils").routeSuccess(a,b,f);return c})["catch"](function(c){g&&d("MAWBridgeLoggingUtils").routeFail(a,b,c.message,f);throw c})},a,b,f,e==null?void 0:e.timeoutMs);return h}g.sendAndReceive=a}),98);
__d("PolarisDirectGQLAPICDNRestorationQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9692814117403635"}),null);
__d("PolarisDirectGQLAPICDNRestorationQuery.graphql",["PolarisDirectGQLAPICDNRestorationQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"payload"}],c=[{alias:null,args:[{kind:"Variable",name:"payload",variableName:"payload"}],concreteType:"XIGIGDirectInstamadilloRestoreCDNUrlResponse",kind:"LinkedField",name:"xig_fetch_ig_direct_restore_cdn_url",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"restoration_cdn_url",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PolarisDirectGQLAPICDNRestorationQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PolarisDirectGQLAPICDNRestorationQuery",selections:c},params:{id:b("PolarisDirectGQLAPICDNRestorationQuery_instagramRelayOperation"),metadata:{},name:"PolarisDirectGQLAPICDNRestorationQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PolarisDirectGQLAPIEBUploadMessagesMutation_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9941939669183429"}),null);
__d("PolarisDirectGQLAPIEBUploadMessagesMutation.graphql",["PolarisDirectGQLAPIEBUploadMessagesMutation_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"XIGTIGUploadMessageHandlerResponse",kind:"LinkedField",name:"xig_ig_open_upload_msg_to_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_success",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"delete_mailbox",storageKey:null},{alias:null,args:null,concreteType:"XIGTIGProtobufParams",kind:"LinkedField",name:"protobuf_params",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"delete_on_success",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rtu_protocol",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PolarisDirectGQLAPIEBUploadMessagesMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PolarisDirectGQLAPIEBUploadMessagesMutation",selections:c},params:{id:b("PolarisDirectGQLAPIEBUploadMessagesMutation_instagramRelayOperation"),metadata:{},name:"PolarisDirectGQLAPIEBUploadMessagesMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("PolarisDirectGQLAPI",["CometRelay","CurrentUser","PolarisDirectGQLAPICDNRestorationQuery.graphql","PolarisDirectGQLAPIEBUploadMessagesMutation.graphql","PolarisRelayEnvironment","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,c){return new(j||(j=b("Promise")))(function(e,f){var g=function(a){f(a)},i=d("CurrentUser").getAppID(),j;i!=null&&(j=Number(i));d("CometRelay").commitMutation(a,{mutation:h!==void 0?h:h=b("PolarisDirectGQLAPIEBUploadMessagesMutation.graphql"),onCompleted:e,onError:g,variables:{input:{app_id:j,payload:{msg_payloads:c}}}})})}function e(a){return d("CometRelay").fetchQuery(c("PolarisRelayEnvironment"),i!==void 0?i:i=b("PolarisDirectGQLAPICDNRestorationQuery.graphql"),{payload:a}).toPromise().then(function(a){return(a=a==null?void 0:(a=a.xig_fetch_ig_direct_restore_cdn_url)==null?void 0:a.restoration_cdn_url)!=null?a:""})}g.ebUploadMessages=a;g.fetchCDNUrlWithRestoration=e}),98);
__d("IGDBridgeResignCdnUrlHandler",["MAWBridgeSendAndReceive","PolarisDirectGQLAPI","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("PolarisDirectGQLAPI").fetchCDNUrlWithRestoration(a));yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","continueMediaDownload",{cdnUrl:a,deliveryObjectId:b})});return h.apply(this,arguments)}g.call=a}),98);
__d("IGDFallbackProfileUrl",[],(function(a,b,c,d,e,f){"use strict";a="/static/images/profile/profile-pic-null_outline_56_light-4x.png/bc91e9cae98c.png";f.FALLBACK_PROFILE_PIC_URL=a}),66);
__d("LSIssueNewError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(6).add({errorId:void 0,taskId:a[0],errorCode:a[1],errorTitleText:a[2],errorBodyText:a[3],issuedTimestampMs:c[0],errorExtraData:a[4],presentationStyle:a[5]})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreIssueNewErrorStoredProcedure";a.__tables__=["user_visible_errors"];e.exports=a}),null);
__d("MAWBridgeFireAndForget",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWaitForBackendSetup","MAWWorkerEvent","Promise","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("justknobx")._("1143");function a(a,c,e,f){return d("MAWWaitForBackendSetup").runAfterBackendSetup(function(){var g=d("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(c);f!==!0&&d("MAWBridgeLoggingUtils").routeStart("fireAndForget",a,c,g);void d("MAWTimedBridge").bridgeTimeout(function(){return new(h||(h=b("Promise")))(function(b){d("MAWBridge").getBridge().fireAndForget(a,c,e,f,{onAck:function(e){f!==!0&&(d("MAWWorkerEvent").logAck(g,c,e),d("MAWBridgeLoggingUtils").routeSuccess(a,c,g)),b()},onSend:function(a){var b=a.queueMsgs;a=a.queueSize;f!==!0&&(d("MAWWorkerEvent").logSend(g,c,"fireAndForget"),d("MAWWorkerEvent").logAnnotations(g,{"int":{bridgeSize:a},string_array:{bridgeMsgs:b}}))}},{bridgeQPLInstanceKey:g})})},a,c,g,i)},c)}g.fireAndForget=a}),98);
__d("MAWClientConsistencyRefresh",["ClientConsistencyEventEmitter","CurrentAppID"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(d("CurrentAppID").getAppID()){case 772021112871879:c("ClientConsistencyEventEmitter").emit("hardRefresh",a);break;default:c("ClientConsistencyEventEmitter").emit("softRefresh",a)}}g["default"]=a}),98);
__d("MAWCrossWorkerPortal",["FBLogger","WACrossWorkerPortal","pageID"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){if(h!=null)return h;h=d("WACrossWorkerPortal").attachPortal(a,b,e,c("pageID"),f);return h}function b(){if(h==null){c("FBLogger")("messenger_web").warn("Trying to kill portal before its setup");return}d("WACrossWorkerPortal").killPortalAndSendPendingToBridge(h)}g.getOrCreateCrossWorkerPortal=a;g.killPortalWhenWorkerTerminating=b}),98);
__d("MAWWorkerOnClose",["MAWSetupWorkerAuxStateForLogging","MAWWaitForBackendSetup","MAWWebWorkerSingleton","QPLUserFlow","pageID","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(1056841865,"2862");function a(a,b,e){c("QPLUserFlow").start(h,{annotations:{string:{currentWorkerId:d("MAWWaitForBackendSetup").getCurrentWorkerID(),pageID:c("pageID"),terminationMsgType:b,terminationReason:a,workerID:e},string_array:{pastWorkerTerminationMsgTypes:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,pastWorkerTerminationReasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}}})}function b(a){c("promiseDone")(d("MAWWebWorkerSingleton").getWorkerHealthStatus(),function(b){return c("QPLUserFlow").endSuccess(h,{annotations:{bool:babelHelpers["extends"]({},b.data),string:{healthStatusAfter:b.tag,outcome:a}}})})}function e(a,b){c("promiseDone")(d("MAWWebWorkerSingleton").getWorkerHealthStatus(),function(d){return c("QPLUserFlow").endFailure(h,a,{annotations:{bool:babelHelpers["extends"]({},d.data),string:{healthStatusAfter:d.tag}},error:b})})}g.ON_WORKER_CLOSED_HANDLER_QPL=h;g.startQPL=a;g.success=b;g.fail=e}),98);
__d("MAWWorkerWatchdog",["MAWBridgeLoggingUtils","MAWBridgeSendAndReceive","MAWSetupWorkerAuxStateForLogging","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MAWWorkerWatchdogRecovery","Promise","QPLUserFlow","clearTimeout","err","gkx","justknobx","promiseDone","qpl","setInterval","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("gkx")("12962"),j=c("justknobx")._("4240"),k=j/2,l=c("qpl")._(1056847415,"2909"),m=!1,n=!1,o=null,p=["shared_not_exists","shared_exists_not_connected"];function q(){var a;c("QPLUserFlow").start(l,{annotations:{bool:{workerTerminatedPermanently:(a=d("MAWSetupWorkerAuxStateForLogging")).WorkerLifeCycleState.workerTerminatedPermanently},"int":{workerAge:a.WorkerLifeCycleState.getWorkerAge()},string:{currentWorkerId:d("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{pastWorkerTerminationMsgTypes:a.WorkerLifeCycleState.restartMessageTypes,pastWorkerTerminationReasons:a.WorkerLifeCycleState.restartReasons}}});return(h||(h=b("Promise"))).race([d("MAWBridgeSendAndReceive").sendAndReceive("backend",d("MAWBridgeLoggingUtils").HEARTBEAT_ROUTE),new h(function(a,b){c("setTimeout")(function(){b(c("err")("Armadillo web worker heartbeat timed out."))},k)})]).then(function(){o!=null&&(c("clearTimeout")(o),o=null,c("QPLUserFlow").addPoint(l,"clear-lock-based-recovery")),c("QPLUserFlow").endSuccess(l)},function(a){if(c("gkx")("13566")&&o==null){c("QPLUserFlow").addPoint(l,"starting-lock-based-recovery");var b=d("MAWWaitForBackendSetup").getCurrentWorkerID();o=c("setTimeout")(function(){c("promiseDone")(d("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(a){var c=d("MAWWorkerWatchdogRecovery").getWorkerRecoveryForWatchdog();if(p.includes(a.tag)&&c!=null)return c("locks_based_recovery",b,"locks_based_recovery")})),o=null},j*2)}c("promiseDone")(d("MAWWebWorkerSingleton").getWorkerHealthStatus(),function(b){return c("QPLUserFlow").endFailure(l,"heartbeat_timeout",{annotations:{bool:babelHelpers["extends"]({},b.data),string:{workerHealthStatus:b.tag}},error:a})})})}function a(){if(n||!i)return;c("setInterval")(function(){if(!m)return;c("promiseDone")(q())},j);d("MAWWaitForBackendSetup").runAfterBackendSetup(function(){m=!0},d("MAWBridgeLoggingUtils").HEARTBEAT_ROUTE);n=!0}g.HEARTBEAT_TIMEOUT_INTERVAL=k;g.MAW_WORKER_HEARTBEAT_QPL=l;g.startWatchdog=a}),98);
__d("MAWSetupWorker",["CurrentAppID","Deferred","FBLogger","IGDWebUtils","MAWBridgeObserver","MAWClientConsistencyRefresh","MAWCommonSetupWorker","MAWCrossWorkerPortal","MAWInit","MAWLoggerUtils","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWUnrecoverableDbErrors","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MAWWorkerOnClose","MAWWorkerWatchdog","QPLUserFlow","SharedWorkerBundleResource","SharedWorkerV2ResourceExperimental","WATagsLogger","asyncToGeneratorRuntime","cr:6600","err","gkx","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Shared worker responded to termination request: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker terminating: for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker doesn't exist, no need to terminate"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["backend setup successful"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["bridge promise resolved"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker setting up with reason: ",", use shared worker: ",""]);m=function(){return a};return a}var n=function(){return c("gkx")("8512")},o=d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.WorkerSetup,d("MAWLoggerUtils").Tag.MAWInit]),p=d("IGDWebUtils").isInstagramWebSupportedApp(Number(d("CurrentAppID").getAppID())),q=p?"IGDAWMainWorker":"MAWMainWorker",r=null,s=!1;function t(a){s=a,d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently=a}function u(){return s}function v(a){switch(a){case"mawInit":return!0;case"mawReinitSetupMutex":case"mawReinitReregDevice":case"bridgeRecovery":case"workerUpgraded":case"rebootRequired":case"workerTerminated":default:return!1}}function w(a,b,c,d,e,f){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h,i){if(u())throw c("err")("Worker is permanently killed.");d("MAWWaitForBackendSetup").markBackendSetupStarted();var j=function(b){return w(a,e,f,g,b,i)};(h==="bridgeRecovery"||h==="backendSetupFailure")&&c("QPLUserFlow").addPoint(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,"create_worker_start");d("MAWWebWorkerSingleton").setOnCloseForWorkerInstance(function(a,b,e){var f;d("MAWWorkerOnClose").startQPL(a,e,b);var g=(f=a)!=null?f:"unknown",i=G(g)&&d("MAWWaitForBackendSetup").isBackendSetupSettled();d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons.push(g);d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes.push((f=e)!=null?f:"unknown");e=d("MAWWaitForBackendSetup").getCurrentWorkerID()==null||b!==d("MAWWaitForBackendSetup").getCurrentWorkerID();f=g==="worker-init-script-timeout"&&c("gkx")("13311");e=e&&!f;if(e){d("MAWInit").MAWInit.logPoint(g+"_worker_termination_skipped");d("MAWMIC").addPoint(g+"_worker_termination_skipped");d("MAWWorkerOnClose").success(g+"_worker_restart_skipped");c("FBLogger")("messenger_web").warn("Worker termination skipped %s. Terminate reason: %s, Worker: %s, current worker: %s",h,a,b,d("MAWWaitForBackendSetup").getCurrentWorkerID());return}d("MAWWaitForBackendSetup").resetCurrentWorkerSkipIdCheck();c("FBLogger")("messenger_web").warn("Worker termination started %s. Terminate reason: %s, Worker: %s",h,a,b);d("MAWInit").MAWInit.logPoint(g+"_worker_terminated");d("MAWMIC").addPoint(g+"_worker_terminated");d("MAWInit").MAWInit.addStringArrayAnnotation("workerTerminationReason",d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons);d("MAWMIC").addStringArrayAnnotation("workerTerminationReason",d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons);d("MAWInit").MAWInit.addStringArrayAnnotation("workerTerminationMsgType",d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes);d("MAWMIC").addStringArrayAnnotation("workerTerminationMsgType",d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes);a==="requested-upgrade"?c("promiseDone")(E(),function(){return j("workerUpgraded").then(function(){return d("MAWWorkerOnClose").success("workerUpgraded")})["catch"](function(a){d("MAWWorkerOnClose").fail("workerUpgradeFailed",a);throw a})}):n()?c("promiseDone")(E(),function(){if(i){t(!0);c("FBLogger")("messenger_web").warn("Tab displays soft refresh. Flow: %s",g);d("MAWInit").MAWInit.logPoint(g+"_soft_refresh");d("MAWMIC").addPoint(g+"_soft_refresh");c("MAWClientConsistencyRefresh")("maw_request_refresh");d("MAWWorkerOnClose").success("softRefresh");return}if(g!=="logout")return j(g+"_worker_terminated").then(function(){return d("MAWWorkerOnClose").success(g+"_worker_terminated")})["catch"](function(a){d("MAWInit").MAWInit.fail("worker_restart_failed",a),d("MAWWorkerOnClose").fail("workerUpgradeFailed",a),d("MAWWaitForBackendSetup").rejectBackendSetup(a)});else d("MAWWorkerOnClose").success("skip_logout")}):d("MAWWorkerOnClose").success("skip_workerLifeCycleCrossTabsDisabledGK")});var p=(yield d("MAWWebWorkerSingleton").createWorkerIfNone(h)),s=p.worker;p=p.workerID;d("MAWWaitForBackendSetup").setCurrentWorker(p);p=new(c("Deferred"))();r=p.getPromise();(h==="bridgeRecovery"||h==="backendSetupFailure")&&c("QPLUserFlow").addPoint(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,"create_worker_end");var v=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();o.LOG(m(),h,v);v&&s.addEventListener("message",function(a){var b;typeof a.data==="object"&&((b=a.data)==null?void 0:b.type)==="sw-shutdown"&&typeof a.data.response==="object"&&((b=a.data.response)==null?void 0:b.reason)==="maw-request-refresh"&&c("MAWClientConsistencyRefresh")("maw_request_refresh")});var x=new(d("MAWCommonSetupWorker").BridgeAdapter)(s,q);yield e(x);p.resolve(x);o.LOG(l());d("MAWMIC").addPoint(h+"_connect_to_backend");yield d("MAWInit").MAWInit.measurePerformance(h+"-init_backend",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=function(){return d("MAWCommonSetupWorker").initWorker(x,a,j,f,h)};b=v?yield b():yield x.fullyConnected.then(b);d("MAWWaitForBackendSetup").resolveBackendSetup(b);o.LOG(k())}));return d("MAWWaitForBackendSetup").waitForBackendSetup("setup-worker")});return x.apply(this,arguments)}function a(a,b,e,f,g,h){var i=w(a,b,e,f,g,h);v(g)&&c("promiseDone")(d("MAWWaitForBackendSetup").waitForBackendSetup("init bridge recovery observer").then(function(){d("MAWBridgeObserver").initUnackedMessagesObserver({onConnectToExistingWorker:e,onTerminateWorker:f,onWorkerConnect:b,updateWorkerState:h,vaultMaterials:a}),d("MAWWorkerWatchdog").startWatchdog()}));return i}function e(){return r}function y(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){c("FBLogger")("messenger_web").info("Terminating dedicated worker: %s. Bridge Promise: %s",a,!!r);if(!r){o.LOG(j());return!1}o.LOG(i(),a);yield E();return!0});return z.apply(this,arguments)}function f(){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield y("terminateWorkerPermanently"),t(!0)});return A.apply(this,arguments)}function B(a,e){var f=c("gkx")("7313");return f?d("SharedWorkerV2ResourceExperimental").terminateSharedWorker(b("cr:6600"),a?"maw-request-refresh":(f=e)!=null?f:"unknown"):d("SharedWorkerBundleResource").terminateSharedWorker(b("cr:6600"),null,a?"maw-request-refresh":(f=e)!=null?f:"unknown")}function C(a){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();if(b){c("FBLogger")("messenger_web").info("Terminating shared worker: %s",a);b=(yield B(!1,a).then(function(){return!0},function(){return!1}));o.LOG(h(),b);n()||(yield E())}else yield y(a)});return D.apply(this,arguments)}function E(){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;c("FBLogger")("messenger_web").info("Updating worker state on termination");(a=(yield r))==null?void 0:a.close();r=null;c("gkx")("2215")&&d("MAWWaitForBackendSetup").resetBackendSetup();d("MAWCrossWorkerPortal").killPortalWhenWorkerTerminating();d("MAWWebWorkerSingleton").resetWorkerCreation()});return F.apply(this,arguments)}function G(a){if(a==="MAWEARKeychainDecryptionError"||d("MAWUnrecoverableDbErrors").isUnrecoverableDbErrorByName(a))return!0;return a==="update-required-fbid_change"||a==="update-required-vault_materials_change"?!0:!1}g.setPreventWorkerRestart=t;g.getOrSetupWorker=a;g.waitForWorkerSetup=e;g.terminateDedicatedWorker=y;g.terminateWorkerPermanently=f;g.killSharedWorker=B;g.terminateWorker=C}),98);
__d("MAWWorkerReboot",["FBLogger","MAWBridgeObserver","MAWSetupWorker","MAWWaitForBackendSetup","ODS","Promise","QPLUserFlow","pageID","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){(i||(i=d("ODS"))).bumpEntityKey(3185,"armadillo_shared_worker_reboot","shared_worker_reboot_"+a)}var k=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),l=function(a){switch(a){case"bridge_recovery":return"bridgeRecovery";case"backend_setup_failure":return"backendSetupFailure"}};function a(a,e,f,g,i,m){c("QPLUserFlow").start(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,{annotations:{bool:{isSharedWorker:k},string:{trigger:i,workerInitPageID:c("pageID")}}});c("FBLogger")("messenger_web").info("Rebooting worker started.");j("start");d("MAWWaitForBackendSetup").resetBackendSetup();var n=l(i);c("QPLUserFlow").addPoint(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,"terminate_worker_start");return new(h||(h=b("Promise")))(function(b,h){return d("MAWSetupWorker").terminateWorker(n).then(function(){c("QPLUserFlow").addPoint(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,"terminate_worker_end");c("FBLogger")("messenger_web").info("Reboot process killed existing worker successfully.");return d("MAWSetupWorker").getOrSetupWorker(a,e,f,g,n,m).then(function(a){c("FBLogger")("messenger_web").info("Rebooting worker success. Reason for reboot: %s",n),j("success"),c("QPLUserFlow").endSuccess(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL),c("promiseDone")(e(a)),b()})})["catch"](function(a){c("FBLogger")("messenger_web").info("Rebooting worker failed. Error message: %s",a.message),j("fail"),c("QPLUserFlow").endFailure(d("MAWBridgeObserver").BAD_STATE_RECOVERY_QPL,a.message),d("MAWWaitForBackendSetup").rejectBackendSetup(a),h(a)})})}g.rebootWorker=a}),98);
__d("MAWBridgeObserver",["FBLogger","MAWWaitForBackendSetup","MAWWorkerReboot","promiseDone","qex","qpl"],(function(a,b,c,d,e,f,g){"use strict";a=c("qpl")._(1056840252,"808");var h=5,i=[],j=!1,k,l=function(){i=[]};b=function(a){if(!o())return;if(d("MAWWaitForBackendSetup").isBackendSetupInProgress()){l();return}if(n().length>=h&&!d("MAWWaitForBackendSetup").isBackendSetupInProgress()){c("FBLogger")("messenger_web").info("Minimum threshold of unacked messages reached: %s. Unacked messages: %s",h,JSON.stringify(n()));var b=c("qex")._("440"),e=c("qex")._("468")||h;b===!0&&n().length>=e?(c("FBLogger")("messenger_web").info("QE threshold of unacked messages reached: %s. Unacked messages: %s",h,JSON.stringify(n())),l(),c("promiseDone")(m())):(c("FBLogger")("messenger_web").info("Bridge recovery attempt skipped. Reason for skipped: maw_bridge_recovery_v2_enabled: %s, maw_bridge_recovery_threshold: %s",b,e),i.push(a))}else i.push(a)};var m=function(){c("FBLogger")("messenger_web").info("Starting bridge recovery attempt.");return d("MAWWorkerReboot").rebootWorker(k.vaultMaterials,k.onWorkerConnect,k.onConnectToExistingWorker,k.onTerminateWorker,"bridge_recovery",k.updateWorkerState).then(function(){c("FBLogger")("messenger_web").info("Bridge recovery attempt successful. Worker has restarted.")},function(a){c("FBLogger")("messenger_web").info("Bridge recovery attempt failed. Worker has failed to restart. Error: %s",a.message);throw a})};e=function(a){j=!0,k=a};var n=function(){return i},o=function(){return j};f=function(){return k};g.BAD_STATE_RECOVERY_QPL=a;g.MIN_UNACKED_EVENTS_THRESHOLD=h;g.resetUnackedMessages=l;g.notifyUnackedEvent=b;g.attemptRecovery=m;g.initUnackedMessagesObserver=e;g.getUnackedMessages=n;g.getIsObserverActive=o;g.getProps=f}),98);
__d("MAWGetDBVersionForTest",["justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(!c("justknobx")._("1495"))return;var a=new URL(document.location.href);a=a.searchParams.get("db_version");if(a==null)return;if(a==="current"||a==="latest")return a;a=parseInt(a,10);if(Number.isInteger(a))return Number(a)}g.getDbVersionForTest=a}),98);
__d("WADevToolMessageChannel",[],(function(a,b,c,d,e,f){"use strict";var g=new MessageChannel(),h;a=function(){g=new MessageChannel();h(g);return g};b=function(){return g};c=function(a){h=a,h(g)};f.createNewChannel=a;f.getMostRecentChannel=b;f.onCreateNewChannel=c}),66);
__d("MAWCommonSetupWorker",["Deferred","MAWCurrentUser","MAWGetDBVersionForTest","MAWInit","MAWMIC","MAWSetupWorker","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MessengerWebInitData","Promise","WADevToolMessageChannel","WALogger","WorkerClient","WorkerMessagePort","err","gkx","pageID","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Terminating worker and rebooting..."]);i=function(){return a};return a}var j=c("gkx")("3282");e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var e;e=a.call(this,b,c)||this;e.onmessage=null;e.$BridgeAdapter$p_1=b;d("WorkerClient").init(babelHelpers.assertThisInitialized(e));e.onUnhandledMessage.add(function(a){e.onmessage&&e.onmessage({data:a})});e.addMessageListener("worker-setup",function(a){a.status==="worker-ready"&&d("MAWInit").MAWInit.addBoolAnnotation("workerReadyReceived",!0)});return e}var c=b.prototype;c.getBridgePort=function(){return this};return b}(d("WorkerMessagePort").WorkerSyncedMessagePort);function a(a,e,f,g,j){var l=d("MAWWaitForBackendSetup").getCurrentWorkerID(),m=new(c("Deferred"))();a.addMessageListener("worker-setup",function(e){if(e.setupHash!==c("pageID"))return;if(e.status==="success")m.resolve(a.getBridgePort());else if(e.status==="failure"){var k;m.reject(c("err")((k=e.msg)!=null?k:"Error setting up worker"))}else if(e.status==="already-setup")if(e.action==="no-action"){m.resolve(a.getBridgePort());g();d("MAWInit").MAWInit.logPoint(j+"_backend_already_setup");d("MAWMIC").addPoint(j+"_backend_already_setup");return}else if(e.action==="reboot-required"){d("WALogger").DEV(i());d("MAWMIC").addPoint(j+"_worker_rebooting");d("MAWInit").MAWInit.logPoint(j+"_worker_rebooting");d("MAWInit").MAWInit.addStringAnnotation("workerRebootReason",(k=e==null?void 0:e.reason)!=null?k:"none");d("MAWMIC").addStringAnnotation("workerRebootReason",(k=e==null?void 0:e.reason)!=null?k:"none");k=d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?(h||(h=b("Promise"))).resolve(d("MAWWaitForBackendSetup").resetCurrentWorkerWithId(l)):d("MAWSetupWorker").terminateDedicatedWorker("reboot required");return k.then(function(){return f("rebootRequired").then(function(a){return m.resolve(a)})["catch"](function(a){return m.reject(a)})})}else throw c("err")("Invalid action for worker-setup:already-setup: "+e.action);else{d("MAWInit").MAWInit.addBoolAnnotation("invalidSetupMessageReceived",!0);throw c("err")("Invalid message for worker")}});a.addMessageListener("worker-setup-ack",function(a){if(a.setupHash!==c("pageID"))return;d("MAWInit").MAWInit.logPoint(j+"_backend_setup_ack");d("MAWMIC").addPoint(j+"_backend_setup_ack");a=(a=a.backendState)!=null?a:"none";d("MAWInit").MAWInit.addStringAnnotation("backendAckState",a);d("MAWMIC").addStringAnnotation("backendAckState",a)});k(a,e);c("promiseDone")(d("MAWWebWorkerSingleton").doesWorkerExist(),function(a){return d("MAWInit").MAWInit.addBoolAnnotation("workerExistsOnSetup",a)});c("promiseDone")(d("MAWWebWorkerSingleton").getWorkerHealthStatus(),function(a){return d("MAWInit").MAWInit.addStringAnnotation("workerHealthStatus",a.tag)});return m.getPromise()}function k(a,b){b={content:{createdAt:c("MessengerWebInitData").createdAt,fbId:d("MAWCurrentUser").getID(),sessionId:c("MessengerWebInitData").sessionId,testDbVersion:d("MAWGetDBVersionForTest").getDbVersionForTest(),userKeyBase:c("MessengerWebInitData").userKeyBase,vaultMaterials:b},setupHash:c("pageID"),type:"worker-setup"};if(j){d("MAWInit").MAWInit.addBoolAnnotation("devToolsEnabled",!0);var e=d("WADevToolMessageChannel").createNewChannel();b.content.devToolMessageChannelPort2=e.port2;a.postMessage(b,[e.port2])}else a.postMessage(b)}g.BridgeAdapter=e;g.initWorker=a}),98);
__d("MAWBridgeUpdateDYIStatusV2",["EncryptedBackupdDYIFileSaver","EncryptedBackupsDYIFileUtils","EncryptedBackupsDYITypes","FBLogger","QPLUserFlow","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){d("EncryptedBackupdDYIFileSaver").saveFile(a,b),window.setTimeout(function(){c("promiseDone")(e())},1e3)});return i.apply(this,arguments)}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.qplEvent,f=a.qplInstanceKeyE2E;a=a.status;var g=c("FBLogger")("[labyrinth_web][dyi]");if(a===d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Completed)try{if(navigator.storage==null)throw g.mustfixThrow("Storage management API is not supported. Please try one of the supported browsers.");var i=d("EncryptedBackupsDYIFileUtils").DyiArchiveFilename,j=(yield d("EncryptedBackupsDYIFileUtils").getRootFolderHandle()),k=(yield d("EncryptedBackupsDYIFileUtils").readFile(j,i));yield h(i,k,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield j.removeEntry(i)}));g.info("Saving file with filename ",i);e!=null&&f!=null&&c("QPLUserFlow").endSuccess(e,{instanceKey:f});g.info("DYI Complete")}catch(a){g.mustfix("Failed to download the DYI archive: %s",a);e!=null&&f!=null&&c("QPLUserFlow").endFailure(e,a.message,{instanceKey:f});return d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed}a===d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed&&(e!=null&&f!=null&&c("QPLUserFlow").endFailure(e,"Unknown error",{instanceKey:f}));return a});return j.apply(this,arguments)}g.call=a}),98);
__d("MAWMainThreadLogger",["CurrentMessengerUser","FBLogger","MAWAppVersion","MAWConsoleLogger","MAWDeleteOldLogsFromDisk","MAWLeakDetection","MAWLoggingSwitches","MAWSaveLogToDisk","Promise","ServerJsRuntimeEnvironment","WADevToolsBridge","WAJids","WATagsLogger","asyncToGeneratorRuntime","err","getErrorSafe","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!1;function a(){i=!1}function e(){i||(i=!0,d("WATagsLogger").initializeWaLogger(v))}var j=function(){return c("FBLogger")("messenger_web")};function k(a,b){return b.length>0?d("MAWSaveLogToDisk").joinTags(b)+" "+a:a}function l(a,b,e){if(d("ServerJsRuntimeEnvironment").isRunningServerJsRuntime())return;var f=Date.now();c("gkx")("3282")&&d("WADevToolsBridge").getDevToolBridge().fireAndForget("devtool","logLine",{logLevel:a,logString:k(b,e)},!0);if(!d("MAWLoggingSwitches").removeLoggingFromBridge)return;b=b.replace(/\n/g," ");if(a==="debug"||typeof b!=="string")return;d("MAWSaveLogToDisk").saveLogEntry("browser",{args:b,date:f,event:d("MAWSaveLogToDisk").joinTags(e,"[unknown]"),level:a})}function m(a,b){a=n(a);a!=null&&l("log",a,b)}function n(a){if(!d("CurrentMessengerUser").isEmployee()&&!d("CurrentMessengerUser").isTestUser())return;a=d("WAJids").maybeSanitizeLogLineText(a);a=d("MAWLeakDetection").maybeReplaceVaultedString(a);return a}function f(a,b){a=d("WAJids").maybeSanitizeLogLineText(a);a=d("MAWLeakDetection").maybeReplaceVaultedString(a);l("log",a,b)}function o(a,b){a=d("WAJids").maybeSanitizeLogLineText(a);a=d("MAWLeakDetection").maybeReplaceVaultedString(a);l("log",a,b)}function p(a,b){a=d("WAJids").maybeSanitizeLogLineText(a);a=d("MAWLeakDetection").maybeReplaceVaultedString(a);j().warn(a);l("warn",a,b)}function q(a,b,d,e,f,g){d=c("err")(d);d.stack=e;c("promiseDone")(t(a,b,d,f,g))}function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){a=d("MAWLeakDetection").maybeReplaceVaultedString(d("WAJids").maybeSanitizeLogLineText(a));c=d("MAWLeakDetection").maybeReplaceVaultedString(d("WAJids").maybeSanitizeLogLineText(c));var f=d("MAWLoggingSwitches").removeLoggingFromBridge?d("MAWSaveLogToDisk").getLastNEntries(e):(h||(h=b("Promise"))).resolve([]);e=e===0?[]:[].concat((yield f).map(function(a){return a.args}));return{errorLogString:c+" [Caught in "+a+"]",logs:[].concat(e),sanitizedMessage:c}});return s.apply(this,arguments)}function t(a,b,c,d,e){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h,i=d("MAWLeakDetection").maybeReplaceVaultedString(d("WAJids").maybeSanitizeLogLineText(a));h=(h=e)!=null?h:c("err")(i);f=(i=f)!=null?i:e==null?2:0;e=(i=g)!=null?i:0;g=(yield r(k(a,b),h.message,e));i=g.errorLogString;a=g.logs;e=g.sanitizedMessage;g=c("getErrorSafe")(h);try{h.message=e}catch(a){g=c("err")(e,h.fileName,h.lineNumber)}f!==0&&(g.framesToPop=f);(h=j())==null?void 0:(f=h.addMetadata("MESSENGER_E2EE_WEB","APP_VERSION",d("MAWAppVersion").getVersionNumber()).catching(g)).mustfix.apply(f,[e].concat(a));l("error",i,b)});return u.apply(this,arguments)}var v={count:function(a,b){d("MAWConsoleLogger").logToConsole("count",a,b)},debug:function(a,b){d("MAWConsoleLogger").logToConsole("log",a,b)},devConsole:function(a,b,c){for(var e=arguments.length,f=new Array(e>3?e-3:0),g=3;g<e;g++)f[g-3]=arguments[g];switch(a){case"COUNT":d("MAWConsoleLogger").logToConsole.apply(void 0,["count",b,c].concat(f));break;case"DEV":d("MAWConsoleLogger").logToConsole.apply(void 0,["log",b,c].concat(f));break;case"DEV_XMPP":d("MAWConsoleLogger").logToConsole.apply(void 0,["log",b,c].concat(f));break;case"LOG":d("MAWConsoleLogger").logToConsole.apply(void 0,["info",b,c].concat(f));break;case"WARN":d("MAWConsoleLogger").logToConsole.apply(void 0,["warn",b,c].concat(f));break;case"ERROR":d("MAWConsoleLogger").logToConsole.apply(void 0,["error",b,c].concat(f));break;case"CATCHING":d("MAWConsoleLogger").logToConsole.apply(void 0,["error",b,c].concat(f));break}},error:function(a,b,e){c("promiseDone")(t(a,b,e)),d("MAWConsoleLogger").logToConsole("error",a,b)},info:function(a,b){o(a,b),d("MAWConsoleLogger").logToConsole("info",a,b)},logRestricted:function(a,b){m(a,b),d("MAWConsoleLogger").logToConsole("log",a,b)},warn:function(a,b){p(a,b),d("MAWConsoleLogger").logToConsole("warn",a,b)}};function w(){return!d("MAWLoggingSwitches").removeLoggingFromBridge?(h||(h=b("Promise"))).resolve([]):d("MAWSaveLogToDisk").getEntries()}function x(){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("MAWLoggingSwitches").removeLoggingFromBridge)return;yield d("MAWDeleteOldLogsFromDisk").clearLogs()});return y.apply(this,arguments)}function z(a){return new Date(typeof a==="string"?parseInt(a,10):a).toISOString().replace("T"," ").replace("Z","")}function A(a){return a.map(function(a){try{var b=z(a.date);return[b,a.level,a.category,a.event,a.args].join(" | ")}catch(a){return[z(Date.now()),"error","LOGGER","Error formatting log: "+((a==null?void 0:a.message)||"")].join(" | ")}}).filter(Boolean).join("\n")}g.__testClearLoggerSetup=a;g.setupMainWaLogger=e;g.logToHistory=l;g.logRestricted=m;g.count=f;g.info=o;g.warn=p;g.logError=q;g.getEntries=w;g.clearEntries=x;g.formatEntries=A}),98);
__d("MAWSetupBridgeOfflineConsumer",["InteractionTracingMetrics","MAWBridgeInitOfflineQueueSyncCompleteHandler","MAWMIC","MAWOfflineQueueStatus","MAWSharedProtocolQueueConst","MWChatInteraction","WAMediaWasmWorkerClient","WATagsLogger","asyncToGeneratorRuntime","gkx","interaction-tracing","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats failed: expected: ",", processed: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats end: expected: ",", processed: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats: expected: ",", processed: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",""]);k=function(){return a};return a}var l=d("WATagsLogger").TAGS(["ServerRPC","OfflineConsumer"]),m="has_pending_or_inprogress_oq_threads";function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a;d("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("mp4RepairMux");c("gkx")("12220")&&d("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode");return d("MAWBridgeInitOfflineQueueSyncCompleteHandler").call()});return o.apply(this,arguments)}function p(a){d("MAWMIC").addIntAnnotation("offlineQueueSize",a);var b=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);b!=null&&c("InteractionTracingMetrics").addAnnotationInt(b,"offlineQueueSize",a)}function q(a,b){var e=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);e!=null&&c("InteractionTracingMetrics").addSubspan(e,"offline_queue","LONGTASK",a,b,{})}function r(){c("justknobx")._("3496")&&c("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(a){a.addMarkerPoint("offline_queue_start","AppTiming"),a.addAnnotationBoolean(m,!0)})}function s(){c("justknobx")._("3496")&&c("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(a){a.addMarkerPoint("offline_queue_end","AppTiming"),a.addAnnotationBoolean(m,!1)})}function a(a,b){return function(e){var f=e.chatJidStatus,g=e.status,m=e.timestamp,o=e.totalExpectedCount,t=e.totalProcessedCount;switch(g){case d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing:r();l.LOG(k(),o);p(o);b({tag:"InitOfflineQueueSyncStart",value:o});d("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(f,d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing);d("MAWMIC").addPoint("process_offline_queue_start",m);d("MAWOfflineQueueStatus").resetOfflineQueueState();return;case d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Processing:l.LOG(j(),o,t);b({tag:"InitOfflineQueueConsumerSyncProgress",value:{chatJidStatus:f,processed:t}});d("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(f,d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Processing);return;case d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete:l.LOG(i(),o,t);e.startTime!=null&&q(e.startTime,m);s();b({tag:"InitOfflineQueueSyncComplete",value:f});c("promiseDone")(n(a));d("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(f,d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete);d("MAWMIC").addPoint("process_offline_queue_end",m);d("MAWOfflineQueueStatus").markOfflineQueueComplete();return;case d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed:l.LOG(h(),o,t);d("MAWMIC").addPoint("process_offline_queue_failed",m);b({tag:"InitOfflineQueueSyncComplete",value:void 0});c("promiseDone")(n(a));d("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(f,d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed);d("MAWOfflineQueueStatus").markOfflineQueueComplete();return}}}g["default"]=a}),98);
__d("MessageThreadEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5034");b=d("FalcoLoggerInternal").create("message_thread_events",a);e=b;g["default"]=e}),98);
__d("PolarisViewerSettingsContextProviderStub.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){a=a.children;return a}g["default"]=a}),98);
__d("ReverbWriteFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5829");b=d("FalcoLoggerInternal").create("reverb_write_failure",a);e=b;g["default"]=e}),98);
__d("ReverbWriteSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5831");b=d("FalcoLoggerInternal").create("reverb_write_success",a);e=b;g["default"]=e}),98);
__d("useMWXEntryPointDialog",["cr:5835","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a,c,d,e,f){d===void 0&&(d="button");return b("cr:5835")(a,c,d,e,f)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("EntMessageReplyType",[],(function(a,b,c,d,e,f){a=Object.freeze({REGULAR:0,BUMP:1});f["default"]=a}),66);
__d("IWAAPI",["WABridge"],(function(a,b,c,d,e,f,g){"use strict";b=1;function a(a){return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];return d("WABridge").getBridge().sendAndReceive("backend","waapi",{type:a,args:c})}}g.version=b;g.makeBridgedApi=a}),98);
__d("LSCoreClientFolderType",[],(function(a,b,c,d,e,f){a=Object.freeze({INBOX:0,PENDING:1,OTHER:2,SPAM:3,ARCHIVED:4,HIDDEN:5,MARKETPLACE:12,RESTRICTED:15,INTEROP:19});f["default"]=a}),66);
__d("LSCreateE2EEMetadataThread",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][createE2EEMetadataThread] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[19]=new c.Map(),d[19].set("error_msg","Expected a nonempty query result"),d[19].set("code",c.i64.cast([0,3])),d[19].set("src_line","MEBClientStateUtils.php:244 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[20]=c.createArray(),d[21]=(d[20].push(d[19]),d[20]),e=[void 0,d[20]],d[2]=e[0],d[3]=e[1],e):(b=a.item,d[19]=new c.Map(),d[19].set("backup_id",b.backupId),d[19].set("device_public_key_blob",b.devicePublicKeyBlob),d[19].set("device_private_key_blob",b.devicePrivateKeyBlob),d[19].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[19].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[19].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[19].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[19].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[19].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[19].set("orf_client_state_v2_blob",void 0),d[19].set("orf_v2_authority_level",void 0),d[19].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[19].set("device_id",b.deviceId),d[19].set("backup_tenancy",b.backupTenancy),d[19].set("encryption_version",b.encryptionVersion),d[19].set("revision_version",b.revisionVersion),d[19].set("initialize_restore_result",void 0),d[19].set("authority_level",b.authorityLevel),e=[d[19],void 0],d[2]=e[0],d[3]=e[1],e)})},function(a){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(a){return d[19]=d[6].get("backup_id"),d[20]=d[6].get("device_public_key_blob"),d[21]=d[6].get("device_private_key_blob"),d[22]=d[6].get("epoch_storage_public_key_blob"),d[23]=d[6].get("epoch_storage_private_key_blob"),d[24]=d[6].get("epoch_auth_public_key_blob"),d[25]=d[6].get("epoch_auth_private_key_blob"),d[26]=d[6].get("mailbox_root_key_blob"),d[27]=d[6].get("ocmf_client_state_blob"),d[28]=d[6].get("orf_client_state_v2_blob"),d[29]=d[6].get("orf_v2_authority_level"),d[30]=d[6].get("oblivious_validation_token_blob"),d[31]=d[6].get("device_id"),d[32]=d[6].get("backup_tenancy"),d[33]=d[6].get("encryption_version"),d[34]=d[6].get("revision_version"),d[35]=d[6].get("initialize_restore_result"),d[36]=d[6].get("authority_level"),c.i64.neq(d[31],void 0)?c.sequence([function(a){return d[38]=void 0,c.i64.neq(d[38],void 0)?c.resolve(d[39]=d[38]):c.sequence([function(a){return d[51]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[52]=a[0],a})},function(a){return d[52]?d[61]=(d[51].push(c.i64.cast([0,0])),d[51]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[53]?d[61]=(d[51].push(c.i64.cast([0,2])),d[51]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[54]=a[0],a})},function(a){return d[54]?d[61]=(d[51].push(c.i64.cast([0,3])),d[51]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[55]=a[0],a})},function(a){return d[55]?d[61]=(d[51].push(c.i64.cast([0,4])),d[51]):0,d[56]=c.createArray(),d[57]=c.i64.of_int32(d[51].length),c.i64.gt(d[57],c.i64.cast([0,0]))?c.loopAsync(d[57],function(a){return d[61]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[51],d[61]).then(function(a){return a=a,d[62]=a[0],d[63]=a[1],a})},function(a){return d[64]=(d[56].push(d[62]),d[56])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[61]=c.createArray(),d[62]=c.i64.of_int32(d[56].length),c.i64.gt(d[62],c.i64.cast([0,0]))?c.loopAsync(d[62],function(a){return d[64]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[56],d[64]).then(function(a){return a=a,d[65]=a[0],d[66]=a[1],a})},function(a){return d[67]=(d[61].push(c.i64.to_string(d[65])),d[61])}])}):c.resolve()},function(a){return d[63]=d[61].join(","),d[58]=d[63]}])},function(a){return d[56].some(function(a){return c.i64.eq(d[33],a)})?d[59]=d[33]:d[59]=void 0,c.i64.neq(d[59],void 0)?d[60]=d[59]:d[60]=void 0,d[39]=d[60]}])},function(a){return c.i64.neq(d[39],void 0)?d[40]=d[39]:d[40]=c.i64.cast([0,0]),c.i64.neq(d[32],void 0)?d[41]=d[32]:d[41]=c.i64.cast([0,1]),c.nativeOperation(b("LSBase64Encode.nop"),d[27]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[26]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[44]=new c.Map(),d[44].set("ocmf_client_state_blob",d[42]==null?"":d[42]),d[44].set("mailbox_root_key",d[43]==null?"":d[43]),d[45]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[51]=(d[45].push(a.epochId),d[45])})},function(a){return d[49]="Queried locally available epochs. Count: ",d[46]=c.i64.of_int32(d[45].length),d[50]=c.i64.to_string(d[46]),d[47]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[47],d[49],d[47],d[50]].join("")),c.resolve()},function(a){return d[48]=new c.Map(),d[48].set("device_id",d[31]),d[48].set("raw_tokens",d[44]),d[48].set("locally_available_epochs",d[45]),d[37]=d[48]}]):c.resolve(d[37]=void 0)},function(a){return d[7]=d[37]}]):c.resolve((d[19]=d[5].get("errors"),d[20]=d[5].get("errors"),d[7]=void 0))},function(e){return d[8]=c.i64.random(),d[9]=c.i64.to_string(d[8]),d[10]=new c.Map(),d[10].set("wa_jid",a[0]),d[10].set("offline_thread_key",a[1]),d[10].set("thread_type",a[2]),d[10].set("folder_type",a[3]),d[10].set("bump_timestamp_ms",a[4]),d[10].set("tam_thread_subtype",c.i64.cast([0,0])),d[10].set("created_by_local_device",a[5]),d[10].set("device_context",d[7]),d[10].set("qpl_instance_key",d[9]),d[11]=d[10].get("offline_thread_key"),d[12]=c.toJSON(d[10]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[11]),c.i64.cast([0,388]),d[12],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[13]=c.i64.of_float(Date.now()),d[14]=c.i64.random(),d[16]="Finishing execution. Execution time: ",d[17]=c.i64.to_string(c.i64.sub(d[13],d[0])),d[18]=" ms",d[15]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][createE2EEMetadataThread] ",d[15],d[16],d[15],d[17],d[15],d[18]].join("")),c.i64.eq(c.i64.mod_(d[14],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[19]=",",d[20]=c.createArray(),void 0!==void 0?d[21]=(d[20].push(void 0),d[20]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"createE2EEMetadataThread",[d[16],d[19],d[17],d[19],d[18]].join(""),d[20],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxCreateE2EEMetadataThreadStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSCreateE2EEMetadataThreadStoredProcedure",["LSCreateE2EEMetadataThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCreateE2EEMetadataThread"),e.waJid,e.offlineThreadKey,e.threadType,e.folderType,e.bumpTimestampMs,e.createdByLocalDevice);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSCreateOfflineThreadingIDStoredProcedure",["LSCreateOfflineThreadingID","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCreateOfflineThreadingID"),e.timestampMs);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSGroupParticipantJoinState",[],(function(a,b,c,d,e,f){a=Object.freeze({MEMBER:0,PENDING:1,INVITED:2});f["default"]=a}),66);
__d("LSInstagramE2EEEligibility",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,INELIGIBLE:0,ELIGIBLE:1,REQUIRED:2,DUAL_SEND_ELIGIBLE:3,GROUPS_ELIGIBLE:4});f["default"]=a}),66);
__d("LSMessageSearchType",[],(function(a,b,c,d,e,f){a=Object.freeze({THREAD:1,MESSAGE:2});f["default"]=a}),66);
__d("LSPlatformSyncSystemDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSPlatformSyncSystem").__setRef("LSPlatformSyncSystemDeferred");function a(){return h.load()}g["default"]=a}),98);
__d("LSRtcCallState",[],(function(a,b,c,d,e,f){a=Object.freeze({NO_ONGOING_CALL:0,AUDIO_GROUP_CALL:1,VIDEO_GROUP_CALL:2,VIDEO_1TO1_CALL:3,AUDIO_1TO1_CALL:4});f["default"]=a}),66);
__d("LSThreadPointQueryAndRestoreMessagesWithJID",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsEncryptionVersionSecure","LSIssueNewTask","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][ThreadPointQueryAndRestoreMessagesWithJID] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[19]=new c.Map(),d[19].set("error_msg","Expected a nonempty query result"),d[19].set("code",c.i64.cast([0,3])),d[19].set("src_line","MEBClientStateUtils.php:244 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[20]=c.createArray(),d[21]=(d[20].push(d[19]),d[20]),e=[void 0,d[20]],d[2]=e[0],d[3]=e[1],e):(b=a.item,d[19]=new c.Map(),d[19].set("backup_id",b.backupId),d[19].set("device_public_key_blob",b.devicePublicKeyBlob),d[19].set("device_private_key_blob",b.devicePrivateKeyBlob),d[19].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[19].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[19].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[19].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[19].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[19].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[19].set("orf_client_state_v2_blob",void 0),d[19].set("orf_v2_authority_level",void 0),d[19].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[19].set("device_id",b.deviceId),d[19].set("backup_tenancy",b.backupTenancy),d[19].set("encryption_version",b.encryptionVersion),d[19].set("revision_version",b.revisionVersion),d[19].set("initialize_restore_result",void 0),d[19].set("authority_level",b.authorityLevel),e=[d[19],void 0],d[2]=e[0],d[3]=e[1],e)})},function(a){return d[5]=new c.Map(),d[5].set("value",d[2]),d[5].set("errors",d[3]),d[6]=d[5].get("value"),d[6]!==void 0?c.sequence([function(a){return d[19]=d[6].get("backup_id"),d[20]=d[6].get("device_public_key_blob"),d[21]=d[6].get("device_private_key_blob"),d[22]=d[6].get("epoch_storage_public_key_blob"),d[23]=d[6].get("epoch_storage_private_key_blob"),d[24]=d[6].get("epoch_auth_public_key_blob"),d[25]=d[6].get("epoch_auth_private_key_blob"),d[26]=d[6].get("mailbox_root_key_blob"),d[27]=d[6].get("ocmf_client_state_blob"),d[28]=d[6].get("orf_client_state_v2_blob"),d[29]=d[6].get("orf_v2_authority_level"),d[30]=d[6].get("oblivious_validation_token_blob"),d[31]=d[6].get("device_id"),d[32]=d[6].get("backup_tenancy"),d[33]=d[6].get("encryption_version"),d[34]=d[6].get("revision_version"),d[35]=d[6].get("initialize_restore_result"),d[36]=d[6].get("authority_level"),c.i64.neq(d[31],void 0)?c.sequence([function(a){return d[38]=void 0,c.i64.neq(d[38],void 0)?c.resolve(d[39]=d[38]):c.sequence([function(a){return d[51]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[52]=a[0],a})},function(a){return d[52]?d[61]=(d[51].push(c.i64.cast([0,0])),d[51]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[53]?d[61]=(d[51].push(c.i64.cast([0,2])),d[51]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[54]=a[0],a})},function(a){return d[54]?d[61]=(d[51].push(c.i64.cast([0,3])),d[51]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[55]=a[0],a})},function(a){return d[55]?d[61]=(d[51].push(c.i64.cast([0,4])),d[51]):0,d[56]=c.createArray(),d[57]=c.i64.of_int32(d[51].length),c.i64.gt(d[57],c.i64.cast([0,0]))?c.loopAsync(d[57],function(a){return d[61]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[51],d[61]).then(function(a){return a=a,d[62]=a[0],d[63]=a[1],a})},function(a){return d[64]=(d[56].push(d[62]),d[56])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[61]=c.createArray(),d[62]=c.i64.of_int32(d[56].length),c.i64.gt(d[62],c.i64.cast([0,0]))?c.loopAsync(d[62],function(a){return d[64]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[56],d[64]).then(function(a){return a=a,d[65]=a[0],d[66]=a[1],a})},function(a){return d[67]=(d[61].push(c.i64.to_string(d[65])),d[61])}])}):c.resolve()},function(a){return d[63]=d[61].join(","),d[58]=d[63]}])},function(a){return d[56].some(function(a){return c.i64.eq(d[33],a)})?d[59]=d[33]:d[59]=void 0,c.i64.neq(d[59],void 0)?d[60]=d[59]:d[60]=void 0,d[39]=d[60]}])},function(a){return c.i64.neq(d[39],void 0)?d[40]=d[39]:d[40]=c.i64.cast([0,0]),c.i64.neq(d[32],void 0)?d[41]=d[32]:d[41]=c.i64.cast([0,1]),c.nativeOperation(b("LSBase64Encode.nop"),d[27]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[26]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[44]=new c.Map(),d[44].set("ocmf_client_state_blob",d[42]==null?"":d[42]),d[44].set("mailbox_root_key",d[43]==null?"":d[43]),d[45]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[51]=(d[45].push(a.epochId),d[45])})},function(a){return d[49]="Queried locally available epochs. Count: ",d[46]=c.i64.of_int32(d[45].length),d[50]=c.i64.to_string(d[46]),d[47]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[47],d[49],d[47],d[50]].join("")),c.resolve()},function(a){return d[48]=new c.Map(),d[48].set("device_id",d[31]),d[48].set("raw_tokens",d[44]),d[48].set("locally_available_epochs",d[45]),d[37]=d[48]}]):c.resolve(d[37]=void 0)},function(a){return d[7]=d[37]}]):c.resolve((d[19]=d[5].get("errors"),d[20]=d[5].get("errors"),d[7]=void 0))},function(e){return d[8]=c.i64.random(),d[9]=c.i64.to_string(d[8]),d[10]=new c.Map(),d[10].set("wa_jid",a[0]),d[10].set("tam_thread_subtype",c.i64.cast([0,0])),d[10].set("enable_logging_for_tpq",!1),d[10].set("device_context",d[7]),d[10].set("qpl_instance_key",d[9]),d[11]=d[10].get("wa_jid"),d[12]=c.toJSON(d[10]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[11]),c.i64.cast([0,556]),d[12],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[13]=c.i64.of_float(Date.now()),d[14]=c.i64.random(),d[16]="Finishing execution. Execution time: ",d[17]=c.i64.to_string(c.i64.sub(d[13],d[0])),d[18]=" ms",d[15]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][ThreadPointQueryAndRestoreMessagesWithJID] ",d[15],d[16],d[15],d[17],d[15],d[18]].join("")),c.i64.eq(c.i64.mod_(d[14],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[19]=",",d[20]=c.createArray(),void 0!==void 0?d[21]=(d[20].push(void 0),d[20]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"ThreadPointQueryAndRestoreMessagesWithJID",[d[16],d[19],d[17],d[19],d[18]].join(""),d[20],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure",["LSSynchronousPromise","LSThreadPointQueryAndRestoreMessagesWithJID","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSThreadPointQueryAndRestoreMessagesWithJID"),e.waJid);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWActThreadMapping",["I64","MAWMiActOnActThreadReadyQueue","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.authoritativeThreadKey,e=a.description,f=a.instanceKey,g=a.jid;a=a.optimisticThreadKey;f!=null&&d("MAWMiActOnActThreadReadyQueue").logOnFlushQueue(a,b,f,e);a!=null&&c("promiseDone")(d("MAWMiActOnActThreadReadyQueue").processQueueOnActThreadReady((h||(h=d("I64"))).of_string(a),g,e,"clientThreadKey"));b!=null&&c("promiseDone")(d("MAWMiActOnActThreadReadyQueue").processQueueOnActThreadReady((h||(h=d("I64"))).of_string(b),g,e,"authoritativeThreadKey"))}g.executePromisesBlockedOnActThreadMapping=a}),98);
__d("MAWCreateOptimisticThread",["I64","LSAuthorityLevel","LSCreateOfflineThreadingIDStoredProcedure","LSFactory","LSIntEnum","LSMailboxType","LSRtcCallState","MAWJids","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield c("LSCreateOfflineThreadingIDStoredProcedure")(c("LSFactory")(a),{timestampMs:(h||(h=d("I64"))).of_float(Date.now())}));a=a[0];return a});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e={authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),folderName:"inbox",lastReadWatermarkTimestampMs:(h||(h=d("I64"))).of_float(0),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),ongoingCallState:i.ofNumber(c("LSRtcCallState").NO_ONGOING_CALL),parentThreadKey:h.zero,threadKey:b,threadType:i.ofNumber(15)};yield a.threads.put(e);return b});return m.apply(this,arguments)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j(a));yield l(a,b);return b});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=d("MAWJids").convertChatJidToIntJid(b);return(a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(b))))==null?void 0:a.serverThreadKey});return q.apply(this,arguments)}function a(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=d("MAWJids").convertChatJidToIntJid(b);b=(yield p(a,b));if(b!=null)return b;b=(yield n(a));yield a.mi_act_mapping_table.add({clientThreadPk:c,jid:c,serverThreadKey:b});return b});return r.apply(this,arguments)}g.createOfflineThreadingId=j;g.createOptimisticThreadWithThreadKey=l;g.createOptimisticThread=n;g.getThreadKey=p;g.getOrCreateOptimisticThreadKey=a}),98);
__d("MessagingFolderTag",[],(function(a,b,c,d,e,f){a=Object.freeze({INBOX:"inbox",OTHER:"other",SPAM:"spam",PENDING:"pending",MONTAGE:"montage",HIDDEN:"hidden",LEGACY:"legacy",DISABLED:"disabled",PAGE_BACKGROUND:"page_background",PAGE_DONE:"page_done",BLOCKED:"blocked",COMMUNITY:"community",RESTRICTED:"restricted",BC_PARTNERSHIP:"bc_partnership",E2EE_CUTOVER:"e2ee_cutover",E2EE_CUTOVER_ARCHIVED:"e2ee_cutover_archived",E2EE_CUTOVER_PENDING:"e2ee_cutover_pending",E2EE_CUTOVER_OTHER:"e2ee_cutover_other",INTEROP:"interop",ARCHIVED:"archived",AI_ACTIVE:"ai_active",SALSA_RESTRICTED:"salsa_restricted",MESSENGER_MARKETING_MESSAGE:"messenger_marketing_message",SECRET_CONVERSATIONS:"secret_conversations",WEBCHAT_PLUGIN:"webchat_plugin",NFB_OVERFLOW:"nfb_overflow",UNKNOWN:""});f["default"]=a}),66);
__d("MAWFolderUtils",["I64","LSCoreClientFolderType","LSIntEnum","MAWFolderTypes","MessagingFolderTag","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){switch(a){case d("MAWFolderTypes").PENDING:return c("MessagingFolderTag").PENDING;case d("MAWFolderTypes").OTHER:return c("MessagingFolderTag").OTHER;case d("MAWFolderTypes").SPAM:return c("MessagingFolderTag").SPAM;case d("MAWFolderTypes").ARCHIVED:return c("MessagingFolderTag").UNKNOWN;default:return c("MessagingFolderTag").INBOX}}function b(a){switch(a){case d("MAWFolderTypes").PENDING:return(h||(h=d("LSIntEnum"))).ofNumber(-101);case d("MAWFolderTypes").OTHER:return(h||(h=d("LSIntEnum"))).ofNumber(-102);case d("MAWFolderTypes").SPAM:return(h||(h=d("LSIntEnum"))).ofNumber(-103);case d("MAWFolderTypes").ARCHIVED:return(h||(h=d("LSIntEnum"))).ofNumber(-110);default:return(h||(h=d("LSIntEnum"))).ofNumber(-100)}}function e(a){switch(a){case d("MAWFolderTypes").ARCHIVED:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSCoreClientFolderType").ARCHIVED);case d("MAWFolderTypes").INBOX:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSCoreClientFolderType").INBOX);case d("MAWFolderTypes").OTHER:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSCoreClientFolderType").SPAM);case d("MAWFolderTypes").PENDING:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSCoreClientFolderType").OTHER);case d("MAWFolderTypes").RESTRICTED:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSCoreClientFolderType").RESTRICTED);case d("MAWFolderTypes").SPAM:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSCoreClientFolderType").PENDING);default:a;throw c("err")("Unhandled folder ID: "+a)}}function f(a){switch(a){case(h||(h=d("LSIntEnum"))).ofNumber(-1):return(h||(h=d("LSIntEnum"))).ofNumber(-101);case(h||(h=d("LSIntEnum"))).ofNumber(-2):return(h||(h=d("LSIntEnum"))).ofNumber(-102);case(h||(h=d("LSIntEnum"))).ofNumber(-3):return(h||(h=d("LSIntEnum"))).ofNumber(-103);case(h||(h=d("LSIntEnum"))).ofNumber(-10):return(h||(h=d("LSIntEnum"))).ofNumber(-110);default:return(h||(h=d("LSIntEnum"))).ofNumber(-100)}}function j(a){switch(a){case"inbox":return d("MAWFolderTypes").FOLDER_ID.INBOX;case"pending":return d("MAWFolderTypes").FOLDER_ID.PENDING;case"spam":return d("MAWFolderTypes").FOLDER_ID.SPAM;case"archived":return d("MAWFolderTypes").FOLDER_ID.ARCHIVED;case"other":return d("MAWFolderTypes").FOLDER_ID.OTHER;case"restricted":return d("MAWFolderTypes").FOLDER_ID.RESTRICTED;default:return null}}function k(a){switch((i||(i=d("I64"))).to_int32(a)){case d("MAWFolderTypes").FOLDER_ID.INBOX:return 0;case d("MAWFolderTypes").FOLDER_ID.PENDING:return-1;case d("MAWFolderTypes").FOLDER_ID.SPAM:return-3;case d("MAWFolderTypes").FOLDER_ID.ARCHIVED:return-10;case d("MAWFolderTypes").FOLDER_ID.OTHER:return-2;default:return null}}g.getMessagingFolderTag=a;g.getClientSystemFolder=b;g.systemFolderToLSCoreClientFolder=e;g.systemFolderToClientSystemFolder=f;g.folderTagToFolderId=j;g.parentThreadKeyToLsSystemFolder=k}),98);
__d("MAWCreateOptimisticMiThreadForActThread",["DateConsts","FBLogger","I64","LSCoreClientFolderType","LSCreateE2EEMetadataThreadStoredProcedure","LSFactory","LSIntEnum","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWCreateOptimisticThread","MAWFolderUtils","MAWLoggerDeferred","MAWThreadMappingQPL","MAWThreadMappingState","MAWThreadUpdateMiddlewareGatingUtil","MAWTimeUtils","Promise","WATimeUtils","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occam] Creating e2ee metadata optimistic thread.\n  threadKey: ","\n  bumpTimestampMs: ",",\n  description: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occam] Notifying MI server about thread: int jid ",", state: ",". "]);l=function(){return a};return a}var m=(j||(j=d("I64"))).of_int32(c("LSCoreClientFolderType").INBOX);function n(a){if(a==null){c("FBLogger")("messenger_web").warn("[Occam] no folder ID was supplied to Occamadillo verify thread exists handler");return m}return d("MAWFolderUtils").systemFolderToLSCoreClientFolder(a)}function a(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=e.authoritativeThreadKey,i=e.clientThreadKey,k=e.description,l=e.folder,m=e.instanceKey,n=e.intJid,o=e.isGroup;e=e.lastActivityTs;var p=d("MAWThreadUpdateMiddlewareGatingUtil").isNewMiThreadCreationFlowEnabled("exposure_logging_enabled");m!=null&&d("MAWThreadMappingQPL").addAnnotations({bool:{isNewServerThreadCreationFlowEnabled:p}},m);if(p)i!=null&&(yield d("MAWThreadMappingState").markActThreadMappingAsCompleted(a,{intJid:n,threadKey:(j||(j=d("I64"))).of_string(i)},m),yield d("MAWThreadMappingQPL").measurePerformanceForNullableInstanceKey("thread_point_query_sproc",m,function(){return c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(a),{waJid:n})}));else{p=i!=null?(j||(j=d("I64"))).of_string(i):yield d("MAWCreateOptimisticThread").createOptimisticThread(a);yield (h||(h=b("Promise"))).all([yield q(a,{i64ClientThreadKey:p,intJid:n,mawThread:{authoritativeThreadKey:g,description:k,folder:l,instanceKey:m,isGroup:o,lastActivityTs:e},threadLifecycleState:f}),yield d("MAWThreadMappingState").markActThreadMappingAsCompleted(a,{intJid:n,threadKey:p},m)])}});return o.apply(this,arguments)}function p(a){a=d("MAWTimeUtils").millisTimeToTimestamp(a);return(j||(j=d("I64"))).equal(a,(j||(j=d("I64"))).zero)?d("MAWTimeUtils").millisTimeToTimestamp(d("WATimeUtils").millisTime()):a}function q(a,b){var e=b.i64ClientThreadKey,f=b.intJid,g=b.mawThread;b=b.threadLifecycleState;c("promiseDone")(d("MAWLoggerDeferred").LOG(l(),f,b==null?void 0:b.type));var h=c("LSFactory")(a),m=p(g.lastActivityTs),o=n(g.folder),q=g.isGroup?(i||(i=d("LSIntEnum"))).ofNumber(16):(i||(i=d("LSIntEnum"))).ofNumber(15);a=(j||(j=d("I64"))).to_string(e);var r=g.description;c("promiseDone")(d("MAWLoggerDeferred").LOG(k(),a,j.to_string(m),r));a=d("WATimeUtils").millisTime();var s=j.to_float(m);Math.abs(s-a)<d("DateConsts").MS_PER_SEC&&c("FBLogger")("messenger_web").warn("[GetOrCreateThread] bumpTimestampMs is too close to now. bumpTimestampMs: %s, lastActivityTs: %s, now: %s, description: %s, threadLifecycleState: %s, mawThread.authoritativeThreadKey is null: %s",s,g.lastActivityTs,a,r,b==null?void 0:b.type,g.authoritativeThreadKey==null?"true":"false");s=g.instanceKey;s!=null&&d("MAWThreadMappingQPL").pendingThreadCreationOnServer.set((j||(j=d("I64"))).to_string(f),s);return d("MAWThreadMappingQPL").measurePerformanceForNullableInstanceKey("create_e2ee_metadata_thread_sproc",s,function(){return c("LSCreateE2EEMetadataThreadStoredProcedure")(h,{bumpTimestampMs:m,createdByLocalDevice:null,folderType:o,offlineThreadKey:e,threadType:q,waJid:f})})}g.maybeUpdateMappingTableAndUpgradeOptimisticActThreadInMI=a;g.upgradeOptimisticActThreadInMI=q}),98);
__d("MAWThreadDefaults",["fbt","I64","LSBitOffset","LSIntEnum","qex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function k(){if(c("qex")._("327")===!0)return!0;else return c("qex")._("121")===!0}function a(a){if(k())return d("LSBitOffset").set((j||(j=d("LSIntEnum"))).ofNumber(42),a);else return a}function b(a){return d("LSBitOffset").set((j||(j=d("LSIntEnum"))).ofNumber(4),a)}e=d("LSBitOffset").set((j||(j=d("LSIntEnum"))).ofNumber(18),d("LSBitOffset").set(j.ofNumber(56),d("LSBitOffset").set(j.ofNumber(14),d("LSBitOffset").set(j.ofNumber(23),d("LSBitOffset").set(j.ofNumber(8),d("LSBitOffset").set(j.ofNumber(15),d("LSBitOffset").set(j.ofNumber(2),d("LSBitOffset").empty)))))));f=a(b(d("LSBitOffset").set(j.ofNumber(7),d("LSBitOffset").set(j.ofNumber(6),d("LSBitOffset").set(j.ofNumber(9),d("LSBitOffset").set(j.ofNumber(10),d("LSBitOffset").set(j.ofNumber(19),d("LSBitOffset").set(j.ofNumber(35),d("LSBitOffset").set(j.ofNumber(3),d("LSBitOffset").set(j.ofNumber(43),e))))))))));a=d("LSBitOffset").set(j.ofNumber(17),d("LSBitOffset").set(j.ofNumber(60),d("LSBitOffset").set(j.ofNumber(16),d("LSBitOffset").set(j.ofNumber(26),d("LSBitOffset").set(j.ofNumber(28),d("LSBitOffset").clear(j.ofNumber(27),f))))));b=d("LSBitOffset").set((i||(i=d("I64"))).sub(j.ofNumber(103),i.of_string("64")),d("LSBitOffset").set(i.sub(j.ofNumber(85),i.of_string("64")),d("LSBitOffset").set(i.sub(j.ofNumber(109),i.of_string("64")),d("LSBitOffset").set(i.sub(j.ofNumber(74),i.of_string("64")),d("LSBitOffset").set(i.sub(j.ofNumber(65),i.of_string("64")),d("LSBitOffset").set(i.sub(j.ofNumber(64),i.of_string("64")),d("LSBitOffset").set(i.sub(j.ofNumber(106),i.of_string("64")),d("LSBitOffset").empty)))))));e=h._(/*BTDS*/"__JHASH__9ZFn8zMzjpf__JHASH__").toString();h=d("LSBitOffset").set(i.sub(j.ofNumber(172),i.of_string("64")),d("LSBitOffset").set(i.sub(j.ofNumber(170),i.of_string("64")),d("LSBitOffset").empty));g.defaultThreadCapabilities=f;g.defaultGroupThreadCapabilities=a;g.defaultThreadCapabilities_2=b;g.nullstateDescriptionText1=e;g.defaultThreadCapabilities_3=h;g.defaultThreadCapabilities_4=d("LSBitOffset").empty;g.defaultThreadCapabilities_5=d("LSBitOffset").empty}),226);
__d("MAWBridgeOccamadilloVerifyThreadExistsHandler",["FBLogger","I64","LSAuthorityLevel","LSThreadBitOffset","MAWActThreadMapping","MAWBridgeFireAndForget","MAWCreateOptimisticMiThreadForActThread","MAWJids","MAWLoggerDeferred","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","MAWThreadDefaults","MAWThreadMappingQPL","MAWThreadMappingState","MAWTimeUtils","Promise","WATimeUtils","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occam] Thread loading complete: jid ",", threadKey ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occam] New authoritative thread: jid ",", threadKey: ","), state: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occam] Authoritative thread not found for clientThreadKey: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occam] Thread is missing in verify thread exists"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Last activity ts = 0 from MI for thread: ",", using local state ts: ",""]);n=function(){return a};return a}function o(a,b,c){a=a;(i||(i=d("I64"))).equal(a,(i||(i=d("I64"))).zero)&&(void d("MAWLoggerDeferred").WARN(n(),(i||(i=d("I64"))).to_string(c),i.to_string(b)),a=b);return a}var p=[105,17,25,24];function q(a,b){var c=p.filter(function(b){return d("LSThreadBitOffset").has(b,a)}),e=61,f=267,g=d("LSThreadBitOffset").has(e,a),h=d("LSThreadBitOffset").has(f,a);g&&c.push(e);h&&c.push(f);return d("LSThreadBitOffset").set(c,b?d("MAWThreadDefaults").defaultGroupThreadCapabilities:d("MAWThreadDefaults").defaultThreadCapabilities,d("MAWThreadDefaults").defaultThreadCapabilities_2,d("MAWThreadDefaults").defaultThreadCapabilities_3,d("MAWThreadDefaults").defaultThreadCapabilities_4,d("MAWThreadDefaults").defaultThreadCapabilities_5)}function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=(yield a.threads.get(c));if(f==null){void d("MAWLoggerDeferred").ERROR(m());return(h||(h=b("Promise"))).resolve()}var g=e.clientThreadKey!=null?(i||(i=d("I64"))).of_string(e.clientThreadKey):f.clientThreadKey,j=o(f.lastActivityTimestampMs,d("MAWTimeUtils").millisTimeToTimestamp(e.lastActivityTs),c);e=q(f,e.isGroup);return a.threads.upsert([c],babelHelpers["extends"]({},f,{capabilities:e[0],capabilities2:e[1],capabilities3:e[2],capabilities4:e[3],capabilities5:e[4],clientThreadKey:g,lastActivityTimestampMs:j}))});return s.apply(this,arguments)}function t(a,b,c,d){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){yield (h||(h=b("Promise"))).all([d("MAWThreadMappingState").markActThreadMappingAsCompleted(a,{intJid:e,threadKey:c},f.instanceKey),x(a,c,f)])});return u.apply(this,arguments)}function v(a,b,c){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){(i||(i=d("I64"))).equal(b,c)||(yield a.threads["delete"](c))});return w.apply(this,arguments)}function x(a,b,c){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=e.clientThreadKey,g=e.instanceKey,j=e.isGroup,k=e.lastActivityTs;yield d("MAWThreadMappingQPL").measurePerformanceForNullableInstanceKey("handle_existing_thread",g,function(){return(h||(h=b("Promise"))).all([r(a,c,{clientThreadKey:f,isGroup:j,lastActivityTs:k}),f!=null&&v(a,c,(i||(i=d("I64"))).of_string(f))])})});return y.apply(this,arguments)}function z(a,b,c){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield a.threads.get(b));f!=null&&(i||(i=d("I64"))).to_int32(f.authorityLevel)===c("LSAuthorityLevel").AUTHORITATIVE?yield x(a,b,e):e.instanceKey!=null&&d("MAWThreadMappingQPL").handleExistingThreadFail(e.instanceKey,f);f==null&&void d("MAWLoggerDeferred").LOG(l(),e.clientThreadKey)});return A.apply(this,arguments)}function B(a,b){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.authoritativeThreadKey,f=b.clientThreadKey,g=b.description,h=b.folder,l=b.instanceKey,m=b.isGroup,n=b.jid;b=b.lastActivityTs;var o=d("MAWJids").convertChatJidToIntJid(n),p=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByJidOrThreadKey(a,o,e,"MAWBridgeOccamadilloVerifyThreadExistsHandler"));l!=null&&d("MAWThreadMappingQPL").addAnnotations({string:{threadStateInOccamVTE:p.type.toString()}},l);switch(p.type){case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY:return d("MAWCreateOptimisticMiThreadForActThread").maybeUpdateMappingTableAndUpgradeOptimisticActThreadInMI(a,{authoritativeThreadKey:e,clientThreadKey:f,description:g,folder:h,instanceKey:l,intJid:o,isGroup:m,lastActivityTs:b},p).then(function(){return{previousState:p.type}});case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:e=(i||(i=d("I64"))).to_string(p.serverThreadKey);void d("MAWLoggerDeferred").LOG(k(),n,e,p.type);return t(a,p.serverThreadKey,o,{clientThreadKey:f,instanceKey:l,isGroup:m,lastActivityTs:b}).then(function(){return{previousState:p.type}});case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:h=(i||(i=d("I64"))).to_string(p.serverThreadKey);void d("MAWLoggerDeferred").LOG(j(),n,h);return z(a,p.serverThreadKey,{clientThreadKey:f,instanceKey:l,isGroup:m,lastActivityTs:b}).then(function(){return{previousState:p.type}});case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:throw c("FBLogger")("messenger_web").mustfixThrow("[Occam] Unimplemented VerifyThreadExists state: %s for JID: %s, from %s",p.type,n,g);default:p.type;throw c("FBLogger")("messenger_web").mustfixThrow("[Occam] Unhandled VerifyThreadExists state: %s for JID: %s, from %s",p.type,n,g)}});return C.apply(this,arguments)}function D(a,b,c,d){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){yield d("MAWThreadMappingQPL").measurePerformanceForNullableInstanceKey("insert_ephemeral_cache",f,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield a.threads.get(c));if(b!=null){var f;b={ephemeralExpirationInSec:(i||(i=d("I64"))).to_int32((f=b.disappearingSettingTtl)!=null?f:(i||(i=d("I64"))).zero),ephemeralLastUpdatedOrSetTimestamp:d("WATimeUtils").castMilliSecondsToUnixTime(i.to_float((f=b.disappearingSettingUpdatedTs)!=null?f:(i||(i=d("I64"))).zero))};d("MAWBridgeFireAndForget").fireAndForget("backend","setEphemeralSettingCache",{jid:e,settings:b})}}))});return E.apply(this,arguments)}function a(a,b){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.authoritativeThreadKey,d=b.clientThreadKey,e=b.description,f=b.folder,g=b.instanceKey,h=b.isGroup,i=b.jid;b=b.lastActivityTs;yield H(a,{authoritativeThreadKey:c,clientThreadKey:d,description:(a=e)!=null?a:"unknown",folder:f,instanceKey:g,isGroup:h,jid:i,lastActivityTs:b})});return F.apply(this,arguments)}function e(a,b){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.authoritativeThreadKey,d=b.clientThreadKey,e=b.description,f=b.folder,g=b.instanceKey,h=b.isGroup,i=b.jid;b=b.lastActivityTs;yield H(a,{authoritativeThreadKey:c,clientThreadKey:d,description:e,folder:f,instanceKey:g,isGroup:h,jid:i,lastActivityTs:b})});return G.apply(this,arguments)}function H(a,b){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.authoritativeThreadKey,f=b.clientThreadKey,g=b.description,h=b.instanceKey,j=b.jid;h!=null&&d("MAWThreadMappingQPL").addPoint("occam_verify_thread_exists_start",h);var k=c("gkx")("11539");k&&d("MAWActThreadMapping").executePromisesBlockedOnActThreadMapping({authoritativeThreadKey:e,description:g,instanceKey:h,jid:j,optimisticThreadKey:f});var l=(yield B(a,b));l=l.previousState;k||d("MAWActThreadMapping").executePromisesBlockedOnActThreadMapping({authoritativeThreadKey:e,description:g,instanceKey:h,jid:j,optimisticThreadKey:f});g=(k=e)!=null?k:f;e=g!=null?(i||(i=d("I64"))).of_string(g):null;e!=null&&l!==d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE&&(yield D(a,e,j,h));if(h!=null){d("MAWThreadMappingQPL").addPoint("occam_verify_thread_exists_end",h);k=d("MAWJids").convertChatJidToIntJid(b.jid);d("MAWThreadMappingQPL").pendingThreadCreationOnServer.has((i||(i=d("I64"))).to_string(k))||(yield d("MAWThreadMappingQPL").end({instanceKey:h,intJid:k,tables:a,threadKey:e}))}});return I.apply(this,arguments)}g.genUpdatesForAuthoritativeThread=x;g.insertEphemeralCache=D;g.call=a;g.callFromMainThread=e}),98);
__d("MAWCommonSetupBridge",["BrowserLockManager","CurrentAppID","CurrentUser","I64","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadAttributionType","MAWBridge","MAWChatJid","MAWCrossWorkerPortal","MAWCurrentUser","MAWDbMedia","MAWEBSwitch","MAWInit","MAWJobActionsV2","MAWMIC","MAWReportSendMessageSuccessResult","MAWThreadCutover","MAWThreadUtils","MWLogSend","ODS","Promise","QPLEvent","QPLUserFlow","WACrossWorkerPortal","WADevToolMessageChannel","WADevToolsBridge","WAExceededStorageQuota","WAJids","cr:2691","err","gkx","justknobx","pageID","performanceAbsoluteNow","promiseDone","requireDeferred","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o=c("requireDeferred")("MAWMainThreadLogger").__setRef("MAWCommonSetupBridge"),p=new Set([25312111,25311870]),q=new Map();e=new Map([[(a=d("MAWDbMedia")).MEDIA_TYPE.IMAGE,8],[a.MEDIA_TYPE.VIDEO,10],[a.MEDIA_TYPE.GIF,6],[a.MEDIA_TYPE.STICKER,4],[a.MEDIA_TYPE.PTT,11],[a.MEDIA_TYPE.DOCUMENT_FILE,9]]);var r=new Set([25312150,25313100,1056840931,25299294]),s=function(){return(n||(n=c("performanceAbsoluteNow")))()-Date.now()},t=s();function u(a,b,e){return(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(f){return d("MAWThreadCutover").isCutoverSecureThreadFromChatJid(f,a).then(function(a){c("QPLUserFlow").addAnnotations(b,{bool:{is_cutover:a}},{instanceKey:e})})})}var v=/[^a-zA-Z0-9._-]/g,w=/[.]+/g,x=/[\s_.-]+/g;function y(a){return a.replace(x,".").replace(v,"").replace(w,".")}var z={handleMessageSendResult:function(a){a.success&&d("MAWReportSendMessageSuccessResult").reportSendMessageSuccessResult(a.report)},log:function(a){var b=a.logLevel,c=a.logString,e=a.tags;a=e.length>0;var f=""+(d("CurrentAppID").getAppID()||"unknown");switch(b){case"count":(j||(j=d("ODS"))).bumpEntityKey(3185,y("e2ee."+(a?e.join("."):c)),y("count."+(a?c+"."+f:f)),1);o.onReadyImmediately(function(a){a=a.count;return a(c,e)});return;case"log":o.onReadyImmediately(function(a){a=a.info;return a(c,e)});return;case"warn":o.onReadyImmediately(function(a){a=a.warn;return a(c,e)});return;case"logRestricted":o.onReadyImmediately(function(a){a=a.logRestricted;return a(c,e)});return;case"debug":break;case"error":break;default:break}},logError:function(a){var b=a.entriesToReport,c=a.framesToPop,d=a.logString,e=a.message,f=a.stack,g=a.tags;o.onReadyImmediately(function(a){a=a.logError;return a(d,g,e,f,c,b)})},odsBumpEntityKey:function(a){var b=a.amount,c=a.entity;a=a.key;(j||(j=d("ODS"))).bumpEntityKey(3185,c,a+"."+(d("CurrentAppID").getAppID()||"unknown"),b)},onJobFinished:function(a){a.type==="createGroup"&&a.originalArgs.key!=null&&d("MAWJobActionsV2").recentFinishedJobsCache.set(a.originalArgs.key,a.result);switch(a.type){case"sendAppData":var b=a.originalArgs,e=a.result;(b=b.args.contents.actions)==null?void 0:b.forEach(function(a){a=a.messageAction;if(a==null||a.type!=="delete_for_me"||e.type!=="not_sent")return;q.set(e.appDataExternalId,{chatJid:a.protocolMsgId.chat,externalId:a.protocolMsgId.externalId,type:"deleteMsgForMe"})});break}if(a.type==="sendWrittenAppData"){b=a.originalArgs.appDataExternalId;var f=q.get(b);q["delete"](b);if(f!=null&&f.type==="deleteMsgForMe"&&a.result.type==="success"){var g=f.chatJid,h=f.externalId,j=d("MAWThreadUtils").getLSThreadTypeFromJid(g);c("promiseDone")((i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){c("promiseDone")(d("MAWChatJid").toThreadKey(a.tables,g,"MAWCommonSetupBridge::sendWrittenAppData").then(function(b){d("MWLogSend").log(a,{actor:(k||(k=d("I64"))).of_string(d("MAWCurrentUser").getID()),attachmentFbids:[],attachmentType:25,backend:1,hasReply:!1,messagingThreadId:k.to_string(b),offlineThreadingId:h,sendType:3,source:(l||(l=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").UNKNOWN),threadKey:b,threadType:j})}))}))}}},qplEvent:function(a){var e=a.action,f=a.annotations,g=a.debugInfo,i=a.error,j=a.event,k=a.instanceKey,l=a.performanceAndDateSkew,n=a.timeoutInMs;a=a.timestamp;if(!c("CurrentUser").isEmployee()&&p.has((m||(m=d("QPLEvent"))).getMarkerId(j)))return;var o=k||0;k=f==null?void 0:(k=f.string)==null?void 0:k.jid;k=k!=null?d("WAJids").validateChatJid(k):void 0;k=r.has((m||(m=d("QPLEvent"))).getMarkerId(j))&&k!=null?u(k,j,o):(h||(h=b("Promise"))).resolve();var q=a!=null&&l!=null&&c("gkx")("8334")?a+l-t+s():a;switch(e.type){case"start":c("QPLUserFlow").start(j,{annotations:babelHelpers["extends"]({},f||{},{bool:babelHelpers["extends"]({},(f==null?void 0:f.bool)||{},{is_eb_enabled:c("MAWEBSwitch").isEnabled(),is_pdb:c("gkx")("8483"),isArmadilloPublicLaunchUser:c("gkx")("23405"),isDev:0,isGifSearchEnbled:!0,isLockApiSupported:c("BrowserLockManager")!=null,isRestoreDBEnabled:c("gkx")("23906"),isTlcPublicUser:d("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()})}),instanceKey:o,timeoutInMs:n,timestamp:q});break;case"success":c("QPLUserFlow").addAnnotations(j,{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:o});k["finally"](function(){c("QPLUserFlow").endSuccess(j,{annotations:f,instanceKey:o,timestamp:q})});break;case"cancel":c("QPLUserFlow").addAnnotations(j,{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:o});k["finally"](function(){c("QPLUserFlow").endCancel(j,{annotations:f,instanceKey:o,timestamp:q})});break;case"point":f&&c("QPLUserFlow").addAnnotations(j,f,{instanceKey:o});(m||(m=d("QPLEvent"))).getMarkerId(j)===1056839232?d("MAWMIC").addPoint(e.name,q):c("QPLUserFlow").addPoint(j,e.name,{instanceKey:o,timestamp:q});break;case"annotations":c("QPLUserFlow").addAnnotations(j,(l=f)!=null?l:{},{instanceKey:o});break;case"failure":c("QPLUserFlow").addAnnotations(j,{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{failureReason:e.name}},{instanceKey:o});k["finally"](function(){c("QPLUserFlow").endFailure(j,e.name,{annotations:f,instanceKey:o,timestamp:q})});break;case"error":c("QPLUserFlow").markError(j,e.name,{debugInfo:g,error:i,instanceKey:o});break;default:throw c("err")("Bridge sends unreachable qplEvent action type")}}},A=function(a,b){a.push(b);return a};f=function(a){var e=a.customizeEventHandlers;a=a.worker;d("MAWInit").MAWInit.logPoint("bridge_setup_start");var f=d("MAWBridge").getBridge();f.setHandlers("event",babelHelpers["extends"]({},z,e));e=d("MAWCrossWorkerPortal").getOrCreateCrossWorkerPortal(f,["backend","mps"],A,{bridgeBatcherMaxTokens:Number.MAX_SAFE_INTEGER,portalCacheSize:c("justknobx")._("3092"),useLRUCache:c("gkx")("6949")});e.setPort(a);if(c("gkx")("3282")){var g=d("WADevToolsBridge").getDevToolBridge();a=new MessageChannel();var i=d("WACrossWorkerPortal").attachPortal(g,["backend"],A,c("pageID")),j=d("WACrossWorkerPortal").attachPortal(g,["devtool","mawDbDevTool"],A,c("pageID"));d("WADevToolMessageChannel").onCreateNewChannel(function(a){i.setPort(a.port1)});j.setPort(a.port1);b("cr:2691")==null?void 0:b("cr:2691").connectAddonPort(a.port2);e.addListener(function(a,b){return g.fireAndForget("devtool","bridgeMessage",{direction:b==="outgoing"?"toWorker":"toMain",msg:a,ts:Date.now()},!0)})}d("MAWMIC").addPoint("bridge_setup_done");d("MAWInit").MAWInit.logPoint("bridge_setup_end");return(h||(h=b("Promise"))).resolve(f)};g.MEDIA_TYPE_TO_ATTACHMENT_TYPE=e;g.initBridge=f}),98);
__d("MAWGetAttachmentTypeForSendWrittenMsg",["MAWCommonSetupBridge"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f,g,h,i){if(f)return 43;if(a==="revokeMsg")return 26;if(g!=null)return g;if(c)return 3;if(e&&h===!1)return 13;if(i===!0)return 13;f=b!=null?d("MAWCommonSetupBridge").MEDIA_TYPE_TO_ATTACHMENT_TYPE.get(b):null;return(a=f)!=null?a:0}g.getAttachmentTypeForSendWrittenMsg=a}),98);
__d("MAWReportSendMessageSuccessResult",["BrowserLockManager","FBLogger","I64","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadAttributionType","MAWChatJid","MAWCurrentUser","MAWFrontendMediaUtils","MAWGetAttachmentTypeForSendWrittenMsg","MAWThreadUtils","MAWVault","MAWXMAUtils","MWLogSend","MultipleTabsLogger","URLMatcher","WAJids","asyncToGeneratorRuntime","gkx","justknobx","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{a=(yield d("MAWChatJid").toThreadKey(a.tables,b,"MAWCommonSetupBridge::sendWrittenMsg"));return a}catch(a){if(c("gkx")("10750")){c("FBLogger")("messenger_e2ee_web_send").warn("MAWCommonSetupBridge::sendWrittenMsg failed to get threadKey. With error: %s",a);return(h||(h=d("I64"))).zero}throw a}});return l.apply(this,arguments)}function m(a){var e,f=a.externalId,g=null,l=!1,m=!1;switch(a.messageType){case"editMsg":l=!0;break;case"revokeMsg":f=a.referencedExternalId;break;case"sendMsg":m=a.specialTextSize!=null;break;case"reactionMsg":g=a.reaction!=null?20:27;break;case"bumpMsg":break;case"sendPoll":break;case"fixMe":return;default:a.messageType}var n=null;a.fileType!=null&&(n=d("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(a.fileType).mediaType);var o=a.xmaMessageType!=null,p=a.quote!=null||d("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType);e=c("URLMatcher").match(d("MAWVault").unvault((e=a.content)!=null?e:""));e=e!=null&&e.length>0;var q=d("MAWGetAttachmentTypeForSendWrittenMsg").getAttachmentTypeForSendWrittenMsg(a.messageType,n,m,o,l,g,p,e),r=d("MAWThreadUtils").getLSThreadTypeFromJid(a.chatJid);c("promiseDone")((i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e=(a==null?void 0:a.source)!=null?a.source:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").UNKNOWN),g=(yield k(b,a.chatJid)),i=d("WAJids").validateGroupJid(a.chatJid);d("MWLogSend").log(b,{actor:(h||(h=d("I64"))).of_string(d("MAWCurrentUser").getID()),attachmentFbids:[],attachmentType:q,backend:1,hasReply:p,initatingSource:a==null?void 0:a.initiatingSource,messagingThreadId:h.to_string(g),msgTtl:(b=a.ephemeralSetting)==null?void 0:b.ephemeralExpirationInSec,offlineThreadingId:f,sendType:1,source:e,threadKey:g,threadType:r,waGroupJid:c("gkx")("10750")&&i!=null?d("WAJids").threadIdForChatJid(i):void 0})});return function(a){return e.apply(this,arguments)}}()))}function a(a){if(c("justknobx")._("154")&&d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()&&(c("BrowserLockManager")!=null&&!d("MultipleTabsLogger").hasUniqueLock()))return;m(a)}g.reportSendMessageSuccessResultFn=m;g.reportSendMessageSuccessResult=a}),98);
__d("MAWGetEphemeralSettings",["I64","MAWBridgeSendAndReceive","MAWChatJid","ReQL","WAJids","WALogger","WATimeUtils","asyncToGeneratorRuntime","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ephemeral settings in memory]: MAWGetEphemeralSettings api call for chatJid "," returns ",""]);i=function(){return a};return a}var j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWGetEphemeralSettings"),k=c("requireDeferred")("MAWEphemeralSettingsUpdate").__setRef("MAWGetEphemeralSettings");function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(d("WAJids").switchOnMsgrChatJidType(a,{group:function(){return!1},user:function(){return!0}})){var e=(yield j.load());e=(yield e());b=(b=b)!=null?b:yield d("MAWChatJid").toThreadKeyMaybe(e.tables,a);if(b!=null){e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(b)));if(e!=null&&e.disappearingSettingTtl!=null){b={ephemeralExpirationInSec:(h||(h=d("I64"))).to_int32(e.disappearingSettingTtl),ephemeralLastUpdatedOrSetTimestamp:e.disappearingSettingUpdatedTs!=null?d("WATimeUtils").castMilliSecondsToUnixTime((h||(h=d("I64"))).to_float(e.disappearingSettingUpdatedTs)):d("WATimeUtils").unixTime()};return b}return}return d("MAWBridgeSendAndReceive").sendAndReceive("backend","getEphemeralSettings",{threadId:a}).then(function(b){d("WALogger").LOG(i(),a,b);if(b!=null){c("promiseDone")(k.load().then(function(c){return c.updateEphemeralSettingsByChatJid(b.ephemeralExpirationInSec,b.ephemeralLastUpdatedOrSetTimestamp,!1,a,!0)}));return b}return void 0})}});return l.apply(this,arguments)}g.getEphemeralSetting=a}),98);
__d("MAWIsIDBOperational",["FBLogger","WebAsyncStorage","asyncToGeneratorRuntime","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");var i=e.useEffect,j=e.useState;function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);if(a&&!c("WebAsyncStorage").isOpenPromiseSettled())return!1;a=(yield c("WebAsyncStorage").isOperational());if(!a.success){c("FBLogger")("messenger_web").catching(a.error).warn("Marking MAW IDB as unavailable: %s",a.error.message);return!1}return!0});return l.apply(this,arguments)}var m=!1;function a(){var a=j(m),b=a[0],d=a[1];i(function(){c("promiseDone")(k().then(function(a){d(a),m=a}))},[d]);return b}g.isIDBOperational=k;g.useIsIDBOperational=a}),98);
__d("MAWOfflineQueueState",["MAWOfflineQueueThreadStatus","MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";var h=[];f={offlineQueueCount:0,offlineQueueProgressDownloaded:0,offlineQueueProgressProcessed:0,offlineQueueSyncState:d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing,offlineQueueThreadStatus:{}};var i=babelHelpers["extends"]({},f),j={getSnapshot:function(){return i},subscribe:function(a){h.push(a);return function(){h=h.filter(function(b){return b!==a})}}};function a(a){i.offlineQueueCount!==a&&(i=babelHelpers["extends"]({},i,{offlineQueueCount:a}),h.forEach(function(a){return a()}))}function b(a){i.offlineQueueProgressDownloaded!==a&&(i=babelHelpers["extends"]({},i,{offlineQueueProgressDownloaded:a}),h.forEach(function(a){return a()}))}function c(a,b){b=d("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(b,i.offlineQueueThreadStatus);if(i.offlineQueueThreadStatus===b&&i.offlineQueueProgressProcessed===a)return;i=babelHelpers["extends"]({},i,{offlineQueueProgressProcessed:a,offlineQueueThreadStatus:b});h.forEach(function(a){return a()})}function e(a){a=d("MAWOfflineQueueThreadStatus").calculateOfflineQueueThreadStatus(a,i.offlineQueueThreadStatus);if(i.offlineQueueThreadStatus==a&&i.offlineQueueSyncState===d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete)return;i=babelHelpers["extends"]({},i,{offlineQueueSyncState:d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete,offlineQueueThreadStatus:a});h.forEach(function(a){return a()})}g.EMPTY_STATE=f;g.offlineQueueState=j;g.initOfflineQueueSyncStart=a;g.initOfflineQueueSyncProgress=b;g.initOfflineQueueConsumerSyncProgress=c;g.initOfflineQueueSyncComplete=e}),98);
__d("WABridgedAPI",["IWAAPI"],(function(a,b,c,d,e,f,g){"use strict";b={queryGroups:(a=d("IWAAPI")).makeBridgedApi("queryGroups"),getDevices:a.makeBridgedApi("getDevices"),removeCurrentDevice:a.makeBridgedApi("removeCurrentDevice"),removeDevice:a.makeBridgedApi("removeDevice"),getCurrentUserDeviceList:a.makeBridgedApi("getCurrentUserDeviceList")};c=b;g["default"]=c}),98);
__d("isInstamadilloDYI",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("665")===!0}g["default"]=a}),98);
__d("isMWBumpMessage",["EntMessageReplyType","I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").BUMP))}g["default"]=a}),98);
__d("useMAWCanThreadBeCutoverOnDemand",["LSContactBitOffset","LSMessagingThreadTypeUtil","MAWThreadCutover","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return a!=null?d("ReQL").fromTableAscending(e.tables.contacts,d("LSContactBitOffset").contactCapabilityFields).getKeyRange(a):d("ReQL").empty()},[e,a],f.id+":34");g=g!=null&&d("LSContactBitOffset").has(76,g);var i=d("ReQLSuspense").useFirst(function(){return a!=null?d("ReQL").fromTableAscending(e.tables.threads,["threadType"]).getKeyRange(a):d("ReQL").empty()},[e,a],f.id+":53");i=i?d("LSMessagingThreadTypeUtil").isOpenOneToOne(i.threadType):!1;b=((b=(b=d("ReQLSuspense").useFirst(function(){return a!=null?d("ReQL").fromTableAscending(e.tables.messages_ranges_v2__generated,["minMessageId"]).getKeyRange(a):d("ReQL").empty()},[e,a],f.id+":67"))==null?void 0:b.minMessageId)!=null?b:"")==="";var j=d("MAWThreadCutover").useIsCutoverOpenThread(a),k=d("MAWThreadCutover").useIsCutoverSecureThread(a);j=j||k;return g&&i&&!b&&!j}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSComputeParticipantCapabilities",["LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.filter(c.db.table(14).fetch([[[a[1],d[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,d[0])}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[!1,!1],d[1]=c[0],d[2]=c[1],c):(b=a.item,c=[b.isAdmin==null?!1:b.isAdmin,b.isModerator],d[1]=c[0],d[2]=c[1],c)})},function(b){return c.filter(c.db.table(14).fetch([[[a[1],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[0])}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[!1,!1],d[4]=c[0],d[5]=c[1],c):(b=a.item,c=[b.isAdmin==null?!1:b.isAdmin,b.isModerator],d[4]=c[0],d[5]=c[1],c)})},function(b){return c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?(e=[c.i64.cast([0,1073741823]),c.i64.cast([0,0]),!1],d[7]=e[0],d[8]=e[1],d[9]=e[2],e):(b=a.item,e=[b.capabilities==null?c.i64.cast([0,1073741823]):b.capabilities,b.contactTypeExact==null?c.i64.cast([0,0]):b.contactTypeExact,b.isManagedByViewer==null?!1:b.isManagedByViewer],d[7]=e[0],d[8]=e[1],d[9]=e[2],e)})},function(a){return d[12]=c.i64.eq(d[8],c.i64.cast([0,4]))?d[9]?c.i64.cast([0,2612119]):c.i64.or_(c.i64.cast([0,2612119]),c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,3])))):d[7],c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[11]=a[0],a})},function(e){return d[13]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,20]))),d[15]=d[1]&&!d[4]&&c.i64.neq(d[11],a[0])?d[12]:c.i64.eq(c.i64.and_(d[12],d[13]),c.i64.cast([0,0]))?d[12]:c.i64.sub(d[12],d[13]),c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[14]=a[0],a})},function(e){return d[16]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,22]))),d[19]=d[4]&&d[1]&&c.i64.neq(d[14],a[0])?d[15]:c.i64.eq(c.i64.and_(d[15],d[16]),c.i64.cast([0,0]))?d[15]:c.i64.sub(d[15],d[16]),d[2]?d[17]=!(d[4]||d[5]):d[17]=!0,c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[18]=a[0],a})},function(b){return d[20]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,21]))),e[0]=(d[1]||d[2])&&d[17]&&c.i64.neq(a[0],d[18])?d[19]:c.i64.eq(c.i64.and_(d[19],d[20]),c.i64.cast([0,0]))?d[19]:c.i64.sub(d[19],d[20])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxComputeParticipantCapabilitiesStoredProcedure";a.__tables__=["participants","contacts"];e.exports=a}),null);
__d("LSAddParticipantIdToGroupThread",["LSComputeParticipantCapabilities"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.storedProcedure(b("LSComputeParticipantCapabilities"),a[1],a[0]).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.filter(c.db.table(14).fetch([[[a[0],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])&&c.i64.gt(b.authorityLevel,a[9])}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(14).put({threadKey:a[0],contactId:a[1],readWatermarkTimestampMs:a[2],readActionTimestampMs:a[3],deliveredWatermarkTimestampMs:a[4],nickname:a[5],normalizedSearchTerms:a[10],isAdmin:a[6],isSuperAdmin:a[13],subscribeSource:a[7],authorityLevel:a[9],participantCapabilities:d[0],groupParticipantJoinState:a[11],isModerator:a[12],threadRoles:a[14]}):0})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxAddParticipantIdToGroupThreadStoredProcedure";a.__tables__=["participants"];e.exports=a}),null);
__d("LSClearMessagePlaceholderRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(13).fetch([[[a[0],b.i64.cast([0,0])]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.minMessageId===a[1]&&b.i64.eq(b.i64.cast([0,0]),c.minTimestampMs)&&b.i64.eq(a[2],c.maxTimestampMs)}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxClearMessagePlaceholderRangeStoredProcedure";a.__tables__=["messages_ranges_v2__generated"];e.exports=a}),null);
__d("LSClearPinnedMessages",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(205).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxClearPinnedMessagesStoredProcedure";a.__tables__=["msg_pinned_messages_v2"];e.exports=a}),null);
__d("LSDeleteAllCommunityChannelCategories",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.sequence([function(a){return b.forEach(b.db.table(182).fetch(),function(a){return a["delete"]()})},function(a){return b.forEach(b.db.table(9).fetch([[[b.i64.cast([0,20])]],"threadTypeLastActivityTimestampMs"]),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteAllCommunityChannelCategoriesStoredProcedure";a.__tables__=["cm_category_list","threads"];e.exports=a}),null);
__d("LSDeleteAllCommunityFolders",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.sequence([function(a){return b.forEach(b.db.table(162).fetch(),function(a){return a["delete"]()})},function(a){return b.forEach(b.db.table(9).fetch([[[b.i64.cast([0,17])]],"threadTypeLastActivityTimestampMs"]),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteAllCommunityFoldersStoredProcedure";a.__tables__=["community_folders","threads"];e.exports=a}),null);
__d("LSDeleteBanner",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(118).fetch([[[a[1],a[0]]]]),function(c){return b.i64.eq(c.threadKey,a[1])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.bannerId,a[0])}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSInThreadBannerDeleteBannerStoredProcedure";a.__tables__=["in_thread_banner"];e.exports=a}),null);
__d("LSDeleteExistingMessageRanges",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(13).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteExistingMessageRangesStoredProcedure";a.__tables__=["messages_ranges_v2__generated"];e.exports=a}),null);
__d("LSDeleteThenInsertCmCommunityList",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(166).put({communityId:a[0]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmCommunityListStoredProcedure";a.__tables__=["cm_community_list"];e.exports=a}),null);
__d("LSDeleteThenInsertCommunityFolder",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.filter(b.db.table(162).fetch([[[a[0]]]]),function(c){return b.i64.eq(c.folderId,a[0])&&b.i64.gt(b.i64.cast([0,80]),a[54])}).next().then(function(c){var d=c.done;c.value;return d?b.db.table(162).put({folderId:a[0],fbGroupId:a[1],name:a[2],memberCount:a[4],description:a[3],pictureUrl:a[5],pictureUrlFallback:a[6],pictureUrlExpirationTimestampMs:a[7],joiningChannelTaskId:a[8],afterJoiningOpenChannelId:a[10],capabilities:a[11],capabilities2:a[12],capabilities3:a[13],notificationSetting:a[14],notificationMutedUntil:a[15],sendsBlockedUntil:a[17],isHidden:a[18],hasSeenDisablingAlert:a[19],inviteLink:a[21],communityType:a[22],directInviteLink:a[23],enableState:a[24],takedownState:a[25],fbGroupType:a[28],threadCount:a[29],disableTimestamp:a[32],readTimestampMs:a[33],inviteStatus:a[37],blockedFromCommunityMemberCount:a[40],categoryCount:a[41],snippetText:a[42],coverPicUrl:a[43],coverPicUrlFallback:a[44],coverPicUrlExpirationTimestampMs:a[45],invitedThreadId:a[47],fbGroupUserParticipationApprovalStatus:a[48],ccAdminAssistRegistrationStatus:a[49],pauseStatus:a[50],isMember:a[51],latestThreadId:a[52],latestThreadActivityTimestampMs:a[53]}):0})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteThenInsertCommunityFolderStoredProcedure";a.__tables__=["community_folders"];e.exports=a}),null);
__d("LSSetThreadImageURL",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({threadPictureUrl:a[1]===""?void 0:a[1],threadPictureUrlFallback:a[2],threadPictureUrlExpirationTimestampMs:a[3],isCustomThreadPicture:a[4],shouldRoundThreadPicture:a[5]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetThreadImageURLStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSDeleteThenInsertContact",["LSBase64Decode.nop","LSSetThreadImageURL","LSWriteMinosPublicKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return a[53]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSBase64Decode.nop"),a[53]).then(function(a){return a=a,d[3]=a[0],a})},function(a){return d[0]=d[3]}]):c.resolve(d[0]=void 0)},function(e){return a[52]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSBase64Decode.nop"),a[52]).then(function(a){return a=a,d[3]=a[0],a})},function(a){return d[1]=d[3]}]):c.resolve(d[1]=void 0)},function(e){return a[50]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSBase64Decode.nop"),a[50]).then(function(a){return a=a,d[3]=a[0],a})},function(a){return d[2]=d[3]}]):c.resolve(d[2]=void 0)},function(e){return c.nativeOperation(b("LSWriteMinosPublicKey.nop"),a[0],d[0],a[51],d[2],d[1],a[54])},function(b){return c.i64.eq(a[23],c.i64.cast([0,39423]))?d[3]=c.i64.cast([0,1]):(c.i64.eq(a[23],c.i64.cast([0,14342874]))?d[4]=c.i64.cast([0,2]):d[4]=void 0,d[3]=d[4]),c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))&&c.i64.gt(b.authorityLevel,a[21])}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(7).put({id:a[0],profilePictureUrl:a[2],profilePictureFallbackUrl:a[3],profilePictureUrlExpirationTimestampMs:a[4],profilePictureLargeUrl:a[5],profilePictureLargeFallbackUrl:a[6],profilePictureLargeUrlExpirationTimestampMs:a[7],name:a[9],secondaryName:a[41],normalizedNameForSearch:a[10],normalizedSearchTerms:a[33],isMessengerUser:a[11],isMemorialized:a[12],isManagedByViewer:a[35],blockedByViewerStatus:a[14],rank:a[17],firstName:a[18],contactType:a[19],contactTypeExact:a[20],authorityLevel:a[21],messengerCallLogThirdPartyId:a[22],profileRingColor:a[23],requiresMultiway:a[24],blockedSinceTimestampMs:a[25],fbUnblockedSinceTimestampMs:a[48],canViewerMessage:a[26],profileRingColorExpirationTimestampMs:a[27],phoneNumber:a[28],emailAddress:a[29],workCompanyId:a[30],workCompanyName:a[31],workJobTitle:a[32],deviceContactId:a[34],workForeignEntityType:a[36],capabilities:a[37],capabilities2:a[38],profileRingState:d[3],contactViewerRelationship:a[39],gender:a[40],username:a[43],contactReachabilityStatusType:a[44],friendshipStatus:a[45],restrictionType:a[46],waConnectStatus:a[47],isEmployee:!1,pageType:a[49]}):0})},function(d){return c.storedProcedure(b("LSSetThreadImageURL"),a[0],a[2],a[3],a[4],!1,!0)}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactDeleteThenInsertContactStoredProcedure";a.__tables__=["contacts"];e.exports=a}),null);
__d("LSDeleteThenInsertMessageRequest",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(34).put({threadKey:a[0],messageRequestStatus:a[2]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteThenInsertMessageRequestStoredProcedure";a.__tables__=["message_requests"];e.exports=a}),null);
__d("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(175).put({id:a[0],globalMuteUntil:a[1],showMessagePreview:a[4],isSoundOn:a[7],groupNotificationSetting:a[8],oneToOneNotificationSetting:a[9],replyReminderSetting:a[10],messageReminderDisabled:a[12],messageSound:a[13],ringtoneSound:a[14],newFriendBumpDisabledSetting:a[15],globalMuteMessageUntil:a[2],globalMuteCallUntil:a[3],includeInSwitchAccountBadges:a[11],dismissNfbThreadsCount:a[16],mutePageAccountMessageReminder:a[17]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertNotificationsSettingsGraphQLSnapshotStoredProcedure";a.__tables__=["notification_settings"];e.exports=a}),null);
__d("LSDeleteThenInsertThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(9).fetch([[[a[7]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(9).put({threadKey:a[7],lastReadWatermarkTimestampMs:a[1],authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:a[10],ongoingCallState:a[29],parentThreadKey:a[35],lastActivityTimestampMs:a[0],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteCallsExpireTimeMs:a[15],groupNotificationSettings:a[16],isAdminSnippet:a[17],snippetSenderContactId:a[18],snippetText:a[20],snippetStringHash:a[21],snippetStringArgument1:a[22],snippetAttribution:a[23],snippetAttributionStringHash:a[24],disappearingSettingTtl:a[25],disappearingSettingUpdatedTs:a[26],disappearingSettingUpdatedBy:a[27],cannotReplyReason:a[30],customEmoji:a[31],customEmojiImageUrl:a[32],outgoingBubbleColor:a[33],themeFbid:a[34],nullstateDescriptionText1:a[36],nullstateDescriptionType1:a[37],nullstateDescriptionText2:a[38],nullstateDescriptionType2:a[39],nullstateDescriptionText3:a[40],nullstateDescriptionType3:a[41],snippetHasEmoji:a[42],hasPersistentMenu:a[43],disableComposerInput:a[44],cannotUnsendReason:a[45],viewedPluginKey:a[46],viewedPluginContext:a[47],clientThreadKey:a[48],capabilities:a[49],shouldRoundThreadPicture:a[50],proactiveWarningDismissTime:a[51],isCustomThreadPicture:a[52],otidOfFirstMessage:a[53],normalizedSearchTerms:a[54],additionalThreadContext:a[55],disappearingThreadKey:a[56],isDisappearingMode:a[57],disappearingModeInitiator:a[58],unreadDisappearingMessageCount:a[59],lastMessageCtaId:a[61],lastMessageCtaType:a[62],consistentThreadFbid:a[63],threadDescription:a[64],unsendLimitMs:a[65],syncGroup:a[66],threadInvitesEnabled:a[67],threadInviteLink:a[68],numUnreadSubthreads:a[69],subthreadCount:a[70],threadInvitesEnabledV2:a[71],joinRequestApprovalSetting:a[72],pendingJoinRequestsCount:a[73],eventStartTimestampMs:a[74],eventEndTimestampMs:a[75],takedownState:a[76],memberCount:a[77],admodCount:a[78],secondaryParentThreadKey:a[79],igFolder:a[80],inviterId:a[81],threadTags:a[82],readReceiptsDisabledV2:a[83],threadStatus:a[84],threadSubtype:a[85],pauseThreadTimestamp:a[86],metadata:a[87],syncSource:a[88]}):(e=d.item,c[1]=e.lastActivityTimestampMs,c[3]=e.parentThreadKey,c[2]=e.disappearingThreadKey,c[4]=e.isDisappearingMode,b.i64.le(e.authorityLevel,a[6])?b.i64.gt(c[1],a[0])&&b.i64.neq(c[2],void 0)?(b.i64.eq(a[35],b.i64.cast([-1,4294967286]))&&b.i64.eq(c[3],b.i64.cast([0,0]))?(f=[c[3],e.folderName],c[5]=f[0],c[6]=f[1],f):(d=[a[35],a[10]],c[5]=d[0],c[6]=d[1],d),b.db.table(9).put({threadKey:a[7],lastReadWatermarkTimestampMs:e.lastReadWatermarkTimestampMs,authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:c[6],ongoingCallState:a[29],parentThreadKey:c[5],lastActivityTimestampMs:c[1],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteCallsExpireTimeMs:a[15],groupNotificationSettings:a[16],isAdminSnippet:a[17],snippetSenderContactId:a[18],snippetText:a[20],snippetStringHash:a[21],snippetStringArgument1:a[22],snippetAttribution:a[23],snippetAttributionStringHash:a[24],disappearingSettingTtl:a[25],disappearingSettingUpdatedTs:a[26],disappearingSettingUpdatedBy:a[27],cannotReplyReason:a[30],customEmoji:a[31],customEmojiImageUrl:a[32],outgoingBubbleColor:a[33],themeFbid:a[34],nullstateDescriptionText1:a[36],nullstateDescriptionType1:a[37],nullstateDescriptionText2:a[38],nullstateDescriptionType2:a[39],nullstateDescriptionText3:a[40],nullstateDescriptionType3:a[41],snippetHasEmoji:a[42],hasPersistentMenu:a[43],disableComposerInput:a[44],cannotUnsendReason:a[45],viewedPluginKey:a[46],viewedPluginContext:a[47],clientThreadKey:a[48],capabilities:a[49],shouldRoundThreadPicture:a[50],proactiveWarningDismissTime:a[51],isCustomThreadPicture:a[52],otidOfFirstMessage:a[53],normalizedSearchTerms:a[54],additionalThreadContext:a[55],disappearingThreadKey:c[2],isDisappearingMode:c[4],disappearingModeInitiator:a[58],unreadDisappearingMessageCount:a[59],lastMessageCtaId:a[61],lastMessageCtaType:a[62],consistentThreadFbid:a[63],threadDescription:a[64],unsendLimitMs:a[65],syncGroup:a[66],threadInvitesEnabled:a[67],threadInviteLink:a[68],numUnreadSubthreads:a[69],subthreadCount:a[70],threadInvitesEnabledV2:a[71],joinRequestApprovalSetting:a[72],pendingJoinRequestsCount:a[73],eventStartTimestampMs:a[74],eventEndTimestampMs:a[75],takedownState:a[76],memberCount:a[77],admodCount:a[78],secondaryParentThreadKey:a[79],igFolder:a[80],inviterId:a[81],threadTags:a[82],readReceiptsDisabledV2:a[83],threadStatus:a[84],threadSubtype:a[85],pauseThreadTimestamp:a[86],metadata:a[87],syncSource:a[88]})):b.db.table(9).put({threadKey:a[7],lastReadWatermarkTimestampMs:a[1],authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:a[10],ongoingCallState:a[29],parentThreadKey:a[35],lastActivityTimestampMs:a[0],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteCallsExpireTimeMs:a[15],groupNotificationSettings:a[16],isAdminSnippet:a[17],snippetSenderContactId:a[18],snippetText:a[20],snippetStringHash:a[21],snippetStringArgument1:a[22],snippetAttribution:a[23],snippetAttributionStringHash:a[24],disappearingSettingTtl:a[25],disappearingSettingUpdatedTs:a[26],disappearingSettingUpdatedBy:a[27],cannotReplyReason:a[30],customEmoji:a[31],customEmojiImageUrl:a[32],outgoingBubbleColor:a[33],themeFbid:a[34],nullstateDescriptionText1:a[36],nullstateDescriptionType1:a[37],nullstateDescriptionText2:a[38],nullstateDescriptionType2:a[39],nullstateDescriptionText3:a[40],nullstateDescriptionType3:a[41],snippetHasEmoji:a[42],hasPersistentMenu:a[43],disableComposerInput:a[44],cannotUnsendReason:a[45],viewedPluginKey:a[46],viewedPluginContext:a[47],clientThreadKey:a[48],capabilities:a[49],shouldRoundThreadPicture:a[50],proactiveWarningDismissTime:a[51],isCustomThreadPicture:a[52],otidOfFirstMessage:a[53],normalizedSearchTerms:a[54],additionalThreadContext:a[55],disappearingThreadKey:c[2],isDisappearingMode:c[4],disappearingModeInitiator:a[58],unreadDisappearingMessageCount:a[59],lastMessageCtaId:a[61],lastMessageCtaType:a[62],consistentThreadFbid:a[63],threadDescription:a[64],unsendLimitMs:a[65],syncGroup:a[66],threadInvitesEnabled:a[67],threadInviteLink:a[68],numUnreadSubthreads:a[69],subthreadCount:a[70],threadInvitesEnabledV2:a[71],joinRequestApprovalSetting:a[72],pendingJoinRequestsCount:a[73],eventStartTimestampMs:a[74],eventEndTimestampMs:a[75],takedownState:a[76],memberCount:a[77],admodCount:a[78],secondaryParentThreadKey:a[79],igFolder:a[80],inviterId:a[81],threadTags:a[82],readReceiptsDisabledV2:a[83],threadStatus:a[84],threadSubtype:a[85],pauseThreadTimestamp:a[86],metadata:a[87],syncSource:a[88]}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxDeleteThenInsertThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSDeleteThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),void 0],c[0]=e[0],c[1]=e[1],e):(d=a.item,e=[d.parentThreadKey,d.disappearingThreadKey],c[0]=e[0],c[1]=e[1],e)})},function(a){return b.count(b.db.table(9).fetch([[[c[0]]],"parentThreadKeyLastActivityTimestampMs"])).then(function(a){return c[3]=a})},function(d){return a[1]&&b.i64.neq(c[0],b.i64.cast([0,0]))&&b.i64.eq(c[3],b.i64.cast([0,1]))?b.sequence([function(d){return b.forEach(b.db.table(9).fetch([[[a[0]],[c[0]]]]),function(a){return a["delete"]()})},function(a){return b.i64.neq(c[1],void 0)?0:0}]):b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.i64.neq(c[1],void 0)?0:0}])}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxDeleteThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSFlushSyncTrace",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(153).fetch(),function(c){return b.i64.eq(c.traceType,b.i64.cast([0,2]))&&c.contextOne===a[1]&&c.contextThree===a[0]}),function(a){var b=a.update;a.item;return b({shouldFlush:!0})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSDataTraceFlushSyncTraceStoredProcedure";a.__tables__=["data_trace_meta"];e.exports=a}),null);
__d("LSExecuteFinallyBlockForSyncTransaction",["LSFlushSyncTrace"],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(3).fetch([[["",a[1]]]]),function(c){return c.taskQueueName===""&&b.i64.eq(c.syncDatabaseId,a[1])&&b.i64.eq(c.epochId,a[2])}),function(c){var d=c.update;c=c.item;return d({epochId:!a[0]&&b.i64.eq(c.failureCount,b.i64.cast([-1,4294967295]))?c.epochId:void 0,failureCount:b.i64.eq(c.failureCount,b.i64.cast([-1,4294967295]))?b.i64.cast([0,0]):b.i64.add(c.failureCount,b.i64.cast([0,1]))})})},function(a){return b.resolve()}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreExecuteFinallyBlockForSyncTransactionStoredProcedure";a.__tables__=["network_requests"];e.exports=a}),null);
__d("LSExecuteFirstBlockForSyncTransaction",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSLogEventAnnotate.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return c.resolve()},function(e){return c.filter(c.db.table(3).fetch([[["",a[0]]]]),function(b){return b.taskQueueName===""&&c.i64.eq(b.syncDatabaseId,a[0])&&c.i64.eq(b.epochId,a[1])}).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(e){return d[2]=",",function(a){c.logger(a).mustfix(a)}(["epoch mismatch",d[2]," db_type=",d[2],c.i64.to_string(a[0]),d[2]," previous_cursor=",d[2],a[2]==null?"null":a[2],d[2]," next_cursor=",d[2],a[3]].join("")),d[3]=new c.Map(),d[3].set("database_id",a[0]),d[3].set("epoch_id",a[1]),d[3].set("sync_status",a[4]),d[3].set("next_cursor",a[3]),d[3].set("error_msg","epoch mismatch"),a[9]?d[4]=!1:d[4]=!0,d[4]?c.resolve():(d[6]=a[9].keys(),d[7]=c.i64.of_int32(d[6].length),c.i64.gt(d[7],c.i64.cast([0,0]))?c.loopAsync(d[7],function(e){return d[8]=e,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[6],d[8]).then(function(a){return a=a,d[9]=a[0],d[10]=a[1],a})},function(b){return d[11]=a[9].get(d[9]),d[3].set(d[9],d[11])}])}):c.resolve())},function(a){return c.nativeOperation(b("LSLogEventAnnotate.nop"),c.i64.cast([0,16]),c.i64.cast([0,35]),c.i64.cast([0,0]),d[3])},function(a){return d[5]=!1,d[0]=d[5]}]):(e.item,c.sequence([function(e){return c.filter(c.db.table(1).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.groupId,a[0])&&b.currentCursor===a[2]}).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(e){return d[4]=",",function(a){c.logger(a).mustfix(a)}(["cursor mismatch",d[4]," db_type=",d[4],c.i64.to_string(a[0]),d[4]," previous_cursor=",d[4],a[2]==null?"null":a[2],d[4]," next_cursor=",d[4],a[3]].join("")),d[5]=new c.Map(),d[5].set("database_id",a[0]),d[5].set("epoch_id",a[1]),d[5].set("sync_status",a[4]),d[5].set("next_cursor",a[3]),d[5].set("error_msg","cursor mismatch"),a[9]?d[6]=!1:d[6]=!0,d[6]?c.resolve():(d[8]=a[9].keys(),d[9]=c.i64.of_int32(d[8].length),c.i64.gt(d[9],c.i64.cast([0,0]))?c.loopAsync(d[9],function(e){return d[10]=e,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[8],d[10]).then(function(a){return a=a,d[11]=a[0],d[12]=a[1],a})},function(b){return d[13]=a[9].get(d[11]),d[5].set(d[11],d[13])}])}):c.resolve())},function(a){return c.nativeOperation(b("LSLogEventAnnotate.nop"),c.i64.cast([0,16]),c.i64.cast([0,35]),c.i64.cast([0,0]),d[5])},function(a){return d[7]=!1,d[2]=d[7]}]):(e.item,c.sequence([function(b){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.of_float(Date.now()),c.forEach(c.db.table(1).fetch([[[a[0]]]]),function(b){var e=b.update;b.item;return e({currentCursor:a[3],syncStatus:a[4],sendSyncParams:a[5],minTimeToSyncTimestampMs:c.i64.eq(a[6],c.i64.cast([0,0]))?c.i64.cast([0,0]):c.i64.add(d[4],a[6]),canIgnoreTimestamp:a[7],syncChannel:a[8],lastSyncCompletedTimestampMs:d[5]})})},function(b){return c.forEach(c.db.table(3).fetch([[["",a[0]]]]),function(a){var b=a.update;a.item;return b({failureCount:c.i64.cast([-1,4294967295])})})},function(e){return d[6]=new c.Map(),d[6].set("database_id",a[0]),d[6].set("epoch_id",a[1]),d[6].set("sync_status",a[4]),d[6].set("next_cursor",a[3]),a[9]?d[7]=!1:d[7]=!0,d[7]?c.resolve():(d[9]=a[9].keys(),d[10]=c.i64.of_int32(d[9].length),c.i64.gt(d[10],c.i64.cast([0,0]))?c.loopAsync(d[10],function(e){return d[11]=e,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[9],d[11]).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(b){return d[14]=a[9].get(d[12]),d[6].set(d[12],d[14])}])}):c.resolve())},function(a){return c.nativeOperation(b("LSLogEventAnnotate.nop"),c.i64.cast([0,16]),c.i64.cast([0,35]),c.i64.cast([0,0]),d[6])},function(a){return d[8]=!0,d[2]=d[8]}]))})},function(a){return d[0]=d[2]}]))})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreExecuteFirstBlockForSyncTransactionStoredProcedure";a.__tables__=["data_trace_meta","network_requests","sync_groups"];e.exports=a}),null);
__d("LSShimHybridThreadDeleteByThreadKey.nop",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){});function c(b,c,d){return a.apply(this,arguments)}return c}();a.__nop_name__="LSShimHybridThreadDeleteByThreadKey";f["default"]=a}),66);
__d("LSHybridThreadDelete",["LSShimHybridThreadDeleteByThreadKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.nativeOperation(b("LSShimHybridThreadDeleteByThreadKey.nop"),a[0])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxHybridThreadDeleteStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSInsertAttachmentCta",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(19).add({ctaId:a[0],attachmentFbid:a[1],attachmentIndex:a[2],threadKey:a[3],messageId:a[5],title:a[6],type_:a[7],platformToken:a[8],actionUrl:a[9],nativeUrl:a[10],urlWebviewType:a[11],actionContentBlob:a[12],enableExtensions:a[13],extensionHeightType:a[14],targetId:a[15]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertAttachmentCtaStoredProcedure";a.__tables__=["attachment_ctas"];e.exports=a}),null);
__d("LSInsertBlobAttachment",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(16).fetch([[[a[27],a[32],a[34]]]]),function(c){return b.i64.eq(c.threadKey,a[27])&&b.i64.eq(b.i64.cast([0,0]),a[28])&&c.messageId===a[32]&&c.attachmentFbid===a[34]&&b.i64.lt(c.authorityLevel,a[48])&&(b.i64.eq(c.attachmentType,b.i64.cast([0,2]))||b.i64.eq(c.attachmentType,b.i64.cast([0,3]))||b.i64.eq(c.attachmentType,b.i64.cast([0,4]))||b.i64.eq(c.attachmentType,b.i64.cast([0,5]))||b.i64.eq(c.attachmentType,b.i64.cast([0,6]))||b.i64.eq(c.attachmentType,b.i64.cast([0,10]))||b.i64.eq(c.attachmentType,b.i64.cast([0,14]))||b.i64.eq(c.attachmentType,b.i64.cast([0,15])))&&b.i64.eq(c.ephemeralMediaState,void 0)&&c.isSharable===!1}),function(a){return a["delete"]()})},function(c){return b.db.table(16).add({threadKey:a[27],messageId:a[32],attachmentFbid:a[34],filename:a[0],filesize:a[1],hasMedia:a[2],isSharable:!1,playableUrl:a[3],playableUrlFallback:a[4],playableUrlExpirationTimestampMs:a[5],playableUrlMimeType:a[6],dashManifest:a[7],previewUrl:a[8],previewUrlFallback:a[9],previewUrlExpirationTimestampMs:a[10],previewUrlMimeType:a[11],miniPreview:a[13],previewWidth:a[14],previewHeight:a[15],attributionAppId:a[16],attributionAppName:a[17],attributionAppIcon:a[18],attributionAppIconFallback:a[19],attributionAppIconUrlExpirationTimestampMs:a[20],localPlayableUrl:a[21],playableDurationMs:a[22],attachmentIndex:a[23],accessibilitySummaryText:a[24],isPreviewImage:a[25],originalFileHash:a[26],attachmentType:a[29],timestampMs:a[31],offlineAttachmentId:a[33],hasXma:a[35],xmaLayoutType:a[36],xmasTemplateType:a[37],titleText:a[38],subtitleText:a[39],descriptionText:a[40],sourceText:a[41],faviconUrlExpirationTimestampMs:a[42],isBorderless:a[44],previewUrlLarge:a[45],samplingFrequencyHz:a[46],waveformData:a[47],authorityLevel:a[48]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertBlobAttachmentStoredProcedure";a.__tables__=["attachments"];e.exports=a}),null);
__d("LSInsertNewMessageRange",["LSClearMessagePlaceholderRange"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSClearMessagePlaceholderRange"),a[0],a[9],c.i64.cast([0,0]))},function(b){return c.filter(c.db.table(13).fetch([[[a[0],{lte:a[5]}]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.le(b.minTimestampMs,a[5])&&c.i64.ge(b.maxTimestampMs,a[5])}).next().then(function(b,c){var e=b.done;b=b.value;return e?(e=[a[1],a[3],a[7]],d[0]=e[0],d[1]=e[1],d[2]=e[2],e):(c=b.item,e=[c.minTimestampMs,c.minMessageId,c.hasMoreBefore],d[0]=e[0],d[1]=e[1],d[2]=e[2],e)})},function(b){return c.filter(c.db.table(13).fetch([[[a[0],{lte:a[6]}]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.le(b.minTimestampMs,a[6])&&c.i64.ge(b.maxTimestampMs,a[6])}).next().then(function(b,c){var e=b.done;b=b.value;return e?(e=[a[2],a[4],a[8]],d[4]=e[0],d[5]=e[1],d[6]=e[2],e):(c=b.item,e=[c.maxTimestampMs,c.maxMessageId,c.hasMoreAfter],d[4]=e[0],d[5]=e[1],d[6]=e[2],e)})},function(b){return c.forEach(c.filter(c.db.table(13).fetch([[[a[0],{lte:a[6]}]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.ge(a[6],b.minTimestampMs)&&c.i64.le(a[5],b.maxTimestampMs)}),function(a){return a["delete"]()})},function(b){return c.db.table(13).put({threadKey:a[0],minTimestampMs:d[0],minMessageId:d[1],maxTimestampMs:d[4],maxMessageId:d[5],isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:d[2],hasMoreAfter:d[6]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxInsertNewMessageRangeStoredProcedure";a.__tables__=["messages_ranges_v2__generated"];e.exports=a}),null);
__d("LSIssueInsertPersistentMenuItemsForThreadTask",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"insert_persistent_menu_items",c.i64.cast([0,117]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSOmnistoreSettingsIssueInsertPersistentMenuItemsForThreadTaskStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSSetForwardScore",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}),function(b){var c=b.update;b.item;return c({forwardScore:a[3]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetForwardScoreStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSGroupRoomTruncate",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.filter(b.db.table(63).fetch(),function(a){return b.i64.neq(a.groupRoomType,void 0)&&b.i64.neq(a.groupRoomType,b.i64.cast([0,5]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSStoriesGroupRoomTruncateStoredProcedure";a.__tables__=["rooms"];e.exports=a}),null);
__d("LSUpdateOrInsertThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(9).fetch([[[a[7]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(9).add({threadKey:a[7],lastReadWatermarkTimestampMs:a[1],authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:a[10],ongoingCallState:a[32],parentThreadKey:a[38],lastActivityTimestampMs:a[0],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteMentionExpireTimeMs:a[15],muteCallsExpireTimeMs:a[16],groupNotificationSettings:a[19],isAdminSnippet:a[20],snippetSenderContactId:a[21],snippetText:a[23],snippetStringHash:a[24],snippetStringArgument1:a[25],snippetAttribution:a[26],snippetAttributionStringHash:a[27],disappearingSettingTtl:a[28],disappearingSettingUpdatedTs:a[29],disappearingSettingUpdatedBy:a[30],cannotReplyReason:a[33],customEmoji:a[34],customEmojiImageUrl:a[35],outgoingBubbleColor:a[36],themeFbid:a[37],nullstateDescriptionText1:a[39],nullstateDescriptionType1:a[40],nullstateDescriptionText2:a[41],nullstateDescriptionType2:a[42],nullstateDescriptionText3:a[43],nullstateDescriptionType3:a[44],snippetHasEmoji:a[45],hasPersistentMenu:a[46],disableComposerInput:a[47],cannotUnsendReason:a[48],viewedPluginKey:a[49],viewedPluginContext:a[50],clientThreadKey:a[51],capabilities:a[52],shouldRoundThreadPicture:a[53],proactiveWarningDismissTime:a[54],isCustomThreadPicture:a[55],otidOfFirstMessage:a[56],normalizedSearchTerms:a[57],additionalThreadContext:a[58],disappearingThreadKey:a[59],isDisappearingMode:a[60],disappearingModeInitiator:a[61],unreadDisappearingMessageCount:a[62],lastMessageCtaId:a[64],lastMessageCtaType:a[65],lastMessageCtaTimestampMs:a[66],consistentThreadFbid:a[67],threadDescription:a[69],unsendLimitMs:a[70],capabilities2:a[78],capabilities3:a[79],syncGroup:a[82],threadInvitesEnabled:a[83],threadInviteLink:a[84],isAllUnreadMessageMissedCallXma:a[85],numUnreadSubthreads:a[86],subthreadCount:a[87],lastNonMissedCallXmaMessageTimestampMs:a[88],isHidden:a[89],threadInvitesEnabledV2:a[90],joinRequestApprovalSetting:a[93],hasPendingInvitation:a[94],eventStartTimestampMs:a[95],eventEndTimestampMs:a[96],takedownState:a[97],secondaryParentThreadKey:a[98],igFolder:a[99],inviterId:a[100],threadTags:a[101],isReadReceiptsDisabled:a[102],readReceiptsDisabledV2:a[103],threadStatus:a[104],threadSubtype:a[105],pauseThreadTimestamp:a[106],metadata:a[107],capabilities4:a[108],syncSource:a[109],capabilities5:a[110],ongoingCallTimestampMs:a[111]}):(e=d.item,c[1]=e.lastActivityTimestampMs,c[3]=e.parentThreadKey,c[2]=e.disappearingThreadKey,c[4]=e.isDisappearingMode,b.i64.le(e.authorityLevel,a[6])?b.i64.gt(c[1],a[0])&&b.i64.neq(c[2],void 0)?(b.i64.eq(a[38],b.i64.cast([-1,4294967286]))&&b.i64.eq(c[3],b.i64.cast([0,0]))?(f=[c[3],e.folderName],c[5]=f[0],c[6]=f[1],f):(d=[a[38],a[10]],c[5]=d[0],c[6]=d[1],d),b.forEach(b.db.table(9).fetch([[[a[7]]]]),function(b){var d=b.update;b.item;return d({lastReadWatermarkTimestampMs:e.lastReadWatermarkTimestampMs,authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:c[6],ongoingCallState:a[32],parentThreadKey:c[5],lastActivityTimestampMs:c[1],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteMentionExpireTimeMs:a[15],muteCallsExpireTimeMs:a[16],groupNotificationSettings:a[19],isAdminSnippet:a[20],snippetSenderContactId:a[21],snippetText:a[23],snippetStringHash:a[24],snippetStringArgument1:a[25],snippetAttribution:a[26],snippetAttributionStringHash:a[27],disappearingSettingTtl:a[28],disappearingSettingUpdatedTs:a[29],disappearingSettingUpdatedBy:a[30],cannotReplyReason:a[33],customEmoji:a[34],customEmojiImageUrl:a[35],outgoingBubbleColor:a[36],themeFbid:a[37],nullstateDescriptionText1:a[39],nullstateDescriptionType1:a[40],nullstateDescriptionText2:a[41],nullstateDescriptionType2:a[42],nullstateDescriptionText3:a[43],nullstateDescriptionType3:a[44],snippetHasEmoji:a[45],hasPersistentMenu:a[46],disableComposerInput:a[47],cannotUnsendReason:a[48],viewedPluginKey:a[49],viewedPluginContext:a[50],clientThreadKey:a[51],capabilities:a[52],shouldRoundThreadPicture:a[53],proactiveWarningDismissTime:a[54],isCustomThreadPicture:a[55],otidOfFirstMessage:a[56],normalizedSearchTerms:a[57],additionalThreadContext:a[58],disappearingThreadKey:c[2],isDisappearingMode:c[4],disappearingModeInitiator:a[61],unreadDisappearingMessageCount:a[62],lastMessageCtaId:a[64],lastMessageCtaType:a[65],lastMessageCtaTimestampMs:a[66],consistentThreadFbid:a[67],threadDescription:a[69],unsendLimitMs:a[70],capabilities2:a[78],capabilities3:a[79],syncGroup:a[82],threadInvitesEnabled:a[83],threadInviteLink:a[84],isAllUnreadMessageMissedCallXma:a[85],numUnreadSubthreads:a[86],subthreadCount:a[87],lastNonMissedCallXmaMessageTimestampMs:a[88],isHidden:a[89],threadInvitesEnabledV2:a[90],joinRequestApprovalSetting:a[93],hasPendingInvitation:a[94],eventStartTimestampMs:a[95],eventEndTimestampMs:a[96],takedownState:a[97],secondaryParentThreadKey:a[98],igFolder:a[99],inviterId:a[100],threadTags:a[101],isReadReceiptsDisabled:a[102],readReceiptsDisabledV2:a[103],threadStatus:a[104],threadSubtype:a[105],pauseThreadTimestamp:a[106],metadata:a[107],capabilities4:a[108],syncSource:a[109],capabilities5:a[110],ongoingCallTimestampMs:a[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})})):b.forEach(b.db.table(9).fetch([[[a[7]]]]),function(b){var d=b.update;b.item;return d({lastReadWatermarkTimestampMs:a[1],authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:a[10],ongoingCallState:a[32],parentThreadKey:a[38],lastActivityTimestampMs:a[0],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteMentionExpireTimeMs:a[15],muteCallsExpireTimeMs:a[16],groupNotificationSettings:a[19],isAdminSnippet:a[20],snippetSenderContactId:a[21],snippetText:a[23],snippetStringHash:a[24],snippetStringArgument1:a[25],snippetAttribution:a[26],snippetAttributionStringHash:a[27],disappearingSettingTtl:a[28],disappearingSettingUpdatedTs:a[29],disappearingSettingUpdatedBy:a[30],cannotReplyReason:a[33],customEmoji:a[34],customEmojiImageUrl:a[35],outgoingBubbleColor:a[36],themeFbid:a[37],nullstateDescriptionText1:a[39],nullstateDescriptionType1:a[40],nullstateDescriptionText2:a[41],nullstateDescriptionType2:a[42],nullstateDescriptionText3:a[43],nullstateDescriptionType3:a[44],snippetHasEmoji:a[45],hasPersistentMenu:a[46],disableComposerInput:a[47],cannotUnsendReason:a[48],viewedPluginKey:a[49],viewedPluginContext:a[50],clientThreadKey:a[51],capabilities:a[52],shouldRoundThreadPicture:a[53],proactiveWarningDismissTime:a[54],isCustomThreadPicture:a[55],otidOfFirstMessage:a[56],normalizedSearchTerms:a[57],additionalThreadContext:a[58],disappearingThreadKey:c[2],isDisappearingMode:c[4],disappearingModeInitiator:a[61],unreadDisappearingMessageCount:a[62],lastMessageCtaId:a[64],lastMessageCtaType:a[65],lastMessageCtaTimestampMs:a[66],consistentThreadFbid:a[67],threadDescription:a[69],unsendLimitMs:a[70],capabilities2:a[78],capabilities3:a[79],syncGroup:a[82],threadInvitesEnabled:a[83],threadInviteLink:a[84],isAllUnreadMessageMissedCallXma:a[85],numUnreadSubthreads:a[86],subthreadCount:a[87],lastNonMissedCallXmaMessageTimestampMs:a[88],isHidden:a[89],threadInvitesEnabledV2:a[90],joinRequestApprovalSetting:a[93],hasPendingInvitation:a[94],eventStartTimestampMs:a[95],eventEndTimestampMs:a[96],takedownState:a[97],secondaryParentThreadKey:a[98],igFolder:a[99],inviterId:a[100],threadTags:a[101],isReadReceiptsDisabled:a[102],readReceiptsDisabledV2:a[103],threadStatus:a[104],threadSubtype:a[105],pauseThreadTimestamp:a[106],metadata:a[107],capabilities4:a[108],syncSource:a[109],capabilities5:a[110],ongoingCallTimestampMs:a[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxUpdateOrInsertThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSPopulateCommunityFolderData",["LSDeleteThenInsertCommunityFolder","LSUpdateOrInsertThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.sequence([function(d){return c.storedProcedure(b("LSDeleteThenInsertCommunityFolder"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],void 0,void 0,void 0,a[11],a[12],a[13],a[14],a[15],void 0,a[16],a[17],a[18],void 0,a[19],a[20],a[21],a[22],a[23],void 0,void 0,a[24],a[26],void 0,void 0,a[25],a[37],void 0,void 0,c.i64.cast([0,0]),a[29],void 0,c.i64.cast([0,1]),a[28],a[27],a[30],a[31],a[32],a[33],void 0,a[34],a[35],a[36],a[38],a[39],void 0,void 0,c.i64.cast([0,80]))},function(d){return c.storedProcedure(b("LSUpdateOrInsertThread"),a[8],a[9],a[10],a[2],a[5],void 0,c.i64.cast([0,80]),a[0],c.i64.cast([0,0]),c.i64.cast([0,17]),"community",a[6],a[7],c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,c.i64.cast([-1,4294967282]),void 0,void 0,void 0,void 0,void 0,void 0,!1,!1,!1,void 0,void 0,void 0,void 0,c.i64.cast([0,0]),void 0,void 0,!1,void 0,void 0,void 0,void 0,!1,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,void 0,c.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,!1,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,a[40],void 0,void 0,void 0,!1,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,0]),void 0)}])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSMailboxPopulateCommunityFolderDataStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSRemoveTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?0:(e=d.item,b.forEach(b.db.table(2).fetch([[[e.queueName,{lte:a[0]}]],"queueNameTaskId"]),function(a){var d=a.item;return b.sequence([function(a){return c[0]=d.taskDispatchPriority,b.forEach(b.filter(b.db.table(2).fetch([[[d.taskId]]]),function(a){return b.i64.eq(a.taskId,d.taskId)&&a.queueName===d.queueName}),function(a){return a["delete"]()})},function(a){return b.i64.eq(c[0],b.i64.cast([0,1e3]))||b.i64.eq(c[0],b.i64.cast([0,2e3]))?c[1]=b.i64.cast([0,734739218]):c[1]=b.i64.cast([0,734737036])}])}))})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreRemoveTaskStoredProcedure";a.__tables__=["pending_tasks"];e.exports=a}),null);
__d("LSRoomTruncate",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.filter(b.db.table(63).fetch(),function(a){return b.i64.eq(a.groupRoomType,void 0)||b.i64.eq(a.groupRoomType,b.i64.cast([0,5]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSStoriesRoomTruncateStoredProcedure";a.__tables__=["rooms"];e.exports=a}),null);
__d("LSSetRegionHint",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(1).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({regionHint:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreSetRegionHintStoredProcedure";a.__tables__=["sync_groups"];e.exports=a}),null);
__d("LSTaskExists",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(a,b){b=a.done;a=a.value;return b?c[0]=!1:(a.item,c[0]=!0)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreTaskExistsStoredProcedure";a.__tables__=["pending_tasks"];e.exports=a}),null);
__d("LSTruncateCommunityListTable",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.db.table(166).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsTruncateCommunityListTableStoredProcedure";a.__tables__=["cm_community_list"];e.exports=a}),null);
__d("LSTruncateNotificationSettings",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.db.table(175).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsTruncateNotificationSettingsStoredProcedure";a.__tables__=["notification_settings"];e.exports=a}),null);
__d("LSUpdateLastSyncCompletedTimestampMsToNow",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.forEach(b.db.table(1).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({lastSyncCompletedTimestampMs:c[0]})})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreUpdateLastSyncCompletedTimestampMsToNowStoredProcedure";a.__tables__=["sync_groups"];e.exports=a}),null);
__d("LSUpsertGradientColor",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(117).put({themeFbid:a[0],gradientIndex:a[1],color:a[2],type_:a[3]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSThreadThemeUpsertGradientColorStoredProcedure";a.__tables__=["gradient_colors"];e.exports=a}),null);
__d("LSUpsertSequenceId",["LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(25).put({id:d[0],lastAppliedMailboxSequenceId:a[0]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpsertSequenceIdStoredProcedure";a.__tables__=["mailbox_metadata"];e.exports=a}),null);
__d("LSUpsertTheme",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.i64.neq(a[12],void 0)?c[0]=a[12]:c[0]=a[0],b.db.table(116).put({fbid:a[0],themeIdx:a[1],fallbackColor:a[2],reverseGradiantsForRadial:a[3],accessibilityLabel:a[4],iconUrl:a[5],iconUrlFallback:a[6],backgroundUrl:a[8],description:a[9],isDeprecated:a[11],normalThemeId:c[0],appColorMode:a[13],titlebarBackgroundColor:a[14],titlebarButtonTintColor:a[15],titlebarTextColor:a[16],titlebarAttributionTextColor:a[17],composerTintColor:a[18],composerUnselectedTintColor:a[19],composerInputTextPlaceholderColor:a[20],composerInputBackgroundColor:a[21],composerInputBorderColor:a[22],composerInputBorderWidth:a[23],composerBackgroundColor:a[24],messageTextColor:a[25],messageBorderColor:a[26],messageBorderWidth:a[27],incomingMessageTextColor:a[28],incomingMessageBorderColor:a[29],incomingMessageBorderWidth:a[30],deliveryReceiptColor:a[31],tertiaryTextColor:a[32],primaryButtonBackgroundColor:a[33],hotLikeColor:a[34],reactionPillBackgroundColor:a[35],secondaryTextColor:a[36],quotedIncomingMessageBubbleColor:a[37],cornerRadius:a[38],blurredComposerBackgroundColor:a[39],composerSecondaryButtonColor:a[40],composerPlaceholderTextColor:a[41]})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSThreadThemeUpsertThemeStoredProcedure";a.__tables__=["thread_themes"];e.exports=a}),null);
__d("LSStaticDependencies",["LSDeleteAllCommunityChannelCategories","LSDeleteAllCommunityFolders","LSDeleteThenInsertCmCommunityList","LSDeleteThenInsertContact","LSDeleteThenInsertMessageRequest","LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot","LSDeleteThenInsertThread","LSExecuteFinallyBlockForSyncTransaction","LSExecuteFirstBlockForSyncTransaction","LSGroupRoomTruncate","LSPopulateCommunityFolderData","LSRemoveTask","LSRoomTruncate","LSSetRegionHint","LSTaskExists","LSTruncateCommunityListTable","LSTruncateNotificationSettings","LSUpdateLastSyncCompletedTimestampMsToNow","LSUpsertGradientColor","LSUpsertSequenceId","LSUpsertTheme","LSVerifyContactRowExists"],(function(a,b,c,d,e,f,g){"use strict";a={deleteAllCommunityChannelCategories:c("LSDeleteAllCommunityChannelCategories"),deleteAllCommunityFolders:c("LSDeleteAllCommunityFolders"),deleteThenInsertCmCommunityList:c("LSDeleteThenInsertCmCommunityList"),deleteThenInsertContact:c("LSDeleteThenInsertContact"),deleteThenInsertMessageRequest:c("LSDeleteThenInsertMessageRequest"),deleteThenInsertNotificationsSettingsGraphQLSnapshot:c("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot"),deleteThenInsertThread:c("LSDeleteThenInsertThread"),executeFinallyBlockForSyncTransaction:c("LSExecuteFinallyBlockForSyncTransaction"),executeFirstBlockForSyncTransaction:c("LSExecuteFirstBlockForSyncTransaction"),groupRoomTruncate:c("LSGroupRoomTruncate"),populateCommunityFolderData:c("LSPopulateCommunityFolderData"),removeTask:c("LSRemoveTask"),roomTruncate:c("LSRoomTruncate"),setRegionHint:c("LSSetRegionHint"),taskExists:c("LSTaskExists"),truncateCommunityListTable:c("LSTruncateCommunityListTable"),truncateNotificationSettings:c("LSTruncateNotificationSettings"),updateLastSyncCompletedTimestampMsToNow:c("LSUpdateLastSyncCompletedTimestampMsToNow"),upsertGradientColor:c("LSUpsertGradientColor"),upsertSequenceId:c("LSUpsertSequenceId"),upsertTheme:c("LSUpsertTheme"),verifyContactRowExists:c("LSVerifyContactRowExists")};b=a;g["default"]=b}),98);
__d("LSTransportHybridParticipantUpdateReceipts",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSE2EEMessagingMetadataMailboxTransportHybridParticipantUpdateReceiptsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTruncateMetadataThreads.nop",["I64","LSIntEnum","Promise","ReQL","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(c("gkx")("9855")){e=a.mi_act_mapping_table.keys(new WeakMap());while(!0){var f,g=(yield e.next());if(g.done)break;yield (f=a.mi_act_mapping_table)["delete"].apply(f,g.value)}f=d("ReQL").fromTableAscending(a.threads).filter(function(a){return a.syncGroup!=null&&(i||(i=d("I64"))).equal(a.syncGroup,(j||(j=d("LSIntEnum"))).ofNumber(95))}).iterator(new WeakMap());while(!0){g=(yield f.next());if(g.done)break;yield (e=a.threads)["delete"].apply(e,g.value[0])}}return(h||(h=b("Promise"))).resolve()});function e(b,c){return a.apply(this,arguments)}return e}();a.__nop_name__="LSTruncateMetadataThreads";g["default"]=a}),98);
__d("LSTruncateMetadataThreads",["LSTruncateMetadataThreads.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(a){return c.nativeOperation(b("LSTruncateMetadataThreads.nop"))},function(a){return c.resolve(d)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxTruncateMetadataThreadsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSTruncateThreadRangeTablesForSyncGroup",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.i64.eq(a[0],b.i64.cast([0,1]))?b.forEach(b.filter(b.db.table(10).fetch(),function(a){return b.i64.eq(b.i64.cast([0,1])==null?b.i64.cast([0,1]):b.i64.cast([0,1]),b.i64.cast([0,1]))}),function(a){return a["delete"]()}):b.i64.eq(a[0],b.i64.cast([0,95]))?b.forEach(b.filter(b.db.table(10).fetch([[[b.i64.cast([0,0])],[b.i64.cast([-1,4294967295])]]]),function(a){return b.i64.eq(b.i64.cast([0,1])==null?b.i64.cast([0,1]):b.i64.cast([0,1]),b.i64.cast([0,1]))&&(b.i64.eq(a.parentThreadKey,b.i64.cast([0,0]))||b.i64.eq(a.parentThreadKey,b.i64.cast([-1,4294967295])))}),function(a){return a["delete"]()}):b.resolve(0)},function(c){return b.i64.eq(a[0],b.i64.cast([0,1]))?b.forEach(b.filter(b.db.table(247).fetch(),function(a){return b.i64.eq(a.syncGroup==null?b.i64.cast([0,1]):a.syncGroup,b.i64.cast([0,1]))}),function(a){return a["delete"]()}):b.resolve()},function(c){return b.forEach(b.db.table(198).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(c){return b.forEach(b.db.table(220).fetch([[[a[0]]]]),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxTruncateThreadRangeTablesForSyncGroupStoredProcedure";a.__tables__=["threads_ranges_v2__generated","filtered_threads_ranges_v3__generated","inbox_threads_ranges","sync_group_threads_ranges"];e.exports=a}),null);
__d("LSTruncateTablesForSyncGroup",["LSTruncateThreadRangeTablesForSyncGroup"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.sequence([function(b){return c.forEach(c.filter(c.db.table(9).fetch(),function(b){return(c.i64.eq(b.syncGroup,a[0])||c.i64.eq(b.syncGroup,void 0)&&c.i64.eq(c.i64.cast([0,1]),a[0]))&&![c.i64.cast([0,17]),c.i64.cast([0,18]),c.i64.cast([0,19]),c.i64.cast([0,20]),c.i64.cast([0,21]),c.i64.cast([0,22]),c.i64.cast([0,23]),c.i64.cast([0,24]),c.i64.cast([0,25]),c.i64.cast([0,26]),c.i64.cast([0,27]),c.i64.cast([0,28])].some(function(a){return c.i64.eq(b.threadType,a)})}),function(a){return a["delete"]()})},function(d){return c.storedProcedure(b("LSTruncateThreadRangeTablesForSyncGroup"),a[0])}])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSMailboxTruncateTablesForSyncGroupStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSUpdateAttachmentItemCtaAtIndex",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.eq(a[5],b.i64.cast([0,0]))?b.forEach(b.db.table(18).fetch([[[a[0],a[1]]]]),function(b){var c=b.update;b.item;return c({defaultCtaId:a[2],defaultCtaTitle:a[3],defaultCtaType:a[4]})}):b.i64.eq(a[5],b.i64.cast([0,1]))?b.forEach(b.db.table(18).fetch([[[a[0],a[1]]]]),function(b){var c=b.update;b.item;return c({attachmentCta1Id:a[2],cta1Title:a[3],cta1Type:a[4],cta1IconType:void 0})}):b.i64.eq(a[5],b.i64.cast([0,2]))?b.forEach(b.db.table(18).fetch([[[a[0],a[1]]]]),function(b){var c=b.update;b.item;return c({attachmentCta2Id:a[2],cta2Title:a[3],cta2Type:a[4],cta2IconType:void 0})}):b.i64.eq(a[5],b.i64.cast([0,3]))?b.forEach(b.db.table(18).fetch([[[a[0],a[1]]]]),function(b){var c=b.update;b.item;return c({attachmentCta3Id:a[2],cta3Title:a[3],cta3Type:a[4],cta3IconType:void 0})}):b.resolve(function(a){b.logger(a).warn(a)}("Unexpected CTA index"))},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateAttachmentItemCtaAtIndexStoredProcedure";a.__tables__=["attachment_items"];e.exports=a}),null);
__d("LSUpdateOrInsertCommunitySurfaceRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(253).put({surfaceType:a[0],communityKey:a[1],isLoadingAfter:!1,hasMoreAfter:a[2],nextPageCursor:a[4]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateOrInsertCommunitySurfaceRangeStoredProcedure";a.__tables__=["community_surface_ranges"];e.exports=a}),null);
__d("LSUpdateReadReceipt",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(14).fetch([[[a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[1])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.contactId,a[2])&&b.i64.lt(c.readWatermarkTimestampMs,a[0])}),function(c){var d=c.update;c=c.item;return d({readWatermarkTimestampMs:a[0],readActionTimestampMs:b.i64.gt(a[3],b.i64.cast([0,0]))?a[3]:c.readActionTimestampMs})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateReadReceiptStoredProcedure";a.__tables__=["participants"];e.exports=a}),null);
__d("LSShimGetServerThreadKeyFromJIDV2.nop",["ReQL","RetUtil","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(c)));return d("RetUtil").getNullableRetResult(b==null?void 0:b.serverThreadKey)});function c(b,c,d){return a.apply(this,arguments)}return c}();a.__nop_name__="LSShimGetServerThreadKeyFromJIDV2";g["default"]=a}),98);
__d("LSReplaceOptimisticThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(9).fetch([[[a[1]]]]).next().then(function(c,d){d=c.done;c=c.value;return d?b.forEach(b.filter(b.db.table(9).fetch([[[a[0]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.le(c.authorityLevel,b.i64.cast([0,20]))}),function(c){var d=c.update;c.item;return d({threadKey:a[1],authorityLevel:b.i64.cast([0,40])})}):(c.item,b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){return a["delete"]()}))})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxReplaceOptimisticThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSUpdateOptimisticContextThreadKeys",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(32).fetch(),function(c){return b.i64.eq(c.threadKey,a[0])}),function(b){var c=b.update;b.item;return c({threadKey:a[1]})})},function(c){return b.forEach(b.filter(b.db.table(31).fetch(),function(c){return b.i64.eq(c.threadKey,a[0])}),function(b){var c=b.update;b.item;return c({threadKey:a[1]})})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreUpdateOptimisticContextThreadKeysStoredProcedure";a.__tables__=["threads_optimistic_context","messages_optimistic_context"];e.exports=a}),null);
__d("LSUpdateTaskQueueName",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(2).fetch([[[a[0]]],"queueNameTaskId"]),function(b){var c=b.update;b.item;return c({queueName:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreUpdateTaskQueueNameStoredProcedure";a.__tables__=["pending_tasks"];e.exports=a}),null);
__d("LSUpdateTaskValue",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(2).fetch([[[a[0]]],"queueNameTaskId"]),function(b){var c=b.update;b=b.item;return c({taskValue:b.taskValue.split(a[1]).join(a[2])})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreUpdateTaskValueStoredProcedure";a.__tables__=["pending_tasks"];e.exports=a}),null);
__d("LSUpdateThreadAuthorityAndMapping",["LSDeleteThread","LSHybridThreadDelete","LSReplaceOptimisticThread","LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateOptimisticContextThreadKeys","LSUpdateTaskQueueName","LSUpdateTaskValue"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.nativeOperation(b("LSShimGetServerThreadKeyFromJIDV2.nop"),a[0]).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){b=a.done;a=a.value;return b?d[1]=!1:(a.item,d[1]=!0)})},function(b){return c.filter(c.db.table(9).fetch(),function(b){return c.i64.eq(b.threadKey,a[2])}).next().then(function(a,b){b=a.done;a=a.value;return b?d[3]=!1:(a.item,d[3]=!0)})},function(e){return d[5]=c.i64.neq(d[0],void 0),d[7]=c.i64.eq(d[0],a[2])&&d[5],!d[7]&&!(c.i64.eq(d[0],a[1])&&d[5])&&d[5]?function(a){c.logger(a).mustfix(a)}("The mi_act_mapping row did not correspond to either the authoritative or optimistic thread key."):0,c.i64.neq(a[2],void 0)?d[6]=a[2]:d[6]=c.i64.cast([0,0]),d[5]?d[7]?c.sequence([function(e){return d[1]?c.storedProcedure(b("LSDeleteThread"),a[1],!1):c.resolve()},function(a){return c.i64.neq(d[6],void 0)?c.forEach(c.db.table(9).fetch([[[d[6]]]]),function(a){var b=a.update;a.item;return b({clientThreadKey:d[6]})}):c.resolve()},function(e){return c.storedProcedure(b("LSReplaceOptimisticThread"),d[6],a[1])},function(e){return c.storedProcedure(b("LSUpdateOptimisticContextThreadKeys"),d[6],a[1])}]):d[3]?c.storedProcedure(b("LSHybridThreadDelete"),d[6]):c.resolve():d[3]?d[1]?c.storedProcedure(b("LSHybridThreadDelete"),d[6]):c.sequence([function(a){return c.i64.neq(d[6],void 0)?c.forEach(c.db.table(9).fetch([[[d[6]]]]),function(a){var b=a.update;a.item;return b({clientThreadKey:d[6]})}):c.resolve()},function(e){return c.storedProcedure(b("LSReplaceOptimisticThread"),d[6],a[1])},function(e){return c.storedProcedure(b("LSUpdateOptimisticContextThreadKeys"),d[6],a[1])}]):c.resolve()},function(e){return d[3]?c.sequence([function(e){return d[9]=c.i64.to_string(d[6]),d[8]=c.i64.to_string(a[1]),c.storedProcedure(b("LSUpdateTaskQueueName"),d[9],d[8])},function(a){return c.storedProcedure(b("LSUpdateTaskValue"),d[8],d[9],d[8])}]):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID",["LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateThreadAuthorityAndMapping"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.nativeOperation(b("LSShimGetServerThreadKeyFromJIDV2.nop"),a[0]).then(function(a){return a=a,d[0]=a[0],a})},function(e){return c.i64.neq(d[0],a[1])?d[1]=d[0]:d[1]=void 0,c.storedProcedure(b("LSUpdateThreadAuthorityAndMapping"),a[0],a[1],d[1])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingWithOTIDFromJIDStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSUpdateThreadsRangesV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(c){return b.forEach(b.db.table(10).fetch([[[a[1]]]]),function(a){return a["delete"]()})},function(d){return c[8]=b.i64.gt(a[2],b.i64.cast([0,1]))&&b.i64.gt(a[3],b.i64.cast([-2147483648,0])),a[0]==="inbox"&&b.i64.eq(a[1],b.i64.cast([0,0]))&&b.i64.eq(a[4],b.i64.cast([0,1]))?b.sequence([function(d){return c[9]=a[2],c[10]=a[3],c[11]=!1,c[12]=c[8],b.forEach(b.db.table(198).fetch(),function(a){a=a.item;return c[13]=a.minLastActivityTimestampMs,c[15]=a.minThreadKey,c[14]=b.i64.lt(c[9]==null?c[13]:c[9],c[13]),c[9]=c[14]?c[13]:c[9],c[10]=c[14]?c[15]:c[10],c[11]=c[11]||a.isLoadingBefore,c[12]=c[12]||b.i64.gt(c[13],b.i64.cast([0,1]))&&b.i64.gt(c[15],b.i64.cast([-2147483648,0]))})},function(a){return a=[c[9],c[10],c[11],c[12]],c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],a}]):b.resolve((d=[a[2],a[3],!1,c[8]],c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],d))},function(d){return b.i64.eq(a[4],b.i64.cast([0,1]))?b.sequence([function(d){return c[9]=c[0],c[10]=c[1],c[11]=c[2],c[12]=c[3],b.forEach(b.filter(b.db.table(220).fetch(),function(c){return b.i64.eq(c.parentThreadKey,a[1])}),function(a){a=a.item;return c[13]=a.minLastActivityTimestampMs,c[15]=a.minThreadKey,c[14]=b.i64.lt(c[9]==null?c[13]:c[9],c[13]),c[9]=c[14]?c[13]:c[9],c[10]=c[14]?c[15]:c[10],c[11]=c[11]||a.isLoadingBefore,c[12]=c[12]||b.i64.gt(c[13],b.i64.cast([0,1]))&&b.i64.gt(c[15],b.i64.cast([-2147483648,0]))})},function(a){return a=[c[9],c[10],c[11],c[12]],c[4]=a[0],c[5]=a[1],c[6]=a[2],c[7]=a[3],a}]):b.resolve((d=[c[0],c[1],c[2],c[3]],c[4]=d[0],c[5]=d[1],c[6]=d[2],c[7]=d[3],d))},function(d){return b.db.table(10).add({parentThreadKey:a[1],minThreadKey:c[5]==null?b.i64.cast([-2147483648,0]):c[5],minLastActivityTimestampMs:c[4]==null?b.i64.cast([0,1]):c[4],maxLastActivityTimestampMs:b.i64.cast([0,1]),maxThreadKey:b.i64.cast([-2147483648,0]),isLoadingBefore:c[6],isLoadingAfter:!1,hasMoreBefore:c[7],hasMoreAfter:!1})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxUpdateThreadsRangesV2StoredProcedure";a.__tables__=["threads_ranges_v2__generated","inbox_threads_ranges","sync_group_threads_ranges"];e.exports=a}),null);
__d("LSUpsertFolderSeenTimestamp",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.gt(a[1],b.i64.cast([0,0]))?b.db.table(35).fetch([[[a[0]]]]).next().then(function(c,d){var e=c.done;c=c.value;return e?b.db.table(35).add({parentThreadKey:a[0],lastSeenRequestTimestampMs:a[1]}):(d=c.item,b.i64.lt(d.lastSeenRequestTimestampMs,a[1])?b.forEach(b.db.table(35).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastSeenRequestTimestampMs:a[1]})}):b.resolve())}):b.resolve()},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertFolderSeenTimestampStoredProcedure";a.__tables__=["folder_metadata"];e.exports=a}),null);
__d("LSUpsertMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(12).fetch([[[a[9]]],"optimistic"]).next().then(function(c,d){var e=c.done;c=c.value;return e?b.db.table(12).add({threadKey:a[3],timestampMs:a[5],messageId:a[8],offlineThreadingId:a[9],authorityLevel:a[2],primarySortKey:a[6],senderId:a[10],isAdminMessage:a[12],sendStatus:a[15],sendStatusV2:a[16],text:a[0],subscriptErrorMessage:a[1],secondarySortKey:a[7],stickerId:a[11],messageRenderingType:a[13],isUnsent:a[17],unsentTimestampMs:a[18],mentionOffsets:a[19],mentionLengths:a[20],mentionIds:a[21],mentionTypes:a[22],replySourceId:a[23],replySourceType:a[24],replySourceTypeV2:a[25],replyStatus:a[26],replySnippet:a[27],replyMessageText:a[28],replyToUserId:a[29],replyMediaExpirationTimestampMs:a[30],replyMediaUrl:a[31],replyMediaPreviewWidth:a[33],replyMediaPreviewHeight:a[34],replyMediaUrlMimeType:a[35],replyMediaUrlFallback:a[36],replyCtaId:a[37],replyCtaTitle:a[38],replyAttachmentType:a[39],replyAttachmentId:a[40],replyAttachmentExtra:a[41],replyType:a[42],isForwarded:a[43],forwardScore:a[44],hasQuickReplies:a[45],adminMsgCtaId:a[46],adminMsgCtaTitle:a[47],adminMsgCtaType:a[48],cannotUnsendReason:a[49],textHasLinks:a[50],viewFlags:a[51],displayedContentTypes:a[52],viewedPluginKey:a[53],viewedPluginContext:a[54],quickReplyType:a[55],hotEmojiSize:a[56],platformXmdEncoded:a[57],replySourceTimestampMs:a[58],ephemeralDurationInSec:a[59],msUntilExpirationTs:a[60],ephemeralExpirationTs:a[61],takedownState:a[62],isCollapsed:a[63],subthreadKey:a[64],botResponseId:a[65],metadataDataclass:a[66],editCount:a[67],isPaidPartnership:a[68],adminSignatureName:a[69],adminSignatureProfileUrl:a[70],adminSignatureCreatorType:a[71],translatedText:a[72],textDialect:a[73],translatedTextDialect:a[74],scheduledTimestamp:a[75],isVideoQuickSend:a[76]}):(d=c.item,b.i64.le(d.authorityLevel,a[2])?b.db.table(12).put({threadKey:a[3],timestampMs:a[5],messageId:a[8],offlineThreadingId:a[9],authorityLevel:a[2],primarySortKey:d.primarySortKey,senderId:a[10],isAdminMessage:a[12],sendStatus:a[15],sendStatusV2:a[16],text:a[0],subscriptErrorMessage:a[1],secondarySortKey:d.secondarySortKey,stickerId:a[11],messageRenderingType:a[13],isUnsent:a[17],unsentTimestampMs:a[18],mentionOffsets:a[19],mentionLengths:a[20],mentionIds:a[21],mentionTypes:a[22],replySourceId:a[23],replySourceType:a[24],replySourceTypeV2:a[25],replyStatus:a[26],replySnippet:a[27],replyMessageText:a[28],replyToUserId:a[29],replyMediaExpirationTimestampMs:a[30],replyMediaUrl:a[31],replyMediaPreviewWidth:a[33],replyMediaPreviewHeight:a[34],replyMediaUrlMimeType:a[35],replyMediaUrlFallback:a[36],replyCtaId:a[37],replyCtaTitle:a[38],replyAttachmentType:a[39],replyAttachmentId:a[40],replyAttachmentExtra:a[41],replyType:a[42],isForwarded:a[43],forwardScore:a[44],hasQuickReplies:a[45],adminMsgCtaId:a[46],adminMsgCtaTitle:a[47],adminMsgCtaType:a[48],cannotUnsendReason:a[49],textHasLinks:a[50],viewFlags:a[51],displayedContentTypes:a[52],viewedPluginKey:a[53],viewedPluginContext:a[54],quickReplyType:a[55],hotEmojiSize:a[56],platformXmdEncoded:a[57],replySourceTimestampMs:a[58],ephemeralDurationInSec:a[59],msUntilExpirationTs:a[60],ephemeralExpirationTs:a[61],takedownState:a[62],isCollapsed:a[63],subthreadKey:a[64],botResponseId:a[65],metadataDataclass:a[66],editCount:a[67],isPaidPartnership:a[68],adminSignatureName:a[69],adminSignatureProfileUrl:a[70],adminSignatureCreatorType:a[71],translatedText:a[72],textDialect:a[73],translatedTextDialect:a[74],scheduledTimestamp:a[75],isVideoQuickSend:a[76]}):b.resolve())})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertMessageStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSWriteThreadCapabilities",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(d,e){e=d.done;d=d.value;return e?0:(d.item,c[0]=b.i64.of_float(Date.now()),b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({capabilities:a[1],capabilities2:a[2],capabilities3:a[3],capabilities4:a[4],capabilities5:a[5]})}))})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxWriteThreadCapabilitiesStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSExpandedStaticDependencies",["LSAddParticipantIdToGroupThread","LSClearPinnedMessages","LSDeleteBanner","LSDeleteExistingMessageRanges","LSGetFirstAvailableAttachmentCTAID","LSHybridThreadDelete","LSInsertAttachmentCta","LSInsertAttachmentItem","LSInsertBlobAttachment","LSInsertNewMessageRange","LSIssueInsertPersistentMenuItemsForThreadTask","LSSetForwardScore","LSSetMessageDisplayedContentTypes","LSStaticDependencies","LSTransportHybridParticipantUpdateReceipts","LSTruncateMetadataThreads","LSTruncateTablesForSyncGroup","LSUpdateAttachmentItemCtaAtIndex","LSUpdateOrInsertCommunitySurfaceRange","LSUpdateOrInsertThread","LSUpdateReadReceipt","LSUpdateThreadAuthorityAndMappingWithOTIDFromJID","LSUpdateThreadsRangesV2","LSUpsertFolderSeenTimestamp","LSUpsertInboxThreadsRange","LSUpsertMessage","LSUpsertReaction","LSUpsertSyncGroupThreadsRange","LSWriteThreadCapabilities"],(function(a,b,c,d,e,f,g){"use strict";a=babelHelpers["extends"]({},c("LSStaticDependencies"),{addParticipantIdToGroupThread:c("LSAddParticipantIdToGroupThread"),clearPinnedMessages:c("LSClearPinnedMessages"),deleteBanner:c("LSDeleteBanner"),deleteExistingMessageRanges:c("LSDeleteExistingMessageRanges"),getFirstAvailableAttachmentCTAID:c("LSGetFirstAvailableAttachmentCTAID"),hybridThreadDelete:c("LSHybridThreadDelete"),insertAttachmentCta:c("LSInsertAttachmentCta"),insertAttachmentItem:c("LSInsertAttachmentItem"),insertBlobAttachment:c("LSInsertBlobAttachment"),insertNewMessageRange:c("LSInsertNewMessageRange"),issueInsertPersistentMenuItemsForThreadTask:c("LSIssueInsertPersistentMenuItemsForThreadTask"),setForwardScore:c("LSSetForwardScore"),setMessageDisplayedContentTypes:c("LSSetMessageDisplayedContentTypes"),transportHybridParticipantUpdateReceipts:c("LSTransportHybridParticipantUpdateReceipts"),truncateMetadataThreads:c("LSTruncateMetadataThreads"),truncateTablesForSyncGroup:c("LSTruncateTablesForSyncGroup"),updateAttachmentItemCtaAtIndex:c("LSUpdateAttachmentItemCtaAtIndex"),updateOrInsertCommunitySurfaceRange:c("LSUpdateOrInsertCommunitySurfaceRange"),updateOrInsertThread:c("LSUpdateOrInsertThread"),updateReadReceipt:c("LSUpdateReadReceipt"),updateThreadAuthorityAndMappingWithOTIDFromJID:c("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID"),updateThreadsRangesV2:c("LSUpdateThreadsRangesV2"),upsertFolderSeenTimestamp:c("LSUpsertFolderSeenTimestamp"),upsertInboxThreadsRange:c("LSUpsertInboxThreadsRange"),upsertMessage:c("LSUpsertMessage"),upsertReaction:c("LSUpsertReaction"),upsertSyncGroupThreadsRange:c("LSUpsertSyncGroupThreadsRange"),writeThreadCapabilities:c("LSWriteThreadCapabilities")});b=a;g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("QPLFlow",["QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";var h=0;function a(a,b){a=new i(a,b);a.start(b==null?void 0:b.annotations);return a}var i=function(){function a(a,b){this.$4=!1;this.$1=a;this.$2=(a=b==null?void 0:b.instanceKey)!=null?a:h++;this.$3=b==null?void 0:b.timeoutInMs}var b=a.prototype;b.start=function(a){this.$4=!0;c("QPLUserFlow").start(this.$1,{annotations:a,instanceKey:this.$2,timeoutInMs:(a=this.$3)!=null?a:void 0})};b.addPoint=function(a,b){c("QPLUserFlow").addPoint(this.$1,a,{instanceKey:this.$2}),b!=null&&this.$1!=null&&c("QPLUserFlow").addAnnotations(this.$1,b,{instanceKey:this.$2})};b.addAnnotations=function(a){c("QPLUserFlow").addAnnotations(this.$1,a,{instanceKey:this.$2})};b.endSuccess=function(a){c("QPLUserFlow").endSuccess(this.$1,{annotations:a,instanceKey:this.$2}),this.$4=!1};b.endFail=function(a,b){c("QPLUserFlow").endFailure(this.$1,a,{annotations:b,instanceKey:this.$2}),this.$4=!1};b.isActive=function(){return this.$4};b.getQPLAttrs=function(){return{event:this.$1,instanceKey:this.$2}};return a}();g.startQPLFlow=a}),98);
__d("Worm",["FBLogger","QPLFlow","WormReadOnlyStoreAccessor","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=1e4;a=function(){function a(a,b){this.$2=a,this.$1=b}var e=a.prototype;e.init=function(a){return this.$2.init(a)};e.close=function(){this.$2.close()};e.store=function(a){return new(d("WormReadOnlyStoreAccessor").ReadOnlyStoreAccessor)(this.$2,a,this.$1)};e.runInTransaction=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=this.$1!=null?d("QPLFlow").startQPLFlow(this.$1,{annotations:{string:{operationType:f}},timeoutInMs:h}):void 0;try{a=(yield this.$2.runInTransaction(a,b,e,{eventFlow:g}));g==null?void 0:g.endSuccess();return a}catch(a){g==null?void 0:g.endFail("error");c("FBLogger")("worm").catching(a).mustfix("Error performing %s",f);throw a}});function e(b,c,d,e){return a.apply(this,arguments)}return e}();return a}();g.OP_TIMEOUT_MS=h;g.WormDatabase=a}),98);
__d("WormPromise",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=typeof self==="object"?self.Promise:typeof globalThis==="object"?globalThis.Promise:g||b("Promise");f.WormPromise=a}),66);
__d("WormStoreFunctions",["WormPromise","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){var f=[];return d("WormPromise").WormPromise.all(e.map(function(b){b=b.selector;return a.getByIndex(c,b)})).then(function(c){var g=[],h=[];c.forEach(function(a,c){c=e[c].item;if(a){var d=babelHelpers["extends"]({},c);a=a[b.primaryKey];d[b.primaryKey]=a;g.push(d);f.push(a)}else h.push(c),f.push(null)});return d("WormPromise").WormPromise.all([a.bulkPut(g),a.bulkAdd(h).then(function(a){var b=0;f.forEach(function(c,d){c==null&&(f[d]=a[b++])})})])}).then(function(){return f.filter(Boolean)})}function e(a,b,c,d){return a.readIndex(b,c,babelHelpers["extends"]({},d,{limit:1})).then(function(a){return(a=a[0])!=null?a:null})}var h=function(){function a(a,b,c,d,e){this.query=a,this.cursorBuilder=b,this.order=c,this.filter=e,this.boundaries=d,(d==null?void 0:d.greaterThan)!=null?this.lowerBoundary={greaterThan:d.greaterThan}:(d==null?void 0:d.greaterThanOrEqual)!=null&&(this.lowerBoundary={greaterThanOrEqual:d.greaterThanOrEqual}),(d==null?void 0:d.lessThan)!=null?this.upperBoundary={lessThan:d.lessThan}:(d==null?void 0:d.lessThanOrEqual)!=null&&(this.upperBoundary={lessThanOrEqual:d.lessThanOrEqual})}var d=a.prototype;d.read=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var d=this.order==="asc",e;a==null?e=this.boundaries:d?e=babelHelpers["extends"]({},this.upperBoundary,{greaterThan:a}):e=babelHelpers["extends"]({},this.lowerBoundary,{lessThan:a});d=(yield this.query(e,{filter:this.filter,limit:b+1,order:this.order}));var f;e=null;if(d.length<=b)f=d;else if(d.length===b+1)f=d.slice(0,b),e=d[b];else throw c("err")("unreachable");d=f[0];b=f[f.length-1];return{cursorInfo:{endCursor:b&&this.cursorBuilder(b),hasNext:e!=null,hasPrevious:a!=null,startCursor:d&&this.cursorBuilder(d)},data:f}});function d(b,c){return a.apply(this,arguments)}return d}();return a}();function f(a,b,d,e,f,g){b=b.indexes;if(b==null)throw c("err")("No indexes found");var i=b[d];if(i==null)throw c("err")("Index not found");return new h(function(b,c){return a(d,(b=b)!=null?b:void 0,c)},function(a){return i.fields.map(function(b){return a[b]})},e,f,g)}g.bulkUpsert=a;g.getByIndex=e;g.getIndexRangeIterator=f}),98);
__d("WormReadOnlyStoreAccessor",["FBLogger","QPLFlow","Worm","WormStoreFunctions","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var e=a.prototype;e.$4=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=this.$2+"."+b+"_inline";var e=this.$3!=null?d("QPLFlow").startQPLFlow(this.$3,{annotations:{string:{operationType:b}},timeoutInMs:d("Worm").OP_TIMEOUT_MS}):void 0;try{a=(yield this.$1.runInTransaction([this.$2],"readonly",a,{eventFlow:e}));e==null?void 0:e.endSuccess();return a}catch(a){e==null?void 0:e.endFail("error");c("FBLogger")("worm").catching(a).mustfix("Error performing %s",b);throw a}});function e(b,c){return a.apply(this,arguments)}return e}();e.bulkGet=function(a){var b=this;return this.$4(function(c){return c.stores[b.$2].bulkGet(a)},"bulkGet")};e.count=function(){var a=this;return this.$4(function(b){return b.stores[a.$2].count()},"count")};e.get=function(a){var b=this;return this.$4(function(c){return c.stores[b.$2].get(a)},"get")};e.getByIndex=function(a,b,c){var d=this;return this.$4(function(e){return e.stores[d.$2].getByIndex(a,b,c)},"getByIndex")};e.getIndexRangeIterator=function(a,b,c,e){var f=this;return d("WormStoreFunctions").getIndexRangeIterator(function(a,b,c){return f.$4(function(d){return d.stores[f.$2].readIndexRange(a,b,c)},"getIndexRangeIterator")},this.$1.getSchema()[this.$2],a,b,c,e)};e.readAll=function(a){var b=this;return this.$4(function(c){return c.stores[b.$2].readAll(a)},"readAll")};e.readByKeyRange=function(a,b){var c=this;return this.$4(function(d){return d.stores[c.$2].readByKeyRange(a,b)},"readByKeyRange")};e.readIndex=function(a,b,c){var d=this;return this.$4(function(e){return e.stores[d.$2].readIndex(a,b,c)},"readIndex")};e.readIndexKeys=function(a,b,c){var d=this;return this.$4(function(e){return e.stores[d.$2].readIndexKeys(a,b,c)},"readIndexKeys")};e.readIndexRange=function(a,b,c){var d=this;return this.$4(function(e){return e.stores[d.$2].readIndexRange(a,b,c)},"readIndexRange")};e.readKeys=function(a){var b=this;return this.$4(function(c){return c.stores[b.$2].readKeys(a)},"readKeys")};e.readKeysByIndexRange=function(a,b,c){var d=this;return this.$4(function(e){return e.stores[d.$2].readKeysByIndexRange(a,b,c)},"readKeysByIndexRange")};return a}();g.ReadOnlyStoreAccessor=a}),98);
__d("WACryptoSha256",["WABase64","WACryptoDependencies"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return d("WACryptoDependencies").getCrypto().subtle.digest({name:"SHA-256"},a)}function i(a){return h(a).then(d("WABase64").encodeB64)}function a(a){return i(j(a))}function j(a){var b=new ArrayBuffer(a.length),c=new Uint8Array(b);for(var d=0,e=a.length;d<e;d++)c[d]=a.charCodeAt(d);return b}g.sha256=h;g.sha256Base64=i;g.sha256Str=a}),98);
__d("WormEncoding",["msgpack-msgpack"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=new(d("msgpack-msgpack").ExtensionCodec)(),b=0;a.register({decode:function(a){a=d("msgpack-msgpack").decode(a);return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)},encode:function(a){if(a instanceof ArrayBuffer)return d("msgpack-msgpack").encode(new Uint8Array(a))},type:b});b=1;a.register({decode:function(a){a=d("msgpack-msgpack").decode(a);return new Uint8Array(a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset))},encode:function(a){if(a instanceof Uint8Array)return d("msgpack-msgpack").encode(a)},type:b});b=2;a.register({decode:function(a){a=d("msgpack-msgpack").decode(a);return BigInt(a)},encode:function(a){if(typeof a==="bigint")return d("msgpack-msgpack").encode(String(a))},type:b});return{decode:function(b){return d("msgpack-msgpack").decode(b,{extensionCodec:a})},encode:function(b){return d("msgpack-msgpack").encode(b,{extensionCodec:a,ignoreUndefined:!0})}}}g.createEncoding=a}),98);
__d("WormIDbGetMinMaxKeySelector",[],(function(a,b,c,d,e,f){"use strict";a=-Infinity;var g;b=function(){if(g!=null)return g;try{IDBKeyRange.only([[]]);g=[[]];return g}catch(b){var a=String.fromCharCode(65535);g=a;return a}};f.MIN_KEY=a;f.getMaxSelector=b}),66);
__d("WormEAR",["FBLogger","Promise","WABinary","WACryptoDependencies","WACryptoSha256","WACryptoSha256HmacBuilder","WATimeUtils","WormEncoding","WormGlobalConfig","WormIDbGetMinMaxKeySelector","asyncToGeneratorRuntime","err","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h,i="_encryptedContent",j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.name="WormEAREncryptionError";c.message=a;return c}return a}(babelHelpers.wrapNativeSuper(Error)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){var e;e=b.call(this,a)||this;e.name="WormEARDecryptionError";e.message=a;e.store=c;e.maybeHashedPk=d;return e}return a}(babelHelpers.wrapNativeSuper(Error));function l(a,b,c){if(typeof a==="number")return a;b=b.encode(a);a=new(d("WACryptoSha256HmacBuilder").Sha256HMacBuilder)(new Uint8Array(c)).update(b).finish();return a.buffer}var m=32,n=2,o=128,p=12,q=256,r=new Uint8Array(0).buffer,s="AES-GCM",t="HKDF",u="SHA-256";a=60*60;e=24*a;var v=0,w=e*30*6;f=function(){function a(a,b,c){this.$6=0;this.$8=!1;this.$9=!1;this.$1=a;this.$7=(a=c==null?void 0:c.encKeyTtl)!=null?a:w;this.$2=d("WormEncoding").createEncoding();this.$3=b;this.$5=crypto.subtle.importKey("raw",b,{name:s},!1,["encrypt","decrypt"]);this.$4=new Map()}var e=a.prototype;e.isSecureStore=function(a){return this.$1[a].secure!==!1};e.$10=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return(yield d("WACryptoSha256").sha256Base64(this.$3)).substring(0,5)});function c(){return a.apply(this,arguments)}return c}();e.prepareNewKeyVersion=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WACryptoDependencies").getCrypto(),b=a.getRandomValues(new Uint8Array(m)).buffer,c=a.getRandomValues(new Uint8Array(m)).buffer,e=a.getRandomValues(new Uint8Array(p)),f=(yield this.$5);a=(yield a.subtle.encrypt({iv:e,name:s,tagLength:o},f,c));return{clientKey:b,expiration:d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+this.$7),keyHash:yield this.$10(),salt:d("WABinary").Binary.build(e,a).readBuffer()}});function c(){return a.apply(this,arguments)}return c}();e.init=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=this;this.$4=new Map();this.$6=0;this.$8=e.incorrectVersions;this.$9=e.versionsLoss;var i=d("WACryptoDependencies").getCrypto(),j=(yield this.$10()),k=!0;try{yield (h||(h=b("Promise"))).all(a.map(function(a){k=k&&a.keyHash===j;var c=a.salt,d=c.slice(0,p),e=c.slice(p);return g.$5.then(function(c){return(h||(h=b("Promise"))).all([i.subtle.importKey("raw",a.clientKey,{name:t},!1,["deriveKey"]),i.subtle.decrypt({iv:new Uint8Array(d),name:s,tagLength:o},c,e)])}).then(function(a){var b=a[0];a=a[1];return i.subtle.deriveKey({hash:{name:u},info:r,name:t,salt:a},b,{length:q,name:s},!0,["encrypt","decrypt"])}).then(function(a){return i.subtle.exportKey("raw",a)}).then(function(b){g.$6=Math.max(g.$6,a.version),g.$4.set(a.version,b)})}))}catch(a){c("FBLogger")("worm").catching(a).mustfix("Error on keychain initialisation keyHashCheck: %s",k);throw a}finally{f==null?void 0:(e=f.eventFlow)==null?void 0:e.addAnnotations({bool:{keyHashCheck:k}})}});function e(b,c,d){return a.apply(this,arguments)}return e}();e.$11=function(a){if(this.$6===0)throw new j("EAR.Encryption. EAR is not initialised ");var b=this.$4.get(this.$6);if(b==null)throw new j("EAR.Encryption.Key does not exist for version");var c=d("tweetnacl").randomBytes(d("tweetnacl").secretbox.nonceLength);a=d("tweetnacl").secretbox(a,c,new Uint8Array(b));return d("WABinary").Binary.build(v,this.$6,c,a).readBuffer()};e.$12=function(a,b,c){var e=a.slice(0,n);e=new DataView(e).getUint8(1);var f=this.$4.get(e);if(f==null)throw new k("EAR.Decryption.Key does not exist for version: "+e+"; incorrectVersions: "+this.$8.toString()+" versionsLoss: "+this.$9.toString(),b,c);e=a.slice(n,n+d("tweetnacl").secretbox.nonceLength);a=a.slice(n+d("tweetnacl").secretbox.nonceLength);a=d("tweetnacl").secretbox.open(new Uint8Array(a),new Uint8Array(e),new Uint8Array(f));if(a==null)throw new k("EAR.Decryption. Unable to decrypt; incorrectVersions: "+this.$8.toString()+" versionsLoss: "+this.$9.toString(),b,c);return a};e.encryptEntity=function(a,b){b=this.$1[b];var c=new Set();b.autoIncrement!==!0&&c.add(b.primaryKey);var d=b.indexes;if(d!=null)for(var e of Object.keys(d)){var f=d[e];for(f of f.fields)c.add(f)}f={};for(e of c){f[e]=((d=b.nonEncryptedFields)==null?void 0:d.has(e))?a[e]:l(a[e],this.$2,this.$3)}b.autoIncrement===!0&&a[b.primaryKey]!=null&&(f[b.primaryKey]=a[b.primaryKey]);return babelHelpers["extends"]({},f,(c={},c[i]=this.$11(this.$2.encode(a)),c))};e.$13=function(a,b){if(i in a){b=a[this.$1[b].primaryKey];return{encrypted:!0,encryptedEntity:a,pk:b}}else return{encrypted:!1,entity:a}};e.maybeDecrypt=function(a,b,e,f){if(a==null)return a;if(this.isSecureStore(b)===!1)return a;var g=this.$13(a,b);if(!g.encrypted){if(f==null?void 0:f.shouldNotFailIfEntityIsNotEncrypted)return a;if(d("WormGlobalConfig").getWormGlobalConfig().treatMalformedEncryptedEntityAsDecryptionError()===!0){f=a[this.$1[b].primaryKey];throw new k("EAR.Decryption. Attempt to decrypt malformed encrypted entity. Missing '"+i+"' property. Pk is "+(f==null?"empty":"not empty"),b,f)}else throw c("err")("Attempt to decrypt not encrypted entity")}e==null?void 0:e.addPoint("decrypt_start");a=this.decryptEntity(g.encryptedEntity,b,g.pk);e==null?void 0:e.addPoint("decrypt_end");f=this.$1[b];if(f.autoIncrement===!0){return babelHelpers["extends"]({},a,(e={},e[f.primaryKey]=g.pk,e))}return a};e.maybeEncrypt=function(a,b,c){if(this.isSecureStore(b)===!1)return a;c==null?void 0:c.addPoint("encrypt_start");a=this.encryptEntity(a,b);c==null?void 0:c.addPoint("encrypt_end");return a};e.decryptEntity=function(a,b,c){return this.$2.decode(this.$12(a[i],b,c))};e.hashPk=function(a,b,c){return((a=this.$1[a].nonEncryptedFields)==null?void 0:a.has(b))?c:l(c,this.$2,this.$3)};e.hashSelector=function(a,b,c){var e;a=[].concat(a);e=(c=(e=this.$1[b].indexes)==null?void 0:(e=e[c])==null?void 0:e.fields)!=null?c:[];for(c=0;c<a.length;c++){var f,g=a[c],h=e[c];if(g===d("WormIDbGetMinMaxKeySelector").getMaxSelector())continue;if(g===-Infinity)continue;if((f=this.$1[b].nonEncryptedFields)==null?void 0:f.has(h))continue;a[c]=l(g,this.$2,this.$3)}return a};return a}();g.ENCRYPTED_COLUMN_NAME=i;g.EncryptionError=j;g.DecryptionError=k;g.WormEAR=f}),98);
__d("WormIDbStore",["Promise","WormIDbGetMinMaxKeySelector","WormPromise","WormStoreFunctions","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){};a=function(){function a(a,b,c,d,e){var f=this;this.readIndexRange=function(a,b,c){return b==null?f.$11(function(){return f.$1.index(a).openCursor(null,(c==null?void 0:c.order)==="desc"?"prev":"next")},c):f.$11(function(){return f.$1.index(a).openCursor(f.$12(b,a),(c==null?void 0:c.order)==="desc"?"prev":"next")},c)};this.$1=b.objectStore(a);this.$2=a;this.$3=d;this.$4=c;this.$5=e}var e=a.prototype;e.$6=function(a,b){var c;c=((c=this.$4.eventFlow)==null?void 0:c.isActive())?this.$4.eventFlow:null;c==null?void 0:c.addPoint(b+"_start");a=a();c==null?void 0:c.addPoint(b+"_end");return a};e.$7=function(){return this.$3.isSecureStore(this.$2)};e.$8=function(a){var b=this;return!this.$7()?a:this.$6(function(){return b.$3.hashPk(b.$2,b.$5.primaryKey,a)},"hashPk")};e.$9=function(a,b){var c=this;if(!this.$7())return a;return a==null?a:this.$6(function(){return c.$3.hashSelector(a,c.$2,b)},"hashSelector")};e.$10=function(a){var b=this;return new(d("WormPromise").WormPromise)(function(c,d){var e=a();e.onsuccess=function(){try{c(e.result.map(function(a){return b.$3.maybeDecrypt(a,b.$2,b.$4.eventFlow)}))}catch(a){d(a)}};e.onerror=function(){return d(e.error)}})};e.$11=function(a,b){var c=this;return new(d("WormPromise").WormPromise)(function(d,e){var f,g=[],h=(b==null?void 0:b.limit)!=null,i=Math.max(0,(f=b==null?void 0:b.limit)!=null?f:0);if(h&&i===0){d(g);return}var j=a();j.onsuccess=function(){var a=j.result;if(a){var f;try{f=c.$3.maybeDecrypt(a.value,c.$2,c.$4.eventFlow)}catch(a){e(a);return}(!(b==null?void 0:b.filter)||b.filter(f))&&g.push(f);if(h&&i===g.length){d(g);return}a["continue"]()}else d(g)};j.onerror=function(){return e(j.error)}})};e.bulkAdd=function(a){var c=this;return(h||(h=b("Promise"))).all(a.map(function(a){return new(d("WormPromise").WormPromise)(function(b,d){var e=c.$1.add(c.$3.maybeEncrypt(a,c.$2,c.$4.eventFlow));e.onsuccess=function(){c.$5.autoIncrement===!0?b(e.result):b(a[c.$5.primaryKey])};e.onerror=function(){return d(e.error)}})}))};e.bulkPut=function(a){var c=this;return(h||(h=b("Promise"))).all(a.map(function(a){return new(d("WormPromise").WormPromise)(function(b,d){var e,f=c.$1.put(c.$3.maybeEncrypt(a,c.$2,(e=c.$4.eventFlow)!=null?e:void 0));f.onsuccess=b;f.onerror=function(){return d(f.error)}})})).then(i)};e.bulkUpsert=function(a,b){return d("WormStoreFunctions").bulkUpsert(this,this.$5,a,b)};e.bulkGet=function(a){var c=this;return(h||(h=b("Promise"))).all(a.map(function(a){return new(d("WormPromise").WormPromise)(function(b,d){var e=c.$1.get(c.$8(a));e.onsuccess=function(){try{var a;b(c.$3.maybeDecrypt(e.result,c.$2,(a=c.$4.eventFlow)!=null?a:void 0))}catch(a){d(a)}};e.onerror=function(){return d(e.error)}})}))};e.get=function(a){return this.bulkGet([a]).then(function(a){return a[0]})};e.getByIndex=function(a,b,c){return d("WormStoreFunctions").getByIndex(this,a,b,c)};e.readByKeyRange=function(a,b){var c=this;return a==null?this.$11(function(){return c.$1.openCursor(null,(b==null?void 0:b.order)==="desc"?"prev":"next")},b):this.$11(function(){return c.$1.openCursor(c.$12(a,c.$5.primaryKey),(b==null?void 0:b.order)==="desc"?"prev":"next")},b)};e.$13=function(a,b,e){if(this.$5.indexes==null)throw c("err")("No indexes found for store");a=this.$5.indexes[a].fields;if(b.length===a.length)return b;a=a.map(function(a,c){return(a=b[c])!=null?a:e==="max"?d("WormIDbGetMinMaxKeySelector").getMaxSelector():d("WormIDbGetMinMaxKeySelector").MIN_KEY});return a};e.$12=function(a,b){var d=b===this.$5.primaryKey;if(a.only!=null){if(this.$5.indexes==null)throw c("err")("No indexes found for store");var e=this.$5.indexes[b].fields;return a.only.length===e.length?IDBKeyRange.only(this.$9(a.only,b)):IDBKeyRange.bound(d?this.$8(a.only):this.$9(this.$13(b,a.only,"min"),b),d?this.$8(a.only):this.$9(this.$13(b,a.only,"max"),b),!0,!0)}if(a.lessThan!=null||a.lessThanOrEqual!=null){e=(e=a.lessThan)!=null?e:a.lessThanOrEqual;if(a.greaterThan!=null||a.greaterThanOrEqual!=null){var f;f=(f=a.greaterThan)!=null?f:a.greaterThanOrEqual;return IDBKeyRange.bound(d?this.$8(f):this.$9(this.$13(b,f,"min"),b),d?this.$8(e):this.$9(this.$13(b,e,"max"),b),a.greaterThan!=null,a.lessThan!=null)}return IDBKeyRange.upperBound(d?this.$8(e):this.$9(this.$13(b,e,"max"),b),a.lessThan!=null)}else{e=(f=a.greaterThan)!=null?f:a.greaterThanOrEqual;if(e!=null)return IDBKeyRange.lowerBound(d?this.$8(e):this.$9(this.$13(b,e,"min"),b),a.greaterThan!=null);else throw c("err")("Invalid range")}};e.readIndex=function(a,b,c){var d=this;return(c==null?void 0:c.filter)==null&&(c==null?void 0:c.order)!=="desc"?this.$10(function(){var e;return d.$1.index(a).getAll(d.$9(b,a),(e=c==null?void 0:c.limit)!=null?e:void 0)}):this.$11(function(){return d.$1.index(a).openCursor(d.$9(b,a),(c==null?void 0:c.order)==="desc"?"prev":"next")},c)};e.readIndexKeys=function(a,b,c){var d=this;return this.readIndex(a,b,c).then(function(a){return a.map(function(a){return a[d.$5.primaryKey]})})};e.readKeysByIndexRange=function(a,b,c){var d=this;return this.readIndexRange(a,b,c).then(function(a){return a.map(function(a){return a[d.$5.primaryKey]})})};e.getIndexRangeIterator=function(a,b,c,e){return d("WormStoreFunctions").getIndexRangeIterator(this.readIndexRange,this.$5,a,b,c,e)};e.readAll=function(a){var b=this;return(a==null?void 0:a.filter)===null&&(a==null?void 0:a.order)!=="desc"?this.$10(function(){var c;return b.$1.getAll((c=a==null?void 0:a.limit)!=null?c:void 0)}):this.$11(function(){return b.$1.openCursor(null,(a==null?void 0:a.order)==="desc"?"prev":"next")},a)};e.readKeys=function(a){var b=this;return this.readAll(a).then(function(a){return a.map(function(a){return a[b.$5.primaryKey]})})};e.bulkDelete=function(a){var c=this;return(h||(h=b("Promise"))).all(a.map(function(a){return new(d("WormPromise").WormPromise)(function(b,d){var e=c.$1["delete"](c.$8(a));e.onsuccess=b;e.onerror=function(){return d(e.error)}})})).then(i)};e["delete"]=function(a){var b=this;return new(d("WormPromise").WormPromise)(function(c,d){var e=b.$1["delete"](b.$8(a));e.onsuccess=function(){return c()};e.onerror=function(){return d(e.error)}})};e.clear=function(){var a=this;return new(d("WormPromise").WormPromise)(function(b,c){var d=a.$1.clear();d.onsuccess=b;d.onerror=function(){return c(d.error)}}).then(i)};e.count=function(){var a=this;return new(d("WormPromise").WormPromise)(function(b,c){var d=a.$1.count();d.onsuccess=function(){return b(d.result)};d.onerror=function(){return c(d.error)}})};return a}();g.WormIDbStore=a}),98);
__d("WormIDbTransaction",["WAResolvable","WormIDbStore"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c="WormUnknownError";a=b.call(this,c)||this;a.name=c;a.message=c;return a}return a}(babelHelpers.wrapNativeSuper(Error)),i=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c="WormUnknownAbortError";a=b.call(this,c)||this;a.name=c;a.message=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));a=function(){function a(a,b,c,e,f){var g=this;this.$1=a;this.$2=new(d("WAResolvable").Resolvable)();this.$1.oncomplete=function(){g.$2.resolve()};this.$1.onerror=function(a){a=(a=(a=(a=a.target)==null?void 0:a.error)!=null?a:g.$1.error)!=null?a:new h();g.$2.reject(a)};this.$1.onabort=function(a){a=(a=(a=(a=a.target)==null?void 0:a.error)!=null?a:g.$1.error)!=null?a:new i();g.$2.reject(a)};this.$3=e.reduce(function(a,e){return babelHelpers["extends"]({},a,(a={},a[e]=new(d("WormIDbStore").WormIDbStore)(e,g.$1,b,c,f[e]),a))},(a=this.$3)!=null?a:{})}var b=a.prototype;b.commit=function(){this.$1.commit==null?void 0:this.$1.commit();return this.$2.promise};b.abort=function(){this.$2.isSettled||this.$1.abort()};babelHelpers.createClass(a,[{key:"stores",get:function(){return this.$3}}]);return a}();g.WormIDbTransaction=a}),98);
__d("WormIDbTypes",[],(function(a,b,c,d,e,f){"use strict";a="_worm_db_version_";b="_worm_ear_";c="schema_hash";d="creation_ts";f.DB_VERSION_STORE=a;f.EAR_STORE=b;f.SCHEMA_HASH_KEY=c;f.DB_CREATION_TS=d}),66);
__d("WAIDBTypes",[],(function(a,b,c,d,e,f){"use strict";function a(){return indexedDB}f.idb=a}),66);
__d("WormIDbUtils",["Promise","WAIDBTypes","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return new(h||(h=b("Promise")))(function(b,c){a.onsuccess=function(){return b(a.result)},a.onerror=function(){return c(a.error)}})}function e(a,e,f){var g=e.onBecomeStale,i=e.onClose,j=e.onError,k=e.onUpgrade;return new(h||(h=b("Promise")))(function(b,e){var h=d("WAIDBTypes").idb().open(a,f);k!=null&&(h.onupgradeneeded=function(){if(h.transaction==null)throw c("err")("Transaction is null on upgradeneeded event");k(h.result,h.transaction)});h.onsuccess=function(){var a=h.result;i!=null&&(a.onclose=i);a.onversionchange=function(){a.close(),g!=null&&g()};b(a)};h.onerror=function(){e(h.error),j!=null&&j(h.error)}})}g.promisifyIDbRequest=a;g.openIDb=e}),98);
__d("WormIDbUpgrade",["WATimeUtils","WormIDbTypes","WormIDbUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){var d=[],e=[],f=new Map(),g=Array.from(Object.keys(c)).map(function(a){return a.toString()});g=new Set(g);for(var h of Object.keys(c))if(!a.objectStoreNames.contains(h))d.push(h);else{var i=c[h];i=(i=i.indexes)!=null?i:{};var j=b.objectStore(h),k=j.indexNames,l=new Set(Object.keys(i)),m=[],n=[];for(var o of l)!k.contains(o)?m.push(o):j.index(o).unique!==i[o].unique&&(m.push(o),n.push(o));for(j=0;j<k.length;j++){o=k[j];l.has(o)||n.push(o)}(m.length>0||n.length>0)&&f.set(h,{indexesToCreate:m,indexesToDelete:n})}for(i=0;i<a.objectStoreNames.length;i++){o=a.objectStoreNames[i];g.has(o)||e.push(o)}return{storesToCreate:d,storesToDelete:e,storesToModify:f}}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!a.objectStoreNames.contains(d("WormIDbTypes").DB_VERSION_STORE))return{isNewDb:!0,shouldUpgrade:!0};a=a.transaction(d("WormIDbTypes").DB_VERSION_STORE,"readonly");a=(yield d("WormIDbUtils").promisifyIDbRequest(a.objectStore(d("WormIDbTypes").DB_VERSION_STORE).get(d("WormIDbTypes").SCHEMA_HASH_KEY)));return{isNewDb:!1,shouldUpgrade:(a==null?void 0:a.value)!==b}});return i.apply(this,arguments)}function j(a,b,c){for(c of c){var d=b[c],e=a.createObjectStore(c,{autoIncrement:!!d.autoIncrement,keyPath:d.primaryKey});d=d.indexes;if(d==null)continue;for(var f of Object.keys(d)){var g=d[f];e.createIndex(f,g.fields.map(function(a){return a.toString()}),{unique:g.unique})}}}function c(a,b,c,e,f){var g=h(a,b,c),i=g.storesToCreate,k=g.storesToDelete;g=g.storesToModify;j(a,c,i);if(f.onlyCreateNewStores)return;for(i of k)f.safeToDeleteStores.has(i)&&a.deleteObjectStore(i);a=function(a){var d=a[0];k=a[1];a=k.indexesToCreate;var e=k.indexesToDelete;for(e of e)b.objectStore(d).deleteIndex(e);e=c[d].indexes;if(e==null)return"continue";var g=!1;for(a of a){var h=e[a];b.objectStore(d).createIndex(a,h.fields,{unique:h.unique});g=!0}if(g&&c[d].secure===!0&&f.maybeEar!=null){var i=d,j=f.maybeEar,l=b.objectStore(i).getAll();l.onsuccess=function(){var a=l.result;a.forEach(function(a){if(a==null)return;b.objectStore(d).put(j.maybeEncrypt(j.maybeDecrypt(a,i,void 0,{shouldNotFailIfEntityIsNotEncrypted:!0}),i,void 0))})}}};for(i of g){g=a(i);if(g==="continue")continue}b.objectStore(d("WormIDbTypes").DB_VERSION_STORE).put({key:d("WormIDbTypes").SCHEMA_HASH_KEY,value:e});f.isNewDbInstance&&b.objectStore(d("WormIDbTypes").DB_VERSION_STORE).put({key:d("WormIDbTypes").DB_CREATION_TS,value:d("WATimeUtils").performanceAbsoluteNow()})}g.shouldUpgradeDb=a;g.createNewStores=j;g.upgradeDb=c}),98);
__d("WormIDbDriver",["FBLogger","Promise","WABridge","WACryptoSha256","WAOdsEnums","WAResolvable","WATimeUtils","WormGlobalConfig","WormIDbTransaction","WormIDbTypes","WormIDbUpgrade","WormIDbUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i={_worm_db_version_:{primaryKey:"key",secure:!1},_worm_ear_:{primaryKey:"version",secure:!1}};a=function(){function a(a,b,e,f,g){var h=this;this.$5=null;this.$8=[];this.$12=function(){d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.WORM,key:h.$3+".error.db_stale"})};this.$13=function(){d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.WORM,key:h.$3+".error.db_close"})};this.$14=function(a){c("FBLogger")("worm").catching(a).mustfix("Unexpected error  %s",h.$3)};this.$2=a;this.$3=b;this.$4=e;this.$6=(a=g==null?void 0:g.safeToDeleteStores)!=null?a:new Set();this.$9=g==null?void 0:g.blockingErrorThreshold;this.$10=(b=g==null?void 0:g.onBlockingError)!=null?b:function(){};this.$11=(e=g==null?void 0:g.onTransactionError)!=null?e:function(){};this.$7=f}var e=a.prototype;e.getSchema=function(){return this.$4};e.$15=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){this.$5!=null&&(yield this.$5.promise);if(this.$1==null)throw c("err")("IDB is not initialised: "+this.$3);b=new(d("WormIDbTransaction").WormIDbTransaction)(this.$1.transaction(a.map(function(a){return a.toString()}),b,{durability:"relaxed"}),f,this.$7,a,this.$4);var g;try{g=(yield e(b)),yield b.commit()}catch(a){b.abort();throw a}return g});function e(b,c,d,e){return a.apply(this,arguments)}return e}();e.$16=function(a){var b;if(this.$9==null)return;var d=this.$9;a=(b=(b=(b=a==null?void 0:a.name)!=null?b:a==null?void 0:a.message)!=null?b:a==null?void 0:a.toString())!=null?b:"unknown";this.$8.push(a);if(this.$8.length<Math.max(d,1))return;var e=this.$8[this.$8.length-1];b=this.$8.every(function(a){return a===e})?e:"mixed";c("FBLogger")("worm").mustfix("Unrecoverable error (%s): %s",this.$3,b);this.$10(b);this.$8=[]};e.$17=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){if(this.$1==null){var f;(f=e.eventFlow)==null?void 0:f.addPoint("db_reinit_start",{bool:{isDbNull:!0}});yield this.$18();(f=e.eventFlow)==null?void 0:f.addPoint("db_reinit_end")}var g;try{g=(yield this.$15(a,b,c,e))}catch(i){f=d("WormGlobalConfig").getWormGlobalConfig();var h=f.handleNotFoundErrorExperiment;f=f.handleUnknownErrorExperiment;if((i==null?void 0:i.name)==="InvalidStateError"||(i==null?void 0:i.name)==="NotFoundError"&&h()===!0||(i==null?void 0:i.name)==="UnknownError"&&f()===!0){(f=e.eventFlow)==null?void 0:f.addPoint("db_reinit_start",{bool:{isDbInvalid:!0}});yield this.$18({forceUpgrade:(i==null?void 0:i.name)==="NotFoundError"&&h()===!0});(f=e.eventFlow)==null?void 0:f.addPoint("db_reinit_end");g=(yield this.$15(a,b,c,e))}else throw i}return g});function c(b,c,d,e){return a.apply(this,arguments)}return c}();e.runInTransaction=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){var e;try{e=(yield this.$17(a,b,c,d)),this.$8=[]}catch(a){this.$11(a);this.$16(a);throw a}return e});function c(b,c,d,e){return a.apply(this,arguments)}return c}();e.close=function(){var a;(a=this.$1)==null?void 0:a.close()};e.init=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield this.$18({eventFlow:(a=a==null?void 0:a.eventFlow)!=null?a:void 0})}catch(a){if((a==null?void 0:a.name)==="InvalidStateError")yield this.$18();else throw a}});function c(b){return a.apply(this,arguments)}return c}();e.$19=function(a,b){var c=a.version;a.close();return d("WormIDbUtils").openIDb(this.$2,{onBecomeStale:this.$12,onClose:this.$13,onError:this.$14,onUpgrade:function(a,c){return d("WormIDbUpgrade").upgradeDb(a,c,i,b,{isNewDbInstance:!1,maybeEar:null,onlyCreateNewStores:!0,safeToDeleteStores:new Set()})}},c+1)};e.$18=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,e=!1;if(this.$5){e=!0;return this.$5.promise}this.$5=new(d("WAResolvable").Resolvable)();var f=!1;this.$1!=null&&(this.$1.close(),this.$1=null,f=!0);var g=!0;try{var h=babelHelpers["extends"]({},this.$4,i),j=JSON.stringify(h);if(j==null)throw c("err")("DB schema cannot be serialized: "+this.$3);var k=(yield d("WACryptoSha256").sha256Str(j));j=null;var l=(yield d("WormIDbUtils").openIDb(this.$2,{onBecomeStale:this.$12,onClose:this.$13,onError:this.$14,onUpgrade:function(a,c){j={isNewDb:!0,shouldUpgrade:!1};return d("WormIDbUpgrade").upgradeDb(a,c,h,k,{isNewDbInstance:!0,maybeEar:null,onlyCreateNewStores:!1,safeToDeleteStores:b.$6})}}));try{if(Object.keys(i).some(function(a){return l.objectStoreNames.contains(a)===!1})){var m;a==null?void 0:(m=a.eventFlow)==null?void 0:m.addPoint("ear_schema_recovery_start");l=(yield this.$19(l,k));a==null?void 0:(m=a.eventFlow)==null?void 0:m.addPoint("ear_schema_recovery_end")}}catch(b){a==null?void 0:(m=a.eventFlow)==null?void 0:m.addPoint("ear_schema_recovery_fail");c("FBLogger")("worm").catching(b).mustfix("EAR initialization error")}this.$1=l;a==null?void 0:(m=a.eventFlow)==null?void 0:m.addPoint("ear_init_start");try{yield this.$20((m=(m=j)==null?void 0:m.isNewDb)!=null?m:!1,{eventFlow:(m=a==null?void 0:a.eventFlow)!=null?m:void 0})}catch(b){a==null?void 0:(m=a.eventFlow)==null?void 0:m.addPoint("ear_init_err");c("FBLogger")("worm").catching(b).mustfix("EAR initialization error");throw b}a==null?void 0:(m=a.eventFlow)==null?void 0:m.addPoint("ear_init_end");var n=j!=null?j:yield d("WormIDbUpgrade").shouldUpgradeDb(l,k);g=n.shouldUpgrade||((m=a==null?void 0:a.forceUpgrade)!=null?m:!1);if(g){this.$1=null;m=l.version;l.close();this.$1=(yield d("WormIDbUtils").openIDb(this.$2,{onBecomeStale:this.$12,onClose:this.$13,onError:this.$14,onUpgrade:function(a,c){return d("WormIDbUpgrade").upgradeDb(a,c,h,k,{isNewDbInstance:n.isNewDb,maybeEar:b.$7,onlyCreateNewStores:!1,safeToDeleteStores:b.$6})}},m+1))}(m=this.$5)==null?void 0:m.resolve()}catch(a){(m=this.$5)==null?void 0:m.reject(a);throw a}finally{a==null?void 0:(m=a.eventFlow)==null?void 0:m.addAnnotations({bool:{isClosingDb:f,isCompetingInit:e,shouldUpgrade:g}});this.$5=null}});function e(b){return a.apply(this,arguments)}return e}();e.$20=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this,g=(yield this.$7.prepareNewKeyVersion()),i=!1,k=!1,l=(yield new(h||(h=b("Promise")))(function(b,e){if(f.$1==null)throw c("err")("IDB is not initialised: "+f.$3);var h=[],l=f.$1.transaction(d("WormIDbTypes").EAR_STORE,"readwrite");l.oncomplete=function(){return b(h)};l.onerror=l.onabort=function(){return e(l.error)};var m=l.objectStore(d("WormIDbTypes").EAR_STORE),n=m.getAll();n.onsuccess=function(){var c;c=(c=n.result)!=null?c:[];h=c.filter(j);i=c.length!==h.length;h.sort(function(a,b){return a.version-b.version});c=h.length===0||!d("WATimeUtils").isInFuture(h[h.length-1].expiration);if(!c){b(h);return}c=h.length===0?0:h[h.length-1].version;k=!a&&c===0;c=babelHelpers["extends"]({},g,{version:c+1});m.add(c);h.push(c)};n.onerror=function(){return e(n.error)}}));yield this.$7.init(l,{incorrectVersions:i,versionsLoss:k},{eventFlow:e==null?void 0:e.eventFlow})});function e(b,c){return a.apply(this,arguments)}return e}();return a}();function j(a){if(a==null)return!1;if(a.version==null)return!1;if(a.expiration==null)return!1;if(a.clientKey==null||a.clientKey.byteLength===0)return!1;return a.salt==null||a.salt.byteLength===0?!1:!0}g.sysSchema=i;g.WormIDbDriver=a}),98);
__d("EBDB",["$InternalEnum","I64","Promise","QPLFlow","WALogger","WALongInt","Worm","WormEAR","WormIDbDriver","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error performing makeEBDB: ",""]);j=function(){return a};return a}var k=b("$InternalEnum")({UI:0,Worker:1}),l={auto_restore_opt_out:{primaryKey:"optOutKey"},device_metadata:{primaryKey:"pk"},device_state:{primaryKey:"env"},encrypted_backups:{primaryKey:"pk"},encrypted_backups_virtual_devices:{primaryKey:"pk"},experiences_shared_state:{primaryKey:"stateKey"},migration:{primaryKey:"key",secure:!1},secure_encrypted_backups_client_state:{primaryKey:"backupId"},secure_encrypted_backups_epochs:{primaryKey:"epochId"},secure_encrypted_backups_recovery_code_status:{primaryKey:"pk"}},m,n=1e4;function a(a,b,c,d){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){e=d("QPLFlow").startQPLFlow(b,{annotations:{"int":{env:e},string:{operationType:"initEBDB"}},timeoutInMs:n});try{c=new(d("WormEAR").WormEAR)(l,c);a=new(d("Worm").WormDatabase)(new(d("WormIDbDriver").WormIDbDriver)(a,"ebdb",l,c,{onTransactionError:function(a){if(a instanceof d("WormEAR").DecryptionError){a=a;if(a.store==="device_state"){r();return}else s()}}}),b);m=a;yield a.init({eventFlow:e});e.endSuccess();return a}catch(a){e.endFail("error");d("WALogger").ERROR(j(),a);throw a}});return o.apply(this,arguments)}function p(){if(m==null)throw c("err")("EBDB is not initialized");return m}function e(a){var b={};for(a of Object.entries(a)){var c=a[0],d=a[1];if(d==null)continue;else b[c]=q(d)}return b}function q(a){if((i||(i=d("I64"))).isI64(a))return d("WALongInt").decimalStringToLongInt((i||(i=d("I64"))).to_string(a));else return a}function r(){if(m==null)return;void m.runInTransaction(["device_state"],"readwrite",function(a){return a.stores.device_state.clear()},"EBDB - clearDeviceState")}function s(){if(m==null)return;void m.runInTransaction(["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],"readwrite",function(a){return(h||(h=b("Promise"))).all([a.stores.encrypted_backups_virtual_devices.clear(),a.stores.secure_encrypted_backups_recovery_code_status.clear(),a.stores.device_metadata.clear(),a.stores.secure_encrypted_backups_epochs.clear(),a.stores.secure_encrypted_backups_client_state.clear(),a.stores.encrypted_backups.clear(),a.stores.experiences_shared_state.clear(),a.stores.auto_restore_opt_out.clear()])},"EBDB - clearEbStores")}function f(){var a=Object.keys(l);return p().runInTransaction(a,"readonly",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var d={};yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield c.stores[a].readAll());d[a]=b});return function(b){return a.apply(this,arguments)}}()));return d});return function(a){return c.apply(this,arguments)}}(),"EBDB - Dump")["catch"](function(){return{}})}g.StateHistoryEnvironment=k;g.ebdbDescriptor=l;g.makeEBDB=a;g.getEBDB=p;g.mapI64ToLongInt=e;g.i64ToLongInt=q;g.getDbDump=f}),98);
__d("EBDBApi",["$InternalEnum","EBDB","FBLogger","QPLUserFlow","ReQL","WATagsLogger","asyncToGeneratorRuntime","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["EBDB error: write device_state: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["EBDB error: fetching device_state: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["EBLS error on fetching data from encrypted_backups: ",""]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["EBDeviceState"]),l=null;function a(){return l}function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,h){var i=d("EBDB").i64ToLongInt(g);g=!1;try{yield a.runInTransaction(["device_state"],"readwrite",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield a.stores.device_state.get(e));b!=null&&(g=!0);i!=null&&(yield a.stores.device_state.bulkPut([{deviceId:i,env:e}]))});return function(b){return a.apply(this,arguments)}}(),"EBDB - AddDevice",f.id+":49"),h!=null&&c("QPLUserFlow").addAnnotations(h,{bool:{overprompting:g}}),i!=null&&(l=i)}catch(a){c("FBLogger")("labyrinth_web").catching(a).mustfix("Error on EBDB - AddDevice")}});return n.apply(this,arguments)}function o(a){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state)).then(function(a){return a==null?void 0:a.deviceId})}function e(a,b,c,d,e){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d,e,f){f!=null&&c("QPLUserFlow").addPoint(f,"track_adding_device_start");if(e!=null)return m(b,d,e,f);try{e=(yield o(a));return m(b,d,e,f)}catch(a){c("FBLogger")("labyrinth_web").catching(a).mustfix("Error on fetching secure_encrypted_backups_client_state")}f!=null&&c("QPLUserFlow").addPoint(f,"track_adding_device_end")});return p.apply(this,arguments)}var q=b("$InternalEnum")({Disabled:0,EbsmInconsistent:1,EbdbInconsistent:2,Enabled:3,Inconsistent:4});function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("EBDB").i64ToLongInt(yield o(a));if(a==null&&l==null)return q.Disabled;else if(a==null&&l!=null)return q.EbsmInconsistent;else if(a!=null&&l==null)return q.EbdbInconsistent;else if(a===l)return q.Enabled;else return q.Inconsistent});return s.apply(this,arguments)}function t(a,b,c,d){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d,e){var f=1/c("justknobx")._("3914");if(Math.random()>=f)return;f=c("qpl")._(521471316,"2831");try{c("QPLUserFlow").start(f);a=(yield r(a));e!=null&&c("QPLUserFlow").addAnnotations(f,e());c("QPLUserFlow").endSuccess(f,{annotations:{"int":{consistency:a,env:b,operation:d}}})}catch(a){c("QPLUserFlow").endFailure(f,"error"),c("FBLogger")("labyrinth_web").catching(a).mustfix("Error on trackConsistency in %s",b)}});return u.apply(this,arguments)}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a.runInTransaction(["device_state"],"readwrite",function(a){return a.stores.device_state.clear()},"EBDB - EBDBApi- clearDeviceState",f.id+":188"),l=null});return w.apply(this,arguments)}var x;function y(a,b,c){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){x!=null&&x();yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.encrypted_backups)).then(function(a){a!=null&&((a==null?void 0:a.backupId)==null||(a==null?void 0:a.isUserOptedOut)===!0)&&void v(b)})["catch"](function(a){k.ERROR(j(),a)});x=a.tables.encrypted_backups.subscribe(function(a,c){c.operation!=="delete"&&((c.value.backupId==null||c.value.isUserOptedOut===!0)&&void v(b))});var e=(yield b.runInTransaction(["device_state"],"readonly",function(a){return a.stores.device_state.get(c)},"EBDB - readDeviceState",f.id+":235")["catch"](function(a){k.ERROR(i(),a)}));l=e==null?void 0:e.deviceId;if(l==null){var g=d("EBDB").i64ToLongInt(yield o(a));if(g==null)return;l=g;yield b.runInTransaction(["device_state"],"readwrite",function(a){return a.stores.device_state.bulkPut([{deviceId:g,env:c}])},"EBDB - writeDeviceState",f.id+":253")["catch"](function(a){k.ERROR(h(),a)})}});return z.apply(this,arguments)}g.getDeviceId=a;g.trackAddingDevice=e;g.EBConsistencyResult=q;g.trackConsistency=t;g.clearState=v;g.startListeningDeviceRegistrations=y}),98);
__d("EBMainThreadEBDBApi",["$InternalEnum","EBDB","EBDBApi","FBLogger","I64","LSDatabaseSingleton","Promise","QPLUserFlow","ReQL","ReStorePersistence","WAResolvable","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=new(d("WAResolvable").Resolvable)(),l=new(d("WAResolvable").Resolvable)(),m=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"];function a(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){try{yield d("EBDB").makeEBDB(a,b,c,d("EBDB").StateHistoryEnvironment.UI),l.resolve()}catch(a){l.reject(a)}});return n.apply(this,arguments)}function e(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);try{yield l.promise,yield d("EBDBApi").startListeningDeviceRegistrations(a,d("EBDB").getEBDB(),d("EBDB").StateHistoryEnvironment.UI)}catch(a){c("FBLogger")("labyrinth_web").catching(a).mustfix("Error on startListeningDeviceRegistrations in UI")}finally{k.resolve(a)}});return o.apply(this,arguments)}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.deviceId;a=a.qplEvent;var c=(yield k.promise);yield d("EBDBApi").trackAddingDevice(c,d("EBDB").getEBDB(),d("EBDB").StateHistoryEnvironment.UI,b,a)});return q.apply(this,arguments)}function r(){return d("EBDB").getDbDump()}function s(){void d("EBDB").getEBDB().runInTransaction(["device_state"],"readwrite",function(a){return a.stores.device_state.bulkDelete([d("EBDB").StateHistoryEnvironment.Worker])},"EBDB - clear worker state",f.id+":108")}var t=b("$InternalEnum")({Disabled:0,UIInconsistent:1,WorkerInconsistent:2,Consistent:3});function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield k.promise);void d("EBDBApi").trackConsistency(c,d("EBDB").StateHistoryEnvironment.UI,a,function(){var a=t.Disabled,c=d("EBDBApi").getDeviceId();c!=null&&b!=null?a=t.Consistent:c!=null&&b==null?a=t.WorkerInconsistent:c==null&&b!=null&&(a=t.UIInconsistent);return{"int":{crossEnvConsistency:a}}})});return v.apply(this,arguments)}function w(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield a.next());while(b.done===!1)b=(yield a.next());return b.value});return x.apply(this,arguments)}function y(a){var b={};for(var c of Object.keys(a)){var e=a[c];(j||(j=d("I64"))).isI64(e)?b[c]=BigInt((j||(j=d("I64"))).to_string(e)):b[c]=e}return b}function z(a){var b={};for(var c of Object.keys(a)){var e=a[c];typeof e==="bigint"?b[c]=(j||(j=d("I64"))).of_string(String(e)):b[c]=e}return b}function A(a){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield l.promise;var e=(yield d("EBDB").getEBDB().store("migration").get("isMigrated"));if((e==null?void 0:e.value)===!0)return;var g=(yield (h||(h=b("Promise"))).all(m.map(function(b){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables[b]))})));yield d("EBDB").getEBDB().runInTransaction([].concat(m,["migration"]),"readwrite",function(a){return(h||(h=b("Promise"))).all([].concat(m.map(function(b,c){return a.stores[b].bulkPut(g[c].map(y))}),[a.stores.migration.bulkPut([{key:"isMigrated",value:!0}])]))},"EBDB - migration EBSM -> WORM",f.id+":205")}catch(a){c("FBLogger")("labyrinth_web").catching(a).mustfix("Error on migrating EBSM to WORM in UI")}});return B.apply(this,arguments)}function C(a){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=Array.from(a.keys());yield l.promise;yield d("EBDB").getEBDB().runInTransaction(c,"readwrite",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=[],f=function(a){var f=a[0];i=a[1];a=i.toAdd;var g=i.toDelete,k=d("EBDB").ebdbDescriptor==null?void 0:d("EBDB").ebdbDescriptor[f];e.push((h||(h=b("Promise"))).all([c.stores[f].bulkDelete(g.map(function(a){a=typeof a==="object"?a==null?void 0:a[k.primaryKey]:null;if(a==null)return;return BigInt((j||(j=d("I64"))).to_string(a))}).filter(function(a){return!!a})),c.stores[f].bulkPut(a.filter(function(a){return typeof a==="object"&&(a==null?void 0:a[k.primaryKey])!=null}).map(function(a){var b={};for(var c of Object.keys(a)){var e=a[c];(j||(j=d("I64"))).isI64(e)?b[c]=BigInt((j||(j=d("I64"))).to_string(e)):b[c]=e}return b}))]))};for(var g of a){var i;f(g)}yield (h||(h=b("Promise"))).all(e)});return function(a){return c.apply(this,arguments)}}(),"EBDB - flush EBSM state",f.id+":237")});return D.apply(this,arguments)}function E(a){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_LOAD_DATA_FROM_IDB"),yield l.promise,yield d("EBDB").getEBDB().runInTransaction(m,"readonly",function(e){return(h||(h=b("Promise"))).all(m.map(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){try{var f=(yield e.stores[b].readAll()),g=a(b);g=new(d("ReStorePersistence").ReStoreDbStoreTable)(g,b,function(){},{get:function(){},logError:function(){},shouldInline:function(){return!1}},"readwrite",function(){});for(f of f){var h=z(f),i=h[d("EBDB").ebdbDescriptor[b].primaryKey];yield w(g.tableSet(new WeakMap(),[i],h))}c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_DONE_ON_"+b.toUpperCase())}catch(a){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED_ON_"+b.toUpperCase());throw a}});return function(a){return f.apply(this,arguments)}}()))},"EBDB - rehydrate EBSM",f.id+":298")});return F.apply(this,arguments)}g.initEBDB=a;g.startListeningDeviceRegistrations=e;g.trackAddingDevice=p;g.getEBDBDump=r;g.clearWorkerState=s;g.EBCrossEnvConsistencyResult=t;g.trackConsistency=u;g.migrateEBSMtoWORM=A;g.flushEBSMtoEBDB=C;g.rehydrateEBSMFromEBDB=E}),98);/*FB_PKG_DELIM*/
__d("ArmadilloDataTraceCheckPoint",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||(h=d("I64"))).of_string("63");b=h.of_string("65");c=h.of_string("98");e=h.of_string("504");f=h.of_string("1000");d=h.of_string("1001");var i=h.of_string("1204"),j=h.of_string("1210"),k=h.of_string("1224"),l=h.of_string("1234"),m=h.of_string("1225"),n=h.of_string("2220");g.traceGroupMessage=a;g.armadilloActMessageSend=b;g.traceCreated=c;g.richMediaMediaSendAttachmentType=e;g.traceTextMessage=f;g.traceMediaMessage=d;g.advancedCryptoMEMSendTaskComplete=i;g.deliveryReceiptReceived=j;g.advancedCryptoMEMEncryptionDeviceCount=k;g.advancedCryptoGroupDualSend=l;g.advancedCryptoDualSend=m;g.armadilloTlcControlOpenThread=n}),98);
__d("LSBitOffset",["I64","LSBitFlag"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("LSBitFlag").set((h||(h=d("I64"))).lsl_(h.one,h.to_int32(a)),b)}function b(a,b){return d("LSBitFlag").clear((h||(h=d("I64"))).lsl_(h.one,h.to_int32(a)),b)}g.set=a;g.clear=b;g.empty=(h||(h=d("I64"))).zero}),98);
__d("LSCancelTaskByQueueName",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.forEach(b.filter(b.db.table(2).fetch([[[a[0]]],"queueNameTaskId"]),function(c){return c.queueName===a[0]&&c.context===b.i64.to_string(a[1])}),function(a){var d=a.item;return b.sequence([function(a){return c[0]=d.taskDispatchPriority,b.forEach(b.filter(b.db.table(2).fetch([[[d.taskId]]]),function(a){return b.i64.eq(a.taskId,d.taskId)&&a.queueName===d.queueName}),function(a){return a["delete"]()})},function(a){return b.i64.eq(c[0],b.i64.cast([0,1e3]))||b.i64.eq(c[0],b.i64.cast([0,2e3]))?c[1]=b.i64.cast([0,734739218]):c[1]=b.i64.cast([0,734737036])}])})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreCancelTaskByQueueNameStoredProcedure";a.__tables__=["pending_tasks"];e.exports=a}),null);
__d("LSContactBitOffset",["I64","LSBitFlag","LSBitOffset"],(function(a,b,c,d,e,f,g){"use strict";var h;c=["capabilities","capabilities2"];function a(a,b){return i(a,b,!1)}function i(a,b,c){var e=b.capabilities,f=b.capabilities2;if(a>=64){return f==null?c:d("LSBitFlag").has((h||(h=d("I64"))).lsl_(h.one,a-64),(f=b.capabilities2)!=null?f:d("LSBitOffset").empty)}return e==null?c:d("LSBitFlag").has((h||(h=d("I64"))).lsl_(h.one,a),(f=b.capabilities)!=null?f:d("LSBitOffset").empty)}function b(a,b){return d("LSBitFlag").has((h||(h=d("I64"))).lsl_(h.one,a-64),(a=b)!=null?a:d("LSBitOffset").empty)}g.contactCapabilityFields=c;g.has=a;g.hasWithDefault=i;g.contactCapabilitiesHas=b}),98);
__d("LSContactBlockedByViewerStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({UNBLOCKED:0,MESSAGE_BLOCKED:1,FULLY_BLOCKED:2});f["default"]=a}),66);
__d("LSContactGender",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});f["default"]=a}),66);
__d("LSContactIdType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});f["default"]=a}),66);
__d("LSContactType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,USER:1,PAGE:2,PAGE_PERSONA:3});f["default"]=a}),66);
__d("LSContactTypeExact",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FB_USER:1,MESSENGER_ONLY:2,DEACTIVATED_ALLOWED_ON_MESSENGER:3,MESSENGER_KID:4,FB_PAGE:5,FB_PAGE_PERSONA:6,IG_USER:7,MESSENGER_CALL_GUEST:8,WHATSAPP:9,GUEST_USER:10,IG_BUSINESS_USER:11,IG_CREATOR_USER:12,FB_SINGLE_OWNER_ADDITIONAL_PROFILE:13,PROXY_OCULUS_USER:14,WORK_VC_ENDPOINT:15,GENERATIVE_AI_BOT:16,COMMUNITY_CHAT:17,INTEROP_3P_USER:18,FB_ONLY_NOT_ALLOWED_ON_MESSENGER:19,MESSENGER_ONLY_NOT_ALLOWED_ON_FB:20,ADDITIONAL_PROFILE_PLUS:21,MESSENGER_SPECTRA:22,GROUP_ANONYMOUS_PROFILE:50,USER_FOR_SUPPORT:51});f["default"]=a}),66);
__d("LSContactViewerRelationship",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,NOT_CONTACT:1,CONTACT_OF_VIEWER:2,FACEBOOK_FRIEND:3,SOFT_CONTACT:4});f["default"]=a}),66);
__d("LSContactWorkForeignEntityType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});f["default"]=a}),66);
__d("LSMailboxTaskCompletionApiOnTaskInsertion",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.islc(b.db.table(232).fetch(),0,b.i64.to_float(b.i64.cast([0,1]))),function(c){c=c.item;return b.db.table(233).add({taskId:a[0],notificationScopeKey:c.notificationScopeKey,notificationName:c.notificationName})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreMailboxTaskCompletionApiOnTaskInsertionStoredProcedure";a.__tables__=["mailbox_task_completion_notification_context","mailbox_task_completion_api_tasks"];e.exports=a}),null);
__d("LSIssueNewTaskWithExtraOperations",["LSIssueNewTaskAndGetTaskID","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[11]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskInsertion"),d[0])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreIssueNewTaskWithExtraOperationsStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSMailboxType",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSENGER:0,COMMUNITIES:1,TINCAN:1024,TAM:4096});f["default"]=a}),66);
__d("LSMediaUrlUtils",["I64","ServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){if((h||(h=d("I64"))).gt(a,(h||(h=d("I64"))).zero)){var b=(h||(h=d("I64"))).of_float(d("ServerTime").getMillis()/1e3);return h.lt(a,b)}return!1}function i(a){if((h||(h=d("I64"))).gt(a,(h||(h=d("I64"))).zero)){var b=(h||(h=d("I64"))).of_float(d("ServerTime").getMillis());return h.lt(a,b)}return!1}function b(a,b){return a!=null&&b!=null&&!i(b)}g.isTimestampExpired=a;g.isTimestampExpiredForMillis=i;g.hasValidReceiverFetchPreviewUrl=b}),98);
__d("LSOptimisticUpdateThreadDisappearingSetting",["LSIssueNewError","LSIssueNewTask","LSLocalize"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=!1:(b=a.item,d[0]=b.errorShouldBeShown)})},function(a){return d[0]===!0?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[4]=a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[5]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[4],d[5],void 0,void 0)}]):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("wa_jid",void 0),d[2].set("thread_key",a[0]),d[2].set("disappearing_ttl",a[1]),d[2].set("updated_timestamp",a[2]),d[2].set("updated_by",a[3]),d[2].set("sync_group",c.i64.cast([0,95])),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),"disappearing_setting",c.i64.cast([0,714]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpdateThreadDisappearingSettingStoredProcedure";a.__tables__=["user_visible_network_connectivity_error"];e.exports=a}),null);
__d("LSOptimisticUpdateThreadDisappearingSettingStoredProcedure",["LSOptimisticUpdateThreadDisappearingSetting","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});a=a.storedProcedure(c("LSOptimisticUpdateThreadDisappearingSetting"),e.threadKey,e.disappearingTtl,e.updatedTimestamp,e.updatedBy);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSRefetchContactRowIfExists",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.i64.le(f.authorityLevel,c.i64.cast([0,80]))?(d[0]=new c.Map(),d[0].set("contact_id",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"cpq_v2",c.i64.cast([0,207]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve())})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactRefetchContactRowIfExistsStoredProcedure";a.__tables__=["contacts"];e.exports=a}),null);
__d("LSRefetchContactRowIfExistsStoredProcedure",["LSRefetchContactRowIfExists","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSRefetchContactRowIfExists"),e.id);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSRemoveError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(6).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreRemoveErrorStoredProcedure";a.__tables__=["user_visible_errors"];e.exports=a}),null);
__d("LSRemoveErrorStoredProcedure",["LSRemoveError","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSRemoveError"),e.errorId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSThreadAttributionStore",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function a(a,b){var c;a=(c=(c=i.get(b))!=null?c:a)!=null?c:{type:"MWLSEntrypoint",value:"unknown"};i["delete"](b);return a}function b(a,b){a=(b=(b=i.get(b))!=null?b:a)!=null?b:{type:"MWLSEntrypoint",value:"unknown"};return a}function c(a,b){i.set(a,{type:"MWLSEntrypoint",value:b})}function e(a,b){b=(h||(h=d("I64"))).of_string(b);i.set(a,{type:"LSThreadAttribution",value:b})}function f(a){i.set("",{type:"MWLSEntrypoint",value:a})}function j(){var a=i.get("");if(a==null||a.type==="LSThreadAttribution")return"unknown";else return a.value}g.getSourceAndResetAttribution=a;g.getSourceWithoutReset=b;g.setSource=c;g.setLSMessagingThreadAttribution=e;g.setSourceForNewThread=f;g.getSourceForNewThread=j}),98);
__d("LSVerifyContactRowExistsStoredProcedure",["LSSynchronousPromise","LSVerifyContactRowExists","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSVerifyContactRowExists"),e.id,e.contactIdType,e.profilePictureUrl,e.name,e.contactType,e.profilePictureFallbackUrl,e.profilePictureUrlExpirationTimestampMs,e.urlExpirationTimestampMs,e.normalizedNameForSearch,e.isMemorialized,e.isBlocked,e.blockedByViewerStatus,e.canViewerMessage,e.isSelf,e.authorityLevel,e.capabilities,e.capabilities2,e.workForeignEntityType,e.gender,e.contactViewerRelationship,e.secondaryName,e.firstName,e.friendshipStatus);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWBridgeInitOfflineQueueSyncCompleteHandler",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MessengerLogHistory").__setRef("MAWBridgeInitOfflineQueueSyncCompleteHandler");function a(){h.onReady(function(a){a=a.getInstance("maw_setup");a.debug("Init Offline Queue Sync Complete")})}g.call=a}),98);
__d("MAWChatJid",["FBLogger","I64","MAWJids","MAWMiActMappingTableAPI","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,e){try{return d("MAWMiActMappingTableAPI").getMappingRowForIntJid(a,d("MAWJids").convertChatJidToIntJid(e)).then(function(a){return a==null?void 0:a.serverThreadKey})}catch(a){c("FBLogger")("messenger_web").catching(a).warn("Invalid chatJid: "+e);return(i||(i=b("Promise"))).reject(a)}}function a(a,b,d){return j(a,b).then(function(a){if(a!=null)return a;throw c("FBLogger")("messenger_web").mustfixThrow("[toThreadKey] No mapping record for chatJid, source: %s",d)})}function e(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield j(a,b));return b==null?void 0:d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b))});return k.apply(this,arguments)}function f(a,e){try{return d("MAWMiActMappingTableAPI").getMappingRowForIntJid(a,e).then(function(a){return a==null?void 0:a.serverThreadKey})}catch(a){c("FBLogger")("messenger_web").catching(a).warn("Invalid integer jid: "+(h||(h=d("I64"))).to_string(e));return(i||(i=b("Promise"))).reject(a)}}g.toThreadKeyMaybe=j;g.toThreadKey=a;g.toThreadMaybe=e;g.toThreadKeyMaybeForChatJidInteger=f}),98);
__d("MAWDefaultE2eeOneToOneEligibility",["FBLogger","I64","LSContactBitOffset","LSThreadAttributionStore","gkx","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect,k=new Map();function a(a){var b=a.contactId,e=a.serverContactCapabilities2;j(function(){if(c("justknobx")._("1813")&&b!=null){var a=e!=null&&d("LSContactBitOffset").contactCapabilitiesHas(83,(i||(i=d("I64"))).of_string(e));k.set(b,a)}},[b,e])}function b(a){var b=a.contactId;a=a.maybeContact;a=a!=null&&d("LSContactBitOffset").has(83,a);if(a)return!0;a=b!=null?(i||(i=d("I64"))).to_string(b):null;if(a!=null&&!k.has(a)){b=d("LSThreadAttributionStore").getSourceWithoutReset(void 0,a);b=b.type==="MWLSEntrypoint"?b.value:(i||(i=d("I64"))).to_string(b.value);c("gkx")("9396")&&c("FBLogger")("maw_default_e2ee_no_preloaded_data").info("Thread entrypoint %s doesn't provide preloaded default e2ee data",b)}return c("justknobx")._("1813")&&c("gkx")("3980")&&a!=null&&((b=k.get(a))!=null?b:!1)}g.contactsServerDefaultE2eeOneToOneCapability=k;g.useUpdateContactServerDefaultE2eeOneToOneCapabilityCache=a;g.isContactDefaultE2eeOneToOneEligible=b}),98);
__d("MAWEphemeralMsgAutoResetSystemId",[],(function(a,b,c,d,e,f){"use strict";a="-111111";b=a;f["default"]=b}),66);
__d("MAWEphemeralSettingsUpdate",["FBLogger","I64","LSOptimisticUpdateThreadDisappearingSettingStoredProcedure","MAWChatJid","MAWCurrentUser","MAWEphemeralMsgAutoResetSystemId","Promise","asyncToGeneratorRuntime","gkx","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWEphemeralSettingsUpdate"),k=c("requireDeferred")("LSFactory").__setRef("MAWEphemeralSettingsUpdate"),l=c("requireDeferred")("WATimeUtils").__setRef("MAWEphemeralSettingsUpdate");function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=(yield a.threads.get(e));if(a!=null){e=a.disappearingSettingUpdatedTs;a=a.disappearingSettingTtl;if(e==null||a==null)return!0;if((i||(i=d("I64"))).lt(e,(i||(i=d("I64"))).of_float(c))&&!(i||(i=d("I64"))).equal(a,(i||(i=d("I64"))).of_int32(b)))return!0}return!1});return n.apply(this,arguments)}function o(a,b,c,d,e,f,g){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,j,l,n){var o=(yield m(a,e,f,j));if(!o)return(h||(h=b("Promise"))).resolve();l&&c("FBLogger")("labyrinth_web").addMetadata("LABYRINTH_WEB","APP_VERSION","OCCAM_EPHEMERAL_SETTINGS_UPDATE").info("[Occam][Web] Ephemeral Settings Updated.");o=(yield k.load());return c("LSOptimisticUpdateThreadDisappearingSettingStoredProcedure")(o(a),{disappearingTtl:(i||(i=d("I64"))).of_int32(e),threadKey:j,updatedBy:i.of_string(g?c("MAWEphemeralMsgAutoResetSystemId"):(l=n)!=null?l:d("MAWCurrentUser").getID()),updatedTimestamp:i.of_float(f)})});return p.apply(this,arguments)}function a(a,b,c,d){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){var e=(yield j.load());e=(yield e());return e.runInTransaction(function(e){return o(e,a,b,c,d,!1)},"readwrite")});return q.apply(this,arguments)}function e(a,b,c,d,e){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i){var k=(yield j.load());k=(yield k());var m;c("gkx")("11440")&&(m=(yield l.load()).castUnixTimeToMillisTime(e));return k.runInTransaction(function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j){var k=(yield d("MAWChatJid").toThreadKeyMaybe(j,g));return k!=null?o(j,a,c("gkx")("11440")?m:(yield l.load()).castUnixTimeToMillisTime(e),f,k,i):(h||(h=b("Promise"))).resolve()});return function(a){return j.apply(this,arguments)}}(),"readwrite")});return r.apply(this,arguments)}g.updateEphemeralSettingsWithTxn=o;g.updateEphemeralSettings=a;g.updateEphemeralSettingsByChatJid=e}),98);
__d("MAWMiActOnMiThreadReadyForJid",["FBLogger","MAWJids","MAWLoggerDeferred","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=["MiActMapping","UIActions","ThreadReady"];function i(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByJid(a,d("MAWJids").convertChatJidToIntJid(b),e));switch(g.type){case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:d("MAWLoggerDeferred").TAGS(h,"Executing "+e+", jid: "+b);return f(a,g.serverThreadKey);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:throw c("FBLogger")("messenger_web").mustfixThrow("[MiActMapping] Unimplemented miActThreadState.type: %s, thread action: %s, jid: %s",g.type,e,b);default:g.type;throw c("FBLogger")("messenger_web").mustfixThrow("[MiActMapping] Unhandled onMiThreadReady:%s, thread action: %s",b,e)}});return j.apply(this,arguments)}function a(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){try{return yield i(a,b,c,d)}catch(a){}});return k.apply(this,arguments)}g.onMiThreadReadyForJid=i;g.onMiThreadReadyForJidNoThrow=a}),98);
__d("MAWSubscribeToContactNames",["fbt","$InternalEnum","Env","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i;d=b("$InternalEnum").Mirrored(["FIRST_NAME","FULL_NAME"]);var j=Boolean((i||(i=c("Env"))).isMessengerDotComOnComet)?"Messenger":c("gkx")("22979")?"Instagram":"Facebook";function k(){return h._(/*BTDS*/"__JHASH__qNfUY0OKWF7__JHASH__",[h._param("Platform Name",j)]).toString()}function a(a,b){return(a=a.get(b))!=null?a:k()}g.ContactNameMode=d;g.getUnknownUser=k;g.getContactNameFromLookup=a}),226);
__d("hasDefaultThreadOneToOneCapabilityDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("hasDefaultThreadOneToOneCapability").__setRef("hasDefaultThreadOneToOneCapabilityDeferred");g["default"]=a}),98);
__d("useCometMessengerhasDefaultThreadOneToOneCapability",["FBLogger","hasDefaultThreadOneToOneCapabilityDeferred","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(a,b){var d=j(!1),e=d[0],f=d[1];i(function(){c("hasDefaultThreadOneToOneCapabilityDeferred").load().then(function(c){b==null?f(!1):c(b,a).then(function(a){f(a)})["catch"](function(){})})["catch"](function(a){c("FBLogger")("messenger_web").warn("Error loading hasDefaultThreadOneToOneCapability. %s",a)})},[a,e,b]);return e}g["default"]=a}),98);
__d("MAWThreadCutover",["I64","LSContactBitOffset","LSDatabaseSingleton","LSMessagingThreadTypeUtil","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","MWPActor.react","MWPreloadableQueries","ReQL","ReQLSuspense","WAJids","asyncToGeneratorRuntime","cr:13127","useCometMessengerhasDefaultThreadOneToOneCapability","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b){var e=(j||(j=c("useReStore")))(),f=u(a);e=c("useCometMessengerhasDefaultThreadOneToOneCapability")(e,a);a=b!=null&&d("LSMessagingThreadTypeUtil").isGroup(b);return a?!0:f||e}function e(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(yield B(a))!=null});return k.apply(this,arguments)}function l(a){var b=(j||(j=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return a!=null?d("MWPreloadableQueries").getCutoverThreadByThreadKey(b,a):d("ReQL").empty()},[b,a],f.id+":63")!=null}function m(a){var b,e=(j||(j=c("useReStore")))();b=(b=d("ReQLSuspense").useFirst(function(){return a!=null?d("MWPreloadableQueries").getCutoverThreadByThreadKey(e,a):d("ReQL").empty()},[e,a],f.id+":75"))==null?void 0:b.showOpenMessageHistory;return b===!1}function n(a,b){return d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table).getKeyRange(b)}function o(a,b){return d("ReQL").fromTableAscending(a.tables.cutover_threads).filter(function(a){return(h||(h=d("I64"))).equal(a.armadilloThreadId,b)})}function p(a){var b=(j||(j=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return a==null?d("ReQL").empty():n(b,a)},[b,a],f.id+":108");return d("ReQLSuspense").useFirst(function(){return e==null?d("ReQL").empty():o(b,e.jid)},[b,e],f.id+":116")}function q(a,b){return d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b.openThreadId)}function r(a){var b=(j||(j=c("useReStore")))(),e=p(a);return d("ReQLSuspense").useFirst(function(){return e==null?d("ReQL").empty():q(b,e)},[b,e],f.id+":137")}function s(a){var e=(j||(j=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return a==null?d("ReQL").empty():n(e,a)},[e,a],f.id+":149"),h=g==null?void 0:g.jid;g=d("ReQLSuspense").useFirst(function(){return h!=null?d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(h):d("ReQL").empty()},[e.tables.threads,h],f.id+":158");var i=b("cr:13127")(h);return i?g:void 0}function t(a){a=p(a);if(a!=null)return a.openThreadId}function u(a){return p(a)!=null}function v(a,b){b=d("WAJids").threadIdForChatJid(b);return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange((h||(h=d("I64"))).of_string(b))).then(function(a){return a!=null})}function w(){var a=(j||(j=c("useReStore")))(),b=d("MWPActor.react").useActor();a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(b),f.id+":198");return a!=null&&((b=d("LSContactBitOffset").has(75,a))!=null?b:!1)}function x(){var a=(j||(j=c("useReStore")))(),b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.tables.experiences_shared_state).getKeyRange(c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY)},[a],f.id+":213");b=d("MWEncryptedBackupsSharedState").getEntryValue({db:a,sharedStateRow:b,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY});return b!=null}function y(a){var b=(j||(j=c("useReStore")))(),e=a!=null?(h||(h=d("I64"))).of_string(a):void 0,g=l(e);return d("ReQLSuspense").useFirst(function(){if(g&&e!=null)return d("ReQL").fromTableAscending(b.tables.mi_act_mapping_table).filter(function(a){return(h||(h=d("I64"))).equal(a.jid,e)}).map(function(a){return(h||(h=d("I64"))).to_string(a.serverThreadKey)});else return d("ReQL").empty()},[b,e,g],f.id+":234")}function z(){return!0}function A(a){var b=(j||(j=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){if(a!=null)return d("MWPreloadableQueries").getCutoverThreadByThreadKey(b,a);else return d("ReQL").empty()},[b,a],f.id+":261"),g=e==null?void 0:e.armadilloThreadId;e=d("ReQLSuspense").useFirst(function(){if(g!=null)return d("ReQL").fromTableAscending(b.tables.mi_act_mapping_table.index("jid")).getKeyRange(g);else return d("ReQL").empty()},[g,b.tables.mi_act_mapping_table],f.id+":272");return e==null?void 0:e.serverThreadKey}function B(a){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton),c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.mi_act_mapping_table).getKeyRange(a)));if(c==null)return void 0;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.cutover_threads).filter(function(a){return(h||(h=d("I64"))).equal(a.armadilloThreadId,c.jid)})));return a});return C.apply(this,arguments)}g.useShouldHideE2eeAttribution=a;g.isCutoverThreadKey=e;g.useIsCutoverOpenThread=l;g.useIsDualThreadCutoverOpenThread=m;g.getMiActMappings=n;g.getCutoverThreadsByJid=o;g.useGetCutoverMapping=p;g.getThreadByCutoverThread=q;g.useCutoverOpenThread=r;g.useODCutoverEligibleOpenOneToOneThread=s;g.useGetCutoverOpenThreadKey=t;g.useIsCutoverSecureThread=u;g.isCutoverSecureThreadFromChatJid=v;g.useIsCurrentUserCutoverUser=w;g.useGetHasUserRestoredBefore=x;g.useGetCutoverSecureThreadKey=y;g.useSupportedCutoverEnvironment=z;g.useCutoverSecureThreadKeyForOpenThreadKey=A;g.getCutoverThreadBySecureThreadKey=B}),98);
__d("MAWUIJob",["ExecutionEnvironment","MAWBridge","WAJobOrchestratorTypes","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["UIJobStarters waitUntilPersisted called in the worker, which is a bug for job: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["UIJobStarters waitUntilCompleted called in the worker, which is a bug for job: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["UIJobStarters fireAndForget called in the worker, which is a bug for job: ",""]);k=function(){return a};return a}var l={priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION};a={fireAndForget:function(a){(h||(h=c("ExecutionEnvironment"))).isInWorker&&d("WALogger").ERROR(k(),a.type);d("MAWBridge").getBridge().fireAndForget("backend","runJobFireAndForget",babelHelpers["extends"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:l}))},waitUntilCompleted:function(a,b,e){(h||(h=c("ExecutionEnvironment"))).isInWorker&&d("WALogger").ERROR(j(),a.type);a=d("MAWBridge").getBridge().sendAndReceive("backend","runJobWaitUntilCompleted",babelHelpers["extends"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:l}),void 0,b,e);return a},waitUntilPersisted:function(a,b,e){(h||(h=c("ExecutionEnvironment"))).isInWorker&&d("WALogger").ERROR(i(),a.type);a=d("MAWBridge").getBridge().sendAndReceive("backend","runJobWaitUntilPersisted",babelHelpers["extends"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:l}),void 0,b,e);return a}};g.UIJobStarters=a}),98);
__d("MAWTimedJob",["FBLogger","MAWBridgeLoggingUtils","MAWMaybeWithTimeout","MAWTimedBridge","MAWUIJob","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MAWWorkerEvent","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";a={fireAndForget:function(a,b){b===void 0&&(b=d("MAWTimedBridge").DEFAULT_MAW_BRIDGE_TIMEOUT_MS);var e=!1;return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a.type).then(function(){e=!0;return d("MAWUIJob").UIJobStarters.fireAndForget(a)}),b,function(){return d("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(b){throw c("FBLogger")("maw_core_lla").mustfixThrow("Failed to ack execution of job %s in time. Backend setup: %s, workerHealthStatus: %s",a.type,e,b.tag)})},a.type)},waitUntilCompleted:function(a,b){b===void 0&&(b=d("MAWTimedBridge").DEFAULT_MAW_BRIDGE_TIMEOUT_MS);var e=!1,f=d("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(a.type);return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a.type).then(function(){d("MAWWorkerEvent").logStart("waitUntilCompleted",a.type,f);e=!0;return d("MAWUIJob").UIJobStarters.waitUntilCompleted(a,{onAck:function(b){d("MAWWorkerEvent").logAck(f,a.type,b)},onSend:function(b){var c=b.queueMsgs;b=b.queueSize;d("MAWWorkerEvent").logSend(f,a.type,"waitUntilCompleted");d("MAWWorkerEvent").logAnnotations(f,{"int":{bridgeSize:b},string_array:{bridgeMsgs:c}})}},{bridgeQPLInstanceKey:f}).then(function(a){d("MAWWorkerEvent").logSuccess(f);return a},function(a){a=c("getErrorSafe")(a);d("MAWWorkerEvent").logFailure(f,a.message);throw a})}),b,function(){return d("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(b){d("MAWWorkerEvent").logTimeoutFailure(f,"Failed to complete execution of job",b);throw c("FBLogger")("maw_core_lla").mustfixThrow("Failed to complete execution of job %s in time. Backend setup: %s, workerHealthStatus: %s",a.type,e,b.tag)})},a.type)},waitUntilPersisted:function(a,b){b===void 0&&(b=d("MAWTimedBridge").DEFAULT_MAW_BRIDGE_TIMEOUT_MS);var e=!1,f=d("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(a.type);return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a.type).then(function(){e=!0;d("MAWWorkerEvent").logStart("waitUntilPersisted",a.type,f);return d("MAWUIJob").UIJobStarters.waitUntilPersisted(a,{onAck:function(b){d("MAWWorkerEvent").logAck(f,a.type,b)},onSend:function(b){var c=b.queueMsgs;b=b.queueSize;d("MAWWorkerEvent").logSend(f,a.type,"waitUntilPersisted");d("MAWWorkerEvent").logAnnotations(f,{"int":{bridgeSize:b},string_array:{bridgeMsgs:c}})}},{bridgeQPLInstanceKey:f}).then(function(a){d("MAWWorkerEvent").logSuccess(f);return a},function(a){a=c("getErrorSafe")(a);d("MAWWorkerEvent").logFailure(f,a.message);throw a})}),b,function(){return d("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(b){d("MAWWorkerEvent").logTimeoutFailure(f,"Failed to persist execution of job",b);throw c("FBLogger")("maw_core_lla").mustfixThrow("Failed to persist execution of job %s in time. Backend setup: %s, workerHealthStatus: %s",a.type,e,b.tag)})},a.type)}};g.TimedUIJobStarters=a}),98);
__d("MWGetOtherContactOrSelf",["I64","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(c.tables.participants).getKeyRange(a)));if(a.length===1){var e=a[0];return d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.tables.contacts).getKeyRange(e.contactId))}if(a.length>2)return;e=a.find(function(a){return!(h||(h=d("I64"))).equal(a.contactId,b)});if(e!=null)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.tables.contacts).getKeyRange(e.contactId))});return i.apply(this,arguments)}g.getOtherContactOrSelf=a}),98);
__d("MessageSendsClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1271");b=d("FalcoLoggerInternal").create("message_sends_client",a);e=b;g["default"]=e}),98);
__d("MWLogSend",["ErrorGuard","FBLogger","I64","LSMessagingThreadTypeUtil","LSPlatformLsInitLog","MessageSendsClientFalcoEvent","MultipleTabsLogger","Promise","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=[];function l(a){return function(){while(k.length>0)(j||(j=c("ErrorGuard"))).applyWithGuard(o,null,[a,k.shift(),!0])}}var m=!1;function n(a,b){k.push(b),m||(d("LSPlatformLsInitLog").onCompleteOrFail(l(a)),m=!0)}function o(a,e,f){e._mentionedJids;var g=e.actor,j=e.additionalTags,k=e.attachmentFbids,l=e.attachmentType,m=e.backend,o=e.ephemeralDurationInSec,p=e.hasReply,q=e.igdTargetType,r=e.initatingSource,s=e.isInstamadilloTTLC,t=e.messagingThreadId,u=e.msgTtl,v=e.offlineThreadingId,w=e.sendType,x=e.source,y=e.threadKey,z=e.threadType;c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (i||(i=b("Promise"))).all([d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(y).filter(function(a){return!(h||(h=d("I64"))).equal(a.contactId,g)})),d("MultipleTabsLogger").hasMultipleTabs()]).then(function(b){var i=b[0];b=b[1];if(i==null){var A=d("LSPlatformLsInitLog").isPending();if(A&&f!==!0){n(a,e);return}f===!0&&c("FBLogger")("meteora").warn("LS_INIT completed but participants table is still empty.")}var B=i.map(function(a){return(h||(h=d("I64"))).to_string(a.contactId)});A=d("LSMessagingThreadTypeUtil").isOneToOne(z)&&(i==null?void 0:i.length)===0;A&&B.push((h||(h=d("I64"))).to_string(g));var C=t!=null?t:(h||(h=d("I64"))).to_string(y),D=u!=null?(h||(h=d("I64"))).to_string((h||(h=d("I64"))).of_float(u)):void 0,E=[b===!0?19:null,o!=null?15:null,s===!0?37:null].filter(Boolean);(C==null||C===""||(h||(h=d("I64"))).le(y,(h||(h=d("I64"))).zero))&&(e.waGroupJid!=null?c("FBLogger")("mw_log_send").mustfix("Thread FBID is null and recovered by chatJid in send flow - ThreadKey %s, messagingThreadId %s, send type %s",(h||(h=d("I64"))).to_string(y),t,w):c("FBLogger")("mw_log_send").mustfix("Thread FBID is null in send flow - ThreadKey %s, messagingThreadId %s, send type %s",(h||(h=d("I64"))).to_string(y),t,w));c("MessageSendsClientFalcoEvent").log(function(){return{additional_tags:j,backend:m,event_type:w,feature_tags:E,group_thread_subtype:void 0,igd_action:void 0,igd_target_type:q,igd_verb:void 0,initiating_app_id:void 0,initiating_source:r,is_reply:p,message_attachment_fbids:k.map(String),message_id:void 0,message_type:l,messaging_thread_fbid:C,messaging_thread_type:(h||(h=d("I64"))).to_int32(z),msg_ttl:D,nav_chain:void 0,nonce:void 0,offline_threading_id:v,recipient_fbids:B,send_attribution:h.to_int32(x),send_attribution_raw:void 0,view_mode:void 0,wa_group_jid:e.waGroupJid}})})})())}g.log=o}),98);
__d("TimestampUtils",["fbt","formatDate"],(function(a,b,c,d,e,f,g,h){"use strict";var i=1e3*60*60*24,j=i*30;function k(a,b){return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()}function l(a,b){return h._(/*BTDS*/"__JHASH__OsFN0XAyv2W__JHASH__",[h._param("date",a),h._param("time",b)])}function a(a,b){var d=c("formatDate")(b,"g:i A");if(k(b,a))return h._(/*BTDS*/"__JHASH__I7gnNejSDJn__JHASH__",[h._param("time",d)]);var e=new Date(a.valueOf()-i);if(k(b,e))return h._(/*BTDS*/"__JHASH__18g5xTeqQyg__JHASH__",[h._param("time",d)]);e=new Date(a.valueOf()+i);if(k(b,e))return h._(/*BTDS*/"__JHASH__6hOHFFmfNGd__JHASH__",[h._param("time",d)]);e=c("formatDate")(b,"F j");a.getFullYear()!==b.getFullYear()&&(e=c("formatDate")(b,"F j, Y"));return Math.abs(a.valueOf()-b.valueOf())<j?l(e,d):e}function b(a){return l(c("formatDate")(a,"l, F j, Y"),c("formatDate")(a,"g:i A"))}g.getAbsoluteTimestampFbt=l;g.getTimestamp=a;g.getAbsoluteTimestamp=b}),226);
__d("getLSMediaContactProfilePictureUrl",["LSMediaUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.profilePictureUrlExpirationTimestampMs;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)||a.profilePictureUrl===""){return(b=a.profilePictureFallbackUrl)!=null?b:a.profilePictureUrl}else return a.profilePictureUrl}g["default"]=a}),98);
__d("hasDefaultThreadOneToOneCapability",["FBLogger","LSContactBitOffset","MAWDefaultE2eeOneToOneEligibility","MWGetOtherContactOrSelf","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a==null)return!1;var e=(yield d("ReQL").firstExnAsync(d("ReQL").fromTableAscending(b.tables._user_info).map(function(a){return a.facebookUserId}))),f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(e)));if(f==null){c("FBLogger")("messenger_search").warn("Error fetching viewer details");return!1}f=d("LSContactBitOffset").has(80,f);if(!f)return!1;f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(a)));e=(yield d("MWGetOtherContactOrSelf").getOtherContactOrSelf(a,e,b));e=(b=e)!=null?b:f;return d("MAWDefaultE2eeOneToOneEligibility").isContactDefaultE2eeOneToOneEligible({contactId:e!=null?e.id:a,maybeContact:e})});return h.apply(this,arguments)}g["default"]=a}),98);
__d("useAsyncReStore",["LSDatabaseSingleton","Promise","ReStoreProvider.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;c=i||d("react");var l=c.useContext,m=c.useMemo;function a(){var a=l((k||(k=d("ReStoreProvider.react"))).context);return m(function(){return a!=null?(h||(h=b("Promise"))).resolve(a):(j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton},[a])}g["default"]=a}),98);
__d("useServerTime",["JSScheduler","ServerTime","clearInterval","react","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useEffect,k=b.useState,l=6e4,m=new Set(),n=null,o=!1;function p(){m.forEach(function(a){return a()}),o=!1}function q(a){a===void 0&&(a=l),n=c("setInterval")(function(){o||(o=!0,(h||(h=c("JSScheduler"))).scheduleSpeculativeCallback(p))},a)}function r(){m.size===0&&(c("clearInterval")(n),n=null)}function s(a,b){b===void 0&&(b=l);m.add(a);n==null&&q(b);return function(){m["delete"](a),r()}}function t(){return new Date(d("ServerTime").getMillis())}function a(a){a===void 0&&(a=l);var b=k(function(){return t()}),c=b[0],d=b[1],e=function(){return d(t())};j(function(){return s(e,a)},[a]);return c}g["default"]=a}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/9cisb7Fe7ih/
 */
__d("fontfaceobserver-2.0.13",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){(function(){function a(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function b(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function b(){document.removeEventListener("DOMContentLoaded",b),a()}):document.attachEvent("onreadystatechange",function b(){("interactive"==document.readyState||"complete"==document.readyState)&&(document.detachEvent("onreadystatechange",b),a())})}function c(a){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(a)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function d(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+b+";"}function e(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function f(b,c){function d(){var a=f;e(a)&&a.a.parentNode&&c(a.g)}var f=b;a(b.b,d);a(b.c,d);e(b)}function h(a,b){b=b||{};this.family=a;this.style=b.style||"normal";this.weight=b.weight||"normal";this.stretch=b.stretch||"normal"}var i=null,j=null,k=null,l=null;function m(){if(null===j)if(n()&&/Apple/.test(window.navigator.vendor)){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);j=!!a&&603>parseInt(a[1],10)}else j=!1;return j}function n(){null===l&&(l=!!document.fonts);return l}function o(){if(null===k){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(a){}k=""!==a.style.font}return k}function p(a,b){return[a.style,a.weight,o()?a.stretch:"","100px",b].join(" ")}h.prototype.load=function(a,e){var g=this,h=a||"BESbswy",j=0,k=e||3e3,l=(new Date).getTime();return new Promise(function(a,e){if(n()&&!m()){var o=new Promise(function(a,b){function c(){(new Date).getTime()-l>=k?b():document.fonts.load(p(g,'"'+g.family+'"'),h).then(function(b){1<=b.length?a():setTimeout(c,25)},function(){b()})}c()}),q=new Promise(function(a,b){j=setTimeout(b,k)});Promise.race([q,o]).then(function(){clearTimeout(j),a(g)},function(){e(g)})}else b(function(){function b(){var b;(b=-1!=r&&-1!=s||-1!=r&&-1!=t||-1!=s&&-1!=t)&&((b=r!=s&&r!=t&&s!=t)||(null===i&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),i=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=i&&(r==u&&s==u&&t==u||r==v&&s==v&&t==v||r==w&&s==w&&t==w)),b=!b);b&&(x.parentNode&&x.parentNode.removeChild(x),clearTimeout(j),a(g))}function m(){if((new Date).getTime()-l>=k)x.parentNode&&x.parentNode.removeChild(x),e(g);else{var a=document.hidden;(!0===a||void 0===a)&&(r=n.a.offsetWidth,s=o.a.offsetWidth,t=q.a.offsetWidth,b());j=setTimeout(m,50)}}var n=new c(h),o=new c(h),q=new c(h),r=-1,s=-1,t=-1,u=-1,v=-1,w=-1,x=document.createElement("div");x.dir="ltr";d(n,p(g,"sans-serif"));d(o,p(g,"serif"));d(q,p(g,"monospace"));x.appendChild(n.a);x.appendChild(o.a);x.appendChild(q.a);document.body.appendChild(x);u=n.a.offsetWidth;v=o.a.offsetWidth;w=q.a.offsetWidth;m();f(n,function(a){r=a,b()});d(n,p(g,'"'+g.family+'",sans-serif'));f(o,function(a){s=a,b()});d(o,p(g,'"'+g.family+'",serif'));f(q,function(a){t=a,b()});d(q,p(g,'"'+g.family+'",monospace'))})})};"object"===typeof g?g.exports=h:(window.FontFaceObserver=h,window.FontFaceObserver.prototype.load=h.prototype.load)})()}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("fontfaceobserver",["fontfaceobserver-2.0.13"],(function(a,b,c,d,e,f){e.exports=b("fontfaceobserver-2.0.13")()}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("javascript-blowfish-1.0.5",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a=function(b,c){this.key=b,(c==="ecb"||c==="cbc")&&(this.mode=c),this.sBox0=a.sBox0.slice(),this.sBox1=a.sBox1.slice(),this.sBox2=a.sBox2.slice(),this.sBox3=a.sBox3.slice(),this.pArray=a.pArray.slice(),this.generateSubkeys(b)};a.prototype={sBox0:null,sBox1:null,sBox2:null,sBox3:null,pArray:null,key:null,mode:"ecb",iv:"abc12345",keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encrypt:function(a,b){if(this.mode==="ecb")return this.encryptECB(a);if(this.mode==="cbc")return this.encryptCBC(a,b);throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f.")},decrypt:function(a,b){if(this.mode==="ecb")return this.decryptECB(a);if(this.mode==="cbc")return this.decryptCBC(a,b);throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f.")},encryptECB:function(a){a=this.utf8Decode(a);var b=Math.ceil(a.length/8),c="";for(var d=0;d<b;d++){var e=a.substr(d*8,8);if(e.length<8){var f=8-e.length;while(0<f--)e+="\0"}var g;f=this.split64by32(e);e=f[0];g=f[1];f=this.encipher(e,g);e=f[0];g=f[1];c+=this.num2block32(e)+this.num2block32(g)}return c},encryptCBC:function(a,b){a=this.utf8Decode(a);var c=Math.ceil(a.length/8),d;b=this.split64by32(b);d=b[0];b=b[1];var e="";for(var f=0;f<c;f++){var g=a.substr(f*8,8);if(g.length<8){var h=8-g.length;while(0<h--)g+="\0"}var i;h=this.split64by32(g);g=h[0];i=h[1];g=this.xor(g,d);i=this.xor(i,b);h=this.encipher(g,i);g=h[0];i=h[1];d=g;b=i;e+=this.num2block32(g)+this.num2block32(i)}return e},decryptECB:function(a){var b=Math.ceil(a.length/8),c="";for(var d=0;d<b;d++){var e=a.substr(d*8,8);if(e.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0430: \u0434\u043b\u0438\u043d\u043d\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u0430 8 \u0431\u0430\u044b\u0439\u0442\u0430\u043c.");var f,g;e=this.split64by32(e);f=e[0];g=e[1];e=this.decipher(f,g);f=e[0];g=e[1];c+=this.num2block32(f)+this.num2block32(g)}c=this.utf8Encode(c);return c},decryptCBC:function(a,b){var c=Math.ceil(a.length/8),d,e,f;b=this.split64by32(b);d=b[0];b=b[1];var g="";for(var h=0;h<c;h++){var i=a.substr(h*8,8);if(i.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0430: \u0434\u043b\u0438\u043d\u043d\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u0430 8 \u0431\u0430\u0439\u0442\u0430\u043c.");var j,k;i=this.split64by32(i);j=i[0];k=i[1];e=j;f=k;i=this.decipher(j,k);j=i[0];k=i[1];j=this.xor(j,d);k=this.xor(k,b);d=e;b=f;g+=this.num2block32(j)+this.num2block32(k)}g=this.utf8Encode(g);return g},F:function(a){var b=a>>>24,c=a<<8>>>24,d=a<<16>>>24;a=a<<24>>>24;b=this.addMod32(this.sBox0[b],this.sBox1[c]);b=this.xor(b,this.sBox2[d]);b=this.addMod32(b,this.sBox3[a]);return b},encipher:function(a,b){var c;for(var d=0;d<16;d++)a=this.xor(a,this.pArray[d]),b=this.xor(this.F(a),b),c=a,a=b,b=c;c=a;a=b;b=c;b=this.xor(b,this.pArray[16]);a=this.xor(a,this.pArray[17]);return[a,b]},decipher:function(a,b){var c;a=this.xor(a,this.pArray[17]);b=this.xor(b,this.pArray[16]);c=a;a=b;b=c;for(var d=15;d>=0;d--)c=a,a=b,b=c,b=this.xor(this.F(a),b),a=this.xor(a,this.pArray[d]);return[a,b]},generateSubkeys:function(a){var b=0,c=0,d,e;for(d=0;d<18;d++){for(e=4;e>0;e--)b=this.fixNegative(b<<8|a.charCodeAt(c)),c=(c+1)%a.length;this.pArray[d]=this.xor(this.pArray[d],b);b=0}e=[0,0];for(d=0;d<18;d+=2)e=this.encipher(e[0],e[1]),this.pArray[d]=e[0],this.pArray[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox0[d]=e[0],this.sBox0[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox1[d]=e[0],this.sBox1[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox2[d]=e[0],this.sBox2[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox3[d]=e[0],this.sBox3[d+1]=e[1]},block32toNum:function(a){return this.fixNegative(a.charCodeAt(0)<<24|a.charCodeAt(1)<<16|a.charCodeAt(2)<<8|a.charCodeAt(3))},num2block32:function(a){return String.fromCharCode(a>>>24)+String.fromCharCode(a<<8>>>24)+String.fromCharCode(a<<16>>>24)+String.fromCharCode(a<<24>>>24)},xor:function(a,b){return this.fixNegative(a^b)},addMod32:function(a,b){return this.fixNegative(a+b|0)},fixNegative:function(a){return a>>>0},split64by32:function(a){var b=a.substring(0,4);a=a.substring(4,8);return[this.block32toNum(b),this.block32toNum(a)]},utf8Decode:function(a){var b="";for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(d&63|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(d&63|128))}return b},utf8Encode:function(a){var b="",c=0,d=0,e=0,f;while(c<a.length)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(e=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|e&63),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63),c+=3);return b},base64Encode:function(a){var b="",c,d,e,f,g,h,i=0;while(i<a.length)c=a.charCodeAt(i++),d=a.charCodeAt(i++),e=a.charCodeAt(i++),f=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),b=b+this.keyStr.charAt(f)+this.keyStr.charAt(c)+this.keyStr.charAt(g)+this.keyStr.charAt(h);return b},base64Decode:function(a){var b="",c,d,e,f,g,h=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(h<a.length)d=this.keyStr.indexOf(a.charAt(h++)),e=this.keyStr.indexOf(a.charAt(h++)),f=this.keyStr.indexOf(a.charAt(h++)),g=this.keyStr.indexOf(a.charAt(h++)),d=d<<2|e>>4,e=(e&15)<<4|f>>2,c=(f&3)<<6|g,b=b+String.fromCharCode(d),f!=64&&(b=b+String.fromCharCode(e)),g!=64&&(b=b+String.fromCharCode(c));return b},trimZeros:function(a){return a.replace(/\0+$/g,"")}};a.pArray=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731];a.sBox0=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946];a.sBox1=[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055];a.sBox2=[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504];a.sBox3=[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462];g.exports=a}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("javascript-blowfish",["javascript-blowfish-1.0.5"],(function(a,b,c,d,e,f){e.exports=b("javascript-blowfish-1.0.5")()}),null);/*FB_PKG_DELIM*/
__d("LsDataTraceFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743851");b=d("FalcoLoggerInternal").create("ls_data_trace",a);e=b;g["default"]=e}),98);
__d("LSDataTraceFlush",["ArmadilloDataTraceType","I64","LSDataTraceType","LSIntEnum","LsDataTraceFalcoEvent","ODS","Promise","ReQL","asyncToGeneratorRuntime","clearTimeout","gkx","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||(i=d("I64"))).of_string("120000"),m=i.of_string("600000"),n=new Set(["encrypted_backups_upload","encrypted_backups_media_backup"]);function o(a,b,c){var e=a.length;if(e===0)return[(i||(i=d("I64"))).neg_one,i.neg_one,void 0,void 0,void 0];e=a.find(function(a){return a.errorMessage!=null});e=e==null?void 0:e.errorMessage;a=a[a.length-1|0];var f=(i||(i=d("I64"))).of_float(Date.now()),g=a.timestampMs,h=i.compare(i.sub(f,c),l)>=0;return!b&&h?[(i||(i=d("I64"))).sub(f,c),a.checkPointId,g,e,"trace expired"]:[i.sub(g,c),a.checkPointId,g,e,e]}function p(a){return a.reduce(function(a,b,c){var e,f=(i||(i=d("I64"))).to_string(b.checkPointId),g=b.timestampMs;e=i.to_string((e=b.syncChannel)!=null?e:(i||(i=d("I64"))).neg_one);b=b.tags;b=b!=null?","+b:"";if(c===0)a.pointsList="".concat("(",f,",",e,b,")");else{c=String((i||(i=d("I64"))).to_int32(i.sub(g,a.lastCheckPointTimestamp)));a.pointsList=a.pointsList.concat("-",c,"-(",f,",",e,b,")")}a.lastCheckPointTimestamp=g;return a},{lastCheckPointTimestamp:(i||(i=d("I64"))).zero,pointsList:""}).pointsList}var q=i.of_string("2");function r(a){var b=a.traceType;b=(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").TASK))?"send":(i||(i=d("I64"))).equal(b,d("ArmadilloDataTraceType").armadilloMessageSend)?"armadillo send":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_UPLOAD))?"encrypted_backups_upload":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_RESTORE))?"encrypted_backups_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_MEDIA_BACKUP))?"encrypted_backups_media_backup":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_LOGIN))?"sap_vesta_login":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_REGISTRATION))?"sap_vesta_registration":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_MEDIA_RESTORE))?"encrypted_backups_media_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_INIT))?"shadow_encrypted_backups_init":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_ADD_DEVICE))?"shadow_encrypted_backups_add_device":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_UPLOAD))?"shadow_encrypted_backups_upload":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_RESTORE))?"shadow_encrypted_backups_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_DELETE_BACKUP))?"shadow_encrypted_backups_delete_backup":a.contextTwo;return b}function s(a,b){var e=b.traceId,f=b.shouldFlush,g=r(b),h=b.traceType,j=(i||(i=d("I64"))).equal(h,d("ArmadilloDataTraceType").armadilloMessageSend)?"tam_message_send":b.contextOne,k=(i||(i=d("I64"))).equal(b.traceType,q)?void 0:b.predefinedId,l=b.initTimestampMs;return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_addon.index("traceIdAddonId")).getKeyRange(e)).then(function(a){var b=o(a,f,l),h=b[0],m=b[1],n=b[3],q=b[4],r=a.length,s=p(a);c("LsDataTraceFalcoEvent").log(function(){var a;return{check_point_count:(i||(i=d("I64"))).to_string(i.of_int32(r)),check_point_list:s,client_event_ts:i.to_string(i.of_float(Date.now())),cold_start_time:void 0,data_trace_id:e,database_id:j,delivered_messages:void 0,error_message:q,first_error_message:n,has_backgrounded:!1,last_check_point:i.to_string(m),latency:i.to_string(h),media_type:void 0,num_of_attachments:void 0,persisted_metadata:void 0,predefined_id:k,sent_rich_media_messages:void 0,sent_text_messages:void 0,start_time:i.to_string(l),trace_flow:(a=g)!=null?a:""}})}).then(function(){return a.data_trace_meta["delete"](e)})}function a(a,c){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.data_trace_meta).getKeyRange(c)).then(function(c){if(c!=null)return s(a,c);else return(h||(h=b("Promise"))).resolve()})}var t={contents:void 0};function u(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta.index("shouldFlushInitTimestampMsTraceId")).getKeyRange(!1).bounds({lt:d("ReQL").key((i||(i=d("I64"))).sub(i.of_float(Date.now()),l))})).then(function(a){if(c("gkx")("23914")){var b=(i||(i=d("I64"))).of_float(Date.now());return a.filter(function(a){var c=r(a);if(c!=null&&n.has(c)){c=(i||(i=d("I64"))).compare(i.sub(b,a.initTimestampMs),m)>=0;return c}return!0})}return a})}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield u(a.tables));if(c.length===0)return;return a.runInTransaction(function(a){return u(a).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){return s(a,b)}))})},"readwrite",void 0,void 0,f.id+":312")});return w.apply(this,arguments)}function x(){var a=t.contents;if(a!=null){c("clearTimeout")(a);return}}function y(a){c("promiseDone")(v(a),function(){x();var b=c("setTimeout")(function(){y(a)},6e4);t.contents=b},function(){x(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mw_trace","error")});return x}e=a;a=y;e={flush:e,flushExpiredDataTraces:a};g["default"]=e}),98);
__d("LSJSONOp",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({BLOCK:1,LOAD:2,STORE:3,STORE_ARRAY:4,CALL_STORED_PROCEDURE:5,CALL_NATIVE_TYPE_OPERATION:6,CALL_NATIVE_OPERATION:7,LIST:8,UNDEFINED:9,INFINITY:10,NAN:11,RETURN:12,BOOL_TO_STR:13,BLOBS_TO_STRING:14,BLOBS_OF_STRING:15,TO_BLOB:16,I64_OF_FLOAT:17,I64_TO_FLOAT:18,I64_FROM_STRING:19,I64_TO_STRING:20,READ_GK:21,READ_QE:22,IF:23,OR:24,AND:25,NOT:26,IS_NULL:27,ENFORCE_NOT_NULL:28,GENERIC_EQUAL:29,I64_EQUAL:30,BLOB_EQUAL:31,GENERIC_NOT_EQUAL:32,I64_NOT_EQUAL:33,BLOB_NOT_EQUAL:34,GENERIC_GREATER_THAN:35,I64_GREATER_THAN:36,BLOB_GREATER_THAN:37,GENERIC_GREATER_THAN_OR_EQUAL:38,I64_GREATER_THAN_OR_EQUAL:39,BLOB_GREATER_THAN_OR_EQUAL:40,GENERIC_LESS_THAN:41,I64_LESS_THAN:42,BLOB_LESS_THAN:43,GENERIC_LESS_THAN_OR_EQUAL:44,I64_LESS_THAN_OR_EQUAL:45,BLOB_LESS_THAN_OR_EQUAL:46,THROW:47,LOG_CONSOLE:48,LOGGER_LOG:49,NATIVE_OP_ARRAY_CREATE:50,NATIVE_OP_ARRAY_APPEND:51,NATIVE_OP_ARRAY_GET_SIZE:52,NATIVE_OP_MAP_CREATE:53,NATIVE_OP_MAP_GET:54,NATIVE_OP_MAP_SET:55,NATIVE_OP_MAP_KEYS:56,NATIVE_OP_MAP_DELETE:57,NATIVE_OP_MAP_HAS:58,NATIVE_OP_STR_JOIN:59,NATIVE_OP_CURRENT_TIME:60,NATIVE_OP_JSON_STRINGIFY:61,NATIVE_OP_RNG_NUM:62,NATIVE_OP_LOCALIZATION_SUPPORTED:63,NATIVE_OP_LOCALIZATION_SUPPORTED_V2:64,NATIVE_OP_RESOLVE_LOCALIZED:65,NATIVE_OP_RESOLVE_LOCALIZED_V2:66,ADD:68,I64_ADD:69,I64_CAST:70,READ_JUSTKNOB:71,READ_IGGK:72,GET_RUN_MODE:73,STR_TRIM:74,STR_REPLACE:75,JOIN:76,STR_LIKE:77,LENGTH:78,IN:79,IN_VEC:80,SUB:81,MUL:82,DIV:83,MOD:84,I64_SUB:85,I64_MUL:86,I64_DIV:87,I64_MOD:88,I64_IN:89,I64_IN_VEC:90,BITWISE_LEFT_SHIFT:91,BITWISE_RIGHT_SHIFT:92,ARITHMETIC_RIGHT_SHIFT:93,BITWISE_AND:94,BITWISE_OR:95,BITWISE_XOR:96,TERNARY:97,XOR:98,NULLISH_COALESE:99,READ_COLUMN:100,READ_COLUMN_REF:101,READ_GROUP_COUNT:102,COMMENT:103,IMPORT:104,LOOP:105,QUERY_COMPARISON_EQUAL:106,QUERY_COMPARISON_NOT_EQUAL:107,QUERY_COMPARISON_GREATER_THAN:108,QUERY_COMPARISON_GREATER_THAN_OR_EQUAL:109,QUERY_COMPARISON_LESS_THAN:110,QUERY_COMPARISON_LESS_THAN_OR_EQUAL:111,QUERY_MERGE_CONSTRAINTS:112,QUERY_FETCH_ROWS:113,QUERY_FILTER_ROWS:114,QUERY_SORT_ROWS_BY:115,QUERY_DELETE_ROWS:116,QUERY_SLICE_ROWS:117,QUERY_COUNT_ROWS:118,QUERY_PEEK_NEXT_ROW_ID:119,QUERY_UPDATE_ROWS:120,QUERY_INSERT_ROWS:121,QUERY_PUT_ROWS:122,QUERY_FOREACH_ROW:123,QUERY_SELECT_MATCH_ROW:124,QUERY_CURSOR_SLICE:125,QUERY_GROUP_BY:126,SUB_STRING:127});c=a;f["default"]=c}),66);
__d("LSMaybeDeferredImports",["LSSynchronousPromise"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h(a)}function b(a){return h(a)}function h(b){var a=null;return{load:function(){return a==null?b.load().then(function(b){a=b;return a}):d("LSSynchronousPromise").maybeMakeSynchronousPromise(a)}}}g.wrapReqDeferredMaybeSync=a;g.wrapJSResourceForInteractionMaybeSync=b}),98);
__d("LSSelectOrder",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["ASC","DESC"]);c=a;f["default"]=c}),66);
__d("LSDatascriptJSONEval",["FBLogger","JSResourceForInteraction","LS","LSMaybeDeferredImports","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);j=function(){return a};return a}var k=d("LSMaybeDeferredImports").wrapJSResourceForInteractionMaybeSync(c("JSResourceForInteraction")("LSLocalize").__setRef("LSDatascriptJSONEval"));function l(a,b,d){if((h||(h=c("isPromise")))(a))return a.then(b,d);try{return b(a)}catch(a){if(d)return d(a);else throw a}}a=function(){function a(a,b,d,e){var f=this;e===void 0&&(e=[]);this.$4={};this.$5=[];this.$6=null;this.$7=function(a){return l(f.$8(a),function(a){return a},function(b){c("FBLogger")("messenger_web").catching(b).mustfix("Error evaluating step op: %s",Array.isArray(a)?a[0]:"<primitive value>");throw b})};this.$1=b;this.$2=a;this.$3=d;for(b=0;b<e.length;b++)this.$4[b]=e[b]}var d=a.prototype;d.eval=function(){return this.$2==null?this.$1.resolveGuaranteeAsync([]):this.$1.resolveGuaranteeAsync(this.$7(this.$2.step))};d.$8=function(a){var d=this;if(!Array.isArray(a))return a;var e=a[0];a=a.slice(1);var f=a;switch(e){case 8:return f.map(this.$7);case 2:return this.$4[f[0]];case 3:return l(this.$7(f[1]),function(a){return d.$4[f[0]]=a});case 4:return l(this.$7(f[2]),function(a){var b=f[0],c=f[1];for(var e=0;e<c;e++,b++)d.$4[b]=a[e];return a});case 12:a=f[0];e=f[1];var g=[];for(a=a;a<e;a++)g[a]=this.$4[a];return g;case 1:var h;a=function(a){h=l(h,function(){return d.$7(f[a])})};for(e=0;e<f.length;e++)a(e);return h;case 5:return(g=this.$1).storedProcedure.apply(g,f.map(this.$7));case 6:return(e=this.$1).nativeTypeOperation.apply(e,f.map(this.$7));case 7:return(a=this.$1).nativeOperation.apply(a,f.map(this.$7));case 9:return;case 10:return Infinity;case 11:return NaN;case 13:return this.$7(f[0])?"1":"0";case 14:return this.$1.blobs.to_string(this.$7(f[0]));case 15:return this.$1.blobs.of_string(this.$7(f[0]));case 16:return this.$1.blob(this.$7(f[0]));case 17:return this.$1.i64.of_float(this.$7(f[0]));case 18:g=this.$7(f[0]);return g!=null?this.$1.i64.to_float(g):void 0;case 19:return this.$1.i64.from_string(this.$7(f[0]));case 70:return this.$1.i64.cast(this.$7(f[0]));case 20:return this.$1.i64.to_string(this.$7(f[0]));case 21:return(e=this.$3)==null?void 0:(a=e.gk)==null?void 0:a[f[0]];case 22:var m;g=f[0];e=f[1];a=f[2];var n=f[3];m=(m=this.$3)==null?void 0:(m=m.qe)==null?void 0:(m=m[g])==null?void 0:(g=m[e])==null?void 0:g[a];if(m==null)return m;switch(n){case"BOOL":case"STR":return m;case"I64":if(typeof m!=="object")throw c("FBLogger")("messenger_web").mustfixThrow("Cannot convert value to string");return this.$1.i64.from_string(m.toString())}return;case 23:if(this.$7(f[0]))return this.$7(f[1]);else if(f[2]!=null)return this.$7(f[2]);return;case 24:return this.$7(f[0])||this.$7(f[1]);case 25:return this.$7(f[0])&&this.$7(f[1]);case 26:return!this.$7(f[0]);case 27:return this.$7(f[0])==null;case 28:return this.$1.notnull(this.$7(f[0]));case 29:return this.$7(f[0])===this.$7(f[1]);case 30:return this.$1.i64.eq(this.$7(f[0]),this.$7(f[1]));case 31:return this.$1.blobs.eq(this.$7(f[0]),this.$7(f[1]));case 32:return this.$7(f[0])!==this.$7(f[1]);case 33:return this.$1.i64.neq(this.$7(f[0]),this.$7(f[1]));case 34:return this.$1.blobs.neq(this.$7(f[0]),this.$7(f[1]));case 35:return this.$7(f[0])>this.$7(f[1]);case 36:return this.$1.i64.gt(this.$7(f[0]),this.$7(f[1]));case 37:return this.$1.blobs.gt(this.$7(f[0]),this.$7(f[1]));case 38:return this.$7(f[0])>=this.$7(f[1]);case 39:return this.$1.i64.ge(this.$7(f[0]),this.$7(f[1]));case 40:return this.$1.blobs.ge(this.$7(f[0]),this.$7(f[1]));case 41:return this.$7(f[0])<this.$7(f[1]);case 42:return this.$1.i64.lt(this.$7(f[0]),this.$7(f[1]));case 43:return this.$1.blobs.lt(this.$7(f[0]),this.$7(f[1]));case 44:return this.$7(f[0])<=this.$7(f[1]);case 45:return this.$1.i64.le(this.$7(f[0]),this.$7(f[1]));case 46:return this.$1.blobs.le(this.$7(f[0]),this.$7(f[1]));case 47:return this.$1["throw"](f[0]);case 48:return this.$1.print(this.$7(f[0]));case 49:e=this.$7(f[0]);g=f[1];a=this.$1.logger(e);switch(g){case"mustfix":return a.mustfix(e);case"info":return a.info(e);case"warn":return a.warn(e);case"debug":return a.debug(e);default:throw c("FBLogger")("messenger_web").mustfixThrow("Invalid logger level %s",g)}case 50:return f.length===0?this.$1.createArray():(n=this.$1).createArrayWithElements.apply(n,this.$7(f[0]));case 51:m=this.$7(f[0]);m.push(this.$7(f[1]));return m;case 52:return this.$1.i64.of_int32(this.$7(f[0]).length);case 53:return new this.$1.Map();case 54:return this.$7(f[0]).get(this.$7(f[1]));case 55:return this.$7(f[0]).set(this.$7(f[1]),this.$7(f[2]));case 56:return this.$7(f[0]).keys();case 57:return this.$7(f[0])["delete"](this.$7(f[1]));case 58:return this.$7(f[0]).has(this.$7(f[1]));case 59:return this.$7(f[0]).join(this.$7(f[1])||"");case 60:return this.$1.i64.of_float(Date.now());case 61:return this.$1.toJSON(this.$7(f[0]));case 62:return this.$1.i64.random();case 63:case 64:return!0;case 65:return k.load().then(function(a){a=a.localizeV1Async;return a(d.$7(f[0]),d.$7(f[1]))});case 66:return k.load().then(function(a){a=a.localizeV2Async;return a(d.$7(f[0]),d.$7(f[1]))});case 68:return this.$7(f[0])+this.$7(f[1]);case 69:return this.$1.i64.add(this.$7(f[0]),this.$7(f[1]));case 71:return(a=this.$3)==null?void 0:(e=a.justknob)==null?void 0:e[f[0]];case 72:return(g=this.$3)==null?void 0:(n=g.iggk)==null?void 0:n[f[0]];case 100:return this.$5[f[0]][f[1]];case 101:if(this.$6==null)throw c("FBLogger")("messenger_web").mustfixThrow("Attempting to read column ref when none exist!");return this.$6[f[0]];case 102:return this.$5[this.$7(f[0])].group_count;case 73:return this.$1.rm;case 74:return this.$7(f[0]).trim();case 75:return this.$7(f[0]).split(this.$7(f[1])).join(this.$7(f[2]));case 76:return f.map(this.$7).join("");case 77:return this.$1.like(this.$7(f[0]),this.$7(f[1]));case 78:return[0,this.$7(f[0]).length];case 79:m=f.map(this.$7);a=m[0];e=m.slice(1);return e.includes(a);case 80:return this.$7(f[1]).includes(this.$7(f[0]));case 81:return this.$7(f[0])-this.$7(f[1]);case 82:return this.$7(f[0])*this.$7(f[1]);case 83:return this.$7(f[0])/this.$7(f[1]);case 84:return this.$7(f[0])%this.$7(f[1]);case 91:return this.$1.i64.lsl_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 92:return this.$1.i64.lsr_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 93:return this.$1.i64.asr_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 94:return this.$1.i64.and_(this.$7(f[0]),this.$7(f[1]));case 95:return this.$1.i64.or_(this.$7(f[0]),this.$7(f[1]));case 96:return this.$1.i64.xor(this.$7(f[0]),this.$7(f[1]));case 85:return this.$1.i64.sub(this.$7(f[0]),this.$7(f[1]));case 86:return this.$1.i64.mul(this.$7(f[0]),this.$7(f[1]));case 87:return this.$1.i64.div(this.$7(f[0]),this.$7(f[1]));case 88:return this.$1.i64.mod_(this.$7(f[0]),this.$7(f[1]));case 89:g=f.map(this.$7);var o=g[0];n=g.slice(1);return n.some(function(a){return d.$1.i64.eq(o,a)});case 90:var p=this.$7(f[0]);return this.$7(f[1]).some(function(a){return d.$1.i64.eq(p,a)});case 97:return this.$7(f[0])?this.$7(f[1]):this.$7(f[2]);case 98:m=this.$7(f[0]);e=this.$7(f[1]);return(m||e)&&!(m&&e);case 99:return(a=this.$7(f[0]))!=null?a:this.$7(f[1]);case 103:return;case 104:return b.call(null,f[0]);case 105:g=function(){var b=d.$7(f[0]),e=f[1],g=c("LS").n,a,h=function(b){a=l(a,function(){d.$4[e]=b;return d.$7(f[2])})};for(var k=g(j());d.$1.i64.lt(k,b);k=d.$1.i64.add(k,g(i())))h(k);return{v:a}}();if(typeof g==="object")return g.v;case 106:return this.$7(f[0]);case 107:throw c("FBLogger")("messenger_web").mustfixThrow("not equal query comparison operator not supported");case 108:return{gt:this.$7(f[0])};case 109:return{gte:this.$7(f[0])};case 110:return{lt:this.$7(f[0])};case 111:return{lte:this.$7(f[0])};case 112:return f.length===1?this.$7(f[0]):(n=this.$1).merge.apply(n,f.map(this.$7));case 113:m=f[0];e=f[1];a=f.slice(2);g=a.map(this.$7);switch(e){case"ASC":return(n=this.$1.db.table(m)).fetch.apply(n,g);case"DESC":return(a=this.$1.db.table(m)).fetchDesc.apply(a,g)}return;case 114:return this.$1.filter(this.$7(f[0]),function(a){d.$6=a;a=d.$7(f[1]);d.$6=null;return a});case 115:return(e=this.$1).sortBy.apply(e,f.map(this.$7));case 116:return this.$1.forEach(this.$7(f[0]),function(a){return a["delete"]()});case 117:return this.$1.islc(this.$7(f[0]),0,this.$7(f[1]));case 118:return this.$1.count(this.$7(f[0]));case 119:return this.$1.db.table(f[0]).peekNextAutoIncrementId();case 120:return this.$1.forEach(this.$7(f[0]),function(a){var b=a.item;a=a.update;var c={};d.$6=b;for(b=1;b<f.length;b+=2)c[f[b]]=d.$7(f[b+1]);d.$6=null;return a(c)});case 121:n=f[0];m={};for(a=1;a<f.length;a+=2)m[f[a]]=this.$7(f[a+1]);return this.$1.db.table(n).add(m);case 122:g=f[0];e={};for(a=1;a<f.length;a+=2)e[f[a]]=this.$7(f[a+1]);return this.$1.db.table(g).put(e);case 123:return this.$1.forEach(this.$7(f[0]),function(a){a=a.item;d.$5[f[1]]=a;return d.$7(f[2])});case 124:return this.$7(f[0]).next().then(function(a){var b=a.done;a=a.value;if(b)return d.$7(f[3]);else{b=f[1];if(b!=null){d.$5[b]=a.item;return d.$7(f[2])}}return 0});case 125:return this.$7(f[0]).slice(0,this.$7(f[1]));case 126:return this.$1.groupBy(this.$7(f[0]),f[1]).forEach(function(a){d.$5[f[2]]=a;return d.$7(f[3])});case 127:return this.$7(f[0]).substr(this.$1.i64.to_int32(this.$7(f[1])),this.$1.i64.to_int32(this.$7(f[2])))}};return a}();g["default"]=a}),98);
__d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE",["Env","TrustedTypes","err"],(function(a,b,c,d,e,f,g){"use strict";var h;d={createScript:function(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];d.forEach(function(a){if(typeof window!=="undefined"&&typeof window.trustedTypes!=="undefined"&&!window.trustedTypes.isScript(a))throw c("err")("Trusted Function requires TrustedScripts args only.")});var f=d.slice(0,-1).join(","),g=d.pop().toString();return"(function anonymous(\n     "+f+"\n     ) {\n     "+g+"\n     })"}};var i=c("TrustedTypes").createPolicy("unsafe-function-do-not-use",d);function b(){for(var b=arguments.length,d=new Array(b),e=0;e<b;e++)d[e]=arguments[e];if(c("TrustedTypes").isSupportedNatively()&&(h||(h=c("Env"))).useTrustedTypes){var f=i.createScript.apply(i,[""].concat(d));return a.eval(f)}else return babelHelpers.construct(Function,d)}g.TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE=i;g.createTrustedFunction=b}),98);
__d("LSDatascriptEvaluator",["FBLogger","LSDatascriptJSONEval","LSFactory","MWPBumpEntityKey","TrustedTypesNoOpPolicy_DO_NOT_USE","TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var e=function(b){return function(c,d){var e;return a==null?void 0:(e=a.qe)==null?void 0:(e=e[c])==null?void 0:(c=e[b])==null?void 0:c[d]}},f=new Proxy({getBool:e("fb"),getNumber:e("fb"),getString:e("fb")},{get:function(a,b){return b in a?a[b]:{getBool:e(b),getNumber:e(b),getString:e(b)}}}),g=function(b){var c;return a==null?void 0:(c=a.gk)==null?void 0:c[b]};g.ig=function(b){var c;return a==null?void 0:(c=a.iggk)==null?void 0:c[b]};var h={getBool:function(b){var c;return a==null?void 0:(c=a.justknob)==null?void 0:c[b]}};return function(a){var e;e=d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE").createTrustedFunction((e=c("TrustedTypesNoOpPolicy_DO_NOT_USE")).createScript("gkx"),e.createScript("qex"),e.createScript("justknobx"),e.createScript("return "+b));return e(g,f,h)(c("LSFactory")(a,{dynamic:!0}))}}var i=function(a){return c("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow('Received a sync script with an illegal target of "%s"',(a=a)!=null?a:-1)};function j(a,b){var d=JSON.parse(b),e=(b=a)!=null?b:{gk:{},iggk:{},justknob:{},qe:{}};return function(a){return new(c("LSDatascriptJSONEval"))(d,c("LSFactory")(a,{dynamic:!0}),e).eval()}}function k(a,b,d){if(!c("justknobx")._("3078"))return l(a,b,d);if(d==null)throw i(d);switch(d){case 3:return j(a,b);default:throw i(d)}}function l(a,b,d){if(d==null){c("FBLogger")("lightspeed","null_target").mustfix("Received <null> target field for sync script!");return h(a,b)}switch(d){case 3:return j(a,b);case 2:return h(a,b);case 1:throw c("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow("Received a sync script with LSProgramTarget of DASM, this should never happen!")}}function a(a){return function(b){if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(e){var g=e.experiments,h=e.priority,i=e.syncScript,j=e.target;e=e.taskNames;g=g!=null?JSON.parse(g):null;try{var l=k(g,i,j);return b.runInTransaction(function(b){a&&a();return l(b)},"readwrite",h,{taskNames:e,type:"sync_script"},f.id+":228")}catch(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");c("FBLogger")("messenger_web").catching(a).mustfix("Error executing sync script");throw a}}}}a.__debugModuleName="LSDatascriptEvaluator";g.default=a}),98);
__d("LogWebQplNOP",["I64","LSIntEnum","Promise","QPLUserFlow","WAHashStringToNumber","WALogger","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["LSLogWebQpl error: ",""]);k=function(){return a};return a}function l(a){a=a==null?null:(j||(j=d("I64"))).to_int32(a);switch(a){case 521476165:return c("qpl")._(521476165,"2432");case 521481602:return c("qpl")._(521481602,"829");default:return null}}function a(a,e,f,g,m,n){return new(h||(h=b("Promise")))(function(b,h){try{h=m?(i||(i=d("LSIntEnum"))).unwrapIntEnum(m):null;var o=l(e);if(o!=null&&f!=null){h={"int":{num_messages:(j||(j=d("I64"))).to_int32(g)},string:{message_count:String(g),taskSource:(h=h==null?void 0:h.toString())!=null?h:"unknown"}};n===!0?c("QPLUserFlow").endSuccess(o,{annotations:h,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)}):n===!1?c("QPLUserFlow").endFailure(o,f,{annotations:h,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)}):(c("QPLUserFlow").addAnnotations(o,h,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)}),c("QPLUserFlow").addPoint(o,f,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)}))}b()}catch(a){d("WALogger").ERROR(k(),a),b()}})}g.call=a}),98);
/**
 * License: https://www.facebook.com/legal/license/ZMc_bSwzLKC/
 */
__d("ristretto255-0.1.1",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f,g){var h=c("tweetnacl-1.0.3")();Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(a,b){return new Uint8Array(Array.prototype.slice.call(this,a,b))}});c={};var i=h.lowlevel,j=i.gf([1]);function k(){return[i.gf(),i.gf(),i.gf(),i.gf()]}var l=new Uint8Array([226,242,174,10,106,188,78,113,168,132,169,97,197,0,81,95,88,227,11,106,165,130,221,141,182,166,89,69,224,141,45,118]),m=new Float64Array([235,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function n(a,b,c){var d=new Float64Array(64);for(var e=0;e<32;e++)for(var f=0;f<32;f++)d[e+f]+=b[e]*c[f];i.modL(a,d)}function o(a,b){n(a,b,b)}function p(a,b){for(var c=0;c<32;c++)a[c]=b[c];for(c=251;c>=0;c--)o(a,a),(m[c>>3]>>(c&7)&1)!==0&&n(a,a,b)}var q=i.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),r=i.gf([11803,18811,63136,32407,21693,7032,36364,44957,53757,12789,64713,3900,18604,11139,12735,14185]),s=i.gf([16618,32861,64938,39368,29374,23105,5655,40239,55360,65025,31633,5826,64674,53167,35077,30828]),t=i.gf([49526,37983,2497,57980,13583,52574,41272,11393,57316,48752,43997,39316,57559,45747,29352,656]),u=i.gf([19744,17645,23210,12717,6553,45086,18988,53918,20203,21147,54063,19676,8769,63084,45946,22888]);function v(a){var b=new Uint8Array(32);i.pack25519(b,a);a=1;for(var c=0;c<32;c++)a&=b[c]===0;return a}function w(a,b,c){var d;c=-c;for(var e=0;e<16;e++)d=a[e]^b[e],d&=c,a[e]^=d}function x(a){var b=new Uint8Array(32);i.pack25519(b,a);return b[0]&1}function y(a,b){i.Z(a,i.gf(),b)}function z(a,b,c){var d=i.gf();y(d,b);i.set25519(a,b);w(a,d,c)}function A(a,b){z(a,b,x(b))}function B(a,b,c){var d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),j=i.gf();i.S(d,c);i.M(d,d,c);i.S(a,d);i.M(a,a,c);i.M(a,a,b);i.pow2523(a,a);i.M(a,a,d);i.M(a,a,b);i.S(e,a);i.M(e,e,c);i.Z(f,e,b);i.A(g,e,b);i.M(h,b,q);i.A(h,e,h);d=v(f);c=v(g);b=v(h);i.M(j,a,q);w(a,j,c|b);A(a,a);return d|c}function C(a){var b=i.gf(),c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf(),o=i.gf(),p=i.gf(),r=i.gf(),t=i.gf(),u=i.gf(),v=i.gf(),y=0,C=new Uint8Array(32);i.A(m,a[2],a[1]);i.Z(v,a[2],a[1]);i.M(m,m,v);i.M(n,a[0],a[1]);i.S(o,n);i.M(o,m,o);B(f,j,o);i.M(b,f,m);i.M(c,f,n);i.M(u,b,c);i.M(u,u,a[3]);i.M(g,a[0],q);i.M(h,a[1],q);i.M(e,b,s);i.M(l,a[3],u);y=x(l);p=i.gf(a[0]);r=i.gf(a[1]);d=i.gf(c);w(p,h,y);w(r,g,y);w(d,e,y);i.M(t,p,u);z(r,r,x(t));i.Z(k,a[2],r);i.M(k,d,k);A(k,k);i.pack25519(C,k);return C}function D(a){var b=a[31]&127^127;for(var c=30;c>0;c--)b|=a[c]^255;b=(b|0>>>0)-1>>8;c=237-1-(a[0]|0>>>0)>>8;return 1-((b&c|a[0])&1|(a[31]&255)>>7)}function E(a,b){var c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf();if(D(b)===0)return-1;i.unpack25519(e,b);i.S(f,e);i.set25519(g,j);i.Z(g,g,f);i.S(k,g);i.set25519(h,j);i.A(h,h,f);i.S(l,h);i.M(m,i.D,k);y(m,m);i.Z(m,m,l);i.M(n,m,l);i.set25519(d,j);b=B(c,d,n);i.M(a[0],c,h);i.M(a[1],c,a[0]);i.M(a[1],a[1],m);i.M(a[0],a[0],e);i.A(a[0],a[0],a[0]);A(a[0],a[0]);i.M(a[1],g,a[1]);i.set25519(a[2],j);i.M(a[3],a[0],a[1]);return-(1-b|x(a[3])|v(a[1]))}function F(a,b){var c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf(),o=i.gf(),p=i.gf(),s=i.gf(),v=i.gf();i.set25519(e,j);i.S(f,b);i.M(f,q,f);i.A(m,f,e);i.M(m,m,t);i.set25519(c,j);y(c,c);i.A(g,f,i.D);i.M(n,f,i.D);i.Z(n,c,n);i.M(n,n,g);g=1-B(h,m,n);i.M(k,h,b);A(k,k);y(k,k);w(h,k,g);w(c,f,g);i.Z(d,f,e);i.M(d,d,c);i.M(d,d,u);i.Z(d,d,n);i.A(o,h,h);i.M(o,o,n);i.M(p,d,r);i.S(l,h);i.Z(s,e,l);i.A(v,e,l);i.M(a[0],o,v);i.M(a[1],s,p);i.M(a[2],p,v);i.M(a[3],o,s)}function G(a){var b=i.gf(),c=i.gf(),d=k(),e=k();i.unpack25519(b,a.slice(0,32));i.unpack25519(c,a.slice(32,64));F(d,b);F(e,c);i.add(d,e);return d}function a(a){var b=k();i.scalarbase(b,a);return C(b)}function b(a,b){var c=k(),d=k();if(E(c,b)!==0)throw new Error("Invalid argument");i.scalarmult(d,c,a);return C(d)}function d(a){var b=k();return E(b,a)===-1?!1:!0}function H(a,b){var c=k(),d=k();if(E(c,a)===-1)throw new Error("Invalid argument");if(E(d,b)===-1)throw new Error("Invalid argument");return[c,d]}function e(a,b){a=H(a,b);b=a[0];a=a[1];i.add(b,a);return C(b)}function I(a,b){var c=i.gf();y(c,b[3]);var d=i.gf();y(d,b[0]);d=[d,b[1],b[2],c];i.add(a,d)}function g(a,b){a=H(a,b);b=a[0];a=a[1];I(b,a);return C(b)}function J(){var a=h.randomBytes(64);return G(a)}function K(a){return C(G(a))}function L(){return C(J())}function M(){var a;new Uint8Array(32);var b=0;do{a=h.randomBytes(32);a[31]&=31;var c=32,d=1;do c--,b|=a[c]-i.L[c]>>8&d,d&=(a[c]^i.L[c])-1>>8;while(c!==0)}while(b===0);return a}function N(a){var b=new Uint8Array(32);p(b,a);return b}function O(a){var b=new Float64Array(64);for(var c=0;c<32;c++)b[c]=-a[c];c=new Uint8Array(32);i.modL(c,b);return c}function P(a,b){var c=new Float64Array(64);for(var d=0;d<32;d++)c[d]=a[d]+b[d];d=new Uint8Array(32);i.modL(d,c);return d}function Q(a,b){return P(a,O(b))}function R(a,b){var c=new Uint8Array(32);n(c,a,b);return c}c.scalarMultBase=a;c.scalarMult=b;c.isValid=d;c.add=e;c.sub=g;c.fromHash=K;c.getRandom=L;c.basePoint=l;c.scalar={};c.scalar.getRandom=M;c.scalar.invert=N;c.scalar.negate=O;c.scalar.add=P;c.scalar.sub=Q;c.scalar.mul=R;c.unsafe={};c.unsafe.point={};c.unsafe.point.toBytes=C;c.unsafe.point.fromBytes=E;c.unsafe.point.fromHash=G;c.unsafe.point.sub=I;c.unsafe.point.add=i.add;c.unsafe.point.scalarMultBase=i.scalarbase;c.unsafe.point.scalarMult=i.scalarmult;c.unsafe.point.getRandom=J;c.unsafe.point.alloc=k;c.unsafe.constants={};c.unsafe.constants.LSub2=m;c.unsafe.constants.sqrtm1=q;c.unsafe.constants.sqrtadm1=r;c.unsafe.constants.invsqrtamd=s;c.unsafe.constants.onemsqd=t;c.unsafe.constants.sqdmone=u;f.exports=c}),34);
__d("ristretto255",["ristretto255-0.1.1"],(function(a,b,c,d,e,f){e.exports=b("ristretto255-0.1.1")}),null);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/PAEKTkKqR_S/
 */
__d("msgpack-msgpack-2.8.0",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){Object.defineProperty(g,"__esModule",{value:!0});g.getUint64=g.getInt64=g.setInt64=g.setUint64=g.UINT32_MAX=void 0;g.UINT32_MAX=4294967295;function a(a,b,c){var d=c/4294967296;c=c;a.setUint32(b,d);a.setUint32(b+4,c)}g.setUint64=a;function b(a,b,c){var d=Math.floor(c/4294967296);c=c;a.setUint32(b,d);a.setUint32(b+4,c)}g.setInt64=b;function c(a,b){var c=a.getInt32(b);a=a.getUint32(b+4);return c*4294967296+a}g.getInt64=c;function d(a,b){var c=a.getUint32(b);a=a.getUint32(b+4);return c*4294967296+a}g.getUint64=d}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){var a;Object.defineProperty(l,"__esModule",{value:!0});l.utf8DecodeTD=l.TEXT_DECODER_THRESHOLD=l.utf8DecodeJs=l.utf8EncodeTE=l.TEXT_ENCODER_THRESHOLD=l.utf8EncodeJs=l.utf8Count=void 0;var b=k();a=(typeof process==="undefined"||((a=process===null||process===void 0?void 0:process.env)===null||a===void 0?void 0:a.TEXT_ENCODING)!=="never")&&typeof TextEncoder!=="undefined"&&typeof TextDecoder!=="undefined";function c(a){var b=a.length,c=0,d=0;while(d<b){var e=a.charCodeAt(d++);if((e&4294967168)===0){c++;continue}else if((e&4294965248)===0)c+=2;else{if(e>=55296&&e<=56319&&d<b){var f=a.charCodeAt(d);(f&64512)===56320&&(++d,e=((e&1023)<<10)+(f&1023)+65536)}(e&4294901760)===0?c+=3:c+=4}}return c}l.utf8Count=c;function d(a,b,c){var d=a.length;c=c;var e=0;while(e<d){var f=a.charCodeAt(e++);if((f&4294967168)===0){b[c++]=f;continue}else if((f&4294965248)===0)b[c++]=f>>6&31|192;else{if(f>=55296&&f<=56319&&e<d){var g=a.charCodeAt(e);(g&64512)===56320&&(++e,f=((f&1023)<<10)+(g&1023)+65536)}(f&4294901760)===0?(b[c++]=f>>12&15|224,b[c++]=f>>6&63|128):(b[c++]=f>>18&7|240,b[c++]=f>>12&63|128,b[c++]=f>>6&63|128)}b[c++]=f&63|128}}l.utf8EncodeJs=d;var e=a?new TextEncoder():void 0;l.TEXT_ENCODER_THRESHOLD=a?typeof process!=="undefined"&&((c=process===null||process===void 0?void 0:process.env)===null||c===void 0?void 0:c.TEXT_ENCODING)!=="force"?200:0:b.UINT32_MAX;function f(a,b,c){b.set(e.encode(a),c)}function g(a,b,c){e.encodeInto(a,b.subarray(c))}l.utf8EncodeTE=(e===null||e===void 0?void 0:e.encodeInto)?g:f;var h=4096;function i(a,b,c){b=b;c=b+c;var d=[],e="";while(b<c){var f=a[b++];if((f&128)===0)d.push(f);else if((f&224)===192){var g=a[b++]&63;d.push((f&31)<<6|g)}else if((f&240)===224){g=a[b++]&63;var i=a[b++]&63;d.push((f&31)<<12|g<<6|i)}else if((f&248)===240){g=a[b++]&63;i=a[b++]&63;var j=a[b++]&63;g=(f&7)<<18|g<<12|i<<6|j;g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|g&1023);d.push(g)}else d.push(f);d.length>=h&&(e+=String.fromCharCode.apply(String,d),d.length=0)}d.length>0&&(e+=String.fromCharCode.apply(String,d));return e}l.utf8DecodeJs=i;var j=a?new TextDecoder():null;l.TEXT_DECODER_THRESHOLD=a?typeof process!=="undefined"&&((d=process===null||process===void 0?void 0:process.env)===null||d===void 0?void 0:d.TEXT_DECODER)!=="force"?200:0:b.UINT32_MAX;function m(a,b,c){a=a.subarray(b,b+c);return j.decode(a)}l.utf8DecodeTD=m}var o=!1;function p(){o||(o=!0,n());return m.exports}var q={},r={exports:q};function aa(){Object.defineProperty(q,"__esModule",{value:!0});q.ExtData=void 0;var a=function(a,b){this.type=a,this.data=b};q.ExtData=a}var s=!1;function t(){s||(s=!0,aa());return r.exports}var u={},ba={exports:u};function ca(){Object.defineProperty(u,"__esModule",{value:!0});u.DecodeError=void 0;var a=function(b){babelHelpers.inheritsLoose(a,b);function a(c){c=b.call(this,c)||this;var d=Object.create(a.prototype);Object.setPrototypeOf(babelHelpers.assertThisInitialized(c),d);Object.defineProperty(babelHelpers.assertThisInitialized(c),"name",{configurable:!0,enumerable:!1,value:a.name});return c}return a}(babelHelpers.wrapNativeSuper(Error));u.DecodeError=a}var v=!1;function w(){v||(v=!0,ca());return ba.exports}var x={},da={exports:x};function ea(){Object.defineProperty(x,"__esModule",{value:!0});x.timestampExtension=x.decodeTimestampExtension=x.decodeTimestampToTimeSpec=x.encodeTimestampExtension=x.encodeDateToTimeSpec=x.encodeTimeSpecToTimestamp=x.EXT_TIMESTAMP=void 0;var a=w(),b=k();x.EXT_TIMESTAMP=-1;var c=4294967296-1,d=17179869184-1;function e(a){var e=a.sec;a=a.nsec;if(e>=0&&a>=0&&e<=d)if(a===0&&e<=c){var f=new Uint8Array(4),g=new DataView(f.buffer);g.setUint32(0,e);return f}else{g=e/4294967296;f=e&4294967295;var h=new Uint8Array(8),i=new DataView(h.buffer);i.setUint32(0,a<<2|g&3);i.setUint32(4,f);return h}else{g=new Uint8Array(12);i=new DataView(g.buffer);i.setUint32(0,a);b.setInt64(i,4,e);return g}}x.encodeTimeSpecToTimestamp=e;function f(a){a=a.getTime();var b=Math.floor(a/1e3);a=(a-b*1e3)*1e6;var c=Math.floor(a/1e9);return{sec:b+c,nsec:a-c*1e9}}x.encodeDateToTimeSpec=f;function g(a){if(a instanceof Date){a=f(a);return e(a)}else return null}x.encodeTimestampExtension=g;function h(c){var d=new DataView(c.buffer,c.byteOffset,c.byteLength);switch(c.byteLength){case 4:var e=d.getUint32(0),f=0;return{sec:e,nsec:f};case 8:e=d.getUint32(0);f=d.getUint32(4);f=(e&3)*4294967296+f;e=e>>>2;return{sec:f,nsec:e};case 12:f=b.getInt64(d,4);e=d.getUint32(0);return{sec:f,nsec:e};default:throw new a.DecodeError("Unrecognized data size for timestamp (expected 4, 8, or 12): "+c.length)}}x.decodeTimestampToTimeSpec=h;function i(a){a=h(a);return new Date(a.sec*1e3+a.nsec/1e6)}x.decodeTimestampExtension=i;x.timestampExtension={type:x.EXT_TIMESTAMP,encode:g,decode:i}}var y=!1;function z(){y||(y=!0,ea());return da.exports}var A={},fa={exports:A};function ga(){Object.defineProperty(A,"__esModule",{value:!0});A.ExtensionCodec=void 0;var a=t(),b=z(),c=function(){function c(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(b.timestampExtension)}var d=c.prototype;d.register=function(a){var b=a.type,c=a.encode;a=a.decode;if(b>=0)this.encoders[b]=c,this.decoders[b]=a;else{b=1+b;this.builtInEncoders[b]=c;this.builtInDecoders[b]=a}};d.tryToEncode=function(b,c){for(var d=0;d<this.builtInEncoders.length;d++){var e=this.builtInEncoders[d];if(e!=null){e=e(b,c);if(e!=null){var f=-1-d;return new a.ExtData(f,e)}}}for(f=0;f<this.encoders.length;f++){e=this.encoders[f];if(e!=null){d=e(b,c);if(d!=null){e=f;return new a.ExtData(e,d)}}}return b instanceof a.ExtData?b:null};d.decode=function(b,c,d){var e=c<0?this.builtInDecoders[-1-c]:this.decoders[c];if(e)return e(b,c,d);else return new a.ExtData(c,b)};return c}();A.ExtensionCodec=c;c.defaultCodec=new c()}var B=!1;function C(){B||(B=!0,ga());return fa.exports}var D={},ha={exports:D};function ia(){Object.defineProperty(D,"__esModule",{value:!0});D.createDataView=D.ensureUint8Array=void 0;function a(a){if(a instanceof Uint8Array)return a;else if(ArrayBuffer.isView(a))return new Uint8Array(a.buffer,a.byteOffset,a.byteLength);else if(a instanceof ArrayBuffer)return new Uint8Array(a);else return Uint8Array.from(a)}D.ensureUint8Array=a;function b(b){if(b instanceof ArrayBuffer)return new DataView(b);b=a(b);return new DataView(b.buffer,b.byteOffset,b.byteLength)}D.createDataView=b}var E=!1;function F(){E||(E=!0,ia());return ha.exports}var G={},ja={exports:G};function ka(){Object.defineProperty(G,"__esModule",{value:!0});G.Encoder=G.DEFAULT_INITIAL_BUFFER_SIZE=G.DEFAULT_MAX_DEPTH=void 0;var a=p(),b=C(),c=k(),d=F();G.DEFAULT_MAX_DEPTH=100;G.DEFAULT_INITIAL_BUFFER_SIZE=2048;var e=function(){function e(a,c,d,e,f,g,h,i){a===void 0&&(a=b.ExtensionCodec.defaultCodec),c===void 0&&(c=void 0),d===void 0&&(d=G.DEFAULT_MAX_DEPTH),e===void 0&&(e=G.DEFAULT_INITIAL_BUFFER_SIZE),f===void 0&&(f=!1),g===void 0&&(g=!1),h===void 0&&(h=!1),i===void 0&&(i=!1),this.extensionCodec=a,this.context=c,this.maxDepth=d,this.initialBufferSize=e,this.sortKeys=f,this.forceFloat32=g,this.ignoreUndefined=h,this.forceIntegerToFloat=i,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}var f=e.prototype;f.reinitializeState=function(){this.pos=0};f.encodeSharedRef=function(a){this.reinitializeState();this.doEncode(a,1);return this.bytes.subarray(0,this.pos)};f.encode=function(a){this.reinitializeState();this.doEncode(a,1);return this.bytes.slice(0,this.pos)};f.doEncode=function(a,b){if(b>this.maxDepth)throw new Error("Too deep objects in depth "+b);a==null?this.encodeNil():typeof a==="boolean"?this.encodeBoolean(a):typeof a==="number"?this.encodeNumber(a):typeof a==="string"?this.encodeString(a):this.encodeObject(a,b)};f.ensureBufferSizeToWrite=function(a){a=this.pos+a;this.view.byteLength<a&&this.resizeBuffer(a*2)};f.resizeBuffer=function(a){a=new ArrayBuffer(a);var b=new Uint8Array(a);a=new DataView(a);b.set(this.bytes);this.view=a;this.bytes=b};f.encodeNil=function(){this.writeU8(192)};f.encodeBoolean=function(a){a===!1?this.writeU8(194):this.writeU8(195)};f.encodeNumber=function(a){Number.isSafeInteger(a)&&!this.forceIntegerToFloat?a>=0?a<128?this.writeU8(a):a<256?(this.writeU8(204),this.writeU8(a)):a<65536?(this.writeU8(205),this.writeU16(a)):a<4294967296?(this.writeU8(206),this.writeU32(a)):(this.writeU8(207),this.writeU64(a)):a>=-32?this.writeU8(224|a+32):a>=-128?(this.writeU8(208),this.writeI8(a)):a>=-32768?(this.writeU8(209),this.writeI16(a)):a>=-2147483648?(this.writeU8(210),this.writeI32(a)):(this.writeU8(211),this.writeI64(a)):this.forceFloat32?(this.writeU8(202),this.writeF32(a)):(this.writeU8(203),this.writeF64(a))};f.writeStringHeader=function(a){if(a<32)this.writeU8(160+a);else if(a<256)this.writeU8(217),this.writeU8(a);else if(a<65536)this.writeU8(218),this.writeU16(a);else if(a<4294967296)this.writeU8(219),this.writeU32(a);else throw new Error("Too long string: "+a+" bytes in UTF-8")};f.encodeString=function(b){var c=1+4,d=b.length;if(d>a.TEXT_ENCODER_THRESHOLD){d=a.utf8Count(b);this.ensureBufferSizeToWrite(c+d);this.writeStringHeader(d);a.utf8EncodeTE(b,this.bytes,this.pos);this.pos+=d}else{d=a.utf8Count(b);this.ensureBufferSizeToWrite(c+d);this.writeStringHeader(d);a.utf8EncodeJs(b,this.bytes,this.pos);this.pos+=d}};f.encodeObject=function(a,b){var c=this.extensionCodec.tryToEncode(a,this.context);if(c!=null)this.encodeExtension(c);else if(Array.isArray(a))this.encodeArray(a,b);else if(ArrayBuffer.isView(a))this.encodeBinary(a);else if(typeof a==="object")this.encodeMap(a,b);else throw new Error("Unrecognized object: "+Object.prototype.toString.apply(a))};f.encodeBinary=function(a){var b=a.byteLength;if(b<256)this.writeU8(196),this.writeU8(b);else if(b<65536)this.writeU8(197),this.writeU16(b);else if(b<4294967296)this.writeU8(198),this.writeU32(b);else throw new Error("Too large binary: "+b);b=d.ensureUint8Array(a);this.writeU8a(b)};f.encodeArray=function(a,b){var c=a.length;if(c<16)this.writeU8(144+c);else if(c<65536)this.writeU8(220),this.writeU16(c);else if(c<4294967296)this.writeU8(221),this.writeU32(c);else throw new Error("Too large array: "+c);for(c of a)this.doEncode(c,b+1)};f.countWithoutUndefined=function(a,b){var c=0;for(b of b)a[b]!==void 0&&c++;return c};f.encodeMap=function(a,b){var c=Object.keys(a);this.sortKeys&&c.sort();var d=this.ignoreUndefined?this.countWithoutUndefined(a,c):c.length;if(d<16)this.writeU8(128+d);else if(d<65536)this.writeU8(222),this.writeU16(d);else if(d<4294967296)this.writeU8(223),this.writeU32(d);else throw new Error("Too large map object: "+d);for(d of c){c=a[d];this.ignoreUndefined&&c===void 0||(this.encodeString(d),this.doEncode(c,b+1))}};f.encodeExtension=function(a){var b=a.data.length;if(b===1)this.writeU8(212);else if(b===2)this.writeU8(213);else if(b===4)this.writeU8(214);else if(b===8)this.writeU8(215);else if(b===16)this.writeU8(216);else if(b<256)this.writeU8(199),this.writeU8(b);else if(b<65536)this.writeU8(200),this.writeU16(b);else if(b<4294967296)this.writeU8(201),this.writeU32(b);else throw new Error("Too large extension object: "+b);this.writeI8(a.type);this.writeU8a(a.data)};f.writeU8=function(a){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,a),this.pos++};f.writeU8a=function(a){var b=a.length;this.ensureBufferSizeToWrite(b);this.bytes.set(a,this.pos);this.pos+=b};f.writeI8=function(a){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,a),this.pos++};f.writeU16=function(a){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,a),this.pos+=2};f.writeI16=function(a){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,a),this.pos+=2};f.writeU32=function(a){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,a),this.pos+=4};f.writeI32=function(a){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,a),this.pos+=4};f.writeF32=function(a){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,a),this.pos+=4};f.writeF64=function(a){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,a),this.pos+=8};f.writeU64=function(a){this.ensureBufferSizeToWrite(8),c.setUint64(this.view,this.pos,a),this.pos+=8};f.writeI64=function(a){this.ensureBufferSizeToWrite(8),c.setInt64(this.view,this.pos,a),this.pos+=8};return e}();G.Encoder=e}var H=!1;function I(){H||(H=!0,ka());return ja.exports}var J={},la={exports:J};function ma(){Object.defineProperty(J,"__esModule",{value:!0});J.encode=void 0;var a=I(),b={};function c(c,d){d===void 0&&(d=b);d=new a.Encoder(d.extensionCodec,d.context,d.maxDepth,d.initialBufferSize,d.sortKeys,d.forceFloat32,d.ignoreUndefined,d.forceIntegerToFloat);return d.encodeSharedRef(c)}J.encode=c}var K=!1;function na(){K||(K=!0,ma());return la.exports}var L={},oa={exports:L};function pa(){Object.defineProperty(L,"__esModule",{value:!0});L.prettyByte=void 0;function a(a){return(a<0?"-":"")+"0x"+Math.abs(a).toString(16).padStart(2,"0")}L.prettyByte=a}var M=!1;function qa(){M||(M=!0,pa());return oa.exports}var N={},ra={exports:N};function sa(){Object.defineProperty(N,"__esModule",{value:!0});N.CachedKeyDecoder=void 0;var a=p(),b=16,c=16,d=function(){function d(a,d){a===void 0&&(a=b);d===void 0&&(d=c);this.maxKeyLength=a;this.maxLengthPerKey=d;this.hit=0;this.miss=0;this.caches=[];for(a=0;a<this.maxKeyLength;a++)this.caches.push([])}var e=d.prototype;e.canBeCached=function(a){return a>0&&a<=this.maxKeyLength};e.find=function(a,b,c){var d=this.caches[c-1];FIND_CHUNK:for(d of d){var e=d.bytes;for(var f=0;f<c;f++)if(e[f]!==a[b+f])continue FIND_CHUNK;return d.str}return null};e.store=function(a,b){var c=this.caches[a.length-1];a={bytes:a,str:b};c.length>=this.maxLengthPerKey?c[Math.random()*c.length|0]=a:c.push(a)};e.decode=function(b,c,d){var e=this.find(b,c,d);if(e!=null){this.hit++;return e}this.miss++;e=a.utf8DecodeJs(b,c,d);b=Uint8Array.prototype.slice.call(b,c,c+d);this.store(b,e);return e};return d}();N.CachedKeyDecoder=d}var O=!1;function ta(){O||(O=!0,sa());return ra.exports}var P={},ua={exports:P};function va(){Object.defineProperty(P,"__esModule",{value:!0});P.Decoder=P.DataViewIndexOutOfBoundsError=void 0;var a=qa(),c=C(),d=k(),e=p(),f=F(),g=ta(),h=w(),i=function(a){a=typeof a;return a==="string"||a==="number"},j=-1,l=new DataView(new ArrayBuffer(0)),m=new Uint8Array(l.buffer);P.DataViewIndexOutOfBoundsError=function(){try{l.getInt8(0)}catch(a){return a.constructor}throw new Error("never reached")}();var n=new P.DataViewIndexOutOfBoundsError("Insufficient data"),o=new g.CachedKeyDecoder();g=function(){function g(a,b,e,f,g,h,i,k){a===void 0&&(a=c.ExtensionCodec.defaultCodec),b===void 0&&(b=void 0),e===void 0&&(e=d.UINT32_MAX),f===void 0&&(f=d.UINT32_MAX),g===void 0&&(g=d.UINT32_MAX),h===void 0&&(h=d.UINT32_MAX),i===void 0&&(i=d.UINT32_MAX),k===void 0&&(k=o),this.extensionCodec=a,this.context=b,this.maxStrLength=e,this.maxBinLength=f,this.maxArrayLength=g,this.maxMapLength=h,this.maxExtLength=i,this.keyDecoder=k,this.totalPos=0,this.pos=0,this.view=l,this.bytes=m,this.headByte=j,this.stack=[]}var k=g.prototype;k.reinitializeState=function(){this.totalPos=0,this.headByte=j,this.stack.length=0};k.setBuffer=function(a){this.bytes=f.ensureUint8Array(a),this.view=f.createDataView(this.bytes),this.pos=0};k.appendBuffer=function(a){if(this.headByte===j&&!this.hasRemaining(1))this.setBuffer(a);else{var b=this.bytes.subarray(this.pos);a=f.ensureUint8Array(a);var c=new Uint8Array(b.length+a.length);c.set(b);c.set(a,b.length);this.setBuffer(c)}};k.hasRemaining=function(a){return this.view.byteLength-this.pos>=a};k.createExtraByteError=function(a){var b=this.view,c=this.pos;return new RangeError("Extra "+(b.byteLength-c)+" of "+b.byteLength+" byte(s) found at buffer["+a+"]")};k.decode=function(a){this.reinitializeState();this.setBuffer(a);a=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return a};k.decodeMulti=function*(a){this.reinitializeState();this.setBuffer(a);while(this.hasRemaining(1))yield this.doDecodeSync()};k.decodeAsync=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=!1,d,e=!0,f=!1,g;try{for(var h=babelHelpers.asyncIterator(b),b,b;b=(yield h.next()),e=b.done,b=(yield b.value),!e;e=!0){b=b;if(c)throw this.createExtraByteError(this.totalPos);this.appendBuffer(b);try{d=this.doDecodeSync(),c=!0}catch(a){if(!(a instanceof P.DataViewIndexOutOfBoundsError))throw a}this.totalPos+=this.pos}}catch(a){f=!0,g=a}finally{try{!e&&h["return"]!=null&&(yield h["return"]())}finally{if(f)throw g}}if(c){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return d}b=this.headByte;e=this.pos;f=this.totalPos;throw new RangeError("Insufficient data in parsing "+a.prettyByte(b)+" at "+f+" ("+e+" in the current buffer)")});function d(a){return c.apply(this,arguments)}return d}();k.decodeArrayStream=function(a){return this.decodeMultiAsync(a,!0)};k.decodeStream=function(a){return this.decodeMultiAsync(a,!1)};k.decodeMultiAsync=function(){var a=babelHelpers.wrapAsyncGenerator(function*(a,b){var c=b,d=-1,e=!0,f=!1,g;try{for(var h=babelHelpers.asyncIterator(a),a,a;a=(yield babelHelpers.awaitAsyncGenerator(h.next())),e=a.done,a=(yield babelHelpers.awaitAsyncGenerator(a.value)),!e;e=!0){a=a;if(b&&d===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);c&&(d=this.readArraySize(),c=!1,this.complete());try{while(!0){yield this.doDecodeSync();if(--d===0)break}}catch(a){if(!(a instanceof P.DataViewIndexOutOfBoundsError))throw a}this.totalPos+=this.pos}}catch(a){f=!0,g=a}finally{try{!e&&h["return"]!=null&&(yield babelHelpers.awaitAsyncGenerator(h["return"]()))}finally{if(f)throw g}}});function b(b,c){return a.apply(this,arguments)}return b}();k.doDecodeSync=function(){DECODE:while(!0){var b=this.readHeadByte(),c=void 0;if(b>=224)c=b-256;else if(b<192)if(b<128)c=b;else if(b<144){var d=b-128;if(d!==0){this.pushMapState(d);this.complete();continue DECODE}else c={}}else if(b<160){d=b-144;if(d!==0){this.pushArrayState(d);this.complete();continue DECODE}else c=[]}else{d=b-160;c=this.decodeUtf8String(d,0)}else if(b===192)c=null;else if(b===194)c=!1;else if(b===195)c=!0;else if(b===202)c=this.readF32();else if(b===203)c=this.readF64();else if(b===204)c=this.readU8();else if(b===205)c=this.readU16();else if(b===206)c=this.readU32();else if(b===207)c=this.readU64();else if(b===208)c=this.readI8();else if(b===209)c=this.readI16();else if(b===210)c=this.readI32();else if(b===211)c=this.readI64();else if(b===217){d=this.lookU8();c=this.decodeUtf8String(d,1)}else if(b===218){d=this.lookU16();c=this.decodeUtf8String(d,2)}else if(b===219){d=this.lookU32();c=this.decodeUtf8String(d,4)}else if(b===220){d=this.readU16();if(d!==0){this.pushArrayState(d);this.complete();continue DECODE}else c=[]}else if(b===221){d=this.readU32();if(d!==0){this.pushArrayState(d);this.complete();continue DECODE}else c=[]}else if(b===222){d=this.readU16();if(d!==0){this.pushMapState(d);this.complete();continue DECODE}else c={}}else if(b===223){d=this.readU32();if(d!==0){this.pushMapState(d);this.complete();continue DECODE}else c={}}else if(b===196){d=this.lookU8();c=this.decodeBinary(d,1)}else if(b===197){d=this.lookU16();c=this.decodeBinary(d,2)}else if(b===198){d=this.lookU32();c=this.decodeBinary(d,4)}else if(b===212)c=this.decodeExtension(1,0);else if(b===213)c=this.decodeExtension(2,0);else if(b===214)c=this.decodeExtension(4,0);else if(b===215)c=this.decodeExtension(8,0);else if(b===216)c=this.decodeExtension(16,0);else if(b===199){d=this.lookU8();c=this.decodeExtension(d,1)}else if(b===200){d=this.lookU16();c=this.decodeExtension(d,2)}else if(b===201){d=this.lookU32();c=this.decodeExtension(d,4)}else throw new h.DecodeError("Unrecognized type byte: "+a.prettyByte(b));this.complete();d=this.stack;while(d.length>0){b=d[d.length-1];if(b.type===0){b.array[b.position]=c;b.position++;if(b.position===b.size)d.pop(),c=b.array;else continue DECODE}else if(b.type===1){if(!i(c))throw new h.DecodeError("The type of key must be string or number but "+typeof c);if(c==="__proto__")throw new h.DecodeError("The key __proto__ is not allowed");b.key=c;b.type=2;continue DECODE}else{b.map[b.key]=c;b.readCount++;if(b.readCount===b.size)d.pop(),c=b.map;else{b.key=null;b.type=1;continue DECODE}}}return c}};k.readHeadByte=function(){this.headByte===j&&(this.headByte=this.readU8());return this.headByte};k.complete=function(){this.headByte=j};k.readArraySize=function(){var b=this.readHeadByte();switch(b){case 220:return this.readU16();case 221:return this.readU32();default:if(b<160)return b-144;else throw new h.DecodeError("Unrecognized array type byte: "+a.prettyByte(b))}};k.pushMapState=function(a){if(a>this.maxMapLength)throw new h.DecodeError("Max length exceeded: map length ("+a+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:a,key:null,readCount:0,map:{}})};k.pushArrayState=function(a){if(a>this.maxArrayLength)throw new h.DecodeError("Max length exceeded: array length ("+a+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:a,array:new Array(a),position:0})};k.decodeUtf8String=function(a,b){var c;if(a>this.maxStrLength)throw new h.DecodeError("Max length exceeded: UTF-8 byte length ("+a+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+b+a)throw n;var d=this.pos+b;this.stateIsMapKey()&&((c=this.keyDecoder)===null||c===void 0?void 0:c.canBeCached(a))?c=this.keyDecoder.decode(this.bytes,d,a):a>e.TEXT_DECODER_THRESHOLD?c=e.utf8DecodeTD(this.bytes,d,a):c=e.utf8DecodeJs(this.bytes,d,a);this.pos+=b+a;return c};k.stateIsMapKey=function(){if(this.stack.length>0){var a=this.stack[this.stack.length-1];return a.type===1}return!1};k.decodeBinary=function(a,b){if(a>this.maxBinLength)throw new h.DecodeError("Max length exceeded: bin length ("+a+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(a+b))throw n;var c=this.pos+b;c=this.bytes.subarray(c,c+a);this.pos+=b+a;return c};k.decodeExtension=function(a,b){if(a>this.maxExtLength)throw new h.DecodeError("Max length exceeded: ext length ("+a+") > maxExtLength ("+this.maxExtLength+")");var c=this.view.getInt8(this.pos+b);a=this.decodeBinary(a,b+1);return this.extensionCodec.decode(a,c,this.context)};k.lookU8=function(){return this.view.getUint8(this.pos)};k.lookU16=function(){return this.view.getUint16(this.pos)};k.lookU32=function(){return this.view.getUint32(this.pos)};k.readU8=function(){var a=this.view.getUint8(this.pos);this.pos++;return a};k.readI8=function(){var a=this.view.getInt8(this.pos);this.pos++;return a};k.readU16=function(){var a=this.view.getUint16(this.pos);this.pos+=2;return a};k.readI16=function(){var a=this.view.getInt16(this.pos);this.pos+=2;return a};k.readU32=function(){var a=this.view.getUint32(this.pos);this.pos+=4;return a};k.readI32=function(){var a=this.view.getInt32(this.pos);this.pos+=4;return a};k.readU64=function(){var a=d.getUint64(this.view,this.pos);this.pos+=8;return a};k.readI64=function(){var a=d.getInt64(this.view,this.pos);this.pos+=8;return a};k.readF32=function(){var a=this.view.getFloat32(this.pos);this.pos+=4;return a};k.readF64=function(){var a=this.view.getFloat64(this.pos);this.pos+=8;return a};return g}();P.Decoder=g}var Q=!1;function R(){Q||(Q=!0,va());return ua.exports}var S={},wa={exports:S};function xa(){Object.defineProperty(S,"__esModule",{value:!0});S.decodeMulti=S.decode=S.defaultDecodeOptions=void 0;var a=R();S.defaultDecodeOptions={};function b(b,c){c===void 0&&(c=S.defaultDecodeOptions);c=new a.Decoder(c.extensionCodec,c.context,c.maxStrLength,c.maxBinLength,c.maxArrayLength,c.maxMapLength,c.maxExtLength);return c.decode(b)}S.decode=b;function c(b,c){c===void 0&&(c=S.defaultDecodeOptions);c=new a.Decoder(c.extensionCodec,c.context,c.maxStrLength,c.maxBinLength,c.maxArrayLength,c.maxMapLength,c.maxExtLength);return c.decodeMulti(b)}S.decodeMulti=c}var T=!1;function U(){T||(T=!0,xa());return wa.exports}var V={},ya={exports:V};function za(){Object.defineProperty(V,"__esModule",{value:!0});V.ensureAsyncIterable=V.asyncIterableFromStream=V.isAsyncIterable=void 0;function a(a){return a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]!=null}V.isAsyncIterable=a;function b(a){if(a==null)throw new Error("Assertion Failure: value must not be null nor undefined")}function c(a){return d.apply(this,arguments)}function d(){d=babelHelpers.wrapAsyncGenerator(function*(a){a=a.getReader();try{while(!0){var c=(yield babelHelpers.awaitAsyncGenerator(a.read())),d=c.done;c=c.value;if(d)return;b(c);yield c}}finally{a.releaseLock()}});return d.apply(this,arguments)}V.asyncIterableFromStream=c;function e(b){if(a(b))return b;else return c(b)}V.ensureAsyncIterable=e}var W=!1;function Aa(){W||(W=!0,za());return ya.exports}var X={},Ba={exports:X};function Ca(){Object.defineProperty(X,"__esModule",{value:!0});X.decodeStream=X.decodeMultiStream=X.decodeArrayStream=X.decodeAsync=void 0;var a=R(),c=Aa(),d=U();function e(a,b){return f.apply(this,arguments)}function f(){f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){e===void 0&&(e=d.defaultDecodeOptions);b=c.ensureAsyncIterable(b);e=new a.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength);return e.decodeAsync(b)});return f.apply(this,arguments)}X.decodeAsync=e;function g(b,e){e===void 0&&(e=d.defaultDecodeOptions);b=c.ensureAsyncIterable(b);e=new a.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength);return e.decodeArrayStream(b)}X.decodeArrayStream=g;function h(b,e){e===void 0&&(e=d.defaultDecodeOptions);b=c.ensureAsyncIterable(b);e=new a.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength);return e.decodeStream(b)}X.decodeMultiStream=h;function i(a,b){b===void 0&&(b=d.defaultDecodeOptions);return h(a,b)}X.decodeStream=i}var Y=!1;function Da(){Y||(Y=!0,Ca());return Ba.exports}var Z={},Ea={exports:Z};function Fa(){Object.defineProperty(Z,"__esModule",{value:!0});Z.decodeTimestampExtension=Z.encodeTimestampExtension=Z.decodeTimestampToTimeSpec=Z.encodeTimeSpecToTimestamp=Z.encodeDateToTimeSpec=Z.EXT_TIMESTAMP=Z.ExtData=Z.ExtensionCodec=Z.Encoder=Z.DataViewIndexOutOfBoundsError=Z.DecodeError=Z.Decoder=Z.decodeStream=Z.decodeMultiStream=Z.decodeArrayStream=Z.decodeAsync=Z.decodeMulti=Z.decode=Z.encode=void 0;var a=na();Object.defineProperty(Z,"encode",{enumerable:!0,get:function(){return a.encode}});var b=U();Object.defineProperty(Z,"decode",{enumerable:!0,get:function(){return b.decode}});Object.defineProperty(Z,"decodeMulti",{enumerable:!0,get:function(){return b.decodeMulti}});var c=Da();Object.defineProperty(Z,"decodeAsync",{enumerable:!0,get:function(){return c.decodeAsync}});Object.defineProperty(Z,"decodeArrayStream",{enumerable:!0,get:function(){return c.decodeArrayStream}});Object.defineProperty(Z,"decodeMultiStream",{enumerable:!0,get:function(){return c.decodeMultiStream}});Object.defineProperty(Z,"decodeStream",{enumerable:!0,get:function(){return c.decodeStream}});var d=R();Object.defineProperty(Z,"Decoder",{enumerable:!0,get:function(){return d.Decoder}});Object.defineProperty(Z,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return d.DataViewIndexOutOfBoundsError}});var e=w();Object.defineProperty(Z,"DecodeError",{enumerable:!0,get:function(){return e.DecodeError}});var f=I();Object.defineProperty(Z,"Encoder",{enumerable:!0,get:function(){return f.Encoder}});var g=C();Object.defineProperty(Z,"ExtensionCodec",{enumerable:!0,get:function(){return g.ExtensionCodec}});var h=t();Object.defineProperty(Z,"ExtData",{enumerable:!0,get:function(){return h.ExtData}});var i=z();Object.defineProperty(Z,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return i.EXT_TIMESTAMP}});Object.defineProperty(Z,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return i.encodeDateToTimeSpec}});Object.defineProperty(Z,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return i.encodeTimeSpecToTimestamp}});Object.defineProperty(Z,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return i.decodeTimestampToTimeSpec}});Object.defineProperty(Z,"encodeTimestampExtension",{enumerable:!0,get:function(){return i.encodeTimestampExtension}});Object.defineProperty(Z,"decodeTimestampExtension",{enumerable:!0,get:function(){return i.decodeTimestampExtension}})}var $=!1;function Ga(){$||($=!0,Fa());return Ea.exports}function a(a){switch(a){case void 0:return Ga()}}e.exports=a}),null);
__d("msgpack-msgpack",["msgpack-msgpack-2.8.0"],(function(a,b,c,d,e,f){e.exports=b("msgpack-msgpack-2.8.0")()}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("remove-accents-0.4.2",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u1ea4":"A","\u1eae":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\xc6":"AE","\u1ea6":"A","\u1eb0":"A","\u0202":"A","\xc7":"C","\u1e08":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u1ebe":"E","\u1e16":"E","\u1ec0":"E","\u1e14":"E","\u1e1c":"E","\u0206":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u020a":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\u1ed0":"O","\u1e4c":"O","\u1e52":"O","\u020e":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u1ea5":"a","\u1eaf":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\xe6":"ae","\u1ea7":"a","\u1eb1":"a","\u0203":"a","\xe7":"c","\u1e09":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u1ebf":"e","\u1e17":"e","\u1ec1":"e","\u1e15":"e","\u1e1d":"e","\u0207":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u020b":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\u1ed1":"o","\u1e4d":"o","\u1e53":"o","\u020f":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u0108":"C","\u0109":"c","\u010a":"C","\u010b":"c","\u010c":"C","\u010d":"c","C\u0306":"C","c\u0306":"c","\u010e":"D","\u010f":"d","\u0110":"D","\u0111":"d","\u0112":"E","\u0113":"e","\u0114":"E","\u0115":"e","\u0116":"E","\u0117":"e","\u0118":"E","\u0119":"e","\u011a":"E","\u011b":"e","\u011c":"G","\u01f4":"G","\u011d":"g","\u01f5":"g","\u011e":"G","\u011f":"g","\u0120":"G","\u0121":"g","\u0122":"G","\u0123":"g","\u0124":"H","\u0125":"h","\u0126":"H","\u0127":"h","\u1e2a":"H","\u1e2b":"h","\u0128":"I","\u0129":"i","\u012a":"I","\u012b":"i","\u012c":"I","\u012d":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0132":"IJ","\u0133":"ij","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u1e30":"K","\u1e31":"k","K\u0306":"K","k\u0306":"k","\u0139":"L","\u013a":"l","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u013f":"L","\u0140":"l","\u0141":"l","\u0142":"l","\u1e3e":"M","\u1e3f":"m","M\u0306":"M","m\u0306":"m","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u0149":"n","N\u0306":"N","n\u0306":"n","\u014c":"O","\u014d":"o","\u014e":"O","\u014f":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","P\u0306":"P","p\u0306":"p","\u0154":"R","\u0155":"r","\u0156":"R","\u0157":"r","\u0158":"R","\u0159":"r","R\u0306":"R","r\u0306":"r","\u0212":"R","\u0213":"r","\u015a":"S","\u015b":"s","\u015c":"S","\u015d":"s","\u015e":"S","\u0218":"S","\u0219":"s","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u021b":"t","\u021a":"T","\u0164":"T","\u0165":"t","\u0166":"T","\u0167":"t","T\u0306":"T","t\u0306":"t","\u0168":"U","\u0169":"u","\u016a":"U","\u016b":"u","\u016c":"U","\u016d":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0216":"U","\u0217":"u","V\u0306":"V","v\u0306":"v","\u0174":"W","\u0175":"w","\u1e82":"W","\u1e83":"w","X\u0306":"X","x\u0306":"x","\u0176":"Y","\u0177":"y","\u0178":"Y","Y\u0306":"Y","y\u0306":"y","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u017f":"s","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01cd":"A","\u01ce":"a","\u01cf":"I","\u01d0":"i","\u01d1":"O","\u01d2":"o","\u01d3":"U","\u01d4":"u","\u01d5":"U","\u01d6":"u","\u01d7":"U","\u01d8":"u","\u01d9":"U","\u01da":"u","\u01db":"U","\u01dc":"u","\u1ee8":"U","\u1ee9":"u","\u1e78":"U","\u1e79":"u","\u01fa":"A","\u01fb":"a","\u01fc":"AE","\u01fd":"ae","\u01fe":"O","\u01ff":"o","\xde":"TH","\xfe":"th","\u1e54":"P","\u1e55":"p","\u1e64":"S","\u1e65":"s","X\u0301":"X","x\u0301":"x","\u0403":"\u0413","\u0453":"\u0433","\u040c":"\u041a","\u045c":"\u043a","A\u030b":"A","a\u030b":"a","E\u030b":"E","e\u030b":"e","I\u030b":"I","i\u030b":"i","\u01f8":"N","\u01f9":"n","\u1ed2":"O","\u1ed3":"o","\u1e50":"O","\u1e51":"o","\u1eea":"U","\u1eeb":"u","\u1e80":"W","\u1e81":"w","\u1ef2":"Y","\u1ef3":"y","\u0200":"A","\u0201":"a","\u0204":"E","\u0205":"e","\u0208":"I","\u0209":"i","\u020c":"O","\u020d":"o","\u0210":"R","\u0211":"r","\u0214":"U","\u0215":"u","B\u030c":"B","b\u030c":"b","\u010c\u0323":"C","\u010d\u0323":"c","\xca\u030c":"E","\xea\u030c":"e","F\u030c":"F","f\u030c":"f","\u01e6":"G","\u01e7":"g","\u021e":"H","\u021f":"h","J\u030c":"J","\u01f0":"j","\u01e8":"K","\u01e9":"k","M\u030c":"M","m\u030c":"m","P\u030c":"P","p\u030c":"p","Q\u030c":"Q","q\u030c":"q","\u0158\u0329":"R","\u0159\u0329":"r","\u1e66":"S","\u1e67":"s","V\u030c":"V","v\u030c":"v","W\u030c":"W","w\u030c":"w","X\u030c":"X","x\u030c":"x","Y\u030c":"Y","y\u030c":"y","A\u0327":"A","a\u0327":"a","B\u0327":"B","b\u0327":"b","\u1e10":"D","\u1e11":"d","\u0228":"E","\u0229":"e","\u0190\u0327":"E","\u025b\u0327":"e","\u1e28":"H","\u1e29":"h","I\u0327":"I","i\u0327":"i","\u0197\u0327":"I","\u0268\u0327":"i","M\u0327":"M","m\u0327":"m","O\u0327":"O","o\u0327":"o","Q\u0327":"Q","q\u0327":"q","U\u0327":"U","u\u0327":"u","X\u0327":"X","x\u0327":"x","Z\u0327":"Z","z\u0327":"z"},b=Object.keys(a).join("|"),c=new RegExp(b,"g"),d=new RegExp(b,"");b=function(b){return b.replace(c,function(b){return a[b]})};var e=function(a){return!!a.match(d)};g.exports=b;g.exports.has=e;g.exports.remove=b}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("remove-accents",["remove-accents-0.4.2"],(function(a,b,c,d,e,f){e.exports=b("remove-accents-0.4.2")()}),null);/*FB_PKG_DELIM*/
__d("EARInitType",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["EB_INIT","LS_INIT","MAW_INIT","MAW_RP_INIT","MAW_IN_UI_INIT"]);c=a;f["default"]=c}),66);
__d("EmojiRendererData",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}a.isEmoji=function(a){return a>983041||a<35?!1:a===35||a===42||a>=48&&a<=57||a===169||a===174||a===8205||a===8252||a===8265||a===8419||a===8482||a===8505||a>=8596&&a<=8601||a>=8617&&a<=8618||a>=8986&&a<=8987||a===9e3||a===9167||a>=9193&&a<=9203||a>=9208&&a<=9210||a===9410||a>=9642&&a<=9643||a===9654||a===9664||a>=9723&&a<=9726||a>=9728&&a<=9732||a===9742||a===9745||a>=9748&&a<=9749||a===9752||a===9760||a>=9762&&a<=9763||a===9766||a===9770||a>=9774&&a<=9775||a>=9784&&a<=9786||a===9792||a===9794||a>=9800&&a<=9811||a>=9823&&a<=9824||a===9827||a>=9829&&a<=9830||a===9832||a===9851||a>=9854&&a<=9855||a>=9874&&a<=9879||a===9881||a>=9883&&a<=9884||a>=9888&&a<=9889||a===9895||a>=9898&&a<=9899||a>=9904&&a<=9905||a>=9917&&a<=9918||a>=9924&&a<=9925||a===9928||a>=9934&&a<=9935||a===9937||a>=9939&&a<=9940||a>=9961&&a<=9962||a>=9968&&a<=9973||a>=9975&&a<=9976||a===9978||a===9981||a===9986||a===9989||a>=9992&&a<=9993||a===9999||a===10002||a===10004||a===10006||a===10013||a===10017||a===10024||a>=10035&&a<=10036||a===10052||a===10055||a===10060||a===10062||a>=10067&&a<=10069||a===10071||a>=10083&&a<=10084||a>=10133&&a<=10135||a===10145||a===10160||a===10175||a>=10548&&a<=10549||a>=11013&&a<=11015||a>=11035&&a<=11036||a===11088||a===11093||a===12336||a===12349||a===12951||a===12953||a===126980||a===127183||a>=127344&&a<=127345||a>=127358&&a<=127359||a===127374||a>=127377&&a<=127386||a>=127462&&a<=127487||a>=127489&&a<=127490||a===127514||a===127535||a>=127538&&a<=127546||a>=127568&&a<=127569||a>=127744&&a<=127777||a>=127780&&a<=127876||a>=127878&&a<=127891||a>=127894&&a<=127895||a>=127897&&a<=127899||a>=127902&&a<=127937||a>=127941&&a<=127942||a>=127944&&a<=127945||a>=127949&&a<=127984||a>=127987&&a<=127989||a>=127991&&a<=127994||a>=128e3&&a<=128065||a>=128068&&a<=128069||a>=128081&&a<=128101||a>=128121&&a<=128123||a>=128125&&a<=128128||a===128132||a>=128136&&a<=128142||a===128144||a>=128146&&a<=128169||a>=128171&&a<=128253||a>=128255&&a<=128317||a>=128329&&a<=128334||a>=128336&&a<=128359||a>=128367&&a<=128368||a===128371||a>=128374&&a<=128377||a===128391||a>=128394&&a<=128397||a>=128420&&a<=128421||a===128424||a>=128433&&a<=128434||a===128444||a>=128450&&a<=128452||a>=128465&&a<=128467||a>=128476&&a<=128478||a===128481||a===128483||a===128488||a===128495||a===128499||a>=128506&&a<=128580||a>=128584&&a<=128586||a>=128640&&a<=128674||a>=128676&&a<=128691||a>=128695&&a<=128703||a>=128705&&a<=128709||a===128715||a>=128717&&a<=128722||a>=128725&&a<=128727||a>=128732&&a<=128741||a===128745||a>=128747&&a<=128748||a===128752||a>=128755&&a<=128764||a>=128992&&a<=129003||a===129008||a>=129293&&a<=129294||a>=129296&&a<=129303||a>=129312&&a<=129317||a>=129319&&a<=129327||a===129338||a>=129343&&a<=129349||a>=129351&&a<=129398||a>=129400&&a<=129460||a===129463||a===129466||a>=129468&&a<=129484||a===129488||a>=129502&&a<=129535||a>=129648&&a<=129660||a>=129664&&a<=129673||a>=129679&&a<=129730||a===129734||a>=129742&&a<=129756||a>=129759&&a<=129769||a>=917536&&a<=917631||a>=983040&&a<=983041};a.isEmojiModifier=function(a){return a>127999||a<127995?!1:a>=127995&&a<=127999};a.isEmojiModifierBase=function(a){return a>129784||a<9757?!1:a===9757||a===9977||a>=9994&&a<=9997||a===127877||a>=127938&&a<=127940||a===127943||a>=127946&&a<=127948||a>=128066&&a<=128067||a>=128070&&a<=128080||a>=128102&&a<=128120||a===128124||a>=128129&&a<=128131||a>=128133&&a<=128135||a===128143||a===128145||a===128170||a>=128372&&a<=128373||a===128378||a===128400||a>=128405&&a<=128406||a>=128581&&a<=128583||a>=128587&&a<=128591||a===128675||a>=128692&&a<=128694||a===128704||a===128716||a===129292||a===129295||a>=129304&&a<=129311||a===129318||a>=129328&&a<=129337||a>=129340&&a<=129342||a===129399||a>=129461&&a<=129462||a>=129464&&a<=129465||a===129467||a>=129485&&a<=129487||a>=129489&&a<=129501||a>=129731&&a<=129733||a>=129776&&a<=129784};a.isEmojiVariationSelector=function(a){return a===65039};a.isNonSpacingCombiningMark=function(a){return a>8419||a<8416?!1:a===8416||a===8419};a.isRegionalIndicator=function(a){return a>127487||a<127462?!1:a>=127462&&a<=127487};a.isTagSpec=function(a){return a>917630||a<917536?!1:a>=917536&&a<=917568||a>=917595&&a<=917630};a.isTagTerm=function(a){return a===917631};a.isText=function(a){return a>8419||a<35?!1:a===35||a===42||a>=48&&a<=57||a===8419};a.isTextVariationSelector=function(a){return a===65038};a.isDefaultTextPresentation=function(a){return a>917631||a<35?!1:a===35||a===42||a>=48&&a<=57||a===169||a===174||a===8205||a===8252||a===8265||a===8419||a===8482||a===8505||a>=8596&&a<=8597||a>=8617&&a<=8618||a===9e3||a===9167||a>=9197&&a<=9199||a>=9201&&a<=9202||a>=9208&&a<=9210||a===9410||a===9654||a===9664||a>=9730&&a<=9732||a===9745||a===9752||a===9760||a>=9762&&a<=9763||a===9766||a===9770||a>=9774&&a<=9775||a>=9784&&a<=9785||a===9792||a===9794||a===9823||a===9851||a===9854||a===9874||a>=9876&&a<=9879||a===9881||a>=9883&&a<=9884||a===9895||a>=9904&&a<=9905||a===9928||a===9935||a===9937||a===9939||a===9961||a>=9968&&a<=9969||a===9972||a>=9975&&a<=9977||a===9997||a===9999||a===10002||a===10004||a===10013||a===10017||a===10052||a===10055||a===10083||a===12336||a>=127344&&a<=127345||a>=127358&&a<=127359||a===127777||a>=127780&&a<=127788||a===127798||a===127869||a>=127894&&a<=127895||a>=127897&&a<=127899||a>=127902&&a<=127903||a>=127947&&a<=127950||a>=127956&&a<=127967||a===127987||a===127989||a===127991||a===128063||a===128065||a===128253||a>=128329&&a<=128330||a>=128367&&a<=128368||a>=128371&&a<=128377||a===128391||a>=128394&&a<=128397||a===128400||a===128421||a===128424||a>=128433&&a<=128434||a===128444||a>=128450&&a<=128452||a>=128465&&a<=128467||a>=128476&&a<=128478||a===128481||a===128483||a===128488||a===128495||a===128499||a===128506||a===128715||a>=128717&&a<=128719||a>=128736&&a<=128741||a===128745||a===128752||a===128755||a>=917536&&a<=917631};a.isSymbol=function(a){return a>8482||a<169?!1:a===169||a===174||a===8482};a.isZWJ=function(a){return a===8205};return a}();e.exports=a}),null);
__d("UnicodeUtils",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";var i=55296,j=56319,k=56320,l=57343,m=/[\uD800-\uDFFF]/;function n(a){return i<=a&&a<=l}function a(a,b){0<=b&&b<a.length||h(0,1346,b,a.length);if(b+1===a.length)return!1;var c=a.charCodeAt(b);a=a.charCodeAt(b+1);return i<=c&&c<=j&&k<=a&&a<=l}function o(a){return m.test(a)}function p(a,b){a=n(a.charCodeAt(b));return a?2:1}function b(a){if(!o(a))return a.length;var b=0;for(var c=0;c<a.length;c+=p(a,c))b++;return b}function c(a,b){return r(a,b,b+1)}function q(a,b,c){var d=b||0;c=c===void 0?Infinity:c||0;if(!o(a))return a.substr(d,c);var e=a.length;if(e<=0||d>e||c<=0)return"";var f=0;if(d>0){for(;d>0&&f<e;d--)f+=p(a,f);if(f>=e)return""}else if(b<0){for(f=e;d<0&&0<f;d++)f-=p(a,f-1);f<0&&(f=0)}b=e;if(c<e)for(b=f;c>0&&b<e;c--)b+=p(a,b);return a.substring(f,b)}function r(a,b,c){b=b||0;c=c===void 0?Infinity:c||0;b<0&&(b=0);c<0&&(c=0);var d=Math.abs(c-b);b=b<c?b:c;return q(a,b,d)}function d(a){var b=[];for(var c=0;c<a.length;c+=p(a,c))b.push(a.codePointAt(c));return b}g.isCodeUnitInSurrogateRange=n;g.isSurrogatePair=a;g.hasSurrogateUnit=o;g.getUTF16Length=p;g.strlen=b;g.charAt=c;g.substr=q;g.substring=r;g.getCodePoints=d}),98);
__d("EmojiRenderer",["EmojiRendererData","UnicodeUtils"],(function(a,b,c,d,e,f,g){var h,i,j=0,k=1,l=2,m=3,n=4,o=5,p=6,q=7,r=8,s=9,t=10,u=11;function v(a){var b=a[0];if(b===void 0)return!1;var d=a.length,e=a[d-1];if(e){e=e.charCodeAt(0);if((i||(i=c("EmojiRendererData"))).isTagSpec(e))return!1}b=b.charCodeAt(0);if((i||(i=c("EmojiRendererData"))).isSymbol(b)&&d<2)return!1;if((i||(i=c("EmojiRendererData"))).isText(b))if(d===1)return!1;else if(a.length==2)return(i||(i=c("EmojiRendererData"))).isNonSpacingCombiningMark(a[1].charCodeAt(0));else{e=1;(i||(i=c("EmojiRendererData"))).isEmojiVariationSelector(a[e].charCodeAt(0))&&e++;while(e<a.length){if(!(i||(i=c("EmojiRendererData"))).isNonSpacingCombiningMark(a[e].charCodeAt(0)))return!1;e++}return!0}return!0}function w(a,b){var e=null,f=[],g=r,w=0,x=a.length;while(w<x){var y=a.codePointAt(w),z=(h||(h=d("UnicodeUtils"))).getUTF16Length(a,w),A=a.substr(w,z);switch(g){case s:(i||(i=c("EmojiRendererData"))).isRegionalIndicator(y)?g=m:g=r;break;case n:if((i||(i=c("EmojiRendererData"))).isEmojiModifier(y)){g=o;break}case j:(i||(i=c("EmojiRendererData"))).isZWJ(y)?g=q:(i||(i=c("EmojiRendererData"))).isEmojiVariationSelector(y)?g=l:(i||(i=c("EmojiRendererData"))).isTextVariationSelector(y)?g=u:(i||(i=c("EmojiRendererData"))).isNonSpacingCombiningMark(y)?g=k:(i||(i=c("EmojiRendererData"))).isTagSpec(y)?g=p:g=r;break;case k:case l:if((i||(i=c("EmojiRendererData"))).isNonSpacingCombiningMark(y))break;case m:case o:(i||(i=c("EmojiRendererData"))).isZWJ(y)?g=q:(i||(i=c("EmojiRendererData"))).isTagSpec(y)?g=p:g=r;break;case p:(i||(i=c("EmojiRendererData"))).isTagSpec(y)||(i||(i=c("EmojiRendererData"))).isTagTerm(y)?g=p:g=r;break;case q:(i||(i=c("EmojiRendererData"))).isRegionalIndicator(y)?g=s:(i||(i=c("EmojiRendererData"))).isEmojiModifierBase(y)?g=n:(i||(i=c("EmojiRendererData"))).isEmoji(y)?g=j:g=r;break;case t:(i||(i=c("EmojiRendererData"))).isNonSpacingCombiningMark(y)?g=k:(i||(i=c("EmojiRendererData"))).isEmojiVariationSelector(y)?g=l:g=r;break;default:g=r;break}if(g===r){(i||(i=c("EmojiRendererData"))).isRegionalIndicator(y)?g=s:(i||(i=c("EmojiRendererData"))).isEmojiModifierBase(y)?g=n:(i||(i=c("EmojiRendererData"))).isText(y)?g=t:(i||(i=c("EmojiRendererData"))).isEmoji(y)&&(g=j);if(g!==r){e!==null&&v(e.emoji)&&f.push(e);if(b!==null&&b===f.length){e=null;break}e={emoji:[A],length:z,offset:w}}}else e!==null&&(e.emoji.push(A),e.length+=z);w+=z}e!==null&&v(e.emoji)&&f.push(e);return f}function a(a,b,c){c=w(a);var d=[],e=0;c.forEach(function(c){var f=c.offset;f>e&&d.push(a.substr(e,f-e));var g=b(c.emoji);g!=null&&d.push(g);e=f+c.length});d.push(a.substr(e,a.length-e));return d}function b(a){return w(a,1).length===1}function e(a){return w(a).length}g.parse=w;g.render=a;g.containsEmoji=b;g.countEmoji=e}),98);
__d("EmoticonsList",[],(function(a,b,c,d,e,f){e.exports={emotes:{"O:)":"angel","O:-)":"angel","0:)":"angel","0:-)":"angel","'-_-":"coldsweat",":3":"colonthree","o.O":"confused",O_O:"confused",o_o:"confused","0_0":"confused","O.o":"confused_rev",":'(":"cry",":'-(":"cry","3:)":"devil","3:-)":"devil",":dog:":"dog","-3-":"flushkiss",":(":"frown",":-(":"frown",":[":"frown","=(":"frown",")=":"frown",":o":"gasp",":-O":"gasp",":O":"gasp",":-o":"gasp","=D":"grin",":-D":"grin",":D":"grin",">:(":"grumpy",">:-(":"grumpy","<3":"heart","&lt;3":"heart","^_^":"kiki","^~^":"kiki",":*":"kiss",":-*":"kiss","(y)":"like",":like:":"like","(Y)":"like",T_T:"loudly_crying","T-T":"loudly_crying",ToT:"loudly_crying","T.T":"loudly_crying",":-|":"neutral",":|":"neutral",":v":"pacman",":V":"pacman",'<(")':"penguin",">_<":"persevere",">.<":"persevere",":poop:":"poop",":|]":"robot","(^^^)":"shark",":)":"smile",":-)":"smile",":]":"smile","(:":"smile","=)":"smilingface","(=":"smilingface","-_-":"squint","B|":"sunglasses","8-|":"sunglasses","8|":"sunglasses","B-|":"sunglasses","B-)":"sunglasses","8-)":"sunglasses","8)":"sunglasses","(n)":"thumbsdown","(N)":"thumbsdown",":+1:":"thumbsup",":thumbsup:":"thumbsup",":P":"tongue",":-P":"tongue",":-p":"tongue",":p":"tongue","=P":"tongue",":trans:":"transflag",":/":"unsure",":-/":"unsure",":\\":"unsure",":-\\":"unsure","=/":"unsure","=\\":"unsure",">:o":"upset",">:O":"upset",">:-O":"upset",">:-o":"upset",";)":"wink",";-)":"wink",";*":"winkkiss",";-*":"winkkiss",";-P":"winktongue",";P":"winktongue",";-p":"winktongue",";p":"winktongue",":cheese:":"cheesewedge",":eyes:":"eyes",":peek:":"eyes",":clown:":"clown"},symbols:{angel:"O:)",coldsweat:"'-_-",colonthree:":3",confused:"o.O",confused_rev:"O.o",cry:":'(",devil:"3:)",dog:":dog:",flushkiss:"-3-",frown:":(",gasp:":o",grin:"=D",grumpy:">:(",heart:"<3",kiki:"^_^",kiss:":*",like:"(y)",loudly_crying:"T_T",neutral:":-|",pacman:":v",penguin:'<(")',persevere:">_<",poop:":poop:",robot:":|]",shark:"(^^^)",smile:":)",smilingface:"=)",squint:"-_-",sunglasses:"B|",thumbsdown:"(n)",thumbsup:":+1:",tongue:":P",transflag:":trans:",unsure:":/",upset:">:o",wink:";)",winkkiss:";*",winktongue:";-P",cheesewedge:":cheese:",eyes:":eyes:",clown:":clown:"},emoji:{angel:"1f607",coldsweat:"1f613",colonthree:"FACE_WITH_COLON_THREE",confused:"1f633",confused_rev:"1f633",cry:"1f622",devil:"1f608",dog:"1f436",flushkiss:"1f61a",frown:"1f641",gasp:"1f62e",grin:"1f603",grumpy:"1f620",heart:"2764",kiki:"1f60a",kiss:"1f618",like:"LIKE",loudly_crying:"1f62d",neutral:"1f610",pacman:"PACMAN",penguin:"1f427",persevere:"1f623",poop:"1f4a9",robot:"1f916",shark:"1f988",smile:"1f642",smilingface:"1f60a",squint:"1f611",sunglasses:"1f60e",thumbsdown:"1f44e",thumbsup:"1f44d",tongue:"1f61b",transflag:"1f3f3_fe0f_200d_26a7_fe0f",unsure:"1f615",upset:"1f620",wink:"1f609",winkkiss:"1f618",winktongue:"1f61c",cheesewedge:"1f9c0",eyes:"1f440",clown:"1f921"},regexp:/(^|[\s\'\".\(])(O:\)(?!\))|O:\-\)(?!\))|0:\)(?!\))|0:\-\)(?!\))|\'\-_\-|:3|o\.O|O_O|o_o|0_0|O\.o|:\'\(|:\'\-\(|3:\)(?!\))|3:\-\)(?!\))|:dog:|\-3\-|:\(|:\-\(|:\[|=\(|\)=|:o|:\-O|:O|:\-o|=D|:\-D|:D|>:\(|>:\-\(|<3|&lt;3|\^_\^|\^~\^|:\*|:\-\*|\(y\)(?!\))|:like:|\(Y\)(?!\))|T_T|T\-T|ToT|T\.T|:\-\||:\||:v|:V|<\(\"\)(?!\))|>_<|>\.<|:poop:|:\|\]|\(\^\^\^\)(?!\))|:\)(?!\))|:\-\)(?!\))|:\]|\(:|=\)(?!\))|\(=|\-_\-|B\||8\-\||8\||B\-\||B\-\)(?!\))|8\-\)(?!\))|8\)(?!\))|\(n\)(?!\))|\(N\)(?!\))|:\+1:|:thumbsup:|:P|:\-P|:\-p|:p|=P|:trans:|:\/|:\-\/|:\\|:\-\\|=\/|=\\|>:o|>:O|>:\-O|>:\-o|;\)(?!\))|;\-\)(?!\))|;\*|;\-\*|;\-P|;P|;\-p|;p|:cheese:|:eyes:|:peek:|:clown:)([\s\'\".,!?\)]|<br>|$)/,noncapturingRegexp:/(?:^|[\s\'\".\(])(O:\)(?!\))|O:\-\)(?!\))|0:\)(?!\))|0:\-\)(?!\))|\'\-_\-|:3|o\.O|O_O|o_o|0_0|O\.o|:\'\(|:\'\-\(|3:\)(?!\))|3:\-\)(?!\))|:dog:|\-3\-|:\(|:\-\(|:\[|=\(|\)=|:o|:\-O|:O|:\-o|=D|:\-D|:D|>:\(|>:\-\(|<3|&lt;3|\^_\^|\^~\^|:\*|:\-\*|\(y\)(?!\))|:like:|\(Y\)(?!\))|T_T|T\-T|ToT|T\.T|:\-\||:\||:v|:V|<\(\"\)(?!\))|>_<|>\.<|:poop:|:\|\]|\(\^\^\^\)(?!\))|:\)(?!\))|:\-\)(?!\))|:\]|\(:|=\)(?!\))|\(=|\-_\-|B\||8\-\||8\||B\-\||B\-\)(?!\))|8\-\)(?!\))|8\)(?!\))|\(n\)(?!\))|\(N\)(?!\))|:\+1:|:thumbsup:|:P|:\-P|:\-p|:p|=P|:trans:|:\/|:\-\/|:\\|:\-\\|=\/|=\\|>:o|>:O|>:\-O|>:\-o|;\)(?!\))|;\-\)(?!\))|;\*|;\-\*|;\-P|;P|;\-p|;p|:cheese:|:eyes:|:peek:|:clown:)(?:[\s\'\".,!?\)]|<br>|$)/}}),null);
__d("EmoticonRenderer",["EmoticonsList"],(function(a,b,c,d,e,f,g){"use strict";var h=["LIKE","PACMAN","FACE_WITH_COLON_THREE"];function i(a){var b=[],c=new RegExp(d("EmoticonsList").regexp),e=0,f=a.match(c);while(f!==null){var g=f[1],i=f[2].split(""),j=d("EmoticonsList").emotes[f[2]];j=d("EmoticonsList").emoji[j];b.push({chars:i,isCustom:h.includes(j),key:j,offset:e+f.index+g.length});e+=f.index+f[0].length;f=a.slice(e).match(c)}return b}function a(a,b,c){var d=i(a),e=[],f=0;d.forEach(function(d){var g=d.offset;g>f&&e.push(a.substr(f,g-f));d.isCustom?e.push(c(d.key,d.chars)):e.push(b(d.key));f=g+d.chars.length});e.push(a.substr(f,a.length-f));return e}g.parse=i;g.render=a}),98);
__d("IGDSCircleCheckOutlineIcon.react",["IGDSCircleCheckPanoOutlineIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("IGDSCircleCheckPanoOutlineIcon.react"),babelHelpers["extends"]({},a)),b[0]=a,b[1]=e):e=b[1];return e}b=i.memo(a);g["default"]=b}),98);
__d("MAWBridgeTraceEvent",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ReceivedReceipt","ReceivedSent","FlowEndForFailure","FlowEndForSuccess"]);c=a;f["default"]=c}),66);
__d("MAWEncryptedBackupsStateManager",["MAWEBSwitch"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case 1:return;case 3:c("MAWEBSwitch").set(!0);return;case 2:case 4:default:c("MAWEBSwitch").set(!1);return}}function b(a){return a===4||a===3}g.setEncryptedBackupsState=a;g.eligibleForEBUX=b}),98);
__d("MAWEncryptionIndexedDbV2",["BrowserLockManager","EARInitType","ExecutionEnvironment","FBLogger","IndexedDbPolyfills","MAWCurrentUser","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWQplProxy","MWEARKeychainV3","Promise","QPLUserFlow","WALogger","WAWorkerGlobalScope","err","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Armadillo Web Remote Presence] MAW RP Initialising EAR"]);j=function(){return a};return a}b("IndexedDbPolyfills");var k="browserEncryptionMetaV2",l="version",m=1,n=6e4,o=null,p=null,q=null;function a(){return o}function e(){return o!=null}var r=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(babelHelpers.wrapNativeSuper(Error));function s(a,e){e===void 0&&(e=0);var f=d("MAWCurrentUser").getID();if(e>m){v(a,"ear_idb_retry_failed_max_reached");return(i||(i=b("Promise"))).reject(new r())}if(o!=null){v(a,"ear_db_exists");return(i||(i=b("Promise"))).resolve()}if(indexedDB==null){v(a,"ear_idb_unavailable");return(i||(i=b("Promise"))).reject(c("err")("IndexedDB API not available"))}v(a,"ear_db_open_start",{bool:{browserLockEnabled:c("BrowserLockManager")!=null}});return new(i||(i=b("Promise")))(function(b,g){var i=function(c){s(a,e+1).then(b)["catch"](function(a){if(a instanceof r)return g(c);g(a)})};try{q=d("MAWIndexedDbMetadata").encryptionDbName(f);var j=indexedDB.open(q),m=d("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){g(c("err")("IndexedDB initialisation timeout in %s flow, isInWorker: %s, openRequest: %s",String(a),(h||(h=c("ExecutionEnvironment"))).isInWorker?"true":"false",j.readyState))},n);j.onupgradeneeded=function(b){d("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);v(a,"ear_db_upgrade_start");b=b.target.result;if(!b.objectStoreNames.contains(k)){b=b.createObjectStore(k,{autoIncrement:!0,keyPath:"id"});b.createIndex(l,l,{unique:!0})}v(a,"ear_db_upgrade_end")};j.onblocked=function(){v(a,"ear_db_open_blocked"),d("WAWorkerGlobalScope").workerGlobalScope.setTimeout(function(){g(c("err")("EAR Open timed out while blocked"))},2e3)};j.onsuccess=function(e){d("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);var f=e.target.result;if(!f.objectStoreNames.contains(k)){e=j.result.objectStoreNames.contains(k);c("FBLogger")("messenger_web").warn("Missing encryption meta table. Is store present: %s",e);d("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);return t(f,"missing_encryption_meta_table").then(function(){i(c("err")("Malformed encryption DB"))})["catch"](function(b){v(a,"ear_idb_retry_failed_delete_failed");return g(c("err")("Failed to delete malformed encryption DB: "+b.message))})}f.onversionchange=function(){f.close(),c("FBLogger")("messenger_web").info("EAR onversionchange triggered"),d("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m),p==null?void 0:p()};v(a,"ear_db_open_end");o=f;d("MWEARKeychainV3").setNamespaceSourceDbAndMarkAsReady("global_ear",o);b()};j.onerror=function(){d("WAWorkerGlobalScope").workerGlobalScope.clearTimeout(m);if(j.error.name==="UnknownError"){v(a,"ear_db_open_error_unknown_error");return i(j.error)}v(a,"ear_db_open_error");g(j.error)}}catch(b){v(a,"ear_db_error"),g(b)}})}function f(a){p=p==null?a:p}function t(a,b){a===void 0&&(a=o);c("FBLogger")("messenger_web").warn("EAR DB deletion triggered: %s",b);a!=null&&a.close();return d("MAWIndexedDBDeletion").deleteDB(q,"ear")}function u(a){switch(a){case c("EARInitType").EB_INIT:return c("qpl")._(521477507,"1406");case c("EARInitType").MAW_INIT:return c("qpl")._(25310776,"6155");case c("EARInitType").MAW_RP_INIT:d("WALogger").DEV(j());return c("qpl")._(25310776,"6155");case c("EARInitType").LS_INIT:return c("qpl")._(25305590,"1127");case c("EARInitType").MAW_IN_UI_INIT:return null}}function v(a,b,e){a=u(a);if(a==null)return;(h||(h=c("ExecutionEnvironment"))).isInWorker?d("MAWQplProxy").sendQplPointThroughBridge(a,"worker_"+b,{annotations:e}):(c("QPLUserFlow").addPoint(a,b),e!=null&&c("QPLUserFlow").addAnnotations(a,e))}g.storeName=k;g.ENCRYPTION_MAW_STORES_INDEX=l;g.getEncryptionDB=a;g.isEncryptionDBInited=e;g.makeEncryptionDB=s;g.maybeSetEncryptionDbOnVersionChange=f;g.deleteEncryptionDB_UNSAFE=t}),98);
__d("MAWKeychain",["MWEARKeychainV3"],(function(a,b,c,d,e,f,g){"use strict";a={getDbEncryptionKey:d("MWEARKeychainV3").getDbEncryptionKey,getLatestVersion:d("MWEARKeychainV3").getLatestVersion,init:d("MWEARKeychainV3").init};g["default"]=a}),98);
__d("MAWSharedProtocolQueueConst",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});f.OfflineConsumerStatus=a}),66);
__d("MAWOfflineQueueStatus",["FBLogger","MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=!1;function j(a,b){h.set(a,b),h.size>5e3&&c("FBLogger")("labyrinth_web").warn("Offline queue status map size (%s) is too large",h.size)}function k(a){return h.get(a)}function a(){h=new Map(),i=!1}function b(){return i}function e(){i=!0}function f(a,b){a=Object.keys(a);a.map(function(a){j(a,b)})}function l(a){return k(a)===d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}function m(){return Array.from(h.entries()).filter(function(a){a[0];a=a[1];return a!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete&&a!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed}).map(function(a){a=a[0];return a})}g.setOfflineQueueStatus=j;g.getOfflineQueueStatus=k;g.resetOfflineQueueState=a;g.isOfflineQueueComplete=b;g.markOfflineQueueComplete=e;g.markThreadWithOfflineQueueStatus=f;g.isOfflineQueueDoneForThread=l;g.getAllThreadsWithOfflineQueueIncomplete=m}),98);
__d("MAWVaultMaterialsStorage",["FBLogger","MAWVaultMaterials","Promise","WebAsyncStorage","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i="mw_exchange_vm";function j(){var a=d("MAWVaultMaterials").generateNewVaultMaterials(),e="newly-generated";return new(h||(h=b("Promise")))(function(b){c("WebAsyncStorage").getOrSetItem(i,a,function(f,g){if(f!=null){c("FBLogger")("messenger_web").mustfix("Failed to store Vaulting Materials. %s",f.toString());throw c("unrecoverableViolation")("Failed to store Vaulting Materials","messenger_web_product")}g!==null&&(a=g,e="storage");b(d("MAWVaultMaterials").initializeVaultMaterials(a,e))})})}function a(){return d("MAWVaultMaterials").hasVaultBeenSetup()?(h||(h=b("Promise"))).resolve(d("MAWVaultMaterials").getVaultMaterials()):j()}g.setupVaultMaterials=a}),98);
__d("MWEncryptedBackupsFirstRestoreUpsellTime",["EBAPIWorkerCheck","FBLogger","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported"],(function(a,b,c,d,e,f,g){"use strict";var h,i="mw_encrypted_backups_restore_upsell_first_impression_time_key";function a(){var a=Date.now().toString();if(d("EBAPIWorkerCheck").runningInWorker())return k(a);if(!d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported())return a;try{var b;b=(b=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:b.getItem(i);if(b==null){var e;(e=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:e.setItem(i,a);return a}return b}catch(b){c("FBLogger")("labyrinth_web").warn("[labyrinth][web] Failed to set EB session identifier due to %s",b);return a}}var j=null;function k(a){j==null&&(j=a);return j}g.getFirstRestoreUpsellTime=a;g.getFirstRestoreUpsellTimeForEBLS=k}),98);
__d("MWSetupDBEncryption",["BrowserLockManager","ExecutionEnvironment","FBLogger","MAWEncryptionIndexedDbV2","MAWKeychain","MWEARKeychainV3","Promise","WAResultOrError","asyncToGeneratorRuntime","getErrorSafe","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a,b){return b()};function a(a){j=a}var k="mw_ear_db";function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield d("MAWEncryptionIndexedDbV2").makeEncryptionDB(a);return yield j("init_setup_keychain",function(){return c("MAWKeychain").init("global_ear",a)})}catch(e){var b=e instanceof Error?e:c("getErrorSafe")(e);c("FBLogger")("messenger_web").catching(b).mustfix("[%s] EAR setup error",String(a));return d("WAResultOrError").DEPRECATED_makeError("keychain-setup-failure",b)}});return m.apply(this,arguments)}function n(a){if(d("MAWEncryptionIndexedDbV2").getEncryptionDB()!=null&&d("MWEARKeychainV3").isKeychainInitialised("global_ear"))return(i||(i=b("Promise"))).resolve(d("WAResultOrError").makeResult(d("MWEARKeychainV3").getLatestVersion("global_ear")));if(c("BrowserLockManager")!=null)return new(i||(i=b("Promise")))(function(d,e){c("promiseDone")(c("BrowserLockManager").request(k,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var b=(yield l(a));d(b)}catch(a){e(a)}})),function(a){},function(a){e(a)})});else return l(a)}function e(a,c){c===void 0&&(c=function(a){return!0});var d=null;return function(e){d==null&&(d=a(e).then(function(a){d=c(a)?(i||(i=b("Promise"))).resolve(a):null;return a})["catch"](function(a){d=null;throw a}));return d}}f=e(function(a){return n(a)},function(a){return(a==null?void 0:a.success)===!0});e=c("justknobx")._("2804")||(h||(h=c("ExecutionEnvironment"))).isInWorker?f:n;g.setPerformanceMeasurementTool=a;g.init=e}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2});c=b("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3});e=b("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2});f={};b={};var h={},i={},j={};f.internalSpec={placeholder:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,j],event:[2,d.TYPES.MESSAGE,b],__oneofs__:{content:["placeholder","event"]}};b.internalSpec={deviceChange:[1,d.TYPES.MESSAGE,i],icdcAlert:[2,d.TYPES.MESSAGE,h],__oneofs__:{event:["deviceChange","icdcAlert"]}};h.internalSpec={type:[1,d.TYPES.ENUM,a]};i.internalSpec={type:[1,d.TYPES.ENUM,c],deviceName:[2,d.TYPES.STRING],devicePlatform:[3,d.TYPES.STRING],deviceModel:[4,d.TYPES.STRING]};j.internalSpec={type:[1,d.TYPES.ENUM,e]};g.TransportEvent$Event$IcdcAlert$Type=a;g.TransportEvent$Event$DeviceChange$Type=c;g.TransportEvent$Placeholder$Type=e;g.TransportEventSpec=f;g.TransportEvent$EventSpec=b;g.TransportEvent$Event$IcdcAlertSpec=h;g.TransportEvent$Event$DeviceChangeSpec=i;g.TransportEvent$PlaceholderSpec=j}),98);
__d("WADbContact",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;f.NON_CONTACT=a;f.ONE_WAY_CONTACT=b;f.REVERSED_ONE_WAY_CONTACT=c;f.TWO_WAY_CONTACT=d}),66);
__d("WAMapWithDefault",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,b!=null?this.$2=new Map(b):this.$2=new Map()}var b=a.prototype;b.size=function(){return this.$2.size};b.clear=function(){this.$2.clear()};b["delete"]=function(a){return this.$2["delete"](a)};b.get=function(a){var b=this.$2.get(a);if(b!=null)return b;else{b=this.$1(a);this.$2.set(a,b);return b}};b.keys=function(){return this.$2.keys()};b.entries=function(){return this.$2.entries()};b.update=function(b,c){c=new Map(this.$2).set(b,c(this.get(b)));return new a(this.$1,c)};b.toMap=function(){return new Map(this.$2)};return a}();f.MapWithDefault=a}),66);/*FB_PKG_DELIM*/
__d("LSDatascriptEvaluatorDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorDeferred");function a(){return h.load()}g["default"]=a}),98);
__d("MAWCatQuery.graphql",["cr:11203"],(function(a,b,c,d,e,f,g){"use strict";f.exports=b("cr:11203")}),34);
__d("MAWCatQuery",["MAWCatQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("MAWCatQuery.graphql");c=a;g["default"]=c}),98);
__d("MAWCatQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="23999698219677129"}),null);
__d("MAWCatQuery.instagram.graphql",["MAWCatQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"SecureMessageOverWACATGraphResult",kind:"LinkedField",name:"secure_message_over_wa_cat_query",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_serialized_cat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_seconds",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWCatQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MAWCatQuery",selections:a},params:{id:b("MAWCatQuery_instagramRelayOperation"),metadata:{},name:"MAWCatQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MAWCryptoAuthToken",["FBLogger","MAWCatQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a==null||a.secure_message_over_wa_cat_query==null||a.secure_message_over_wa_cat_query.encrypted_serialized_cat==null||a.secure_message_over_wa_cat_query.expiration_time_in_seconds==null?{error:"Crypto Auth Token was null or incomplete"}:{success:{encrypted_serialized_cat:a.secure_message_over_wa_cat_query.encrypted_serialized_cat,expiration_time_in_seconds:a.secure_message_over_wa_cat_query.expiration_time_in_seconds}}}function a(a){return d("relay-runtime").fetchQuery(a,c("MAWCatQuery"),{}).toPromise().then(h).then(function(a){if(a.error!==null&&a.error!==void 0)throw c("FBLogger")("maw_device_reg").mustfixThrow("[MAWCryptoAuthToken] Error while fetching CAT from GraphQL: %s",a.error);return a.success})}g.processCatResponse=h;g.fetchFreshCAT=a}),98);
__d("MAWGetIsMediaDownloadStatusEnabled",["gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function h(){return c("gkx")("7858")}function a(){return c("justknobx")._("3564")&&h()}g.getIsMediaDownloadStatusForXMAsEnabled=h;g.getIsMediaDownloadStatusForXMAsEnabledWithChunkVerification=a}),98);
__d("MAWUpdateClientRestoreStatusOperationType",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;f.upsertClientRestoreStatus=a;f.markCompleteClientRestoreStatus=b}),66);
__d("MAWWritePinMessageAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a===d("MAWCurrentUser").getID()?d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_PINNED_MESSAGE:d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_PINNED_MESSAGE;a=b===d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_PINNED_MESSAGE?[a]:[];return{adminMsgContent:a,adminType:b,version:1}}g.getAdminMsgContent=a}),98);
__d("MAWWriteThreadHotlikeCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=a===d("MAWCurrentUser").getID();c=c?d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE;var e=[];c===d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE?e.push(b):e.push(a,b);return{adminMsgContent:e,adminType:c,version:1}}g.getAdminMsgContent=a}),98);
__d("MAWWriteThreadNicknameCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e=d("MAWCurrentUser").getID(),f=a===e&&a!==b,g=b===e&&b!==a,h=b===a&&e===b;e=b===a&&e!==b;var i;h&&c.length>0?i=d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_SET_OWN_NICKNAME:h&&c.length===0?i=d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:e&&c.length>0?i=d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_SET_OWN_NICKNAME:e&&c.length===0?i=d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:f&&c.length>0?i=d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:f&&c.length===0?i=d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:g&&c.length>0?i=d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:g&&c.length===0?i=d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:c.length>0?i=d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:i=d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME;h=[];switch(i){case d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:h.push(b,c);break;case d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_SET_OWN_NICKNAME:h.push(a,c);break;case d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_SET_OWN_NICKNAME:h.push(c);break;case d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:h.push(b);break;case d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:h.push(a);break;case d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:h.push(a,b,c);break;default:break}return{adminMsgContent:h,adminType:i,version:1}}g.getAdminMsgContent=a}),98);
__d("MessengerThreadThemeType",[],(function(a,b,c,d,e,f){a=Object.freeze({COLOR_GRADIENT:1,THEME:2,THIRD_PARTY:3,INTERACTIVE:4,IGD_CHANNEL_CUSTOMIZED_THEME:5,AI_AGENT:6,AI_GENERATED_THEME:7,AI_STUDIO_GENERATED_THEME:8});f["default"]=a}),66);
__d("MAWWriteThreadThemeCustomizationAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser","MessengerThreadThemeType","WALogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to convert theme type to integer: ",""]);h=function(){return a};return a}function a(a,b,c,e){var f=a===d("MAWCurrentUser").getID();f=i(f,e);e=[];f===d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_THEME||f===d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME?e.push(c):e.push(a,c);b!=null&&e.push(b);return{adminMsgContent:e,adminType:f,version:1}}function i(a,b){if(c("gkx")("11033")&&b!=null)try{b=parseInt(b,10)===c("MessengerThreadThemeType").AI_GENERATED_THEME;if(b)return a?d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME}catch(a){d("WALogger").ERROR(h(),a)}return a?d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_CUSTOMIZE_THEME:d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_CUSTOMIZE_THEME}g.getAdminMsgContent=a}),98);
__d("MAWWriteUKOSAAdminMsgContent",["MAWAdminMsgType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("MAWAdminMsgType").ADMIN_MSG_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE;a=[a];return{adminMsgContent:a,adminType:b,version:1}}g.getAdminMsgContent=a}),98);
__d("MAWWriteUnpinMessageAdminMsgContent",["MAWAdminMsgType","MAWCurrentUser"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a===d("MAWCurrentUser").getID()?d("MAWAdminMsgType").ADMIN_MSG_TYPE.CURRENT_USER_UNPINNED_MESSAGE:d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_UNPINNED_MESSAGE;a=b===d("MAWAdminMsgType").ADMIN_MSG_TYPE.PARTICIPANT_UNPINNED_MESSAGE?[a]:[];return{adminMsgContent:a,adminType:b,version:1}}g.getAdminMsgContent=a}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){c=(a=b("$InternalEnum"))({CHANGED:1,REMOVED:2});e=a({PINNED:1,UNPINNED:2});f=a({ALL_MEMBERS:1,ADMINS_ONLY:2});b=a({ADDED:1,REMOVED:2});a=a({ADDED:1,REMOVED:2});var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={};h.internalSpec={chatThemeChanged:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,t],nicknameChanged:[2,d.TYPES.MESSAGE,s],groupParticipantChanged:[3,d.TYPES.MESSAGE,r],groupAdminChanged:[4,d.TYPES.MESSAGE,q],groupNameChanged:[5,d.TYPES.MESSAGE,p],groupMembershipAddModeChanged:[6,d.TYPES.MESSAGE,o],messagePinned:[7,d.TYPES.MESSAGE,n],groupImageChanged:[8,d.TYPES.MESSAGE,m],quickReactionChanged:[9,d.TYPES.MESSAGE,l],linkCta:[10,d.TYPES.MESSAGE,j],iconChanged:[11,d.TYPES.MESSAGE,i],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged"]}};i.internalSpec={threadIcon:[1,d.TYPES.STRING]};j.internalSpec={ukOsaAdminText:[1,d.TYPES.MESSAGE,k],__oneofs__:{content:["ukOsaAdminText"]}};k.internalSpec={initiatorUserId:[2,d.TYPES.STRING]};l.internalSpec={emojiName:[1,d.TYPES.STRING]};m.internalSpec={action:[1,d.TYPES.ENUM,c]};n.internalSpec={action:[1,d.TYPES.ENUM,e]};o.internalSpec={mode:[1,d.TYPES.ENUM,f]};p.internalSpec={groupName:[1,d.TYPES.STRING]};q.internalSpec={targetUserId:[1,d.FLAGS.REPEATED|d.TYPES.STRING],action:[2,d.TYPES.ENUM,b]};r.internalSpec={targetUserId:[1,d.FLAGS.REPEATED|d.TYPES.STRING],action:[2,d.TYPES.ENUM,a]};s.internalSpec={targetUserId:[1,d.TYPES.STRING],nickname:[2,d.TYPES.STRING]};t.internalSpec={themeName:[1,d.TYPES.STRING],themeEmoji:[2,d.TYPES.STRING],themeType:[3,d.TYPES.INT32]};g.MiTransportAdminMessage$GroupImageChanged$Action=c;g.MiTransportAdminMessage$MessagePinned$Action=e;g.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=f;g.MiTransportAdminMessage$GroupAdminChanged$Action=b;g.MiTransportAdminMessage$GroupParticipantChanged$Action=a;g.MiTransportAdminMessageSpec=h;g.MiTransportAdminMessage$IconChangedSpec=i;g.MiTransportAdminMessage$LinkCtaSpec=j;g.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=k;g.MiTransportAdminMessage$QuickReactionChangedSpec=l;g.MiTransportAdminMessage$GroupImageChangedSpec=m;g.MiTransportAdminMessage$MessagePinnedSpec=n;g.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=o;g.MiTransportAdminMessage$GroupNameChangedSpec=p;g.MiTransportAdminMessage$GroupAdminChangedSpec=q;g.MiTransportAdminMessage$GroupParticipantChangedSpec=r;g.MiTransportAdminMessage$NicknameChangedSpec=s;g.MiTransportAdminMessage$ChatThemeChangedSpec=t}),98);
__d("MpsAdminMsgToBridge",["FBLogger","MAWAckLevel","MAWWritePinMessageAdminMsgContent","MAWWriteThreadHotlikeCustomizationAdminMsgContent","MAWWriteThreadNicknameCustomizationAdminMsgContent","MAWWriteThreadThemeCustomizationAdminMsgContent","MAWWriteUKOSAAdminMsgContent","MAWWriteUnpinMessageAdminMsgContent","WAArmadilloMiTransportAdminMessage.pb","WAMsgType","getErrorSafe","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(b.quickReactionChanged!=null){var e=b.quickReactionChanged.emojiName;return d("MAWWriteThreadHotlikeCustomizationAdminMsgContent").getAdminMsgContent(a,c("nullthrows")(e))}else if(b.iconChanged!=null){e=b.iconChanged.threadIcon;return d("MAWWriteThreadHotlikeCustomizationAdminMsgContent").getAdminMsgContent(a,c("nullthrows")(e))}else if(b.chatThemeChanged){e=b.chatThemeChanged;var f=e.themeEmoji;e=e.themeName;return d("MAWWriteThreadThemeCustomizationAdminMsgContent").getAdminMsgContent(a,f,c("nullthrows")(e),null)}else if(b.messagePinned){f=b.messagePinned.action;e=f===d("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessage$MessagePinned$Action.PINNED?d("MAWWritePinMessageAdminMsgContent").getAdminMsgContent:d("MAWWriteUnpinMessageAdminMsgContent").getAdminMsgContent;return e(a)}else if(b.nicknameChanged){f=b.nicknameChanged;e=f.nickname;f=f.targetUserId;return d("MAWWriteThreadNicknameCustomizationAdminMsgContent").getAdminMsgContent(a,c("nullthrows")(f),c("nullthrows")(e))}else if((a=b.linkCta)==null?void 0:a.ukOsaAdminText)return d("MAWWriteUKOSAAdminMsgContent").getAdminMsgContent(c("nullthrows")(b.linkCta.ukOsaAdminText.initiatorUserId))}function a(a){var b;b=(b=a.deserialize().adminMessage())==null?void 0:b.proto;if(b==null)return;var e;try{e=h(a.message.senderId,b)}catch(a){c("FBLogger")("mps").catching(c("getErrorSafe")(a)).warn("Failed to get admin message content")}if(e==null)return;b={ack:d("MAWAckLevel").ACK.received,adminContent:e.adminMsgContent,adminType:e.adminType,adminVersion:e.version,chatJid:a.getChatJid(),externalId:a.getExternalId(),forwardingScore:0,isAdminMessage:!0,isAuthorMe:!1,isForwarded:!1,msgId:a.getMsgId(),sender:a.message.senderId,sortOrderMs:a.message.timestampMs,ts:a.getUnixTs(),type_:d("WAMsgType").MSG_TYPE.ADMIN};return{kind:"bridgeMsg",value:b}}g.adminMsgToBridgeMsg=a}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={pollUpdateMessage:[1,d("WAProtoConst").TYPES.MESSAGE,b],__oneofs__:{content:["pollUpdateMessage"]}};b.internalSpec={pollCreationMessageId:[1,d("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,d("WAProtoConst").TYPES.STRING]};g.LocallyTransformedMessageSpec=a;g.LocallyTransformedMessage$PollUpdateAdminMessageSpec=b}),98);
__d("lastx",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=null;if(Array.isArray(a))a.length&&(b={value:a[a.length-1]});else for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b=b||{};b.value=e}if(b)return b.value;h(0,1145)}g["default"]=a}),98);
__d("MultiKeyMap",["invariant","lastx"],(function(a,b,c,d,e,f,g,h){"use strict";var i=typeof WeakMap==="function";a=function(){function a(){this.$1=this.$2(),this.$3=null}var b=a.prototype;b.set=function(a,b){this.$4(a);var c=this.$1;for(var d=0;d<a.length-1;d++){var e=a[d],f=this.$5(c,e).get(e);f==null&&(f=this.$2(),this.$5(c,e).set(e,f));f.type==="map"||h(0,1732);c=f}e=a[a.length-1];this.$5(c,e).set(e,{type:"value",value:b})};b.get=function(a){this.$4(a);var b=this.$6(a);b=b&&b.get(c("lastx")(a));return b==null||b.type!=="value"?void 0:b.value};b["delete"]=function(a){this.$4(a);var b=this.$6(a);return b?b["delete"](c("lastx")(a)):!1};b.$5=function(a,b){return j(b)?a.cache:a.weakCache};b.$6=function(a){var b=this.$1;for(var d=0;d<a.length-1;d++){var e,f=a[d];if(((e=b)==null?void 0:e.type)==="map")b=this.$5(b,f).get(f);else return void 0}e=c("lastx")(a);f=b&&this.$5(b,e);return f};b.$2=function(){return{type:"map",cache:new Map(),weakCache:i?new WeakMap():new Map()}};b.$4=function(a){this.$3==null&&(this.$3=a.length);if(this.$3!==a.length)throw new Error("MultiKeyMap called with different number of keys");if(a.length<1)throw new Error("MultiKeyMap called with empty array of keys")};return a}();function j(a){var b=typeof a;return b==="number"||b==="string"||b==="boolean"||a==null}g["default"]=a}),98);
__d("memoizeWithArgsWeak",["MultiKeyMap"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0;var d=new(c("MultiKeyMap"))();return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];var f=d.get(c);if(f!==void 0)return f;var g=a.apply(void 0,c);d.set(c,g);return g}}g["default"]=a}),98);
__d("MpsDeserializers",["WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","err","memoize","memoizeWithArgsWeak","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){var b;this.image=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(b=a.image)==null?void 0:b.payload);this.caption=a.caption},i=function(a){var b;this.audio=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").AudioTransportSpec,(b=a.audio)==null?void 0:b.payload);this.ptt=a.ptt},j=function(a){var b;this.video=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,(b=a.video)==null?void 0:b.payload);this.caption=a.caption},k=function(a){var b;this.document=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").DocumentTransportSpec,(b=a.document)==null?void 0:b.payload);this.fileName=a.fileName},l=function(a){this.sticker=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,(a=a.sticker)==null?void 0:a.payload)},m=function(a){this.kind="armadillo",this.bytes=a,this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloApplication.pb").ArmadilloSpec,a),this.payload=this.proto.payload,this.metadata=this.proto.metadata},n=function(a){var b=this,e;this.kind="consumerApplication";this.imageMessage=(e=c("memoize"))(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.imageMessage;if(a==null)return;return new h(a)});this.audioMessage=e(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.audioMessage;if(a==null)return;return new i(a)});this.videoMessage=e(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.videoMessage;if(a==null)return;return new j(a)});this.documentMessage=e(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.documentMessage;if(a==null)return;return new k(a)});this.stickerMessage=e(function(){var a;a=(a=b.payload)==null?void 0:(a=a.content)==null?void 0:a.stickerMessage;if(a==null)return;return new l(a)});this.bytes=a;this.proto=d("decodeProtobuf").decodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplicationSpec,a);this.payload=this.proto.payload;this.metadata=this.proto.metadata},o=function(){function a(a){var b=this;this.kind="messageApplication";this.subProtocol=c("memoize")(function(){var a=d("WAParseMessageApplication").parseMessageApplication(b.proto);if(a.payload!=null)switch(a.subprotocolType){case"consumerMessage":return new n(c("nullthrows")(a.payload));case"armadillo":return new m(c("nullthrows")(a.payload));case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:a.subprotocolType}});this.bytes=a;this.proto=d("decodeProtobuf").decodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,a)}var b=a.prototype;b.consumerMessage=function(){var a=this.subProtocol();return(a==null?void 0:a.kind)!=="consumerApplication"?null:a};b.armadillo=function(){var a=this.subProtocol();return(a==null?void 0:a.kind)!=="armadillo"?null:a};return a}(),p=function(a){this.kind="transportEvent",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloTransportEvent.pb").TransportEventSpec,a)},q=function(a){this.kind="locallyTransformedMessage",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,a)},r=function(a){this.kind="adminMessage",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,a)},s="SKIP_CACHE",t=function(){function a(a,b){var e=this;this.payload=c("memoize")(function(){if(e.proto.encryptedTransportEvent!=null)return new p(c("nullthrows")(e.proto.encryptedTransportEvent.payload));else if(e.proto.encryptedTransportLocallyTransformedMessage!=null)return new q(c("nullthrows")(e.proto.encryptedTransportLocallyTransformedMessage.payload));else if(e.proto.encryptedTransportMessage!=null)return new o(c("nullthrows")(e.proto.encryptedTransportMessage));else if(e.proto.miTransportAdminMessage!=null)return new r(c("nullthrows")(e.proto.miTransportAdminMessage.payload));throw c("err")("BackupMessage proto has no payload")});this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,a)}var b=a.prototype;b.encryptedTransportMessage=function(){var a=this.payload();if(a.kind!=="messageApplication")return;return a};b.encryptedTransportEvent=function(){var a=this.payload();if(a.kind!=="transportEvent")return;return a};b.locallyTransformedMessage=function(){var a=this.payload();if(a.kind!=="locallyTransformedMessage")return;return a};b.adminMessage=function(){var a=this.payload();if(a.kind!=="adminMessage")return;return a};return a}();t.create=c("memoizeWithArgsWeak")(function(a){return new t(a,s)});g.DeserializedMessageApplication=o;g.DeserializedTransportEvent=p;g.DeserializedLocallyTransformedMessage=q;g.DeserializedAdminMessage=r;g.DeserializedBackupMessage=t}),98);
__d("MpsEditToBridge",["LSMessageSendStatus","MAWDbEditMsgHistory","WAJids","WAStanzaUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var e=d("MAWDbEditMsgHistory").convertToEditMsgHistoryId64(d("MAWDbEditMsgHistory").unsafeCoerceToEditMsgHistoryId(Number(a.getExternalId()))),f=a.topLevelMetadata();e={author:a.getAuthor(),editExternalId:d("WAStanzaUtils").toStanzaId(a.getExternalId()),editMsgHistoryId:e,editTs:a.getUnixTs(),msgContent:b,originalMsgExternalId:d("WAStanzaUtils").toStanzaId(f.getExternalId()),originalMsgId:f.getMsgId(),sendStatus:c("LSMessageSendStatus").SENDING_TO_SERVER,threadJid:a.getChatJid()};return{kind:"bridgeEditHistoryMsg",value:e}}function a(a){var b;b=(b=a.deserialize().encryptedTransportMessage())==null?void 0:(b=b.consumerMessage())==null?void 0:(b=b.payload)==null?void 0:(b=b.content)==null?void 0:(b=b.editMessage)==null?void 0:b.message;if(b==null)return;return h(a,{commands:b==null?void 0:b.commands,content:((a=b==null?void 0:b.text)!=null?a:"")+" *",mentionedJids:b==null?void 0:b.mentionedJid.map(d("WAJids").validateUserJid).filter(Boolean)})}function b(a){var b,c=a.message,d=a.supplementals,e=a.topLevel;if(e.kind!=="bridgeMsg")return a;var f=d.map(function(a){return a.kind==="bridgeEditHistoryMsg"?a.value:null}).filter(Boolean).sort(function(a,b){return b.editTs-a.editTs});if(f.length===0)return a;d.push(h(c,{commands:e.value.commands&&[].concat(e.value.commands),content:(a=e.value.content)!=null?a:"",mentionedJids:e.value.mentionedJids&&[].concat(e.value.mentionedJids)}));a=f[0].msgContent;e.value=babelHelpers["extends"]({},e.value,{commands:(b=a.commands)!=null?b:e.value.commands,content:(b=a.content)!=null?b:e.value.content,editCount:f.length,mentionedJids:(b=a.mentionedJids)!=null?b:e.value.mentionedJids});return{message:c,supplementals:d,topLevel:e}}g.editMessageToBridgeMsg=a;g.processEditedMessage=b}),98);
__d("getMediaTypeFromConsumerMessage",["WAMediaTransport.pb","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a==null?void 0:(a=a.payload)==null?void 0:a.content;if((a==null?void 0:a.audioMessage)!=null)return"ptt";if((a==null?void 0:a.videoMessage)!=null){var b,c;b=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,a==null?void 0:(b=a.videoMessage)==null?void 0:(b=b.video)==null?void 0:b.payload);return(b==null?void 0:(c=b.ancillary)==null?void 0:c.gifPlayback)===!0||(b==null?void 0:(c=b.ancillary)==null?void 0:c.gifAttribution)!=null?"gif":"video"}if((a==null?void 0:a.documentMessage)!=null)return"document";if((a==null?void 0:a.stickerMessage)!=null)return"sticker";if((a==null?void 0:a.imageMessage)!=null)return"image";return}g.getMediaTypeFromConsumerMessage=a}),98);
__d("MpsMediaToBridge",["FBLogger","MAWAckLevel","MAWDbMedia","MAWMsgType","WAHashUtils","WALongInt","WATimeUtils","getMediaTypeFromConsumerMessage"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=(a=a.encryptedTransportMessage())==null?void 0:(a=a.consumerMessage())==null?void 0:a.proto;a=d("getMediaTypeFromConsumerMessage").getMediaTypeFromConsumerMessage(a);if(a==null)return;switch(a){case"ptt":return d("MAWMsgType").MSG_TYPE.PTT;case"image":return d("MAWMsgType").MSG_TYPE.IMAGE;case"video":return d("MAWMsgType").MSG_TYPE.VIDEO;case"gif":return d("MAWMsgType").MSG_TYPE.GIF;case"sticker":return d("MAWMsgType").MSG_TYPE.STICKER;case"document":return d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE;case"xma-image":return;case"md-app-state":return;default:return a}}function a(a){var b,c=a.deserialize().encryptedTransportMessage();if(c==null)return;var e=h(a.deserialize());if(e==null)return;b={ack:d("MAWAckLevel").ACK.received,chatJid:a.getChatJid(),externalId:a.getExternalId(),forwardingScore:(b=(b=c.proto.metadata)==null?void 0:b.forwardingScore)!=null?b:0,groupId:(b=c.proto.metadata)==null?void 0:b.groupId,groupIndex:(b=c.proto.metadata)==null?void 0:b.groupIndex,groupSize:(b=c.proto.metadata)==null?void 0:b.groupSize,isAdminMessage:!1,isAuthorMe:a.isAuthorMe(),isForwarded:(c=(b=c.proto.metadata)==null?void 0:b.isForwarded)!=null?c:!1,msgId:a.getMsgId(),sender:a.message.senderId,sortOrderMs:a.message.timestampMs,ts:a.getUnixTs(),type_:e};return{kind:"bridgeMsg",value:b}}function b(a){var b,e,f,g,i;b=(b=a.message.deserialize().encryptedTransportMessage())==null?void 0:b.consumerMessage();if(b==null)return a;e=(e=b.documentMessage())==null?void 0:e.fileName;f=(f=(f=(f=(f=(f=(f=b.audioMessage())==null?void 0:f.audio)!=null?f:(f=b.documentMessage())==null?void 0:f.document)!=null?f:(f=b.imageMessage())==null?void 0:f.image)!=null?f:(f=b.stickerMessage())==null?void 0:f.sticker)!=null?f:(f=b.videoMessage())==null?void 0:f.video)!=null?f:{};var j=f.ancillary;f=f.integral;var k=h(a.message.deserialize());if(k==null||j==null||f==null){k==null&&(j!=null||f!=null)&&c("FBLogger")("mps").mustfix("media type is null but ancillary or integral is not: %s",a.topLevel.kind);return a}var l=a.message.getMsgId();g=f==null?void 0:(g=f.transport)==null?void 0:(g=g.integral)==null?void 0:g.mediaKeyTimestamp;i=f==null?void 0:(i=f.transport)==null?void 0:(i=i.integral)==null?void 0:i.fileSha256;i=i!=null?d("WAHashUtils").toPlaintextHash(i):void 0;k={accessibilitySummaryText:(b=(b=b.imageMessage())==null?void 0:(b=b.caption)==null?void 0:b.text)!=null?b:(b=j.caption)==null?void 0:b.text,defaultFilename:e,duration:((b=j.seconds)!=null?b:0)*1e3,filenames:e!=null?(b={},b[l]=e,b):void 0,filesize:d("WALongInt").numberOrThrowIfTooLarge((e=f==null?void 0:(e=f.transport)==null?void 0:(b=e.ancillary)==null?void 0:b.fileLength)!=null?e:0),hasMedia:!0,hasPreviewMedia:(f==null?void 0:(b=f.transport)==null?void 0:(e=b.ancillary)==null?void 0:e.thumbnail)!=null,mediaId:d("MAWDbMedia").convertNumberToMediaId(0),mediaType:k,messagesSortOrderMs:(b={},b[l]=a.message.topLevel.timestampMs,b),msgIds:[a.message.getMsgId()],offlineAttachmentId:i,plaintextHash:i,previewHeight:f==null?void 0:(e=f.transport)==null?void 0:(k=e.ancillary)==null?void 0:(l=k.thumbnail)==null?void 0:l.thumbnailHeight,previewHeightLarge:j==null?void 0:j.height,previewWidth:f==null?void 0:(b=f.transport)==null?void 0:(i=b.ancillary)==null?void 0:(e=i.thumbnail)==null?void 0:e.thumbnailWidth,previewWidthLarge:j==null?void 0:j.width,sortOrderMs:g!=null?d("WATimeUtils").castLongIntToMillisTime(g):void 0,threadJid:a.message.getChatJid(),transportKey:"WhatsApp",ts:a.message.getUnixTs()};a.supplementals.push({kind:"bridgeMedia",value:k});return a}g.getMediaTypeForMedia=h;g.mediaToBridge=a;g.processAttachment=b}),98);
__d("mwv2MessageIsEmojiOnly",["EmojiRenderer","EmoticonRenderer","ReStoreVaulting"],(function(a,b,c,d,e,f,g){"use strict";var h=/^[ \r\n\s]*$/;function a(a,b){if(a==null)return!1;var c=d("ReStoreVaulting").maybeUnvault(a);a=d("EmojiRenderer").parse(c).map(function(a){return{length:a.length,offset:a.offset}});b=b?d("EmoticonRenderer").parse(c).map(function(a){return{length:a.chars.length,offset:a.offset}}):[];a=a.concat(b);if(a.length===0)return!1;b=a.sort(function(a,b){return a.offset-b.offset|0});var e={contents:0},f={contents:0};a=b.some(function(a){e.contents===a.offset?(e.contents=e.contents+a.length|0,f.contents=e.contents):f.contents=a.offset;var b=c.substring(e.contents,f.contents);e.contents=a.offset+a.length|0;return h.test(b)===!1});b=e.contents!==c.length&&!h.test(c.substring(f.contents));if(a)return!1;else return!b}g["default"]=a}),98);
__d("MpsMessageTextToBridge",["MAWAckLevel","MAWVault","WAJids","WAMsgType","maybeConvertMessageTextMentionsV2ToV1","mwv2MessageIsEmojiOnly"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e,f=a.deserialize().encryptedTransportMessage(),g=f==null?void 0:f.consumerMessage();b=c("maybeConvertMessageTextMentionsV2ToV1")(g==null?void 0:(b=g.payload)==null?void 0:(b=b.content)==null?void 0:b.messageText);if(g==null||b==null||f==null)return;e=(e=b.text)!=null?e:"";var h=c("mwv2MessageIsEmojiOnly")(e,!0);h||(e+="*");e=d("MAWVault").vault(e);e={ack:d("MAWAckLevel").ACK.received,chatJid:a.getChatJid(),commands:b.commands,content:e,externalId:a.getExternalId(),forwardingScore:(e=(h=f.proto.metadata)==null?void 0:h.forwardingScore)!=null?e:0,isAdminMessage:!1,isAuthorMe:a.isAuthorMe(),isForwarded:(e=(h=f.proto.metadata)==null?void 0:h.isForwarded)!=null?e:!1,mentionedJids:b.mentionedJid.map(d("WAJids").validateUserJid).filter(Boolean),msgId:a.getMsgId(),sender:a.message.senderId,sortOrderMs:a.message.timestampMs,specialTextSize:(h=(f=g.metadata)==null?void 0:f.specialTextSize)!=null?h:void 0,ts:a.getUnixTs(),type_:d("WAMsgType").MSG_TYPE.TEXT};return{kind:"bridgeMsg",value:e}}g.messageTextToBridgeMsg=a}),98);
__d("MpsToBridgeMessageId",["MAWDbMsg","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return c("nullthrows")(d("MAWDbMsg").toMsgId(a+"_"+b+"_m"))}g.mpsToBridgeMsgId=a}),98);
__d("MpsMessageToBridgeWrapper",["MAWUserJidWrapper","MpsDeserializers","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=d("WAJids").createJidUtils({platform:"msgr"});a=function(){function a(a,b){this.message=a,this.topLevel=b}a.fromTopLevel=function(b){return new a(b,b)};a.fromSupplemental=function(b,e){var f=d("MpsDeserializers").DeserializedBackupMessage.create(b.payload);f={messageId:b.messageId,payload:b.payload,senderId:c("nullthrows")((f=f.proto.metadata)==null?void 0:f.senderId),threadId:e.threadId,timestampMs:b.timestampMs};return new a(f,e)};var b=a.prototype;b.getChatJid=function(){return d("WAJids").unsafeCoerceToChatJid(this.message.threadId)};b.getExternalId=function(){return this.message.messageId};b.getMsgId=function(){return d("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)};b.getSenderJid=function(){return h.toUserJid(this.message.senderId)};b.topLevelMetadata=function(){return a.fromTopLevel(this.topLevel)};b.isAuthorMe=function(){return d("WAJids").userIdFromJid(d("MAWUserJidWrapper").getMyUserJid())===this.message.senderId};b.getAuthor=function(){return this.isAuthorMe()?d("WAJids").AUTHOR_ME:this.getSenderJid()};b.getUnixTs=function(){return d("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)};b.deserialize=function(){return d("MpsDeserializers").DeserializedBackupMessage.create(this.message.payload)};return a}();g.MpsMessageToBridgeWrapper=a}),98);
__d("MpsReactionToBridge",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;b=(b=a.deserialize().encryptedTransportMessage())==null?void 0:(b=b.consumerMessage())==null?void 0:(b=b.payload)==null?void 0:(b=b.content)==null?void 0:b.reactionMessage;if(b==null)return;b={reaction:{actorId:a.message.senderId,chatJid:a.getChatJid(),messageId:a.topLevelMetadata().getMsgId(),reaction:(b=b.text)!=null?b:"",ts:a.topLevelMetadata().getUnixTs()},type:"upsert"};return{kind:"bridgeReactionAction",value:b}}f.reactionMessageToBridgeMsg=a}),66);
__d("MpsReplyToBridge",["MAWUserJidWrapper","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.message,c=a.supplementals,e=a.topLevel,f=b.deserialize().encryptedTransportMessage();if(e.kind!=="bridgeMsg"||f==null)return a;f=(f=f.proto.metadata)==null?void 0:f.quotedMessage;if(f==null)return a;a=f.participant!=null?d("WAJids").validateUserJid(f==null?void 0:f.participant):null;a=a!=null?d("WAJids").userIdFromJid(a):void 0;var g=d("WAJids").userIdFromJid(d("MAWUserJidWrapper").getMyUserJid());e.value=babelHelpers["extends"]({},e.value,{replySenderIsMe:a===g,replySourceId:f==null?void 0:f.stanzaId,replyToUserId:a});return{message:b,supplementals:c,topLevel:e}}g.processReplyMessage=a}),98);
__d("MpsRevokeMessageToBridgeMsg",["MAWAckLevel","WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,c=a.deserialize().encryptedTransportMessage();b=c==null?void 0:(b=c.consumerMessage())==null?void 0:(b=b.payload)==null?void 0:(b=b.applicationData)==null?void 0:b.revoke;if(c==null||b==null)return;return{kind:"bridgeMsg",value:{ack:d("MAWAckLevel").ACK.received,chatJid:a.getChatJid(),externalId:a.getExternalId(),forwardingScore:(b=(b=c.proto.metadata)==null?void 0:b.forwardingScore)!=null?b:0,isAdminMessage:!1,isAuthorMe:a.isAuthorMe(),isForwarded:(c=(b=c.proto.metadata)==null?void 0:b.isForwarded)!=null?c:!1,msgId:a.getMsgId(),sender:a.message.senderId,sortOrderMs:a.message.timestampMs,ts:a.getUnixTs(),type_:d("WAMsgType").MSG_TYPE.REVOKED}}}g.revokeMessageToBridgeMsg=a}),98);
__d("MpsMessageToBridge",["MpsAdminMsgToBridge","MpsEditToBridge","MpsMediaToBridge","MpsMessageTextToBridge","MpsMessageToBridgeWrapper","MpsReactionToBridge","MpsReplyToBridge","MpsRevokeMessageToBridgeMsg"],(function(a,b,c,d,e,f,g){"use strict";var h=[d("MpsMessageTextToBridge").messageTextToBridgeMsg,d("MpsEditToBridge").editMessageToBridgeMsg,d("MpsReactionToBridge").reactionMessageToBridgeMsg,d("MpsMediaToBridge").mediaToBridge,d("MpsAdminMsgToBridge").adminMsgToBridgeMsg,d("MpsRevokeMessageToBridgeMsg").revokeMessageToBridgeMsg],i=[d("MpsEditToBridge").processEditedMessage,d("MpsReplyToBridge").processReplyMessage,d("MpsMediaToBridge").processAttachment];function j(a){for(var b=0;b<h.length;b++){var c=h[b];c=c(a);if(c!=null)return c}}function a(a){var b=d("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromTopLevel(a.toplevelProtobuf),c=j(b);if(c==null)return;var e=a.supplementalProtobufs.values().toArray().map(function(b){return j(d("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromSupplemental(b,a.toplevelProtobuf))}).filter(Boolean);b=i.reduce(function(a,b){return b(a)},{message:b,supplementals:e,topLevel:c});return{supplementals:b.supplementals,topLevel:b.topLevel}}g.mpsFullMessagetoBridge=a}),98);
__d("WAAbPropsTypes",[],(function(a,b,c,d,e,f){"use strict";a={noyb_opt_out_flag:[3488,"bool",!1,!1],service_improvement_opt_out_flag:[3664,"bool",!1,!1],msgrw_test_bool:[704,"bool",!1,!1],msgrw_test_int:[705,"int",0,0],msgrw_test_string:[706,"string","test_string","test_string"],msgrw_test_float:[707,"float",1,1],msgrw_icdc_alert_trigger_failure_count:[1233,"int",8,8],msgrw_icdc_cooldown_interval_in_minutes:[1234,"int",35,35],msgrw_icdc_interval_in_minutes:[1236,"int",1500,1500],msgrw_logger_entries:[1298,"int",0,0],msgrw_max_keys:[2453,"int",812,812],msgrw_job_manager_conf:[2667,"string",'{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}','{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}'],client_group_participants_limit:[618,"int",257,257],client_group_name_length_limit:[1200,"int",25,25]};f.ABPropConfigs=a}),66);
__d("WAAbPropsToUI",["WAAbPropsTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=["client_group_participants_limit","client_group_name_length_limit"];function a(a){var b=a!=null?a:{},c={};h.forEach(function(a){b[a]!=null?c[a]=b[a]:c[a]=d("WAAbPropsTypes").ABPropConfigs[a][2]});return c}g.prepareAbPropsForUI=a}),98);
__d("WAOfflineUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["INIT","OFFLINE_RESUME","ONLINE"]);c=b("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});f.ServerRPCMode=a;f.WAClientInfraOfflineProgress=c}),66);
__d("isMAWUniversalSearchWithEBEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("4741")}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("EBAPIMessagePointQueryWithPersistence",["EBMessagePointQueryWithPersistence"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("EBMessagePointQueryWithPersistence").messagePointQueryWithPersistence}),98);
__d("LSDedicatedMqttChannel",["FBMqttChannel","cr:1232"],(function(a,b,c,d,e,f,g){"use strict";function a(){b("cr:1232")!=null&&b("cr:1232").shutdownAndClear()}function d(a,d,e,f,g){return function(h){if(b("cr:1232")!=null)return b("cr:1232").getInstance(h,a,d,e,f,g);else return c("FBMqttChannel")}}g.shutdownAndClear=a;g.getInstance=d}),98);
__d("MWEncryptedBackupsListenForChangesToBackupStateInitPath",["EBAPIWorkerCheck","I64","LSAuthorityLevel","LSDataTraceType","LSEncryptedBackupsBackupTenancy","LSFactory","LSFetchBackupIdsStoredProcedure","LSIntEnum","LSIssueMessageRangeQueryTaskStoredProcedure","LSMEBTaskCreationSource","MAWEBRestoreTrackingUtils","MAWMainTraceUtils","MAWOfflineQueueStatus","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsProcessBackupIdsDEPRECATED","Promise","QPLEvent","QPLUserFlow","ReQL","WAJids","WATagsLogger","WebSession","gkx","isInstamadilloEB","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[EB Prefetch] Issuing message range query for thread "," with params ",""]);l=function(){return a};return a}var m=c("gkx")("23961"),n=c("qex")._("121")===!0;function a(a){function b(){var b=d("ReQL").fromTableAscending(a.tables.encrypted_backups),e=b.subscribe(function(a,b){if(b.operation==="delete"||!(i||(i=d("I64"))).equal(b.value.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return;e();c("QPLUserFlow").getActiveFlowIDs().includes((k||(k=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent))&&d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent})});b=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").getActiveFlowIDs().includes((k||(k=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent))||c("QPLUserFlow").start(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent,{annotations:{string:{ebSessionIdentifier:b,fetchBackupIdsVersion:"msys",sessionTabId:d("WebSession").getId()}}});c("promiseDone")(a.runInTransaction(function(a){return c("LSFetchBackupIdsStoredProcedure")(c("LSFactory")(a),{backupTenancy:(j||(j=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION),isUiBlocking:!1})},"readwrite",void 0,void 0,f.id+":93"),function(){return p(a)})}(n||c("isInstamadilloEB")())&&b();var e=d("ReQL").fromTableAscending(a.tables.encrypted_backups_status_trigger);return e.subscribe(b)}function o(a){return a.runInTransaction(function(a){var e=d("MAWOfflineQueueStatus").getAllThreadsWithOfflineQueueIncomplete();return(h||(h=b("Promise"))).all(e.map(function(b){var e=d("WAJids").threadIdForChatJid(b),f=d("MAWMainTraceUtils").createTraceId();c("promiseDone")(d("MAWMainTraceUtils").startTraceWithTxn(a,(i||(i=d("I64"))).of_float(Date.now()),f,(j||(j=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_RESTORE)));e={isPointQuery:!1,newerNumMessages:i.zero,numMessages:i.of_int32(20),source:j.ofNumber(c("LSMEBTaskCreationSource").UNKNOWN),threadId:e,traceId:f};d("WATagsLogger").TAGS(["labyrinth_web","eb_prefetch",f]).LOG(l(),b,JSON.stringify(e));d("MAWEBRestoreTrackingUtils").markEBRestoreFrontloaded(c("LSMEBTaskCreationSource").UNKNOWN,f,!1);return c("LSIssueMessageRangeQueryTaskStoredProcedure")(c("LSFactory")(a),e)}))},"readonly",void 0,void 0,f.id+":122")}function p(a){var b=d("MAWOfflineQueueStatus").isOfflineQueueComplete();m&&!b&&c("promiseDone")(d("MWEncryptedBackupsProcessBackupIdsDEPRECATED").processBackupIdsStoredProcedure(a),function(b){if(d("EBAPIWorkerCheck").runningInWorker())return;b===3&&c("promiseDone")(o(a))})}e={listenForChangesToBackupState:a,preloadEBData:p};g["default"]=e}),98);
__d("QPLMemoryUtils",["MemoryUtils","QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("MemoryUtils").getCurrentMemory();b=b.usedJSHeapSize;c("QPLUserFlow").addAnnotations(a,{"int":{usedJSHeapSizeStart:b}})}function b(a){var b=d("MemoryUtils").getCurrentMemory();b=b.usedJSHeapSize;c("QPLUserFlow").addAnnotations(a,{"int":{usedJSHeapSizeEnd:b}})}g.logMemoryForQPLStart=a;g.logMemoryForQPLEnd=b}),98);
__d("createReStoreEBSMTablesPersistence",["CurrentMessengerUser","EBMainThreadEBDBApiDeferred","EBSMHydrationUtils","EBSMProperties","ExecutionEnvironment","FBLogger","MAWLSDBEncryption","MAWLoggerDeferred","MAWUnrecoverableDbErrors","MWEBODSCategory","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBUseLocalStorage","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsLocalStorageEntryEnum","ODS","Promise","QPLMemoryUtils","QPLUserFlow","Random","ReStorePersistence","ReStoreTabNotifier","WAExceededStorageQuota","WebSession","asyncToGeneratorRuntime","gkx","promiseFromRequest","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] An error occured in EBSM hydration when loading EB data: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] DB corruption detected - deleting EBSM db"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][EB SM] EB SM tableName is "," is missing in ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] An error occured in flush. ",". Requested stores: ",""]);n=function(){return a};return a}e=d("CurrentMessengerUser").getIDorEIMU();var o=c("ReStoreTabNotifier")==null?void 0:c("ReStoreTabNotifier")("mwChat-"+e),p=c("gkx")("23665"),q=null,r=!1,s=!1;function t(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function a(a,e){a===void 0&&(a=!1);var f=(j||(j=b("Promise"))).resolve(),g=new Map();function u(a){return t(g,a,function(){return new Map()})}var v=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").start(c("qpl")._(521481876,"1407"),{annotations:{string:{ebSessionIdentifier:v,sessionTabId:d("WebSession").getId()}}});(i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,c("MWEBODSEntityKey.enum").START);d("QPLMemoryUtils").logMemoryForQPLStart(c("qpl")._(521481876,"1407"));function w(){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{if(c("gkx")("12405"))yield d("EBMainThreadEBDBApiDeferred").rehydrateEBSMFromEBDB(u);else{var a=(yield e);if(a==null)return;a=(yield d("EBSMHydrationUtils").loadEBdataToEphemeralRestore(a));a.forEach(function(a,b){var c=u(b);a.forEach(function(a,b){c.set(b.key,b.value)})})}d("QPLMemoryUtils").logMemoryForQPLEnd(c("qpl")._(521481876,"1407"));c("QPLUserFlow").endSuccess(c("qpl")._(521481876,"1407"));(i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,c("MWEBODSEntityKey.enum").SUCCESS)}catch(a){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED"),void d("MAWLoggerDeferred").ERROR(k(),a),c("QPLUserFlow").endFailure(c("qpl")._(521481876,"1407"),"Hydration failed."),(i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,c("MWEBODSEntityKey.enum").FAIL)}});return x.apply(this,arguments)}q=w();o==null?void 0:o.onEventReceive("flushChangesV2",function(a){var b=a.changeSet,c=a.sentinelDeleted;b.forEach(function(a,b){var e=u(b);a.forEach(function(a,b){d("ReStorePersistence").isDeletedValue(a,c)?e["delete"](b):e.set(b,a)})})});return{flush:function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){if(f.size===0)return;f.size>0&&f.forEach(function(a,b){a.size===0&&f["delete"](b)});if(f.size===0)return;var g=new Map();f.forEach(function(a,b){g.set(b,{toAdd:[],toDelete:[]});var c=u(b);a.forEach(function(a,e){if(d("ReStorePersistence").isDeletedValue(a,d("ReStorePersistence").sentinelDeleted)){var f;(f=g.get(b))==null?void 0:f.toDelete.push(c.get(e));c["delete"](e)}else{(f=g.get(b))==null?void 0:f.toAdd.push(a);c.set(e,a)}})});o==null?void 0:o.postMessage("flushChangesV2",{changeSet:f,fromVersion:"",sentinelDeleted:d("ReStorePersistence").sentinelDeleted,version:""});if(a)return;var h=d("Random").uint32(),i=Array.from(f.keys());c("QPLUserFlow").start(c("qpl")._(521485383,"2200"),{annotations:{bool:{ebsmv2:!0},string_array:{tables:i}},instanceKey:h});yield q;yield (j||(j=b("Promise"))).all([c("gkx")("12229")?d("EBMainThreadEBDBApiDeferred").flushEBSMtoEBDB(g)["catch"](function(){}):(j||(j=b("Promise"))).resolve(),b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield e);if(a==null)return;var g=a.transaction(a.objectStoreNames,"readwrite",{durability:"relaxed"});d("WAExceededStorageQuota").listenToQuotaExceededError(g);var i=new window.Promise(function(a,e){g.oncomplete=function(b){c("QPLUserFlow").endSuccess(c("qpl")._(521485383,"2200"),{instanceKey:h}),a(b.target.result)},g.onerror=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,g=Array.from(f).map(function(a){a=a[0];return a}).join(", ");yield d("MAWLoggerDeferred").ERROR(n(),a==null?void 0:(b=a.target)==null?void 0:b.error,g);c("QPLUserFlow").endFailure(c("qpl")._(521485383,"2200"),a==null?void 0:(b=a.target)==null?void 0:b.error,{instanceKey:h});e(a)});return function(b){return a.apply(this,arguments)}}()});yield (j||(j=b("Promise"))).all(Array.from(f).map(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f=e[0];e=e[1];if(f!=null&&a.objectStoreNames.contains(f)){var h=g.objectStore(f);yield (j||(j=b("Promise"))).all(Array.from(e).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];if(d("ReStorePersistence").isDeletedValue(a))yield c("promiseFromRequest")(h["delete"](b));else{a=d("MAWLSDBEncryption").encryptLSDBObj(a,f);yield c("promiseFromRequest")(h.put(a,b))}});return function(b){return a.apply(this,arguments)}}()))}else void d("MAWLoggerDeferred").ERROR(m(),f,Array.from(a.objectStoreNames).toString())});return function(a){return e.apply(this,arguments)}}()));yield i})()])});function g(a){return f.apply(this,arguments)}return g}(),get:function(a,c,d){var e=u(c);if(r)return e.get(d);return q==null?(j||(j=b("Promise"))).reject("rehydration is not complete"):q.then(function(){r=!0;return e.get(d)})},logError:function(a,b,e,f){(i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_RESTORE_PERSISTENCE_ERROR,a);if(e==="dbCorruption"){var g;(i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION,a);e=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();void d("MAWLoggerDeferred").ERROR(l());f="Got unexpected undefined in ebsm, mode: "+b+", table: "+a+", id: "+((g=f==null?void 0:f.id)!=null?g:"")+", deletedInThisTxn: "+((g=f==null?void 0:f.deletedInThisTxn)!=null?g:"")+". Deleting EBSM db";c("FBLogger")("labyrinth_web").mustfix(f);g=c("EBSMProperties").mandatoryTables.has(a)||!p;b={bool:{fullDeletion:g},string:{mode:b,restoreUpsellTime:e,tableName:a}};e=d("Random").uint32();c("QPLUserFlow").start(c("qpl")._(521484724,"141"),{annotations:b,instanceKey:e});d("MAWUnrecoverableDbErrors").setError(new(d("MAWUnrecoverableDbErrors").EbsmHydrationError)(f,g,e,a));s||(s=!0,d("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE,g?"full":"partial"))}},queueCommitWork:void 0,runExclusively:function(a){return new(j||(j=b("Promise")))(function(c,d){f=f.then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield a()),e=b[0];b[1];try{c(yield e())}catch(a){d(a)}}))})},shouldApplySync:function(){return!1},shouldInline:function(a,b){return!1},shouldSync:function(a,b){return a==="notifyInMemoryTable"?!1:!0},tabTablesNotifier:function(){return(h||(h=c("ExecutionEnvironment"))).isInBrowser?o:void 0},types:["ephemeral"],uniqueId:""}}g["default"]=a}),98);
__d("createReStoreEBSMWorkerTablesPersistance",["EBSMHydrationUtils","EBSMProperties","FBLogger","MAWLSDBEncryption","MAWLoggerDeferred","MAWUnrecoverableDbErrors","MWEBODSCategory","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBUseLocalStorage","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsLocalStorageEntryEnum","ODS","Promise","QPLUserFlow","Random","ReStorePersistence","WAExceededStorageQuota","WebSession","asyncToGeneratorRuntime","gkx","promiseFromRequest","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] An error occured in EBSM hydration when loading EB data"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] worker DB corruption detected - deleting EBSM db"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][EB SM] EB SM tableName is "," is missing in ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] An error occured in flush. ",". Requested stores: ",""]);m=function(){return a};return a}var n=c("gkx")("23665"),o=null,p=!1,q=!1;function r(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function a(a,e){a===void 0&&(a=!1);var f=(i||(i=b("Promise"))).resolve(),g=new Map();function s(a){return r(g,a,function(){return new Map()})}var t=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").start(c("qpl")._(521481876,"1407"),{annotations:{bool:{is_worker:!0},string:{ebSessionIdentifier:t,sessionTabId:d("WebSession").getId()}}});(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_HYDRATION+c("MWEBODSEntityName.enum").MW_EBSM_WORKER_SUFFIX,c("MWEBODSEntityKey.enum").START);function u(){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield e);if(a==null)return;a=d("EBSMHydrationUtils").loadEBdataToEphemeralRestore(a);return a.then(function(a){a.forEach(function(a,b){var c=s(b);a.forEach(function(a,b){c.set(b.key,b.value)})}),c("QPLUserFlow").endSuccess(c("qpl")._(521481876,"1407")),(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_HYDRATION+c("MWEBODSEntityName.enum").MW_EBSM_WORKER_SUFFIX,c("MWEBODSEntityKey.enum").SUCCESS)},function(){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED"),void d("MAWLoggerDeferred").ERROR(j()),c("QPLUserFlow").endFailure(c("qpl")._(521481876,"1407"),"Hydration failed."),(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_HYDRATION+c("MWEBODSEntityName.enum").MW_EBSM_WORKER_SUFFIX,c("MWEBODSEntityKey.enum").FAIL)})});return v.apply(this,arguments)}o=u();return{flush:function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){if(f.size===0)return;f.size>0&&f.forEach(function(a,b){a.size===0&&f["delete"](b)});if(f.size>0){f.forEach(function(a,b){var c=s(b);a.forEach(function(a,b){d("ReStorePersistence").isDeletedValue(a,d("ReStorePersistence").sentinelDeleted)?c["delete"](b):c.set(b,a)})});if(a)return;var g=d("Random").uint32(),h=Array.from(f.keys());c("QPLUserFlow").start(c("qpl")._(521485383,"2200"),{annotations:{bool:{ebsmv2:!0,is_worker:!0},string_array:{tables:h}},instanceKey:g});yield o;var j=(yield e);if(j==null)return;var k=j.transaction(j.objectStoreNames,"readwrite",{durability:"relaxed"});d("WAExceededStorageQuota").listenToQuotaExceededError(k);h=new window.Promise(function(a,e){k.oncomplete=function(b){c("QPLUserFlow").endSuccess(c("qpl")._(521485383,"2200"),{instanceKey:g}),a(b.target.result)},k.onerror=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,h=Array.from(f).map(function(a){a=a[0];return a}).join(", ");yield d("MAWLoggerDeferred").ERROR(m(),a==null?void 0:(b=a.target)==null?void 0:b.error,h);c("QPLUserFlow").endFailure(c("qpl")._(521485383,"2200"),a==null?void 0:(b=a.target)==null?void 0:b.error,{instanceKey:g});e(a)});return function(b){return a.apply(this,arguments)}}()});yield (i||(i=b("Promise"))).all(Array.from(f).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a[0];a=a[1];if(e!=null&&j.objectStoreNames.contains(e)){var f=k.objectStore(e);yield (i||(i=b("Promise"))).all(Array.from(a).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];if(d("ReStorePersistence").isDeletedValue(a))yield c("promiseFromRequest")(f["delete"](b));else{a=d("MAWLSDBEncryption").encryptLSDBObj(a,e);yield c("promiseFromRequest")(f.put(a,b))}});return function(b){return a.apply(this,arguments)}}()))}else void d("MAWLoggerDeferred").ERROR(l(),e,Array.from(j.objectStoreNames).toString())});return function(b){return a.apply(this,arguments)}}()));yield h}});function g(a){return f.apply(this,arguments)}return g}(),get:function(a,c,d){var e=s(c);if(p)return e.get(d);return o==null?(i||(i=b("Promise"))).reject("rehydration is not complete"):o.then(function(){p=!0;return e.get(d)})},logError:function(a,b,e,f){(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_RESTORE_PERSISTENCE_ERROR+c("MWEBODSEntityName.enum").MW_EBSM_WORKER_SUFFIX,a);if(e==="dbCorruption"){var g;(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION+c("MWEBODSEntityName.enum").MW_EBSM_WORKER_SUFFIX,a);e=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();void d("MAWLoggerDeferred").ERROR(k());f="Got unexpected undefined in worker ebsm, mode: "+b+", table: "+a+", id: "+((g=f==null?void 0:f.id)!=null?g:"")+", deletedInThisTxn: "+((g=f==null?void 0:f.deletedInThisTxn)!=null?g:"")+". Deleting EBSM db";c("FBLogger")("labyrinth_web").mustfix(f);g=c("EBSMProperties").mandatoryTables.has(a)||!n;b={bool:{fullDeletion:g,is_worker:!0},string:{mode:b,restoreUpsellTime:e,tableName:a}};e=d("Random").uint32();c("QPLUserFlow").start(c("qpl")._(521484724,"141"),{annotations:b,instanceKey:e});d("MAWUnrecoverableDbErrors").setError(new(d("MAWUnrecoverableDbErrors").EbsmHydrationError)(f,g,e,a));q||(q=!0,d("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE,g?"full":"partial"))}},queueCommitWork:void 0,runExclusively:function(a){return new(i||(i=b("Promise")))(function(c,d){f=f.then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield a()),e=b[0];b[1];try{c(yield e())}catch(a){d(a)}}))})},shouldApplySync:function(){return!1},shouldInline:function(a,b){return!1},shouldSync:function(a,b){return a==="notifyInMemoryTable"?!1:!0},types:["ephemeral"],uniqueId:""}}g["default"]=a}),98);
__d("createReStoreTableNameAllowListPersistence",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d){var e;return{clearCache:function(){a.clearCache==null?void 0:a.clearCache(),c.clearCache==null?void 0:c.clearCache()},close:function(){a.close==null?void 0:a.close(),c.close==null?void 0:c.close()},flush:function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e,f){var h=new Map(),i=new Map();e.forEach(function(a,b){d.has(b)?i.set(b,a):h.set(b,a)});yield (g||(g=b("Promise"))).all([a.flush(h,f),c.flush(i,f)])});function f(a,b){return e.apply(this,arguments)}return f}(),get:function(b,e,f,g){return d.has(e)?c.get(b,e,f,g):a.get(b,e,f,g)},isClosed:function(){return(a.isClosed==null?void 0:a.isClosed())||!1},isPersistenceSupported:a.isPersistenceSupported,logError:function(b,e,f,g){d.has(b)?c.logError==null?void 0:c.logError(b,e,f,g):a.logError==null?void 0:a.logError(b,e,f,g)},permitsSynchronousIO:function(b){if(d.has(b)){var e;return(e=c.permitsSynchronousIO==null?void 0:c.permitsSynchronousIO(b))!=null?e:!1}else{return(e=a.permitsSynchronousIO==null?void 0:a.permitsSynchronousIO(b))!=null?e:!1}},runExclusively:function(d,e){return a.runExclusively(function(){return new(g||(g=b("Promise")))(function(a,f){var h=c.runExclusively(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield d()),e=c[0],f=c[1],i=new(g||(g=b("Promise")))(function(b){a([function(){b();return h},f])});return[b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield i;return e()}),f]}),e);h["catch"](f)})},e)},shouldApplySync:function(b,e){if(d.has(e))return c.shouldApplySync(b,e);else return a.shouldApplySync(b,e)},shouldInline:function(b,e){return d.has(b)?c.shouldInline(b,e):a.shouldInline(b,e)},shouldSync:function(b,e){if(d.has(e))return c.shouldSync(b,e);else return a.shouldSync(b,e)},tabTablesNotifier:(e=a.tabTablesNotifier)!=null?e:c.tabTablesNotifier,types:[].concat(a.types,c.types),uniqueId:c.uniqueId+a.uniqueId}}f["default"]=a}),66);
__d("LSJSEBInMemoryStorage",["EBSMProperties","createLSReStoreEphemeralPersistence","createReStoreEBSMTablesPersistence","createReStoreEBSMWorkerTablesPersistance","createReStoreTableNameAllowListPersistence"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!1);b=c("createReStoreTableNameAllowListPersistence")(d("createLSReStoreEphemeralPersistence").createLSReStoreEphemeralPersistence(),c("createReStoreEBSMTablesPersistence")(b,a),c("EBSMProperties").persistedTables);return b}function b(a,b){b===void 0&&(b=!1);b=c("createReStoreTableNameAllowListPersistence")(d("createLSReStoreEphemeralPersistence").createLSReStoreEphemeralPersistence(),c("createReStoreEBSMWorkerTablesPersistance")(b,a),c("EBSMProperties").persistedTables);return b}g.makeReStorePersistence=a;g.makeReStoreWorkerPersistence=b}),98);
__d("MWSetupEBStateDB",["EARInitType","ExecutionEnvironment","FBLogger","LSJSEBInMemoryStorage","MAWEncryptedBackupsPersistedDB","MWEncryptedBackupsFirstRestoreUpsellTime","MWSetupDBEncryption","QPLUserFlow","WebSession","asyncToGeneratorRuntime","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f;a===void 0&&(a=!1);b===void 0&&(b=!0);var g=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").start(c("qpl")._(521477507,"1406"),{annotations:{bool:{is_worker:(f=e)!=null?f:(h||(h=c("ExecutionEnvironment"))).isInWorker},string:{ebSessionIdentifier:g,sessionTabId:d("WebSession").getId()}}});var i;f=(yield d("MWSetupDBEncryption").init(c("EARInitType").EB_INIT));if(f.success){a=d("MAWEncryptedBackupsPersistedDB").makeEBIDB(a,(g=e)!=null?g:(h||(h=c("ExecutionEnvironment"))).isInWorker,b)["catch"](function(a){c("QPLUserFlow").endFailure(c("qpl")._(521477507,"1406"),"Initialisation failed. Idb is null");c("FBLogger")("labyrinth_web").catching(a).warn("[labyrinth_web] EB State IDB initialization failed. Falling back to In memory ReStore db");return null});i=c("gkx")("11709")&&((g=e)!=null?g:(h||(h=c("ExecutionEnvironment"))).isInWorker)?d("LSJSEBInMemoryStorage").makeReStoreWorkerPersistence(a,!1):d("LSJSEBInMemoryStorage").makeReStorePersistence(a,!1);c("QPLUserFlow").endSuccess(c("qpl")._(521477507,"1406"))}else{c("QPLUserFlow").endFailure(c("qpl")._(521477507,"1406"),f.error.toString(),{annotations:{string:{errorDescription:((b=f.payload)==null?void 0:b.message)||""}}});c("FBLogger")("labyrinth_web").warn("[labyrinth_web] Encryption DB init failed. Falling back to In memory ReStore db")}return i});return i.apply(this,arguments)}g.makeEBStateDB=a}),98);
__d("EBLS",["LSDataTraceFlushDeferred","LSDatascriptEvaluatorMaybeDeferred","LSDedicatedMqttChannel","LSDefaultSyncGroups","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSFactory","LSIntEnum","LSInternetConnectionState","LSMetadata","LSPlatformDeviceId","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSPlatformRealtimeTransport","LSPlatformTaskSystemTransport","LSReStoreWrapper","LSVersion","MAWBridge","MAWEncryptedBackupsPersistedDB","MAWEncryptedBackupsStateManager","MAWLSVaultingHooks","MAWVaultMaterialsStorage","MWEncryptedBackupsListenForChangesToBackupStateInitPath","MWEncryptedBackupsProcessBackupIdsDEPRECATED","MWPlatformTaskSystem","MWSetupEBStateDB","MqttEnv","Promise","QPLUserFlow","ReQL","ServerAppID","WATagsLogger","WAWaitForUserUnblocked","asyncToGeneratorRuntime","cr:20078","cr:6197","emptyFunction","err","getMWLSRegion","gkx","nullthrows","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync cleaning up"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting sucess"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subscribing to mqtt sync status change events"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Watching for expired traces"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Starting backup state listeners"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Starting task system"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Starting realtime transport"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Clearing epoch before resume sync..."]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Getting datascript evaluator success"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting..."]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["finished init successfully"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["created config"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Initialised db"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set failed: ",""]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set successfully"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status: ",""]);y=function(){return a};return a}var z=d("WATagsLogger").TAGS(["EBLS"]),A=c("qpl")._(521478817,"2806");function a(){return E()}var B,C,D;function E(){if(B)return B;B=I();return B}function F(){B=I(!0);return B}function G(){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){c("QPLUserFlow").addPoint(A,"offline_queue_wait_start"),yield d("WAWaitForUserUnblocked").waitForUserUnblocked(),c("QPLUserFlow").addPoint(A,"offline_queue_wait_end")});return H.apply(this,arguments)}function I(a){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);var e=c("gkx")("11711");c("QPLUserFlow").start(A,{annotations:{bool:{isSkipOfflineQueueAwait:e}}});e||(yield G());c("QPLUserFlow").addPoint(A,"ls_storage_creation_start");e=(yield K(a));c("QPLUserFlow").addPoint(A,"ls_storage_creation_end");b("cr:20078")!=null&&c("promiseDone")(b("cr:20078").addDeviceWithKeysInWorker(!1));z.DEV(v());a={appId:c("nullthrows")(c("ServerAppID").app_id),executeGraphQLLightSpeedRequest:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var e=(yield d("MAWBridge").getBridge().sendAndReceive("event","executeGraphQLLightSpeedRequest",{args:b}));return e});function c(){return a.apply(this,arguments)}return c}(),getDb:K,getEval:function(){return c("LSDatascriptEvaluatorMaybeDeferred")()},platformName:"Messenger",realtimeUnderylingTransport:function(){return(i||(i=b("Promise"))).resolve(function(b,a){return c("LSPlatformMqttRealtimeTransport")(c("LSVersion"),a,{getInstance:d("LSDedicatedMqttChannel").getInstance(function(){return!0},(b={},b[d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter]=!1,b),function(a,b){return b},c("emptyFunction")),shutdownAndClear:d("LSDedicatedMqttChannel").shutdownAndClear})})},region:c("getMWLSRegion")(),schemaVersion:c("LSVersion"),sendHardcodedInitSync:!1,syncParams:c("LSPlatformMessengerSyncParams")};z.DEV(u());var f=d("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");c("QPLUserFlow").addPoint(A,"platform_client_init_start");a=(yield P(e,a,f));c("QPLUserFlow").addPoint(A,"platform_client_init_end");R(e);z.DEV(t());return a});return J.apply(this,arguments)}function K(a){return L.apply(this,arguments)}function L(){L=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);if(!a&&C)return C;yield d("MAWVaultMaterialsStorage").setupVaultMaterials();C=new(i||(i=b("Promise")))(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield d("MWSetupEBStateDB").makeEBStateDB(!1));if(e==null)throw c("err")("persistence is null");e=d("LSReStoreWrapper").createLSReStore(e,d("LSMetadata").schema,[c("MAWLSVaultingHooks")],void 0);yield e.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("LSDefaultSyncGroups").seedDb(a,void 0)});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":190");a(e)});return function(b){return a.apply(this,arguments)}}());return C});return L.apply(this,arguments)}function e(){return M.apply(this,arguments)}function M(){M=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(b("cr:6197")!=null||C==null)return;yield d("MAWEncryptedBackupsPersistedDB").clearEBIDBNonPersistedRows({closeDb:!1,hasUserGivenAutoRestoreConsent:!1});yield F()});return M.apply(this,arguments)}function N(a){var b=c("MWEncryptedBackupsListenForChangesToBackupStateInitPath").listenForChangesToBackupState(a);return function(){b&&b()}}function O(a,b){var e=b==="Connected"?(h||(h=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED):(h||(h=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").NOT_CONNECTED);z.DEV(y(),b);c("promiseDone")(a.runInTransaction(function(a){return c("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(c("LSFactory")(a),{internetConnectionState:e})},"readwrite",void 0,void 0,f.id+":233"),function(){z.DEV(x())},function(a){z.ERROR(w(),a==null?void 0:a.message);throw a})}function P(a,b,c){return Q.apply(this,arguments)}function Q(){Q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){z.DEV(s());var g=(yield e.getEval());z.DEV(r());var h=g()(a);z.DEV(q());z.DEV(p());g=(yield e.realtimeUnderylingTransport());var i=d("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport(g,e.appId,f);z.DEV(o());var t=new(c("MWPlatformTaskSystem"))(a,new(c("LSPlatformTaskSystemTransport"))(a,i,h,e.schemaVersion));z.DEV(n());var u=null;b("cr:6197")!=null?c("promiseDone")(G().then(function(a){return b("cr:6197")()}),function(b){c("QPLUserFlow").addPoint(A,"sync_system_creation_start"),u=b(a,i,h,e.schemaVersion,f,e.executeGraphQLLightSpeedRequest),c("QPLUserFlow").addPoint(A,"sync_system_creation_end"),c("QPLUserFlow").endSuccess(A)}):(c("QPLUserFlow").addPoint(A,"sync_system_creation_skipped"),c("QPLUserFlow").endSuccess(A));var v=N(a);z.DEV(m());var w;c("promiseDone")(d("LSDataTraceFlushDeferred").watchForExpiredTraces(a).then(function(a){w=a}));z.DEV(l());i.onConnectionStatusChange(function(b){O(a,b)});z.DEV(k());return{cleanup:function(){var a;z.DEV(j());t==null?void 0:t.cleanup();i.cleanup();(a=u)==null?void 0:a.cleanup();v();w==null?void 0:w();D==null?void 0:D()},db:a}});return Q.apply(this,arguments)}function R(a){if(c("gkx")("12414")){var b=function(a){d("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(a),d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"UpdateEBState",value:{newState:a}}]})};D=a.tables.encrypted_backups.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.encrypted_backups)),function(e){if(e!=null){c("promiseDone")(d("MWEncryptedBackupsProcessBackupIdsDEPRECATED").processBackupIdsStoredProcedure(a),b,function(a){z.CATCHING(a)});return}})})}}g.init=a;g.genLSClient=E;g.reInitLSClient=F;g.getLSStorage=K;g.clearEBSMStorage=e;g.platformClientInit=P}),98);
__d("EBUploadMessagesFromWorkerMutationDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("EBUploadMessagesFromWorkerMutation").__setRef("EBUploadMessagesFromWorkerMutationDeferred");function a(a){return h.load().then(function(b){return b.uploadMessagesFromWorker(a)})}g.uploadMessagesFromWorker=a}),98);
__d("WAGetLocalPublicPrivateIdentityKeyApiV2",["WADbSignal","WALogger","WASignalDB","WASignalKeys","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}a=function(){return d("WASignalDB").getDb().runInTransaction(["meta"],"readonly",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a=(yield a.stores.meta.get(d("WADbSignal").MetaKeysEnum.identityKeyPair));if((a==null?void 0:(b=a.value)==null?void 0:b.identityKeyPair)==null){b="[Remote Presence Error] Identity key pair was null";d("WALogger").ERROR(h(),b);throw c("err")(b)}return d("WASignalKeys").toSerializedKeyPair(a.value.identityKeyPair)});return function(b){return a.apply(this,arguments)}}(),d("WASignalDB").signalOp("getLocalPublicPrivateIdentityKey"))};g.getLocalPublicPrivateIdentityKey=a}),98);
__d("EBWorkerAddDeviceUtils",["LSMetadata","LSReStoreWrapper","MAWLSVaultingHooks","MWSetupEBStateDB","Promise","ReQL","WAGetLocalPublicPrivateIdentityKeyApiV2","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAGetLocalPublicPrivateIdentityKeyApiV2").getLocalPublicPrivateIdentityKey()),b=a.privateKey;a=a.serializedPubKey;return{identityPrivateKey:b,identityPublicKey:a}});return i.apply(this,arguments)}function e(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=(yield d("MWSetupEBStateDB").makeEBStateDB(!0,!1,!1));if(g==null)throw c("err")("persistence is null");g=d("LSReStoreWrapper").createLSReStore(g,d("LSMetadata").schema,[c("MAWLSVaultingHooks")],void 0);var i=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.secure_encrypted_backups_client_state)));return i!=null?"dest_table_not_empty":g.runInTransaction(function(c){return e.runInTransaction(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d){var e=(yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=c[a];b=b.entries(new WeakMap());var e=(yield b.next());if(e.done)return"source_table_empty";a=d[a];while(!e.done){var f=e.value,g=f[0];f=f[1];yield a.upsert(g,f);e=(yield b.next())}return"success"});return function(b){return a.apply(this,arguments)}}())));e=new Set(e);if(e.has("source_table_empty"))return"source_table_empty";else if(e.has("success")&&e.size===1)return"success";return"fail"});return function(a){return d.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":78")},"readonly",void 0,void 0,f.id+":76")});return j.apply(this,arguments)}g.getIdentityKeysInWorker=a;g.copyEBStateTablesFromMainthreadToWorker=e}),98);/*FB_PKG_DELIM*/
__d("IGDOverLSMqttChannel",["CurrentUser","Env","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;c("MqttEnvInitializer").initialize();function j(a){d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);var b=c("CurrentUser").getAppID()==null?936619743392459:Number(c("CurrentUser").getAppID());return new(c("MqttChannel"))({appId:b,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:c("MqttWebConfig").clientCapabilities,clientType:"cookie_auth",deviceId:a,endpoint:(i||(i=c("Env"))).ig_mqtt_wss_endpoint||"wss://edge-chat.instagram.com/chat",initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:(i||(i=c("Env"))).ig_mqtt_polling_endpoint||"https://edge-chat.instagram.com/mqtt/pull",userFbid:c("CurrentUser").getPossiblyNonFacebookUserID()})}var k=null,l;function m(a){k==null&&(k=j(a));a=k;l==null?void 0:l(a);return a}function a(){return new(h||(h=b("Promise")))(function(a){k?a(m()):l=function(b){a(b)}})}function e(){k!=null&&(k.shutdown(),k=null)}g.getInstance=m;g.waitAndGetInstance=a;g.shutdownAndClear=e}),98);
__d("IGWebCallWindowControllerLoader",["FBLogger","JSResourceForInteraction","Promise","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("RTWebCallWindowOpener").__setRef("IGWebCallWindowControllerLoader"),j=c("requireDeferred")("ZenonCallWindowController").__setRef("IGWebCallWindowControllerLoader"),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(babelHelpers.wrapNativeSuper(Error));a=function(){function a(a,b){this.$1=null,this.$2=a,this.$3=b}var d=a.prototype;d.init=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield (h||(h=b("Promise"))).all([j.load(),i.load()])),d=a[0];a=a[1];this.$1=new d(this.$2,{callWindowInitializerResource:this.$3,callWindowOpener:new a(),uriBuilderResource:c("JSResourceForInteraction")("IGCallUriBuilder").__setRef("IGWebCallWindowControllerLoader")})}catch(a){c("FBLogger")("rtc_www").catching(a).warn("Failed to initialize call window controller")}});function d(){return a.apply(this,arguments)}return d}();d.initCall=function(a){if(this.$1)return this.$1.initCall(a);else throw new k()};return a}();a.ResourceNotReadyError=k;g["default"]=a}),98);
__d("IGWebPreCallContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a(null);g["default"]=b}),98);
__d("ZenonCallInviteModelLoader",["BaseEventEmitter","Promise","asyncToGeneratorRuntime","emptyFunction","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("ZenonCallInviteModel").__setRef("ZenonCallInviteModelLoader"),j=c("requireDeferred")("delegateZenonCallInviteModel").__setRef("ZenonCallInviteModelLoader");a=function(a){babelHelpers.inheritsLoose(d,a);function d(b){var d;d=a.call(this)||this;d.$ZenonCallInviteModelLoader$p_1=null;d.getCurrentInvite=function(){return null};d.startListening=function(a){this.$ZenonCallInviteModelLoader$p_1=a};d.stopListening=function(){this.$ZenonCallInviteModelLoader$p_1=null};d.dismiss=c("emptyFunction");d.accept=c("emptyFunction");d.decline=c("emptyFunction");d.$ZenonCallInviteModelLoader$p_2=b;return d}var e=d.prototype;e.init=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (h||(h=b("Promise"))).all([i.load(),j.load()])),c=a[0];a=a[1];c=new c(this.$ZenonCallInviteModelLoader$p_2);a(this,c);this.$ZenonCallInviteModelLoader$p_1!==null&&c.startListening(this.$ZenonCallInviteModelLoader$p_1)});function c(){return a.apply(this,arguments)}return c}();return d}(c("BaseEventEmitter"));g["default"]=a}),98);
__d("ZenonIncomingRingSDK",["BaseEventEmitter","RTWebIncomingRingConfiguration","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("ZenonParentCallsManager").__setRef("ZenonIncomingRingSDK"),i=[1,2,15,16];a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$ZenonIncomingRingSDK$p_1=[],c.$ZenonIncomingRingSDK$p_2=[],b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.init=function(a){var b=this;this.$ZenonIncomingRingSDK$p_3=a;h.onReady(function(c){b.callsManager==null&&(b.callsManager=new c(a));c=b.callsManager;c.addListener("unsupportedRing",function(a){return b.emit("unsupportedRing",a)});c.addListener("incomingRing",function(a){var c;if(a.actorID!=null&&!((c=b.$ZenonIncomingRingSDK$p_3)==null?void 0:c.enableIncomingActorCalls))return;b.emit("incomingRing",a)});c.addListener("ringCancel",function(a){return b.emit("ringCancel",a)});c.initListeners(b.$ZenonIncomingRingSDK$p_1);while(b.$ZenonIncomingRingSDK$p_2.length>0){var d=b.$ZenonIncomingRingSDK$p_2.shift();c.startOutgoingCallIntent(d.nonce,d.callParams)}})};c.initListeners=function(a){var b=this.callsManager;if(b!=null)b.initListeners(a);else{(b=this.$ZenonIncomingRingSDK$p_1).push.apply(b,a)}};c.removeListeners=function(a){var b=this;if(this.callsManager!=null)this.callsManager.removeListeners(a);else{var c=function(){if(e){if(f>=d.length)return"break";g=d[f++]}else{f=d.next();if(f.done)return"break";g=f.value}var a=g;b.$ZenonIncomingRingSDK$p_1=b.$ZenonIncomingRingSDK$p_1.filter(function(b){return b!==a})};for(var d=a,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;a=c();if(a==="break")break}}};c.isCallSupported=function(a){switch(a.type){case"thread":if(this.$ZenonIncomingRingSDK$p_3&&i.includes(a.threadType)){return(a=d("RTWebIncomingRingConfiguration").isSupportedClient())!=null?a:!1}break;default:return!1}return!1};c.startCallIntent=function(a,b){this.callsManager?this.callsManager.startOutgoingCallIntent(a,b):this.$ZenonIncomingRingSDK$p_2.push({callParams:b,nonce:a})};return b}(c("BaseEventEmitter"));g["default"]=a}),98);
__d("IGWebPreCallContextSingleton",["FBLogger","IGWebCallWindowControllerLoader","JSResource","ZenonCallInviteModelLoader","ZenonIncomingRingSDK","gkx","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("IgSignalingListener").__setRef("IGWebPreCallContextSingleton"),i=!1,j;function a(a){if(!c("gkx")("25307"))return null;if(j!=null)return j;try{var b=new(c("ZenonIncomingRingSDK"))();j={callInviteModel:new(c("ZenonCallInviteModelLoader"))(b),callWindowController:new(c("IGWebCallWindowControllerLoader"))(a,c("JSResource")("IGWebCallWindowInitializer").__setRef("IGWebPreCallContextSingleton")),incomingRingSDK:b};return j}catch(a){c("FBLogger")("rtc_www").catching(a).mustfix("Pre-call context initialization failed! This breaks all calling!");return null}}function b(a){if(!c("gkx")("25307"))return null;if(i)return j;i=!0;c("promiseDone")(j.callInviteModel.init());c("promiseDone")(j.callWindowController.init());j.incomingRingSDK.init({enableIncomingActorCalls:!1,relayEnvironment:a});c("promiseDone")(h.load(),function(a){j.incomingRingSDK.initListeners([new a()])});return j}g.create=a;g.init=b}),98);
__d("IGWebPreCallProvider.react",["CometRelay","IGWebPreCallContext","IGWebPreCallContextSingleton","react","react-compiler-runtime","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function a(a){var b=d("react-compiler-runtime").c(9);a=a.children;var e=d("CometRelay").useRelayEnvironment(),f;b[0]!==e?(f=function(){return d("IGWebPreCallContextSingleton").create({relayEnvironment:e})},b[0]=e,b[1]=f):f=b[1];var g=c("useStable")(f),h;b[2]!==g||b[3]!==e?(f=function(){g&&(d("IGWebPreCallContextSingleton").init(e),g.callInviteModel.startListening({callsBlocked:!1}))},h=[g,e],b[2]=g,b[3]=e,b[4]=f,b[5]=h):(f=b[4],h=b[5]);j(f,h);b[6]!==a||b[7]!==g?(f=i.jsx(c("IGWebPreCallContext").Provider,{value:g,children:a}),b[6]=a,b[7]=g,b[8]=f):f=b[8];return f}g["default"]=a}),98);
__d("PolarisSwitchAccountsModalLazy.react",["CometPlaceholder.react","IGCoreModal.react","IGDSBox.react","IGDSSpinner.react","JSResourceForInteraction","lazyLoadComponent","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisSwitchAccountsModal.react").__setRef("PolarisSwitchAccountsModalLazy.react"));function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("IGCoreModal.react"),{children:i.jsx(c("IGDSBox.react"),{alignItems:"center",height:112,justifyContent:"center",position:"relative",width:"100%",children:i.jsx(c("IGDSSpinner.react"),{size:"medium"})})}),children:i.jsx(j,{})}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("RpWebInfraActionsLoggerEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744334");b=d("FalcoLoggerInternal").create("rp_web_infra_actions_logger_event",a);e=b;g["default"]=e}),98);
__d("RtcWebUserActionsDebugFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744337");b=d("FalcoLoggerInternal").create("rtc_web_user_actions_debug",a);e=b;g["default"]=e}),98);
__d("RtcWebUserActionsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744338");b=d("FalcoLoggerInternal").create("rtc_web_user_actions",a);e=b;g["default"]=e}),98);
__d("ZenonAppProvider",["IGDWebUtils","ZenonActorHooks"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("IGDWebUtils").isInstagramWebSupportedApp(k())}function b(){return l(k())}function c(){return k()===351299233827255}function e(){return k()===2057013231240274}function f(){return k()===518491789147974}function h(){var a=d("ZenonActorHooks").ZenonActor.getAppID();return a==null?!1:Number(a)===2763362503905702||Number(a)===1013624499181349||Number(a)===218968626708284}function i(){var a=d("ZenonActorHooks").ZenonActor.getAppID();return a==null?!1:Number(a)===772021112871879||Number(a)===2220391788200892}function j(){var a=k();return a===949958857019662||a===1358015658191005||a===445865345227527}function k(){var a=d("ZenonActorHooks").ZenonActor.getAppID();return a==null?null:Number(a)}function l(a){return a!=null?a===2763362503905702||a===1013624499181349||a===218968626708284:!1}g.isInstagramApp=a;g.isOculusApp=b;g.isHorizonApp=c;g.isHorizonWorldsApp=e;g.isCastingCenterApp=f;g.isOculusCastingSite=h;g.isMessengerWebApp=i;g.isMetaAI=j}),98);
__d("ZenonActorHooks",["CurrentUser","FBLogger","ZenonAppProvider","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=null,j=null,k=!1,l=!1,m=new Set();function n(a,b){b===void 0&&(b="Fallback to CurrentUser"),m.has(a)||(c("FBLogger")("rtc_www").blameToPreviousFrame().info("ZenonActor."+a+" - "+b),m.add(a))}function a(){return[o.getID(),function(a){n("useZenonActor:setter","This setter should not be used as Zenon should currently doesn't allow switching Actor"),h=a}]}function b(a,b,c){b===void 0&&(b=!1);c===void 0&&(c=!1);if(h!==null){if(l)return;n("initZenonActor","ZenonActor is being reinitalized. This may indicate unneccessary ZenonActorProvider's to RelayEnvironmentProvider's in the component tree.")}l=l||b;k=k||c;typeof a==="string"||typeof a==="number"?(h=a.toString(),i=null,j=null):(a==null?void 0:a.actorID)!=null&&(h=a.actorID.toString(),i=a.name,j=a.shortName)}var o={getAccountID:function(){if(o.isInstagramUser())return c("CurrentUser").getEIMU();return o.isOculusCastingUser()?c("CurrentUser").getEOCPU():c("CurrentUser").getAccountID()},getAppID:function(){return c("CurrentUser").getAppID()},getID:function(){if(o.isInstagramUser())return c("CurrentUser").getEIMU();if(o.isOculusCastingUser())return c("CurrentUser").getEOCPU();if(o.isHorizonWebUser()&&!c("gkx")("5683"))return c("CurrentUser").getEPOU();if(o.isKadabraUser())return c("CurrentUser").getARID();if(h===null){n("getID");return c("CurrentUser").getID()}else return h},getName:function(){var a;return(a=i)!=null?a:c("CurrentUser").getName()},getShortName:function(){var a;return(a=j)!=null?a:c("CurrentUser").getShortName()},isEmployee:function(){return c("CurrentUser").isEmployee()},isHorizonWebUser:function(){return c("CurrentUser").getEPOU()!==0&&d("ZenonAppProvider").isHorizonApp()},isInstagramUser:function(){return c("CurrentUser").getEIMU()!==0&&d("ZenonAppProvider").isInstagramApp()},isKadabraUser:function(){return c("gkx")("11152")&&c("CurrentUser").getAppID()===String(1358015658191005)},isLoggedIn:function(){return c("CurrentUser").isLoggedIn()},isLoggedInNow:function(){return c("CurrentUser").isLoggedInNow()},isManagedMetaAccount:function(){return c("CurrentUser").isManagedMetaAccount()},isMessengerCallGuestUser:function(){return c("CurrentUser").isMessengerCallGuestUser()},isOculusCastingUser:function(){return c("CurrentUser").getEOCPU()!==0&&d("ZenonAppProvider").isOculusApp()},isOculusUser:function(){return c("CurrentUser").getEPOU()!==0&&d("ZenonAppProvider").isOculusApp()},isPage:function(){return k},isTestUser:function(){return c("CurrentUser").isTestUser()},isWorkishUser:function(){return c("CurrentUser").isWorkroomsUser()||c("CurrentUser").isWorkUser()},isWorkroomsUser:function(){return c("CurrentUser").isWorkroomsUser()},isWorkUser:function(){return c("CurrentUser").isWorkUser()}};g.useZenonActor=a;g.initZenonActor=b;g.ZenonActor=o}),98);
__d("ZenonAuditedCheckpointLogId",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["RP_ROOMS_INFRA_WWW__E2EE","RP_ROOMS_INFRA_WWW__WASM","RP_ROOMS_INFRA_WWW__LOGGER_INFRA","RP_ROOMS_INFRA_WWW__STATE_MACHINE","RP_ROOMS_INFRA_WWW__ERROR","RP_ROOMS_INFRA_WWW__E2EE_DEVICE_VERIFIER","RP_ROOMS_INFRA_WWW__PLATFORM"]);c=a;f["default"]=c}),66);
__d("ZenonCallWindowErrors",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="ZenonOpeningAnotherCallError",b)||babelHelpers.assertThisInitialized(c)}return b}(babelHelpers.wrapNativeSuper(Error));b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="ZenonConferenceNameMutationFailedError",b)||babelHelpers.assertThisInitialized(c)}return b}(babelHelpers.wrapNativeSuper(Error));c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="ZenonIncompleteControllerParamsError",b)||babelHelpers.assertThisInitialized(c)}return b}(babelHelpers.wrapNativeSuper(Error));d=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="ZenonUnsupportedThreadTypeError",b)||babelHelpers.assertThisInitialized(c)}return b}(babelHelpers.wrapNativeSuper(Error));e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.name="ZenonCannotAcceptInviteError",b)||babelHelpers.assertThisInitialized(c)}return b}(babelHelpers.wrapNativeSuper(Error));var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="ZenonInviteNotFoundError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),h=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="ZenonUninitializedError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error));f.OpeningAnotherCallError=a;f.ConferenceNameMutationFailedError=b;f.IncompleteControllerParamsError=c;f.UnsupportedThreadTypeError=d;f.CannotAcceptInviteError=e;f.InviteNotFoundError=g;f.UninitializedError=h}),66);
__d("isEmployeeTestUserZenonLogging",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("25162")||c("gkx")("25152")||c("gkx")("25209")}g["default"]=a}),98);
__d("ZenonInfraActionsLogger",["Log","RpWebInfraActionsLoggerEventFalcoEvent","ZenonAuditedCheckpointLogId","formatDate","isEmployeeTestUserZenonLogging","justknobx"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1={callTrigger:void 0,conferenceName:void 0,deviceID:void 0,mediaPath:"sfu",peerID:void 0,serverInfoData:void 0,signalingID:void 0},this.$2=new Set(),this.$3=new Map(),this.$4=new Map()}var b=a.prototype;b.updateCachedValues=function(a){Object.assign(this.$1,a)};b.setE2eeIsMandatedForCall=function(a){this.$3.set(a,!0)};b.logCheckpointEmployeesTestUsersOnly=function(a){if(!c("isEmployeeTestUserZenonLogging")())return;this.logCheckpoint(a)};b.logCheckpoint=function(a){this.logEvent(babelHelpers["extends"]({},a))};b.logCheckpointOnceForDomain=function(a){var b=a.checkpoint;this.$2.has(b)||(this.$2.add(b),this.logCheckpoint(a))};b.logError=function(a){this.logEvent(babelHelpers["extends"]({},a))};b.startTimer=function(a){var b=Date.now();this.$4.set(a,b);this.logEvent({checkpoint:a+"_timerStart"})};b.stopTimer=function(a){var b=this.$4.get(a);this.$4["delete"](a);b=b!=null?Date.now()-b:null;this.logEvent({checkpoint:a+"_timerEnd",eventTimeElapsed:b});return parseInt(b,10)};b.logEvent=function(a){var b;if(c("justknobx")._("854"))return;b=(b=this.$3.get((b=this.$1.signalingID)!=null?b:""))!=null?b:!1;if(b&&!c("justknobx")._("1021"))return;if(b&&a.auditId==null){b="Encountered an unaudited log line, dropping it.";a.error!=null?this.logEvent({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__LOGGER_INFRA,error:b}):this.logEvent({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__LOGGER_INFRA,checkpoint:b});return}if(((b=a.checkpoint)==null?void 0:b.length)!=null&&a.checkpoint.length>3e5)return;var d={call_id:(b=a.signalingID)!=null?b:this.$1.signalingID==null?void 0:String(this.$1.signalingID),call_trigger:this.$1.callTrigger,call_type:(b=a.callType)!=null?b:null,checkpoint:a.checkpoint,client_session_id:this.$1.signalingID,client_time:Date.now().toString(),conference_name:(b=a.conferenceName)!=null?b:this.$1.conferenceName,connection:(b=a.connectionState)!=null?b:this.$1.connectionState,device_id:this.$1.deviceID,error:a.error,error_domain:a.errorDomain,event_time_elapsed:(b=a.eventTimeElapsed)==null?void 0:b.toString(),is_caller:(b=a.isCaller)!=null?b:null,media_path:(b=a.mediaPath)!=null?b:this.$1.mediaPath,message_id:a.messageID,peer_connection:(b=a.peerConnectionState)!=null?b:this.$1.peerConnectionState,peer_id:this.$1.peerID,sdp_format:(b=a.sdpFormat)!=null?b:null,server_info_data:(b=a.serverInfoData)!=null?b:this.$1.serverInfoData,signaling:(b=a.signalingState)!=null?b:this.$1.signalingState,state_machine_id:a.stateMachineID};c("RpWebInfraActionsLoggerEventFalcoEvent").log(function(){return d})};return a}();b=new a();g["default"]=b}),98);
__d("ZenonLoggingUtils",["ZenonAppProvider"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("ZenonAppProvider").isHorizonApp()||d("ZenonAppProvider").isHorizonWorldsApp()?!1:!0}g.shouldAllowLogging=a}),98);
__d("ZenonMachineToQPLEvent",["qpl"],(function(a,b,c,d,e,f,g){"use strict";b={ConnectionStateMachine:(a=c("qpl"))._(64243854,"2452"),ParentSignalingClient:a._(64234815,"1094"),PeerConnectionStateMachine:a._(64239068,"6172"),SignalingStateMachine:a._(64245348,"8823")};g["default"]=b}),98);
__d("ZenonODSLogger",["ODS"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){}var b=a.prototype;b.logCounter=function(a){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway",a),h.flush()};b.logE2eeCounter=function(a){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_e2ee",a),h.flush()};return a}();b=new a();g["default"]=b}),98);
__d("ZenonDebugLogger",["ChannelClientID","CurrentUser","FBLogger","IGDWebUtils","Log","LogHistory","ODS","QuickLogActionType","QuickPerformanceLogger","RpWebStateMachineLoggingBlocklist","UserAgentData","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonLoggingUtils","ZenonMachineToQPLEvent","ZenonODSLogger","formatDate","isEmployeeTestUserZenonLogging"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=null;a=function(){a.getInstance=function(){j||(j=new a());return j};a.getFBLogger=function(a){var b;a===void 0&&(a={});return c("FBLogger")("rpweb").addMetadata("RT_WEB","CALL_ID",""+((b=a.signalingID)!=null?b:"null")).addMetadata("RT_WEB","PEER_ID",""+((b=a.peerID)!=null?b:"null"))};function a(){var a;this.$1=d("LogHistory").getInstance("webrtc");this.$2=d("ChannelClientID").getID();this.$3=JSON.stringify({browser:(a=c("UserAgentData")).browserName,browser_version:a.browserFullVersion,device:a.deviceName,msg_source:"web",os:a.platformName,os_version:a.platformFullVersion,version:2});a=c("CurrentUser").getAppID();a!=null&&d("IGDWebUtils").isInstagramWebSupportedApp(Number(a))?this.$4=parseInt(a,10):this.$4=219994525426954;this.$5=new Set(c("RpWebStateMachineLoggingBlocklist").EVENT_TYPES);this.$6=new Set(c("RpWebStateMachineLoggingBlocklist").STATES)}var b=a.prototype;b.$7=function(a,b,d){b===void 0&&(b=!0);var e=c("formatDate")(new Date(),"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",e+" "+a);b&&c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] "+a,messageID:d})};b.$8=function(a,b,d){var e=c("formatDate")(new Date(),"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",e+" "+a+". StateMachineID:  "+((e=b)!=null?e:""));e={auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"[ZP] "+a+".",stateMachineID:b};d!=null&&(e.messageID=d);c("ZenonInfraActionsLogger").logCheckpoint(e)};b.$9=function(a,b,e,f){f===void 0&&(f=0);a=c("ZenonMachineToQPLEvent")==null?void 0:c("ZenonMachineToQPLEvent")[a];if(!(a&&(i||(i=c("QuickPerformanceLogger")))&&c("QuickLogActionType")&&d("ZenonLoggingUtils").shouldAllowLogging()))return;e==="terminated"?(i||(i=c("QuickPerformanceLogger"))).markerEnd(a,2,f):(i||(i=c("QuickPerformanceLogger"))).markerPoint(a,b,{data:{string:{data:e}},instanceKey:f})};b.$10=function(a){return isNaN(+a)?0:+a};b.getLogHistory=function(){return this.$1};b.logStateMachine=function(a,b,d,e,f){if(!c("isEmployeeTestUserZenonLogging")())return;if(this.$5.has(d))return;var g="["+a+"] [Current State: "+b+"] Processing event: "+d;g={auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:""+g,stateMachineID:e};f!=null&&(g.messageID=f);c("ZenonInfraActionsLogger").logCheckpoint(g);this.$9(a,d,b,this.$10(e))};b.logStateMachineTransition=function(a,b,d,e,f,g,h,i){if(this.$6.has(d)||this.$5.has(f))return;if(!c("isEmployeeTestUserZenonLogging")())return;var j="";g!=null&&g.length===1&&g[0].type==="defer"?j="["+a+"] [[DEFERRED] "+f+" did not trigger transition. Current state remains "+d:d!==e?j="["+a+"] [[PROCESSED] "+f+" caused transition from "+(e||"")+" to "+d+".":b?j="["+a+"] [[PROCESSED] "+f+" did not trigger transition. Current state remains "+d:(j="["+a+"] [[DROPPED] "+f+" did not trigger transition. Current state remains "+d,this.$11(a));this.$8(j,h,i)};b.startQPL=function(a,b){b===void 0&&(b=0),(i||(i=c("QuickPerformanceLogger")))&&d("ZenonLoggingUtils").shouldAllowLogging()&&(i||(i=c("QuickPerformanceLogger"))).markerStart(a,this.$10(b))};b.endQPL=function(a,b){b===void 0&&(b=0),(i||(i=c("QuickPerformanceLogger")))&&c("QuickLogActionType")&&d("ZenonLoggingUtils").shouldAllowLogging()&&(i||(i=c("QuickPerformanceLogger"))).markerEnd(a,2,this.$10(b))};b.logConsole=function(a){this.$7(a,!1)};b.logMQTTStateChange=function(a){var b="mqtt_client_state_"+a;c("ZenonODSLogger").logCounter(b);c("isEmployeeTestUserZenonLogging")()&&c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] onMQTTStateChanged: "+a+", document.visibility: "+document.visibilityState+", document.hasFocus: "+String(document.hasFocus())+", navigator.onLine: "+String(navigator.onLine)})};b.logMQTTConnectStats=function(a,b){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] MQTT Connection time: "+String(a)+"ms, Retry Count: "+String(b)})};b.$11=function(a){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_state_machine",a+"_event_dropped"),h.flush()};return a}();g["default"]=a}),98);
__d("ZenonPeerID",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";var i="MW_PEER_ID";function a(a){a.length>0||h(0,33504);if(a==="MW_PEER_ID")return i;isNaN(a)===!1||h(0,33551,a);return a}function b(a){return isNaN(a)||a===i?null:a}g.ZenonMWPeerID=i;g.convertStringToPeerID=a;g.convertPeerIDForLogging=b}),98);
__d("ZenonSDESKeyDetector",[],(function(a,b,c,d,e,f){"use strict";var g=/inline:\s*[0-9a-zA-z+/]{40}(\b|\s|$)/;function a(a){return g.test(JSON.stringify(a))}f["default"]=a}),66);
__d("ZenonSignalingProtocol",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({MW:"mw",MWPP:"mw++"});c=a;f["default"]=c}),66);
__d("ZenonUserActionLogger",["RtcWebUserActionsDebugFalcoEvent","RtcWebUserActionsFalcoEvent","ZenonDebugLogger","ZenonLoggingUtils","ZenonSDESKeyDetector","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=window.location.hostname.search("facebook")!==-1?"facebook":window.location.hostname.search("messenger")!==-1?"messenger_dot_com":null,j={logCheckpoint:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"checkpoint"}))},logClick:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"tap"}))},logError:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"error"}))},logEvent:function(a){var b;if(c("ZenonSDESKeyDetector")(a))throw c("unrecoverableViolation")("ZenonUserActionLogger event contains SDES crypto key! This log entry must be removed!","rtc_www");if(!d("ZenonLoggingUtils").shouldAllowLogging())return;b=babelHelpers["extends"]({},a,{page:(b=a.page)!=null?b:i});var e=babelHelpers["extends"]({},b,{client_time:Date.now().toString()});c("RtcWebUserActionsDebugFalcoEvent").log(function(){return e});c("RtcWebUserActionsFalcoEvent").log(function(){return e});c("ZenonDebugLogger").getInstance().getLogHistory().log((a=a.event)!=null?a:"null",JSON.stringify(b))},logImpression:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"impression"}))},logPreCallClick:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"tap"}))},logPreCallImpression:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"impression"}))},startTimer:function(a){var b=Date.now();h=h.set(a,b);j.logCheckpoint({checkpoint:a+"_timerStart"})},stopTimer:function(a){var b=a.checkpointName===void 0?a.timerName:a.checkpointName,c=a.event||{},d=function(a){var b=h.get(a);if(b!=null){h["delete"](a);return parseInt(Date.now()-b,10)}return null};d=d(a.timerName);j.logCheckpoint(babelHelpers["extends"]({},c,{checkpoint:b+"_timerEnd",event_time_elapsed:d==null?void 0:d.toString()}));return parseInt(d,10)}};f.exports=j}),34);/*FB_PKG_DELIM*/
__d("CometNotificationsRootContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b={isNotificationsRoute:!1,source:null};c=a.createContext(b);g["default"]=c}),98);
__d("CometRouteRenderType",["CometRouterRenderTypeContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(c("CometRouterRenderTypeContext"));return a}function b(){var a=i(c("CometRouterRenderTypeContext"));return(a==null?void 0:a.renderType)==="pushView"}function e(){var a=i(c("CometRouterRenderTypeContext"));return(a==null?void 0:a.renderType)==="hosted"}function f(){var a=i(c("CometRouterRenderTypeContext"));return(a==null?void 0:a.renderType)==="main"}g.useCometRouteRenderingLocation=a;g.useIsPushView=b;g.useIsHosted=e;g.useIsMain=f}),98);
__d("CometVideoPictureInPictureManagerContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;c=(h||d("react")).createContext;e=c({openPipPlayer:function(){},setController:function(){},setPipPortableVideoID:function(){}});f=c({hasNextChainedVideo:!1,isPipEnabled:!1,setHasNextChainedVideo:function(){},setSkippedFromPipPlayer:function(){},skippedFromPipPlayer:!1});function a(){return!1}function b(){return!1}g.CometVideoPictureInPictureManagerAPIContext=e;g.CometVideoPictureInPictureManagerContext=f;g.isInPictureInPictureExp=a;g.isInPictureInPictureExpControlGroup=b}),98);
__d("DataViewReader",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=0,this.$2=a}var b=a.prototype;b.seek=function(a){this.$1=a};b.skip=function(a){var b=this.$1;this.$1+=a;return b};b.readUint8=function(){return this.$2.getUint8(this.skip(8/8))};b.readUint16=function(a){a===void 0&&(a=!1);return this.$2.getUint16(this.skip(16/8),a)};b.readUint32=function(a){a===void 0&&(a=!1);return this.$2.getUint32(this.skip(32/8),a)};b.readUint64=function(a){a===void 0&&(a=!1);var b;a?(a=this.$2.getUint32(this.skip(32/8),!0),b=this.$2.getUint32(this.skip(32/8),!0)):(b=this.$2.getUint32(this.skip(32/8)),a=this.$2.getUint32(this.skip(32/8)));if(b>2097151)throw new RangeError("Overflow reading 64-bit value.");return Math.pow(2,32)*b+a};b.readInt64=function(a){a===void 0&&(a=!1);var b;a?(a=this.$2.getInt32(this.skip(32/8),!0),b=this.$2.getInt32(this.skip(32/8),!0)):(b=this.$2.getInt32(this.skip(32/8)),a=this.$2.getInt32(this.skip(32/8)));if(b>2097151)throw new RangeError("Overflow reading 64-bit value.");return Math.pow(2,32)*(b|0)+a};b.readInt16=function(a){a===void 0&&(a=!1);return this.$2.getInt16(this.skip(16/8),a)};b.readInt32=function(a){a===void 0&&(a=!1);return this.$2.getInt32(this.skip(32/8),a)};b.readZeroTerminatedString=function(a){var b="",c=0,d;while(c++<a&&(d=this.readUint8()))b+=String.fromCharCode(d);return b};b.readChars=function(a){var b="";while(a-->0)b+=String.fromCharCode(this.$2.getUint8(this.skip(8/8)));return b};b.readBytes=function(a){var b=[];while(a-->0)b.push(this.$2.getUint8(this.skip(8/8)));return b};b.getDataView=function(){return this.$2};b.getCursor=function(){return this.$1};b.hasMoreData=function(){return this.$2.byteLength-this.getCursor()>0};return a}();f["default"]=a}),66);
__d("cssVar",[],(function(a,b,c,d,e,f){function a(a){throw new Error('cssVar("'+a+'"): Unexpected class transformation.')}f["default"]=a}),66);
__d("FDSLoadingAnimation.react",["cssVar","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=38,l=62,m=42,n=2,o=3,p=4,q=k/2,r=l/2,s=m/2,t=q-2,u=r-2,v=s-2;function a(a){var b=a.animationPaused;b=b===void 0?!1:b;a=a.size;var c,d,e;switch(a){case 36:c=k;d=q;e=t;break;case 40:c=m;d=s;e=v;break;case 60:default:c=l;d=r;e=u;break}return j.jsx("svg",babelHelpers["extends"]({},{0:{className:"x10l6tqk"},4:{className:"x10l6tqk x1150agl x1e0gzzx"},2:{className:"x10l6tqk x1150agl x1e0gzzx"},6:{className:"x10l6tqk x1150agl x1e0gzzx"},1:{className:"x10l6tqk x1150agl x1e0gzzx"},5:{className:"x10l6tqk x1150agl x1e0gzzx"},3:{className:"x10l6tqk x1150agl x1e0gzzx"},7:{className:"x10l6tqk x1150agl x1e0gzzx"}}[!!(a===36)<<2|!!(a===60)<<1|!!(a===40)<<0],{height:c,width:c,children:j.jsx("g",babelHelpers["extends"]({},{0:{className:"xeaay5l xa4qsjk xnjvcao x1esw782 x1bndym7"},1:{className:"xeaay5l xa4qsjk xnjvcao x1esw782 x1bndym7 xorstpt"}}[!!b<<0],{children:j.jsx("circle",babelHelpers["extends"]({},{0:{className:"xeo85xg x7s8090 xa4qsjk x1esw782 x1bndym7"},8:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk xq0anyh x1esw782 xvlca1e"},4:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk x62hu5v x1esw782 xqjr0vm"},12:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk x62hu5v x1esw782 xqjr0vm"},2:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk xm4p48w x1esw782 x17ld789"},10:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk xm4p48w x1esw782 x17ld789"},6:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk xm4p48w x1esw782 x17ld789"},14:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk xm4p48w x1esw782 x17ld789"},1:{className:"xeo85xg x7s8090 xa4qsjk x1esw782 x1bndym7 xorstpt"},9:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk xq0anyh x1esw782 xvlca1e xorstpt"},5:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk x62hu5v x1esw782 xqjr0vm xorstpt"},13:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk x62hu5v x1esw782 xqjr0vm xorstpt"},3:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk xm4p48w x1esw782 x17ld789 xorstpt"},11:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk xm4p48w x1esw782 x17ld789 xorstpt"},7:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk xm4p48w x1esw782 x17ld789 xorstpt"},15:{className:"x1bndym7 xeo85xg xeaay5l xa4qsjk xm4p48w x1esw782 x17ld789 xorstpt"}}[!!(a===36)<<3|!!(a===40)<<2|!!(a===60)<<1|!!b<<0],{cx:d,cy:d,fill:"none",r:e,stroke:"#1877F2",strokeWidth:a===36?n:a===40?o:p}))}))}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MediaPlaybackCompoundEventUtils",["CometProductAttribution"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if((a==null?void 0:a.v2)&&(a==null?void 0:a.v2.length)>0){a=a==null?void 0:a.v2;a=a[a.length-1];return[a["class"],a.module].map(d("CometProductAttribution").filterEntryValue).join(":")}return""}function b(a){var b=0;switch(a){case"autoplay_initiated":b=1;break;case"loop_initiated":b=7;break;case"product_initiated":b=8;break;case"user_initiated":b=2;break;default:break}return b}function c(a){var b="unknown";switch(a){case"EXCELLENT":b="excellent";break;case"GOOD":b="good";break;case"MODERATE":b="moderate";break;case"POOR":b="poor";break;default:break}return b}function e(a){if(typeof a==="string")return a;return typeof a==="number"?a.toString():void 0}g.minifyProductAttributionV2Root=a;g.getMediaPlaybackPlayReason=b;g.getMediaPlaybackDataConnectionQuality=c;g.stringifyMediaPlaybackMetadata=e}),98);
__d("VideoPlayerImplementationErrorNormalization",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.getType(),c=a.getDescription();switch(b){case"OZ_NETWORK":b=(b=(b=a.getExtra())==null?void 0:b.code)!=null?b:"0";b=parseInt(b,10);return b<100||b>599?"NetworkError":"HTTPError";case"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":a=(b=a.getExtra())==null?void 0:b.mimeType;if(a!=null&&a.indexOf("video")>-1)return"VideoDecodeError";else if(a!=null&&a.indexOf("audio")>-1)return"AudioDecodeError";else return"GenericDecodeError";case"OZ_XML_PARSER":case"OZ_MPD_PARSER":case"OZ_REPRESENTATION_PARSER":return"ManifestParseError";case"OZ_DRM_MANAGER":case"OZ_INITIALIZATION":if(/(OZ_XML_PARSER)|(OZ_MPD_PARSER)|(OZ_REPRESENTATION_PARSER)/.test(c))return"ManifestParseError";else return"RuntimeError";case"OZ_JAVASCRIPT_NATIVE":case"OZ_SOURCE_BUFFER":case"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR":case"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR":return"RuntimeError"}return null}function b(a,b){switch(a){case"OZ_XML_PARSER":case"OZ_MPD_PARSER":case"OZ_REPRESENTATION_PARSER":return"ManifestParseError";case"OZ_DRM_MANAGER":case"OZ_INITIALIZATION":if(/(OZ_XML_PARSER)|(OZ_MPD_PARSER)|(OZ_REPRESENTATION_PARSER)/.test(b))return"ManifestParseError";else return"RuntimeError";case"OZ_JAVASCRIPT_NATIVE":case"OZ_SOURCE_BUFFER":case"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR":case"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR":return"RuntimeError";case"BUFFERING_TIMEOUT":return"RuntimeError";default:b=[[["MEDIA_ERR_NETWORK"],"NetworkError"],[["MEDIA_ERR_ABORTED","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_UNKNOWN"],"GenericDecodeError"]];for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];if(f.some(function(b){return a.includes(b)}))return e}}return null}f.getVideoPlayerNormalizedErrorTypeFromOzError=a;f.getErrorTypeFromErrorName=b}),66);
__d("MediaPlaybackMetadataProvider",["VideoPlayerImplementationErrorNormalization"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.videoPlayerError;var b=a.errorMessageFormat,c=a.errorName,e=a.errorType;a=a.errorCode==null||a.errorCode===""?c:a.errorCode;e={code:a,description:b,domain:c,error:c,type:String((a=e)!=null?a:d("VideoPlayerImplementationErrorNormalization").getErrorTypeFromErrorName(c,b))};return e}g.getSNAPLErrorMetadataCommon=a}),98);
__d("getPlayerFormatForLogData",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.isFullscreen;return a===!0?"full_screen":b!=null?b:"inline"}f["default"]=a}),66);
__d("IGVideoMetadataProvider",["CometProductAttribution","MediaPlaybackCompoundEventUtils","MediaPlaybackMetadataProvider","getPlayerFormatForLogData","pageID"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){var b,e=a.logDataAdditions,f=a.loggingMetaData;a=a.state;var g=f.productAttribution!=null?d("CometProductAttribution").minifyProductAttributionV2(f.productAttribution):void 0;b=c("getPlayerFormatForLogData")({isDesktopPictureInPicture:(b=a.controlledState.isDesktopPictureInPicture)!=null?b:!1,isFullscreen:a.uncontrolledState.isFullscreen},f.coreVideoPlayerMetaData.playerFormat);f=!(a.controlledState.muted||a.controlledState.volume===0);a=a.controlledState.lastPlayReason!=null?d("MediaPlaybackCompoundEventUtils").getMediaPlaybackPlayReason(a.controlledState.lastPlayReason):null;g={attribution_id_v2:g,nav_chain:(g=e.nav_chain)!=null?g:"",player_format:b,player_sound_on:f,story_reel_position:e.story_reel_position,story_reel_size:e.story_reel_size,video_play_reason:a};return g};function a(){return{getErrorMetadata:d("MediaPlaybackMetadataProvider").getSNAPLErrorMetadataCommon,getRequiredMetadata:function(a){var b,d,e,f=a.logDataAdditions,g=a.loggingMetaData;a=a.state;b=(b=g.coreVideoPlayerMetaData.isLiveStreaming)!=null?b:void 0;d=(d=g.coreVideoPlayerMetaData.videoFBID)!=null?d:"-1";b={author_id:f.author_id,browser_tab_id:c("pageID"),current_watching_module:(e=f.current_watching_module)!=null?e:"",is_live_streaming:b,media_id:d,nav_chain:f.nav_chain,player_suborigin:g.coreVideoPlayerMetaData.subOrigin,player_version:a.playerVersion,tracking_token:f.tracking_token,tracking_type:(e=f.tracking_type)!=null?e:""};return b},getTagMetadata:function(a){var b=a.logDataAdditions,c=a.loggingMetaData;a=a.state;return h({logDataAdditions:b,loggingMetaData:c,state:a})}}}g.createIGVideoMetadataProvider=a}),98);
__d("PlaybackSpeedExperiments",["CurrentUser","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){return c("gkx")("26216")}function i(){return!1}function a(){return h()||i()?!0:!1}function j(){return i()?!1:!1}function b(){return c("CurrentUser").getID()!=="0"}function d(){if(h())return!1;if(i())return!0;return j()?!1:!1}function e(){return!0}g.enableWwwPlaybackSpeedControl=a;g.isInCometHeadroomTest=j;g.enableCometPlaybackSpeedControl=b;g.enableCometPlaybackSpeedControlNUX=d;g.enablePlaybackSpeedLogging=e}),98);
__d("SubscriptionsHandler",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){return a.remove||a.reset||a.unsubscribe||a.cancel||a.dispose}function j(a){i(a).call(a)}a=function(){function a(){this.$1=[]}var b=a.prototype;b.addSubscriptions=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b.every(i)||h(0,3659);this.$1!=null?this.$1=this.$1.concat(b):b.forEach(j)};b.engage=function(){this.$1==null&&(this.$1=[])};b.release=function(){this.$1!=null&&(this.$1.forEach(j),this.$1=null)};b.releaseOne=function(a){var b=this.$1;if(b==null)return;var c=b.indexOf(a);c!==-1&&(j(a),b.splice(c,1),b.length===0&&(this.$1=null))};return a}();g["default"]=a}),98);
__d("VideoPlaybackQuality",[],(function(a,b,c,d,e,f){function a(a){if(typeof a.getVideoPlaybackQuality==="function")return a.getVideoPlaybackQuality().droppedVideoFrames;a=a.webkitDroppedFrameCount;return typeof a==="number"?a:0}function b(a){if(typeof a.getVideoPlaybackQuality==="function")return a.getVideoPlaybackQuality().totalVideoFrames;a=a.webkitDecodedFrameCount;return typeof a==="number"?a:0}f.getDroppedFrames=a;f.getTotalFrames=b}),66);
__d("isSSR",["ExecutionEnvironment","XPlatReactEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;a=d("XPlatReactEnvironment").isWeb()&&!(h||(h=c("ExecutionEnvironment"))).canUseDOM;b=a;g["default"]=b}),98);
__d("VideoPlayerConnectionQuality",["isSSR"],(function(a,b,c,d,e,f,g){"use strict";var h={POOR:"POOR",MODERATE:"MODERATE",GOOD:"GOOD",EXCELLENT:"EXCELLENT"},i=[{bandwidth:5e5,connectionQuality:h.POOR},{bandwidth:2e6,connectionQuality:h.MODERATE},{bandwidth:1e7,connectionQuality:h.GOOD}],j=100,k=null,l=null;a=function(a){if(c("isSSR"))return"MODERATE";if(k!==null&&l!==null&&k>=Date.now()-j)return l;a=a();var b=null;if(a!=null)for(var d=0;d<i.length;d++)if(a<i[d].bandwidth){b=i[d].connectionQuality;break}b===null&&(b=h.EXCELLENT);k=Date.now();l=b;return b};g.evaluate=a}),98);
__d("VideoPlayerContextSensitiveConfigUtils",[],(function(a,b,c,d,e,f){"use strict";var g=function(a,b){return b.every(function(b){return a[b.name]===b.value})};a=function(a,b){return b.find(function(b){return g(a,b.contexts)})};f.getFirstMatchingValueAndContextTargets=a}),66);
__d("VideoPlayerContextSensitiveConfigResolver",["VideoPlayerContextSensitiveConfigPayload","VideoPlayerContextSensitiveConfigUtils","cr:1724253"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1={},this.$2={},a==null?(this.$3=c("VideoPlayerContextSensitiveConfigPayload").static_values,this.$4=c("VideoPlayerContextSensitiveConfigPayload").context_sensitive_values):(this.$3=a.staticValues,this.$4=a.contextSensitiveValues)}var e=a.prototype;e.setContexts=function(a){this.$1=a,this.$2=this.$5(a)};e.getValue=function(a){if(this.$2[a]!=null)return this.$2[a];return this.$3[a]!=null?this.$3[a]:null};e.$5=function(a){var b=this;return Object.keys(this.$4).reduce(function(c,e){var f=b.$4[e];if(f!=null){f=d("VideoPlayerContextSensitiveConfigUtils").getFirstMatchingValueAndContextTargets(a,f);f!=null&&(c[e]=f.value)}return c},{})};a.getPayload=function(){return c("VideoPlayerContextSensitiveConfigPayload")};a.getSources=function(){return b("cr:1724253")};return a}();g["default"]=a}),98);
__d("VideoPlayerControlsBottomRowAddOnContext",["react","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));d=h;var j=d.useContext,k=d.useEffect,l=d.useState,m=i.createContext(null);function a(a){a=a.children;var b=c("useStable")(function(){var a=null,b=null,c=null;return{getBottomRowAddOn:function(){return b},initialize:function(d){c=function(a){b=a,d(a)};if(a==null)return;c(a);a=null},setBottomRowAddOn:function(b){if(c==null){a=b;return}c(b)}}});return i.jsx(m.Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=j(m);a=l(a);var c=a[0],d=a[1];k(function(){if(b==null)return;b.initialize(d)},[b]);return c}b.displayName=b.name+" [from "+f.id+"]";function e(a){var b=j(m);k(function(){if(b==null)return;b.setBottomRowAddOn(a)},[a,b])}g.VideoPlayerControlsBottomRowAddOnContext=m;g.VideoPlayerControlsBottomRowAddOnContextProvider=a;g.useVideoPlayerControlsBottomRowAddOn=b;g.useSetVideoPlayerControlsBottomRowAddOn=e}),98);
__d("VideoPlayerInteractionOverlay.react",["VideoPlayerHooks","createVideoStateHook","performanceNow","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react")),m=k.useCallback,n={hiddenCursor:{cursor:"xjfk50j",$$css:!0},pointer:{cursor:"x1ypdohk",$$css:!0},root:{bottom:"x1ey2m1c",boxSizing:"x9f619",end:"xds687c",start:"x17qophe",position:"x10l6tqk",top:"x13vifvy",$$css:!0}};b=d("createVideoStateHook").createVideoStateHook(null);var o=b.setterHook;e=b.valueHook;function a(a){var b=a.children,e=a.pressInteraction,f=a.ref,g=a.style;a=a.xstyle;var k=o(),p=m(function(a){a.preventDefault(),k({left:a.clientX,time:(h||(h=c("performanceNow")))(),top:a.clientY})},[k]),q=e==null?void 0:e.handler,r=e==null?void 0:e.onPressStart,s=e==null?void 0:e.onMouseEnter;e=e==null?void 0:e.onMouseLeave;var t=(j||(j=d("VideoPlayerHooks"))).useIsFullscreen(),u=j.useIsMouseIdle();return l.jsx("div",{className:(i||(i=c("stylex")))(n.root,!!q&&n.pointer,t&&u&&n.hiddenCursor,a),onClick:q,onContextMenu:p,onMouseEnter:s,onMouseLeave:e,onPointerDown:r,ref:f,role:"presentation",style:g,children:b})}a.displayName=a.name+" [from "+f.id+"]";b=a;f=e;g.VideoPlayerInteractionOverlay=b;g.useLastRightClick=f}),98);
__d("VideoPlayerShakaGlobalConfig",["VideoPlayerContextSensitiveConfigResolver"],(function(a,b,c,d,e,f,g){var h=new(c("VideoPlayerContextSensitiveConfigResolver"))(),i={};a=function(a){i=a};b=function(a,b){if(!!i&&typeof i[a]==="boolean")return i[a];a=h.getValue(a);return a!=null&&typeof a==="boolean"?a:b};d=function(a,b){if(!!i&&typeof i[a]==="number")return i[a];a=h.getValue(a);return a!=null&&typeof a==="number"?a:b};e=function(a,b){if(!!i&&typeof i[a]==="string")return i[a];a=h.getValue(a);return a!=null&&typeof a==="string"?a:b};g.setGlobalOverrideConfig=a;g.getBool=b;g.getNumber=d;g.getString=e}),98);
__d("VideoPlayerOzWWWGlobalConfig",["VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";var h="oz_www_";a={getBool:function(a,b){return d("VideoPlayerShakaGlobalConfig").getBool(h+a,b)},getNumber:function(a,b){return d("VideoPlayerShakaGlobalConfig").getNumber(h+a,b)},getString:function(a,b){return d("VideoPlayerShakaGlobalConfig").getString(h+a,b)}};b=a;g["default"]=b}),98);
__d("useRouteProductAttribution",["CometRouteProductAttributionContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){return i(c("CometRouteProductAttributionContext"))}g["default"]=a}),98);
__d("VirtualizationContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext();g["default"]=b}),98);
__d("getErrorNameFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"MEDIA_ERR_UNKNOWN_"+((a=a)!=null?a:"UNDEFINED")}}f["default"]=a}),66);
__d("getImageSourceURLFromImageish",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(typeof a==="string")return a;return a!=null&&typeof a==="object"&&(!a.sprited&&a.uri&&typeof a.uri==="string")?a.uri:""}f["default"]=a}),66);
__d("getOwnObjectValues",[],(function(a,b,c,d,e,f){function a(a){return Object.keys(a).map(function(b){return a[b]})}f["default"]=a}),66);
__d("getVideoBrowserTabId",["guid"],(function(a,b,c,d,e,f,g){var h=c("guid")().slice(-8);function a(){return h}g["default"]=a}),98);
__d("polarisManifestHasUnsupportedCodecs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b===void 0&&(b="mse");if(b==="mmse"&&window.ManagedMediaSource==null||b!=="mmse"&&window.MediaSource==null||a==null||typeof a!=="string")return!1;var c=/mimeType=\"([^\"]*)\"\s*codecs=\"([^\"]*)\"/g,d;while(d=c.exec(a)){d=d[1]+'; codecs="'+d[2]+'"';if(b==="mmse"){if(!window.ManagedMediaSource.isTypeSupported(d))return!0}else if(!window.MediaSource.isTypeSupported(d))return!0}return!1}f["default"]=a}),66);
__d("useParentRoute",["CometRouterParentRouteContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){return i(c("CometRouterParentRouteContext"))}g["default"]=a}),98);
__d("usePlayerOriginRouteTracePolicy",["CometNotificationsRootContext","CometRouteRenderType","react","useCometRouteTracePolicy","useCometRouterState","useParentRoute","useRoutePassthroughProps"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(c("CometNotificationsRootContext"));a=a.isNotificationsRoute;var b=c("useCometRouteTracePolicy")(),e=d("CometRouteRenderType").useIsPushView(),f=c("useParentRoute")(),g=c("useCometRouterState")(),h=c("useRoutePassthroughProps")();if((h==null?void 0:h.isARLTW)===!0)return"comet.watch.arltw";h=b==="comet.videos.tahoe";var j=b==="comet.stories.viewer",k=b==="comet.reels.home";if(e){if(h)return"unknown";if(j)return b;if(k&&(f==null?void 0:f.tracePolicy)==null&&g!=null){e=g.main;j=g.pushViewStack;k=j&&j.length>1?j[j.length-2]:e;g=k.route;return(j=g.tracePolicy)!=null?j:b}}return a&&!h?b:(e=f==null?void 0:f.tracePolicy)!=null?e:b}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("DateStrings",["fbt"],(function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q;function a(a){n||(n=[h._(/*BTDS*/"__JHASH__kRDmnexoZ4c__JHASH__"),h._(/*BTDS*/"__JHASH__Bn6mK_CYpOQ__JHASH__"),h._(/*BTDS*/"__JHASH__0CKO3e6zlkG__JHASH__"),h._(/*BTDS*/"__JHASH__knM-pwAZFhd__JHASH__"),h._(/*BTDS*/"__JHASH__9awSVez1lYX__JHASH__"),h._(/*BTDS*/"__JHASH__e-RtDb71wOv__JHASH__"),h._(/*BTDS*/"__JHASH__hC9TTGKI1In__JHASH__")]);return n[a]}function b(a){p||(p=[h._(/*BTDS*/"__JHASH__YUdS_z7d_6d__JHASH__"),h._(/*BTDS*/"__JHASH__Ovx6Ymroe_A__JHASH__"),h._(/*BTDS*/"__JHASH__eFqKUz2_kl3__JHASH__"),h._(/*BTDS*/"__JHASH__E_RiUxD0fWh__JHASH__"),h._(/*BTDS*/"__JHASH__C3_a7H_J7rx__JHASH__"),h._(/*BTDS*/"__JHASH__5CNevM2J02m__JHASH__"),h._(/*BTDS*/"__JHASH__4EW2wfH5WZD__JHASH__")]);return p[a]}function c(a){o||(o=[h._(/*BTDS*/"__JHASH__2PszcrK7vzP__JHASH__"),h._(/*BTDS*/"__JHASH__TlMpxfMswL-__JHASH__"),h._(/*BTDS*/"__JHASH__HgsLhEx6Rq0__JHASH__"),h._(/*BTDS*/"__JHASH__av9KuRGnSoy__JHASH__"),h._(/*BTDS*/"__JHASH__Y5eYWyns-vW__JHASH__"),h._(/*BTDS*/"__JHASH__Pcyy4Au35vm__JHASH__"),h._(/*BTDS*/"__JHASH__RuPRqeVJ1f___JHASH__")]);return o[a]}function d(a){q||(q=[h._(/*BTDS*/"__JHASH__I8rDd8HrSIY__JHASH__"),h._(/*BTDS*/"__JHASH__mJbm9skBmiP__JHASH__"),h._(/*BTDS*/"__JHASH__ZG1m85BJ2mG__JHASH__"),h._(/*BTDS*/"__JHASH__3alVL8FSzF2__JHASH__"),h._(/*BTDS*/"__JHASH__grH3eggt_PS__JHASH__"),h._(/*BTDS*/"__JHASH__o7IIktT8uZl__JHASH__"),h._(/*BTDS*/"__JHASH__OO7gVuw6-67__JHASH__")]);return q[a]}function r(){i=[h._(/*BTDS*/"__JHASH__U3IUNjyAWys__JHASH__"),h._(/*BTDS*/"__JHASH__8KKnx7Y4OWL__JHASH__"),h._(/*BTDS*/"__JHASH__Au0OETL-blc__JHASH__"),h._(/*BTDS*/"__JHASH__Z7N5jsVLWYq__JHASH__"),h._(/*BTDS*/"__JHASH__YbgiKmRzTZL__JHASH__"),h._(/*BTDS*/"__JHASH__WkH27C2YOr9__JHASH__"),h._(/*BTDS*/"__JHASH__c4u4vrQldeW__JHASH__"),h._(/*BTDS*/"__JHASH__tT8qwNVc_bY__JHASH__"),h._(/*BTDS*/"__JHASH__38VZPXukBcq__JHASH__"),h._(/*BTDS*/"__JHASH__oxEkc0tozky__JHASH__"),h._(/*BTDS*/"__JHASH__TydaAthEBOx__JHASH__"),h._(/*BTDS*/"__JHASH__r3FuzNa_oUv__JHASH__")]}function e(a){i||r();return i[a-1]}function f(){i||r();return i.slice()}function s(a){l||(l=[h._(/*BTDS*/"__JHASH__j3lAMkdtm8D__JHASH__"),h._(/*BTDS*/"__JHASH__W3ogesAukPo__JHASH__"),h._(/*BTDS*/"__JHASH__VbTrxXWL9LO__JHASH__"),h._(/*BTDS*/"__JHASH__tXlQvgnA6QB__JHASH__"),h._(/*BTDS*/"__JHASH__Qe2L3rtt4jY__JHASH__"),h._(/*BTDS*/"__JHASH__tzOs87oUqbm__JHASH__"),h._(/*BTDS*/"__JHASH__n0EAUTpeC58__JHASH__"),h._(/*BTDS*/"__JHASH___4QPpdl9jy3__JHASH__"),h._(/*BTDS*/"__JHASH__kTuP_o9kcON__JHASH__"),h._(/*BTDS*/"__JHASH__PfWuUW912mj__JHASH__"),h._(/*BTDS*/"__JHASH__z4eG5BJcKe2__JHASH__"),h._(/*BTDS*/"__JHASH__5oFCWzoMCPo__JHASH__")]);return l[a-1]}function t(a){j||(j=[h._(/*BTDS*/"__JHASH__DsKYj1oLo19__JHASH__"),h._(/*BTDS*/"__JHASH__TCuDpRnz2mT__JHASH__"),h._(/*BTDS*/"__JHASH__khl_0IT7mYX__JHASH__"),h._(/*BTDS*/"__JHASH__3Y3hi7sR1cI__JHASH__"),h._(/*BTDS*/"__JHASH__IHrjywEAvHt__JHASH__"),h._(/*BTDS*/"__JHASH__8kF4Ak1BW3a__JHASH__"),h._(/*BTDS*/"__JHASH__KKfFBFLyAgh__JHASH__"),h._(/*BTDS*/"__JHASH__XOJ0ufAxR5d__JHASH__"),h._(/*BTDS*/"__JHASH__ZnuGT3uobCp__JHASH__"),h._(/*BTDS*/"__JHASH__9OpDbaaGtTr__JHASH__"),h._(/*BTDS*/"__JHASH__-J5NrwJB53G__JHASH__"),h._(/*BTDS*/"__JHASH__HtgyaBTmaos__JHASH__")]);return j[a-1]}function u(a){k||(k=[h._(/*BTDS*/"__JHASH__VoVPp7VE97p__JHASH__"),h._(/*BTDS*/"__JHASH__TiP-2xvGcWh__JHASH__"),h._(/*BTDS*/"__JHASH__ju79mFQ_J1L__JHASH__"),h._(/*BTDS*/"__JHASH__leLBmZcPlvt__JHASH__"),h._(/*BTDS*/"__JHASH__sAWIM7lXq_F__JHASH__"),h._(/*BTDS*/"__JHASH__cbeCOd2W11J__JHASH__"),h._(/*BTDS*/"__JHASH__3U-gTYEZ8gT__JHASH__"),h._(/*BTDS*/"__JHASH___9B2djcyQhj__JHASH__"),h._(/*BTDS*/"__JHASH__fcwpPGGy3C5__JHASH__"),h._(/*BTDS*/"__JHASH__TsO3woeUmUo__JHASH__"),h._(/*BTDS*/"__JHASH__TS8b5DqPYc0__JHASH__"),h._(/*BTDS*/"__JHASH__FyOcyxpoDK6__JHASH__")]);return k[a-1]}function v(a){m||(m=["",h._(/*BTDS*/"__JHASH__kgS-kTTebvA__JHASH__"),h._(/*BTDS*/"__JHASH__PoFxBBtz8zw__JHASH__"),h._(/*BTDS*/"__JHASH__YBu_d81rLYN__JHASH__"),h._(/*BTDS*/"__JHASH___dd9pSVEWhQ__JHASH__"),h._(/*BTDS*/"__JHASH__utwmpovoP9t__JHASH__"),h._(/*BTDS*/"__JHASH__Qg6aLKsTxP6__JHASH__"),h._(/*BTDS*/"__JHASH__3NvZ16eqNhs__JHASH__"),h._(/*BTDS*/"__JHASH__OCFkSiFBu4g__JHASH__"),h._(/*BTDS*/"__JHASH__ntqZQ2awzy6__JHASH__"),h._(/*BTDS*/"__JHASH__lZeKEl9HM0Y__JHASH__"),h._(/*BTDS*/"__JHASH__JXCL249ubYt__JHASH__"),h._(/*BTDS*/"__JHASH__s8NeUaTiQSK__JHASH__"),h._(/*BTDS*/"__JHASH__M9rR63ZDVJg__JHASH__"),h._(/*BTDS*/"__JHASH__Mack7POOKmJ__JHASH__"),h._(/*BTDS*/"__JHASH__lVy7FkMjYVB__JHASH__"),h._(/*BTDS*/"__JHASH__ghJcI27I4P1__JHASH__"),h._(/*BTDS*/"__JHASH__6szdczmyHdq__JHASH__"),h._(/*BTDS*/"__JHASH__LDAc2xxYdM4__JHASH__"),h._(/*BTDS*/"__JHASH__wsIr3m2BjUW__JHASH__"),h._(/*BTDS*/"__JHASH___9rIVmXL7rL__JHASH__"),h._(/*BTDS*/"__JHASH__MnQZ282iK_0__JHASH__"),h._(/*BTDS*/"__JHASH__L33d1oEPeCr__JHASH__"),h._(/*BTDS*/"__JHASH__hjxQNJl9gEN__JHASH__"),h._(/*BTDS*/"__JHASH__BcmYmPTnObY__JHASH__"),h._(/*BTDS*/"__JHASH__ODyQeBDQBIs__JHASH__"),h._(/*BTDS*/"__JHASH__RskCzcAM8LN__JHASH__"),h._(/*BTDS*/"__JHASH__5WsyHDqOUBa__JHASH__"),h._(/*BTDS*/"__JHASH__VCG-VjG5RBC__JHASH__"),h._(/*BTDS*/"__JHASH__DsafOmqGRqB__JHASH__"),h._(/*BTDS*/"__JHASH__rh5lCQfsKaN__JHASH__"),h._(/*BTDS*/"__JHASH__Yxv-oP9L52u__JHASH__")]);return m[a]}function w(a){switch(a){case 1:return h._(/*BTDS*/"__JHASH__vgDiYSO4D18__JHASH__");case 2:return h._(/*BTDS*/"__JHASH__yIho--MGzhd__JHASH__");case 3:return h._(/*BTDS*/"__JHASH__Mr-vl7ybhSv__JHASH__");case 4:return h._(/*BTDS*/"__JHASH__BZIPNdku1Iy__JHASH__");case 5:return h._(/*BTDS*/"__JHASH__m-6hvKNWaTG__JHASH__");case 6:return h._(/*BTDS*/"__JHASH__wWqjYlrkNBH__JHASH__");case 7:return h._(/*BTDS*/"__JHASH__guZWXE222BT__JHASH__");case 8:return h._(/*BTDS*/"__JHASH__kWv6eHETdUi__JHASH__");case 9:return h._(/*BTDS*/"__JHASH__z7G_mkSQ-Vp__JHASH__");case 10:return h._(/*BTDS*/"__JHASH__7rXPmxBp1HA__JHASH__");case 11:return h._(/*BTDS*/"__JHASH__8g5Bsbx1ntS__JHASH__");case 12:return h._(/*BTDS*/"__JHASH__nFdyXihWX4G__JHASH__");case 13:return h._(/*BTDS*/"__JHASH__O9-p7jWhZMi__JHASH__");case 14:return h._(/*BTDS*/"__JHASH__juGaZXguzbw__JHASH__");case 15:return h._(/*BTDS*/"__JHASH__t-6cIQHx7zC__JHASH__");case 16:return h._(/*BTDS*/"__JHASH__wqchbLBpuzR__JHASH__");case 17:return h._(/*BTDS*/"__JHASH__Z-bLignwyiH__JHASH__");case 18:return h._(/*BTDS*/"__JHASH__ZPrynDoTudj__JHASH__");case 19:return h._(/*BTDS*/"__JHASH__9nPymx7YDyb__JHASH__");case 20:return h._(/*BTDS*/"__JHASH___ZrW3bFPgTr__JHASH__");case 21:return h._(/*BTDS*/"__JHASH__XPYxgF4SXkG__JHASH__");case 22:return h._(/*BTDS*/"__JHASH__siaQD07Sf09__JHASH__");case 23:return h._(/*BTDS*/"__JHASH__uymTAdRpc45__JHASH__");case 24:return h._(/*BTDS*/"__JHASH__5uz8UT0C04G__JHASH__");case 25:return h._(/*BTDS*/"__JHASH__g4Zn_nnZ0uM__JHASH__");case 26:return h._(/*BTDS*/"__JHASH__JfIlYLuuxft__JHASH__");case 27:return h._(/*BTDS*/"__JHASH__6c7RsCoaOQ6__JHASH__");case 28:return h._(/*BTDS*/"__JHASH__lPaPgjA3eSI__JHASH__");case 29:return h._(/*BTDS*/"__JHASH__1wsyMnSESSk__JHASH__");case 30:return h._(/*BTDS*/"__JHASH__Y53KSGgC1Fh__JHASH__");case 31:return h._(/*BTDS*/"__JHASH__w0e0M9zDCki__JHASH__");default:throw new Error("Invalid day of month.")}}function x(){return h._(/*BTDS*/"__JHASH__P452d9KfMZB__JHASH__")}function y(){return h._(/*BTDS*/"__JHASH__14B8uRJNqzB__JHASH__")}function z(){return h._(/*BTDS*/"__JHASH__ZbRG7ZxcL_s__JHASH__")}function A(){return h._(/*BTDS*/"__JHASH__Yvba8YT7D76__JHASH__")}function B(){return h._(/*BTDS*/"__JHASH__mY3ExKoiSbu__JHASH__")}function C(){return h._(/*BTDS*/"__JHASH__6X7o_ijb67M__JHASH__")}function D(){return h._(/*BTDS*/"__JHASH__bhyhew9ts33__JHASH__")}function E(){return h._(/*BTDS*/"__JHASH__fTaCK1AHc1___JHASH__")}function F(){return h._(/*BTDS*/"__JHASH__DRLxNWH7L4s__JHASH__")}function G(){return h._(/*BTDS*/"__JHASH__orXzp-0tokx__JHASH__")}function H(a){return a<12?h._(/*BTDS*/"__JHASH__ufsASNxZ34K__JHASH__"):h._(/*BTDS*/"__JHASH__Tnd5tvqN3Qj__JHASH__")}function I(a){return a<12?h._(/*BTDS*/"__JHASH__wca5cRZ0pth__JHASH__"):h._(/*BTDS*/"__JHASH__-AlZvLqfvQd__JHASH__")}g.getWeekdayName=a;g.getUppercaseWeekdayName=b;g.getWeekdayNameShort=c;g.getUppercaseWeekdayNameShort=d;g._initializeMonthNames=r;g.getMonthName=e;g.getMonthNames=f;g.getUppercaseMonthName=s;g.getMonthNameShort=t;g.getUppercaseMonthNameShort=u;g.getOrdinalSuffix=v;g.getDayOfMonth=w;g.getDayLabel=x;g.getMonthLabel=y;g.getYearLabel=z;g.getHourLabel=A;g.getMinuteLabel=B;g.getDayPlaceholder=C;g.getMonthPlaceholder=D;g.getYearPlaceholder=E;g.getHourPlaceholder=F;g.getMinutePlaceholder=G;g.get12HourClockSuffix=H;g.getUppercase12HourClockSuffix=I}),226);
__d("IntlDateFormatsCLDRWidthEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({FULL:"full",LONG:"long",MEDIUM:"medium",SHORT:"short"});f["default"]=a}),66);
__d("RegionDatetimePatterns",[],(function(a,b,c,d,e,f){a=Object.freeze({DATE_SHORT:"date_short",DATETIME_SHORT_SHORT:"dateTime_short_short",TIME_SHORT:"time_short",TIME_MEDIUM:"time_medium",J:"j"});f["default"]=a}),66);
__d("getCLDRLocalizedFormat",["CLDRDateFormatConfig","FBLogger","IntlDateFormatsCLDRWidthEnum","RegionDatetimePatterns","flipObject","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("CLDRDateFormatConfig").CLDRConfigeratorFormats,h=b("CLDRDateFormatConfig").CLDRRegionalConfigeratorFormats,i=b("flipObject")(b("RegionDatetimePatterns"));function a(a){if(a==null)throw b("unrecoverableViolation")('Format: "'+a+'", not supported by configurator.',"internationalization");var c,d,e=a.split("_"),f=e[0];e=e.slice(1);var l=f+"Formats";a in i?d=h:d=g;switch(l){case"dateFormats":case"timeFormats":var m=j(e[0]);if(m==null)throw b("unrecoverableViolation")('Format: "'+a+'", category: "'+l+'", with unsupported width: "undefined"',"internationalization");c=d[l][m];if(c==null)throw b("unrecoverableViolation")('Format: "'+a+'", category: "'+l+'", '+('width: "'+m+'", with unsupported localization'),"internationalization");break;case"dateTimeFormats":m=j(e[0]);e=j(e[1]);if(m==null||e==null)throw b("unrecoverableViolation")('Format: "'+a+'", category: "'+l+'", with unsupported width: dateFormatKey="undefined" timeFormatKey="undefined"',"internationalization");c=d[l][m];var n=d.dateFormats[m],o=d.timeFormats[e];if(c==null)throw b("unrecoverableViolation")('Format: "'+a+'", category: "'+l+'", '+('date width: "'+m+'", and time width: ')+('"'+e+'", with unsupported localization'),"internationalization");c=c.replace("{0}",o).replace("{1}",n);break;default:l="availableFormats";m=f;m.includes("j")&&(m=k(m,d.timeFormats));c=d[l][m];if(c==null)throw b("unrecoverableViolation")('Format: "'+a+'", with key: "'+m+'", not supported by CLDR',"internationalization")}return c}function j(a){if(a==null)throw b("unrecoverableViolation")("Expected CLDR width key to not be null","internationalization");return b("IntlDateFormatsCLDRWidthEnum")[a.toUpperCase()]}function k(a,c){var d;c=c["short"];c==null?(b("FBLogger")("formatDate").blameToPreviousFile().warn('CLDR `timeFormat`, width `short` required for 24 hour localization not found for availableKey: "%s"',a),d="h"):d=c.includes("H")?"H":"h";return a.replace("j",d)}e.exports=a}),null);
__d("intlGetDateNumerics",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b.utc===!0;b?b={dateDay:a.getUTCDate(),dateDayOfWeek:a.getUTCDay(),dateMonth:a.getUTCMonth(),dateYear:a.getUTCFullYear(),dateHours:a.getUTCHours(),dateMinutes:a.getUTCMinutes(),dateSeconds:a.getUTCSeconds(),dateMilliseconds:a.getUTCMilliseconds()}:b={dateDay:a.getDate(),dateDayOfWeek:a.getDay(),dateMonth:a.getMonth(),dateYear:a.getFullYear(),dateHours:a.getHours(),dateMinutes:a.getMinutes(),dateSeconds:a.getSeconds(),dateMilliseconds:a.getMilliseconds()};return b}f["default"]=a}),66);
__d("intlRenderJSDateSymbol",["DateStrings","padNumber","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f,g){g===void 0&&(g=0);e=e.skipSuffixLocalization===!0;g=g;var h="";switch(b){case"\\":g++;if(f==null)throw c("unrecoverableViolation")("Only deprecated calls to `intlRenderJSDateSymbol()` use `localizedJSFormat`.","internationalization");h=f.charAt(g);break;case"d":h=c("padNumber")(a.dateDay,2);break;case"j":h=a.dateDay;break;case"S":h=d("DateStrings").getOrdinalSuffix(a.dateDay);break;case"D":h=d("DateStrings").getWeekdayNameShort(a.dateDayOfWeek);break;case"l":h=d("DateStrings").getWeekdayName(a.dateDayOfWeek);break;case"F":case"f":h=d("DateStrings").getMonthName(a.dateMonth+1);break;case"M":h=d("DateStrings").getMonthNameShort(a.dateMonth+1);break;case"m":h=c("padNumber")(a.dateMonth+1,2);break;case"n":h=a.dateMonth+1;break;case"Y":h=a.dateYear;break;case"y":h=(""+a.dateYear).slice(2);break;case"a":e?h=a.dateHours<12?"am":"pm":h=d("DateStrings").get12HourClockSuffix(a.dateHours);break;case"A":e?h=a.dateHours<12?"AM":"PM":h=d("DateStrings").getUppercase12HourClockSuffix(a.dateHours);break;case"g":a.dateHours===0||a.dateHours===12?h="12":h=a.dateHours%12;break;case"G":h=a.dateHours;break;case"h":a.dateHours===0||a.dateHours===12?h="12":h=c("padNumber")(a.dateHours%12,2);break;case"H":h=c("padNumber")(a.dateHours,2);break;case"i":h=c("padNumber")(a.dateMinutes,2);break;case"s":h=c("padNumber")(a.dateSeconds,2);break;case"X":h=c("padNumber")(a.dateMilliseconds,3);break;default:h=b}return{idx:g,rendered:String(h)}}g["default"]=a}),98);
__d("intlRenderCLDRDate",["CLDRDateFormatConfig","intlRenderJSDateSymbol","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=/\w+/;function a(a,c,d){var e=b("CLDRDateFormatConfig").intlDateSpecialChars,f="",g="",i=!1,j=[],k;a=a.split(e.cldrDelimiter+e.singleQuote).join(e.singleQuoteHolder);for(var l=0,m=a.length;l<m;l++){var n=a.charAt(l);!i?n===e.cldrDelimiter?i=!0:f.length===0||f[0]===n?f+=n:n===e.singleQuoteHolder?f+=e.singleQuote:(k=h(f,d,c),j.push(k.rendered),f=n):(f.length!==0&&(k=h(f,d,c),j.push(k.rendered),f=""),n===e.cldrDelimiter?(i=!1,j.push(g),g=""):n===e.singleQuoteHolder?g+=e.singleQuote:g+=n)}if(g.length!==0)throw b("unrecoverableViolation")('Format: "'+a+'" must contain closing str literal delimiter',"internationalization");f.length!==0&&(k=h(f,d,c),j.push(k.rendered));return j.join("")}function h(a,c,d){a=i(a);return b("intlRenderJSDateSymbol")(c,a,d)}function i(a){if(a in b("CLDRDateFormatConfig").CLDRToPHPSymbolConversion)return b("CLDRDateFormatConfig").CLDRToPHPSymbolConversion[a];if(g.test(a))throw b("unrecoverableViolation")('Unsupported CLDR symbol: "'+a+'". If string literal, wrap in delimiters',"internationalization");return a}e.exports=a}),null);
__d("formatDate",["CLDRDateFormatConfig","DateFormatConfig","FBLogger","IsInternSite","getCLDRLocalizedFormat","intlGetDateNumerics","intlRenderCLDRDate","intlRenderJSDateSymbol","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=Object.freeze({today:null,yesterday:null,thisWeek:null,thisMonth:null,thisYear:null,withinDay:null,withinWeek:null,withinMonth:null,withinYear:null,older:null,future:null,allOtherTimes:null});function h(a,b,d,e){a=a;d=d||{skipSuffixLocalization:!1,skipPatternLocalization:!1,utc:!1,formatInternal:!1,throwCLDRError:!1};if(b==null||b===""||a==null||!(a||a===0))return"";typeof a==="string"&&(isNaN(Number(a))&&c("FBLogger")("i18n-formatDate").event("date_string_must_be_timestamp").blameToPreviousFile().mustfix("The date passed to formatDate is a string, but not a timestamp. formatDate expects strings to be a string representation of a Unix "+('timestamp but was passed "'+a+'"')),a=parseInt(a,10));typeof a==="number"&&(a=new Date(a*1e3));if(!(a instanceof Date))throw c("unrecoverableViolation")("The date passed to formatDate must be either a unix timestamp or JavaScript date object.","internationalization");if(isNaN(a.getTime()))throw c("unrecoverableViolation")("Invalid date passed to formatDate","internationalization");a.getTime()>=1e15&&c("FBLogger")("i18n-formatDate").event("date_too_far_in_future").blameToPreviousFile().info("The date passed to formatDate is too far in the future. Did you mix up milliseconds/seconds?");b=k(a,b);a=c("intlGetDateNumerics")(a,d);return i(b,a,d,e)}h.DEFAULT_FORMAT="M j, Y g:i A";h.periodNames=Object.freeze(Object.keys(a));function i(a,b,d,e){var f=a,g=!!d.skipPatternLocalization,h=d.formatInternal===!0;if(!g&&(h||!c("IsInternSite").is_intern_site))if(a in c("CLDRDateFormatConfig").supportedPHPFormatsKeys)try{g=c("CLDRDateFormatConfig").supportedPHPFormatsKeys[a];h=c("getCLDRLocalizedFormat")(g);return c("intlRenderCLDRDate")(h,d,b)}catch(a){c("FBLogger")("i18n-formatDate").event("CLDR_date_format_render_error").blameToPreviousFile().catching(a).mustfix("CLDR date format render error");if(d.throwCLDRError===!0)throw a}else if(c("DateFormatConfig").formats[a])f=c("DateFormatConfig").formats[a];else if(!c("IsInternSite").is_intern_site)if(a.length!==1)throw c("unrecoverableViolation")("Trying to localize an unsupported date format: `"+a+"`","internationalization");return j(f,d,b,e)}function j(a,b,d,e){var f=[];for(var g=0;g<a.length;g++){var h=void 0;e===!0&&a.charAt(g)==="a"?(h="A",f.push(" ")):h=a.charAt(g);h=c("intlRenderJSDateSymbol")(d,h,b,a,g);f.push(h.rendered);g=h.idx}return f.join("")}function k(a,b){var d=h.DEFAULT_FORMAT;if(typeof b==="string")return b;else if(typeof b==="object"){var e=a.getTime();for(var f=l(),g=Array.isArray(f),i=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;var k=b[j.name];if(k!=null&&j.start<=e&&e<j.end)return k}c("FBLogger")("i18n-formatDate").event("matching_period_format_not_found").blameToPreviousFile().warn('Matching period not found for date "%s", using default format "%s". Current timestamp: "%s"',e,d,Date.now());return d}else{c("FBLogger")("i18n-formatDate").event("invalid_format_argument").blameToPreviousFile().warn('Called with invalid format "%s" (type: %s) for date "%s", using default: %s',b,typeof b,a.getTime(),d);return d}}function l(){var a=new Date(),b=a.getTime(),d=a.getFullYear(),e=a.getMonth(),f=new Date(d,a.getMonth()+1,0).getDate(),g=new Date(d,1,29).getMonth()===1?366:365,h=1e3*60*60*24,i=new Date(a.setHours(0,0,0,0)),j=new Date(d,e,i.getDate()+1);a=a.getDate()-(a.getDay()-c("DateFormatConfig").weekStart+6)%7;var k=new Date(b).setDate(a);a=new Date(b).setDate(a+7);var l=new Date(d,e,1);e=new Date(d,e,f+1);var m=new Date(d,0,1);d=new Date(d+1,0,1);return[{name:"today",start:i.getTime(),end:j.getTime()},{name:"withinDay",start:b-h,end:b+h},{name:"yesterday",start:i.getTime()-h,end:i.getTime()-1},{name:"thisWeek",start:k,end:a},{name:"withinWeek",start:b-h*7,end:b+h*7},{name:"thisMonth",start:l.getTime(),end:e.getTime()},{name:"withinMonth",start:b-h*f,end:b+h*f},{name:"thisYear",start:m.getTime(),end:d.getTime()},{name:"withinYear",start:b-h*g,end:b+h*g},{name:"older",start:-Infinity,end:b},{name:"future",start:b,end:+Infinity},{name:"allOtherTimes",start:-Infinity,end:+Infinity}]}b=h;g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("BTManifestName",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({MAIN:"main",LONGTAIL:"longtail"});c=a;f["default"]=c}),66);
__d("BtLongtailHashFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5779");b=d("FalcoLoggerInternal").create("bt_longtail_hash",a);e=b;g["default"]=e}),98);
__d("CometBTManifestLoader",["BootloaderEvents","BtLongtailHashFalcoEvent","ClientConsistencyEventEmitter","FBLogger","ODS","Promise","SiteData","TrustedTypes","XHRRequest","asyncToGeneratorRuntime","err","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Set();function k(a,b,c,d){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d,e,f){var g=(yield new(i||(i=b("Promise")))(function(b,g){new(c("XHRRequest"))(a+"/btmanifest/"+e+"/"+d+"/"+f).setMethod("GET").setResponseHandler(function(a){return b(a.toString())}).setErrorHandler(function(a){return g(a)}).send()}));if(typeof g!=="string")throw c("FBLogger")("binary_transparency","bt_invalid_manifest_response").mustfixThrow("Invalid response from BT manifest endpoint");return g});return l.apply(this,arguments)}function m(a,b){(h||(h=d("ODS"))).bumpEntityKey(454,"obc.www.all","bt.comet_manifest_loader."+Number(d("SiteData").compose_bootloads)+"."+d("SiteData").pkg_cohort+"."+a+"."+b)}function n(a,b,d){var e;if(d instanceof Error)e=d;else if(typeof d==="object"){var f=JSON.stringify(d);e=c("err")("(XHRRequest): %s",f.slice(0,300)+(f.length>300?"...":""))}else e=c("err")(d);c("FBLogger")("binary_transparency","bt_download_manifest_error").catching(e).mustfix('Unable to download and inject BT manifest "%s" for version: %s',b,a)}var o=c("TrustedTypes").createPolicy("bt-manifest",{createScript:function(a){return a}});function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!d("SiteData").manifest_origin||d("SiteData").manifest_version_prefix==null||d("SiteData").manifest_base_uri==null)return;var e=a+"_"+b;a=""+d("SiteData").manifest_version_prefix+a;if(j.has(e))return;m(b,"start");j.add(e);try{var f=document.createElement("script"),g=(yield k(d("SiteData").manifest_base_uri,d("SiteData").manifest_origin,a,b));c("justknobx")._("3786")?f.innerText=o.createScript(g):f.innerText=g;f.type="application/json";f.setAttribute("name","binary-transparency-manifest");f.dataset.manifestRev=a;f.dataset.manifestType=b;(g=document.head)==null?void 0:g.appendChild(f);m(b,"complete")}catch(c){m(b,"failed"),n(a,b,c),j["delete"](e)}});return q.apply(this,arguments)}function a(){c("promiseDone")(p(d("SiteData").client_revision,"main")),d("BootloaderEvents").onResourceInLongTailBTManifest(function(a){c("promiseDone")(p(d("SiteData").client_revision,"longtail")),a.hashes.forEach(function(b){c("BtLongtailHashFalcoEvent").log(function(){return{client_revision:String(d("SiteData").client_revision),compose_bootloads:d("SiteData").compose_bootloads,ef_page:d("SiteData").ef_page||"",hash:b,pkg_cohort:d("SiteData").pkg_cohort,reference:a.source,rls_id:d("SiteData").hsi}})})}),c("ClientConsistencyEventEmitter").addListener("newRevision",function(a){c("promiseDone")(p(a,"main")),c("promiseDone")(p(a,"longtail"))})}g.init=a}),98);
__d("IgFrCookieUpdaterFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5694");b=d("FalcoLoggerInternal").create("ig_fr_cookie_updater",a);e=b;g["default"]=e}),98);
__d("PolarisAPIGetFrCookieQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8244256172257887"}),null);
__d("PolarisAPIGetFrCookieQuery.graphql",["PolarisAPIGetFrCookieQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"_request_data"},{defaultValue:null,kind:"LocalArgument",name:"payload"}],c=[{alias:null,args:[{kind:"Variable",name:"_request_data",variableName:"_request_data"},{kind:"Variable",name:"payload",variableName:"payload"}],concreteType:"XDTGetEncryptedCredentialsResponse",kind:"LinkedField",name:"xdt_api__v1__web__accounts__get_encrypted_credentials",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fr",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PolarisAPIGetFrCookieQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PolarisAPIGetFrCookieQuery",selections:c},params:{id:b("PolarisAPIGetFrCookieQuery_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_api__v1__web__accounts__get_encrypted_credentials"]},name:"PolarisAPIGetFrCookieQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PolarisAPIGetFrCookie",["CometRelay","PolarisAPIGetFrCookieQuery.graphql","PolarisInstapi","err","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return c("justknobx")._("999")?d("CometRelay").fetchQuery(e,h!==void 0?h:h=b("PolarisAPIGetFrCookieQuery.graphql"),{_request_data:{},payload:a}).toPromise().then(function(a){if(a==null)throw c("err")("Failed to get Fr cookie.");return{fr:a.xdt_api__v1__web__accounts__get_encrypted_credentials.fr}}):d("PolarisInstapi").apiPost("/api/v1/web/accounts/get_encrypted_credentials/",{body:{payload:a}}).then(function(a){return a.data})}g.getFrCookie=a}),98);
__d("buildIframeOriginUrl",["URI"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a}g["default"]=a}),98);
__d("PolarisFacebookCookieSyncConstants",["URI","buildIframeOriginUrl"],(function(a,b,c,d,e,f,g){"use strict";var h;a={error:"ig_iframe_error",ig_sync:"ig_iframe_ig_sync",ig_sync_error:"ig_iframe_ig_sync_error",ig_sync_success:"ig_iframe_ig_sync_success",ready:"ig_iframe_ready",success:"ig_iframe_success",sync:"ig_iframe_fb_sync"};b=c("buildIframeOriginUrl")("https://www.facebook.com");d=new(h||(h=c("URI")))(b).getDomain();e="fr";g.IFRAME_MESSAGES=a;g.IFRAME_ORIGIN=b;g.IFRAME_DOMAIN=d;g.FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY=e}),98);
__d("SecureMessageListener",["SecurePostMessage","URI"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var b=this;this.$3=null;this.$4=!1;this.$1=a;this.$5=function(a){b.run(a)}}var b=a.prototype;b.setEventHandler=function(a){this.$2=a;return this};b.setSupportedOrigins=function(a){this.$3=a;return this};b.skipOriginCheck_UNSAFE=function(){this.$4=!0;return this};b.beginListening=function(){this.$1.addEventListener("message",this.$5);return this};b.stopListening=function(){try{this.$1.removeEventListener("message",this.$5)}catch(a){if(!(a instanceof TypeError))throw a}return this};b.run=function(a){if(this.$3==null||this.$3.length===0){if(!this.$4&&a.origin!==this.$1.location.origin)return}else if(!this.isSupportedOrigin(this.$3,a.origin))return;if(this.$2){var b=function(b){d("SecurePostMessage").sendMessageToSpecificOrigin(a.source,b,a.origin)};this.$2(a,b)}};b.isSupportedOrigin=function(a,b){if(!new RegExp("^https://").test(b))return!1;var d=new(h||(h=c("URI")))(b);return a.some(function(a){return d.isSubdomainOfDomain(a)})};return a}();g["default"]=a}),98);
__d("XPolarisFacebookSyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/sync/instagram/",{})}),null);
__d("PolarisFacebookToInstagramCookieSync.react",["FBLogger","InstagramODS","PolarisFacebookCookieSyncConstants","SecureMessageListener","SecurePostMessage","XAsyncRequest","XPolarisFacebookSyncController","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a){var b=d("react-compiler-runtime").c(4),e=a.frameRef,f=a.onCleanUp,g;b[0]!==e||b[1]!==f?(a=function(){var a=function(){c("InstagramODS").incr("web.cookie_sync.oo_cookie.start_fb_sync");var a=e.current;(a==null?void 0:a.contentWindow)!=null&&d("SecurePostMessage").sendMessageToSpecificOrigin(a.contentWindow,{eventName:d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ig_sync},d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN)},b=function(b){if(b.origin!==d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN)return;var e=b.data.eventName;bb13:switch(e){case d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ready:a();break bb13;case d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ig_sync_success:c("InstagramODS").incr("web.cookie_sync.oo_cookie.retrieve_success");e=c("XPolarisFacebookSyncController").getURIBuilder().getURI();new(c("XAsyncRequest"))().setURI(e).setMethod("POST").setData({encrypted_data:(e=b.data.data)==null?void 0:e.data}).setHandler(k).setErrorHandler(j).send();f();break bb13;case d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ig_sync_error:c("InstagramODS").incr("web.cookie_sync.oo_cookie.retrieve_error");b=(e=b.data.errorDescription)!=null?e:"Exception thrown when syncing cookie to sync ig cookie";c("FBLogger")("ig_web").mustfix(b);f()}},g=new(c("SecureMessageListener"))(window).setEventHandler(b).setSupportedOrigins([d("PolarisFacebookCookieSyncConstants").IFRAME_DOMAIN]).beginListening();return function(){g.stopListening()}},g=[e,f],b[0]=e,b[1]=f,b[2]=a,b[3]=g):(a=b[2],g=b[3]);i(a,g);return null}function j(a){c("InstagramODS").incr("web.cookie_sync.oo_cookie.sync_fail");a=(a=a.errorDescription)!=null?a:"Error when syncing ig cookies";c("FBLogger")("ig_web").mustfix(a)}function k(a){c("InstagramODS").incr("web.cookie_sync.oo_cookie.sync_success")}g["default"]=a}),98);
__d("PolarisInstagramToFacebookCookieSync.react",["CometRelay","FBLogger","IgFrCookieUpdaterFalcoEvent","InstagramODS","PolarisAPIGetFrCookie","PolarisAdsGatingHelpers","PolarisConfig","PolarisDOMListener.react","PolarisFacebookCookieSyncConstants","PolarisWebStorage","SecurePostMessage","browserHistory_DO_NOT_USE","gkx","react","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useRef,l=Number(new Date().getTime());function m(a){var b=new Date().getTime()-l;a.total_latency=b.toString();a.country=d("PolarisConfig").getCountryCode();c("IgFrCookieUpdaterFalcoEvent").log(function(){return a})}function a(a){var b=a.frameRef,e=a.frData,f=a.onCleanUp;a=c("gkx")("25372");var g=c("gkx")("3478"),h=a&&g;g=(a=c("usePolarisViewer")())==null?void 0:a.id;a=d("browserHistory_DO_NOT_USE").getPath(d("browserHistory_DO_NOT_USE").browserHistory);var l=d("CometRelay").useRelayEnvironment(),n=d("PolarisAdsGatingHelpers").useEUFRCookieODSLogging();a=k({browser_history_path:a,iframe_origin:d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN,ig_user_id:g,is_blacklisted:!1,is_control_group:!1,is_local_storage_accessible:!1,local_storage_data:e,local_storage_same_as_api:!0,local_storage_updated:!1,show_iframe:!1});var o=a.current;j(function(){h||(o.is_blacklisted=!0,m(o),f())},[]);g=function(a){var b=a.data.eventName;o.iframe_message_origin=a.origin;if(a.origin!==d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN){b in d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES&&(o.iframe_message_origin_mismatch=!0,m(o));return}switch(b){case d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ready:c("InstagramODS").incr("web.frcookie.iframe.ready");n&&c("InstagramODS").incr("web.eu.frcookie.iframe.ready");o.iframe_message_ready=!0;p();break;case d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.success:c("InstagramODS").incr("web.frcookie.iframe.success");n&&c("InstagramODS").incr("web.eu.frcookie.iframe.success");o.iframe_message_success=!0;m(o);f();break;case d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.error:c("InstagramODS").incr("web.frcookie.iframe.error");n&&c("InstagramODS").incr("web.eu.frcookie.iframe.error");q();o.iframe_message_error=!0;m(o);break}};var p=function(){o.iframe_non_null=!1;o.iframe_content_window_non_null=!1;var a=b.current;if(a==null)return;e==null&&(c("InstagramODS").incr("web.frcookie.local_storage.empty"),n&&c("InstagramODS").incr("web.eu.frcookie.local_storage.empty"));d("PolarisAPIGetFrCookie").getFrCookie(e,l).then(function(b){o.api_data=b.fr;if(b.fr===e){m(o);f();return}o.local_storage_same_as_api=!1;var g=c("PolarisWebStorage").getLocalStorage();if(g==null){m(o);f();return}o.is_local_storage_accessible=!0;if(b.fr===""){g.removeItem(d("PolarisFacebookCookieSyncConstants").FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY);c("InstagramODS").incr("web.frcookie.local_storage.remove");n&&c("InstagramODS").incr("web.eu.frcookie.local_storage.remove");m(o);f();return}g.setItem(d("PolarisFacebookCookieSyncConstants").FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY,b.fr);o.show_iframe=!0;o.local_storage_updated=!0;o.iframe_payload=b.fr;o.iframe_non_null=!0;a.contentWindow!=null&&(o.iframe_content_window_non_null=!0,d("SecurePostMessage").sendMessageToSpecificOrigin(a.contentWindow,{data:b.fr,eventName:d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.sync},d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN));c("InstagramODS").incr("web.frcookie.local_storage.update");n&&c("InstagramODS").incr("web.eu.frcookie.local_storage.update")})["catch"](function(a){c("InstagramODS").incr("web.frcookie.get.error"),n&&c("InstagramODS").incr("web.eu.frcookie.get.error"),o.exception=a.toString(),m(o),c("FBLogger")("ig_web").catching(a).mustfix("Exception thrown when getting frCookie"),q()})},q=function(){var a=c("PolarisWebStorage").getLocalStorage();c("PolarisWebStorage").isLocalStorageSupported()&&a!=null&&a.removeItem(d("PolarisFacebookCookieSyncConstants").FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY);f()};return h&&i.jsx(c("PolarisDOMListener.react"),{event:"message",handler:g,target:window})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisFacebookCookieSyncImpl.react",["IgFrCookieUpdaterFalcoEvent","JSScheduler","PolarisDOMListener.react","PolarisFacebookCookieSyncConstants","PolarisFacebookToInstagramCookieSync.react","PolarisInstagramToFacebookCookieSync.react","PolarisReactRedux.react","PolarisUA","PolarisWebStorage","RunComet","browserHistory_DO_NOT_USE","react","react-compiler-runtime","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useRef,m=b.useState,n=d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN+"/instagram/login_sync/",o=["terms","challenge"],p=3,q=Number(new Date().getTime());function r(a){var b=new Date().getTime()-q;a.total_latency=b.toString();c("IgFrCookieUpdaterFalcoEvent").log(function(){return a})}var s=function(){if(!d("PolarisUA").isIGWebview()&&c("PolarisWebStorage").isLocalStorageSupported()){var a=c("PolarisWebStorage").getLocalStorage();if(a!=null)return a.getItem(d("PolarisFacebookCookieSyncConstants").FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY)}return null};function t(a){var b;a=a.frData;var e=l(null);b=(b=c("usePolarisViewer")())==null?void 0:b.id;b=l({browser_history_path:d("browserHistory_DO_NOT_USE").getPath(d("browserHistory_DO_NOT_USE").browserHistory),iframe_origin:d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN,ig_user_id:b,is_blacklisted:!1,is_control_group:!1,is_local_storage_accessible:!1,local_storage_data:a,local_storage_same_as_api:!0,local_storage_updated:!1,show_iframe:!1});var f=b.current;b=function(){f.iframe_unload=!0};var g=m(!1),i=g[0],o=g[1];k(function(){var a=null,b=null,e=d("RunComet").onAfterLoad(function(){a=(h||(h=c("JSScheduler"))).scheduleLoggingPriCallback(function(){b=window.setTimeout(function(){o(!0)},p*1e3)})});return function(){b&&window.clearTimeout(b),a&&(h||(h=c("JSScheduler"))).cancelCallback(a),e&&e.remove()}},[]);g=m(!1);var q=g[0],s=g[1];g=m(!1);var t=g[0],u=g[1];g=q&&t;return!i?null:j.jsxs(j.Fragment,{children:[j.jsx("div",{hidden:!0,children:j.jsx("iframe",{onError:function(){f.iframe_on_error=!0,r(f)},onLoad:function(){f.iframe_on_load=!0},ref:e,src:n,style:{border:"none",display:"none",height:0,width:0},title:"fr"})}),g?null:j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisInstagramToFacebookCookieSync.react"),{frameRef:e,frData:a,onCleanUp:function(){return s(!0)}}),j.jsx(c("PolarisFacebookToInstagramCookieSync.react"),{frameRef:e,onCleanUp:function(){return u(!0)}}),j.jsx(c("PolarisDOMListener.react"),{event:"beforeunload",handler:b,target:window})]})]})}t.displayName=t.name+" [from "+f.id+"]";function a(){var a,b=d("react-compiler-runtime").c(3),e=d("PolarisReactRedux.react").useSelector(u);a=(a=c("usePolarisViewer")())==null?void 0:a.id;if(e)return null;if(b[0]!==a){e=Symbol["for"]("react.early_return_sentinel");bb0:{var f=d("browserHistory_DO_NOT_USE").getPath(d("browserHistory_DO_NOT_USE").browserHistory);if(o.some(function(a){return f.includes(a)})){r({browser_history_path:f,iframe_origin:d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN,ig_user_id:a,is_blacklisted:!0,is_control_group:!1,is_local_storage_accessible:!1,local_storage_same_as_api:!0,local_storage_updated:!1,show_iframe:!1});e=null;break bb0}}b[0]=a;b[1]=e}else e=b[1];if(e!==Symbol["for"]("react.early_return_sentinel"))return e;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(t,{frData:s()}),b[2]=a):a=b[2];return a}function u(a){return!!(a==null?void 0:(a=a.cookieModal)==null?void 0:a.visible)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSAppendDataTraceAddon",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(154).add({addonId:void 0,traceId:a[0],timestampMs:c[0],checkPointId:a[1],syncChannel:a[2],errorMessage:a[3],tags:a[4]})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSDataTraceAppendDataTraceAddonStoredProcedure";a.__tables__=["data_trace_addon"];e.exports=a}),null);
__d("LSVec",[],(function(a,b,c,d,e,f){"use strict";var g={tag:{value:"ls-array"}};function h(a){return Object.defineProperties([].concat(a),g)}function a(a){return h(a)}function b(a){return Array.from(a)}c={from:h,ofArray:a,toArray:b};f["default"]=c}),66);
__d("LSDict",["I64","LSVec","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){if(a==null)return void 0;var b=(h||(h=d("I64"))).cast(a);return b!=null?JSON.stringify([(h||(h=d("I64"))).to_string(b)]):JSON.stringify(a)}function j(a){if(a==null)return void 0;a=JSON.parse(a);return Array.isArray(a)?(h||(h=d("I64"))).of_string(a[0]):a}a=function(){function a(a){this.size=0;var b=new Map(Array.from(a||[]).map(function(a){var b=a[0];a=a[1];return b==null?null:[i(b),a]}).filter(Boolean));this.$1=b;Object.defineProperties(this,{size:{get:function(){return b.size}}})}var b=a.prototype;b.get=function(a){return a==null?void 0:this.$1.get(i(a))};b.set=function(a,b){if(a==null)return this;this.$1.set(i(a),b);return this};b["delete"]=function(a){return a==null?!1:this.$1["delete"](i(a))};b.clear=function(){return this.$1.clear()};b.forEach=function(a){var b=this;this.$1.forEach(function(c,d){return a(c,j(d),b)})};b.has=function(a){return a==null?!1:this.$1.has(i(a))};b.entries=function*(){for(var a of this.$1.entries()){var b=a[0],c=a[1];yield [j(b),c]}};b.keys=function(){return c("LSVec").from(Array.from(this.$1.keys()).map(function(a){return j(a)}))};b.values=function(){return this.$1.values()};a.fromObject=function(b){return new a(Object.entries(b))};a.shapeToRecord=function(a){return Array.from(a.entries()).reduce(function(a,b){var d=b[0];b=b[1];if(typeof d!=="string")throw c("unrecoverableViolation")("Cannot convert dicts with mixed keys to records","messenger_web_product");return babelHelpers["extends"]({},a,(a={},a[d]=b,a))},{})};return a}();g["default"]=a}),98);
__d("LSGetFirstAvailableAttachmentCTAID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(a){return b.sequence([function(a){return b.db.table(19).fetchDesc().next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=b.i64.cast([0,1]):(d=a.item,c[0]=b.i64.add(d.ctaId,b.i64.cast([0,1])))})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxGetFirstAvailableAttachmentCTAIDStoredProcedure";a.__tables__=["attachment_ctas"];e.exports=a}),null);
__d("LSGetViewerFBID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(a){return b.sequence([function(a){return b.db.table(4).fetch([[[b.i64.cast([0,1])]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=b.i64.cast([-1,4294967295]):(d=a.item,c[0]=d.facebookUserId)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreGetViewerFBIDStoredProcedure";a.__tables__=["_user_info"];e.exports=a}),null);
__d("LSInsertAttachmentItem",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(18).add({attachmentFbid:a[0],attachmentIndex:a[1],threadKey:a[2],messageId:a[4],defaultActionEnableExtensions:a[31],originalPageSenderId:a[7],titleText:a[8],subtitleText:a[9],bodyText:a[12],playableUrl:a[13],playableUrlFallback:a[14],playableUrlExpirationTimestampMs:a[15],playableUrlMimeType:a[16],dashManifest:a[17],previewUrl:a[18],previewUrlFallback:a[19],previewUrlExpirationTimestampMs:a[20],previewUrlMimeType:a[21],previewWidth:a[22],previewHeight:a[23],imageUrl:a[24],defaultCtaId:a[25],defaultCtaTitle:a[26],defaultCtaType:a[27],defaultButtonType:a[29],defaultActionUrl:a[30],defaultWebviewHeightRatio:a[33],attachmentCta1Id:a[35],cta1Title:a[36],cta1IconType:a[37],cta1Type:a[38],attachmentCta2Id:a[40],cta2Title:a[41],cta2IconType:a[42],cta2Type:a[43],attachmentCta3Id:a[45],cta3Title:a[46],cta3IconType:a[47],cta3Type:a[48],faviconUrl:a[49],faviconUrlFallback:a[50],faviconUrlExpirationTimestampMs:a[51],previewUrlLarge:a[52]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertAttachmentItemStoredProcedure";a.__tables__=["attachment_items"];e.exports=a}),null);
__d("LSIssueNewTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return c[0]=b.i64.cast([0,0]),c[1]=b.i64.of_float(Date.now()),b.db.table(2).add({taskId:void 0,queueName:a[0],context:b.i64.to_string(a[1]),taskValue:a[2],enqueueTimestampMs:c[1],httpUrlOverride:a[3],timeoutTimestampMs:a[4],pluginType:a[5],priority:a[6],syncGroupId:a[7],transportKey:a[8],minTimeToSyncTimestampMs:a[9],taskDispatchPriority:c[0]})},function(d){return c[5]=b.i64.to_string(a[1]),b.filter(b.db.table(2).fetchDesc([[[a[0]]],"queueNameTaskId"]),function(b){return b.queueName===a[0]&&b.context===c[5]&&b.taskValue===a[2]}).next().then(function(a,d){var e=a.done;a=a.value;return e?c[2]=b.i64.cast([-1,4294967295]):(d=a.item,c[2]=d.taskId)})},function(d){return c[4]=" ",function(a){b.logger(a).info(a)}(["LightSpeed NewTask",c[4],"task_id:",c[4],b.i64.to_string(c[2]),c[4],"queue_name:",c[4],a[0],c[4],"task_label:",c[4],c[5]].join(""))}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreIssueNewTaskStoredProcedure";a.__tables__=["pending_tasks"];e.exports=a}),null);
__d("LSSyncError",[],(function(a,b,c,d,e,f){"use strict";var g=new Map();function a(a,b){g.set(a,b)}function b(a){return g.get(a)}f.setSyncError=a;f.getLastSyncError=b}),66);
__d("LSLogEventAnnotate.nop",["FBLogger","I64","LSDict","LSSyncError","LSSynchronousPromise","MAWMIC"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,b,e,f,g,i){a=i.has("error_msg");if(a){c("FBLogger")("messenger_web").warn("[LS] LS log event for logCategory %s, logEventId %s, logEventInstanceId %s, annotations %s, is during MIC: %s",(h||(h=d("I64"))).to_string(e),h.to_string(f),h.to_string(g),JSON.stringify(c("LSDict").shapeToRecord(i)),d("MAWMIC").duringMIC());b=i.get("database_id");b!=null&&(h||(h=d("I64"))).isI64(b)&&d("LSSyncError").setSyncError(b,i)}return d("LSSynchronousPromise").maybeMakeSynchronousPromise()};a.__nop_name__="LSLogEventAnnotate";g["default"]=a}),98);
__d("LSSetMessageDisplayedContentTypes",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return b.db.table(16).fetch([[[a[0],a[1]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[void 0,void 0],c[0]=d[0],c[1]=d[1],d):(b=a.item,d=[b.attachmentType,b.xmaLayoutType],c[0]=d[0],c[1]=d[1],d)})},function(d){return b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),void 0,void 0],c[3]=e[0],c[4]=e[1],c[5]=e[2],e):(d=a.item,e=[d.replySourceTypeV2,d.replySourceId,d.text],c[3]=e[0],c[4]=e[1],c[5]=e[2],e)})},function(d){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[7]=void 0:(b=a.item,c[7]=b.customEmoji)})},function(d){return b.i64.eq(c[0],b.i64.cast([0,6]))?c[9]=b.i64.cast([0,64]):(b.i64.eq(c[0],b.i64.cast([0,5]))?c[16]=b.i64.cast([0,4]):(b.i64.eq(c[0],b.i64.cast([0,3]))?c[17]=b.i64.cast([0,16384]):(b.i64.eq(c[0],b.i64.cast([0,2]))?c[18]=b.i64.cast([0,2]):(b.i64.eq(c[0],b.i64.cast([0,4]))?c[19]=b.i64.cast([0,2]):c[19]=a[5]?b.i64.cast([0,4096]):b.i64.cast([0,0]),c[18]=c[19]),c[17]=c[18]),c[16]=c[17]),c[9]=c[16]),c[10]=c[5]!==void 0&&c[5]!==""&&c[5]!==c[7]?b.i64.or_(c[9],b.i64.cast([0,1])):c[9],c[11]=c[7]!==void 0&&c[7]===c[5]?b.i64.or_(c[10],b.i64.cast([0,128])):c[10],c[12]=b.i64.eq(c[0],b.i64.cast([0,7]))?b.i64.or_(c[11],b.i64.cast([0,8])):c[11],c[13]=b.i64.eq(c[1],b.i64.cast([0,0]))?b.i64.or_(c[12],b.i64.cast([0,1024])):b.i64.eq(c[1],b.i64.cast([0,1]))?b.i64.or_(c[12],b.i64.cast([0,2048])):c[12],c[14]=b.i64.eq(c[3],b.i64.cast([0,2]))&&c[4]!==void 0?b.i64.or_(c[13],b.i64.cast([0,512])):c[13],c[15]=c[5]!==void 0&&c[5]!==""&&c[5]!==c[7]&&b.i64.eq(c[3],b.i64.cast([0,5]))?b.i64.or_(c[14],b.i64.cast([0,512])):c[14],b.forEach(b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}),function(d){var e=d.update;d.item;return e({displayedContentTypes:a[4]?b.i64.cast([0,32]):b.i64.eq(c[3],b.i64.cast([0,3]))?b.i64.or_(c[15],b.i64.cast([0,8192])):c[15]})})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxSetMessageDisplayedContentTypesStoredProcedure";a.__tables__=["attachments","messages","threads"];e.exports=a}),null);
__d("LSUpsertInboxThreadsRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(198).put({syncGroup:a[0],minLastActivityTimestampMs:a[1],hasMoreBefore:a[2],isLoadingBefore:a[3],minThreadKey:a[4]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertInboxThreadsRangeStoredProcedure";a.__tables__=["inbox_threads_ranges"];e.exports=a}),null);
__d("LSUpsertReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(8).put({threadKey:a[0],messageId:a[2],actorId:a[3],timestampMs:a[1],reaction:a[4],authorityLevel:a[5],reactionCreationTimestampMs:a[6]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertReactionStoredProcedure";a.__tables__=["reactions"];e.exports=a}),null);
__d("LSUpsertSyncGroupThreadsRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(220).put({syncGroup:a[0],parentThreadKey:a[1],minLastActivityTimestampMs:a[2],hasMoreBefore:a[3],isLoadingBefore:a[4],minThreadKey:a[5]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertSyncGroupThreadsRangeStoredProcedure";a.__tables__=["sync_group_threads_ranges"];e.exports=a}),null);
__d("LSVerifyContactRowExists",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(e){var f=e.done;e.value;return f?c.sequence([function(b){return d[0]=a[3]==null?"":a[3],c.forEach(c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))&&c.i64.lt(b.authorityLevel,a[14])}),function(a){return a["delete"]()})},function(b){return c.db.table(7).add({id:a[0],profilePictureUrl:a[2]==null?"":a[2],profilePictureFallbackUrl:a[5],name:d[0],secondaryName:a[20],normalizedNameForSearch:d[0],isMemorialized:a[9],blockedByViewerStatus:a[11],canViewerMessage:a[12],profilePictureLargeUrl:"",isMessengerUser:!0,rank:0,contactType:a[4],contactTypeExact:c.i64.cast([0,0]),requiresMultiway:!1,authorityLevel:a[14],workForeignEntityType:c.i64.cast([0,0]),capabilities:a[15],capabilities2:a[16],contactViewerRelationship:a[19],gender:a[18],firstName:a[21]})},function(e){return d[1]=new c.Map(),d[1].set("contact_id",a[0]),d[2]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),"cpq_v2",c.i64.cast([0,207]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):0})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactVerifyContactRowExistsStoredProcedure";a.__tables__=["contacts"];e.exports=a}),null);/*FB_PKG_DELIM*/
__d("mergeHelpers",["invariant","FbtResultBase"],(function(a,b,c,d,e,f,g,h){"use strict";var i=36,j=function(a){return typeof a!=="object"||a instanceof Date||a===null||a instanceof c("FbtResultBase")},k={MAX_MERGE_DEPTH:i,isTerminal:j,normalizeMergeArg:function(a){return a==null?{}:a},checkMergeArrayArgs:function(a,b){Array.isArray(a)&&Array.isArray(b)||h(0,3714,a,b)},checkMergeObjectArgs:function(a,b){k.checkMergeObjectArg(a),k.checkMergeObjectArg(b)},checkMergeObjectArg:function(a){!j(a)&&!Array.isArray(a)||h(0,3715,a)},checkMergeIntoObjectArg:function(a){(!j(a)||typeof a==="function")&&!Array.isArray(a)||h(0,3716,a)},checkMergeLevel:function(a){a<i||h(0,3717)},checkArrayStrategy:function(a){a==null||a in k.ArrayStrategies||h(0,3718)},ArrayStrategies:{Clobber:"Clobber",Concat:"Concat",IndexByIndex:"IndexByIndex"}};a=k;g["default"]=a}),98);
__d("PolarisAFADDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{}},root:c("JSResourceForInteraction")("PolarisAFADDialog.react").__setRef("PolarisAFADDialog.entrypoint")};g["default"]=a}),98);
__d("PolarisGAMEWriteTimeBlockDialogQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9422362534442603"}),null);
__d("PolarisGAMEWriteTimeBlockDialogQuery$Parameters",["PolarisGAMEWriteTimeBlockDialogQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("PolarisGAMEWriteTimeBlockDialogQuery_instagramRelayOperation"),metadata:{},name:"PolarisGAMEWriteTimeBlockDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("PolarisGAMEWriteTimeBlockDialog.entrypoint",["JSResourceForInteraction","PolarisGAMEWriteTimeBlockDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{PolarisGAMEWriteTimeBlockDialogQuery:{parameters:c("PolarisGAMEWriteTimeBlockDialogQuery$Parameters"),variables:{enforcement_transparency_instance_identifier:a.routeParams.enforcement_transparency_instance_identifier}}}}},root:c("JSResourceForInteraction")("PolarisGAMEWriteTimeBlockDialog.react").__setRef("PolarisGAMEWriteTimeBlockDialog.entrypoint")};g["default"]=a}),98);
__d("SentryBlockGAMEEnforcementDialog.react",["IGDSDialogLegacy.react","IGWebBloksApp","PolarisNavigationUtils","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(12),e=a.modal;a=a.onClose;var f=j,g=e==null?void 0:e.action,h=e==null?void 0:e.feedback_appeal_label,k=e==null?void 0:e.message,l=e==null?void 0:e.title;e=e==null?void 0:e.restriction_enrollment_data;var m;b[0]!==g||b[1]!==h||b[2]!==k||b[3]!==l||b[4]!==e?(m={feedback_action:g,feedback_appeal_label:h,feedback_message:k,feedback_title:l,restriction_enrollment_data:e},b[0]=g,b[1]=h,b[2]=k,b[3]=l,b[4]=e,b[5]=m):m=b[5];g=m;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(h={"bk.action.navigation.OpenUrl":f,"bk.action.navigation.OpenUrlV2":f,"ig.action.navigation.OpenUrl":f,"ig.action.navigation.OpenUrlSupportsDfa":f},b[6]=h):h=b[6];b[7]!==g?(k=i.jsx(c("IGWebBloksApp"),{actionOverrides:h,appId:"com.bloks.www.instagram.igwb.exp.enforcement.dialog",params:g}),b[7]=g,b[8]=k):k=b[8];b[9]!==a||b[10]!==k?(l=i.jsx(c("IGDSDialogLegacy.react"),{onClose:a,children:k}),b[9]=a,b[10]=k,b[11]=l):l=b[11];return l}function j(a,b){return d("PolarisNavigationUtils").openURLWithFullPageReload(b)}g["default"]=a}),98);
__d("PolarisSentryFeedbackDialog.react",["IGWebBloksApp","PolarisAFADDialog.entrypoint","PolarisConfirmDialog.react","PolarisGAMEWriteTimeBlockDialog.entrypoint","PolarisGenericStrings","PolarisNavigationStrings","PolarisReactRedux.react","PolarisSentryFeedbackActions","PolarisSentryFeedbackDispatcher","SentryBlockGAMEEnforcementDialog.react","WebBloksCallback","react","react-compiler-runtime","useIGDSEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h,k=j.useEffect,l=j.useRef,m=j.useState,n=["open_bio_takedown_restriction","open_account_status_home_screen","open_account_status_game_experience_detail_page"],o=function(a){a.modal&&a.modal.url&&a.modal.action&&(a.modal.action==="report_problem"?a.onReport(a.modal.url):a.modal.action==="open_request_form"&&a.onOpenForm(a.modal.url))};function p(a){var b=d("react-compiler-runtime").c(22),e=a.modal,f=a.onConfirm,g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g={onClose:s,routeParams:{},routeProps:{}},b[0]=g):g=b[0];g=c("useIGDSEntryPointDialog")(c("PolarisAFADDialog.entrypoint"),g,void 0);g=g[0];if(!e)return null;if(e.action==="open_login_challenges"){if(b[1]!==e||b[2]!==g){var h=v(e),j=new Map();h=g({webBloksParams:h,webBloksProps:j},r,void 0,!0);b[1]=e;b[2]=g;b[3]=h}else h=b[3];return h}if(n.includes(e.action)){b[4]!==e.action||b[5]!==e.feedback_appeal_label||b[6]!==e.message||b[7]!==e.restriction_enrollment_data||b[8]!==e.title?(j={feedback_action:e.action,feedback_appeal_label:e.feedback_appeal_label,feedback_message:e.message,feedback_title:e.title,restriction_enrollment_data:e.restriction_enrollment_data},b[4]=e.action,b[5]=e.feedback_appeal_label,b[6]=e.message,b[7]=e.restriction_enrollment_data,b[8]=e.title,b[9]=j):j=b[9];g=j;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(h=new Map([["onClickWebCallback",new(d("WebBloksCallback").WebBloksCallback)(null,null,null,q)]]),b[10]=h):h=b[10];j=h;switch(e.action){case"open_bio_takedown_restriction":b[11]!==g?(h=i.jsx(c("IGWebBloksApp"),{appId:"com.bloks.www.instagram.igwb.exp.enforcement.dialog",params:g,props:j}),b[11]=g,b[12]=h):h=b[12];return h;case"open_account_status_home_screen":case"open_account_status_game_experience_detail_page":b[13]!==e?(j=i.jsx(c("SentryBlockGAMEEnforcementDialog.react"),{modal:e}),b[13]=e,b[14]=j):j=b[14];return j}}b[15]!==a?(g=function(){return o(a)},b[15]=a,b[16]=g):g=b[16];b[17]!==e.message||b[18]!==e.title||b[19]!==f||b[20]!==g?(h=i.jsx(c("PolarisConfirmDialog.react"),{body:e.message,cancelLabel:d("PolarisGenericStrings").OK_TEXT,confirmLabel:d("PolarisNavigationStrings").REPORT_PROBLEM_TEXT,onClose:f,onConfirm:g,title:e.title}),b[17]=e.message,b[18]=e.title,b[19]=f,b[20]=g,b[21]=h):h=b[21];return h}function q(){return window.location.reload()}function r(){var a=c("PolarisSentryFeedbackDispatcher").getInstance();a.allowDispatch();a.dismissSentryFeedback()}function s(){}function t(a){var b=d("react-compiler-runtime").c(10),e=m(!1),f=e[0],g=e[1],h=l(!1);b[0]!==a.enforcement_transparency_instance_identifier?(e={enforcement_transparency_instance_identifier:a.enforcement_transparency_instance_identifier},b[0]=a.enforcement_transparency_instance_identifier,b[1]=e):e=b[1];var j;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(j={},b[2]=j):j=b[2];b[3]!==e?(j={routeParams:e,routeProps:j},b[3]=e,b[4]=j):j=b[4];e=c("useIGDSEntryPointDialog")(c("PolarisGAMEWriteTimeBlockDialog.entrypoint"),j,"button",u);var n=e[0];b[5]!==n?(j=function(){h.current||(h.current=!0,n({onFallbackNeeded:function(){g(!0)}},function(){h.current=!1}))},e=[n],b[5]=n,b[6]=j,b[7]=e):(j=b[6],e=b[7]);k(j,e);if(f){b[8]!==a.rootProps?(j=i.jsx(p,babelHelpers["extends"]({},a.rootProps)),b[8]=a.rootProps,b[9]=j):j=b[9];return j}return null}function u(){return i.jsx("div",{})}u.displayName=u.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(5),c=a.modal;c=c==null?void 0:c.enforcement_transparency_instance_identifier;if(c!=null){var e;b[0]!==c||b[1]!==a?(e=i.jsx(t,{enforcement_transparency_instance_identifier:c,rootProps:a}),b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}b[3]!==a?(c=i.jsx(p,babelHelpers["extends"]({},a)),b[3]=a,b[4]=c):c=b[4];return c}function b(a){return{modal:a.sentryFeedback.modal}}function v(a){return{feedback_action:a.action,feedback_appeal_label:a.feedback_appeal_label,feedback_message:a.message,feedback_title:a.title,restriction_enrollment_data:a.restriction_enrollment_data}}function e(a){return{onConfirm:function(){return a(d("PolarisSentryFeedbackActions").dismissSentryFeedback())},onOpenForm:function(b){return a(d("PolarisSentryFeedbackActions").openForm(b))},onReport:function(b){return a(d("PolarisSentryFeedbackActions").reportProblem(b))}}}j=d("PolarisReactRedux.react").connect(b,e)(a);g["default"]=j}),98);
__d("first",[],(function(a,b,c,d,e,f){"use strict";function a(a){for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;return d}return null}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("LSDeserializeFromJsonIntoDictionaryV2.nop",["LSDict","LSJson","Promise","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){a=d("LSJson").parse(f,{useLSTypes:!0});if(a instanceof c("LSDict"))return(h||(h=b("Promise"))).resolve([a]);throw c("unrecoverableViolation")("unexpected Dictionary type","messenger_web_product")};a.__nop_name__="LSDeserializeFromJsonIntoDictionary";g["default"]=a}),98);
__d("LSInternetConnectionState",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_CONNECTED:0,CONNECTED:1});f["default"]=a}),66);
__d("LSRemoveBlindedTokens",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(308).fetch(),function(b){return b.configId===a[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSAnonymousCredentialsRemoveBlindedTokensStoredProcedure";a.__tables__=["secure_acs_blinded_tokens"];e.exports=a}),null);
__d("mergeDeepInto",["invariant","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";var h=(c=b("mergeHelpers")).ArrayStrategies,i=c.checkArrayStrategy,j=c.checkMergeArrayArgs,k=c.checkMergeLevel,l=c.checkMergeObjectArgs,m=c.isTerminal,n=c.normalizeMergeArg,o=function(a,b,c,d){l(a,b);k(d);var e=b?Object.keys(b):[];for(var f=0;f<e.length;f++){var g=e[f];q(a,b,g,c,d)}},p=function(a,b,c,d){j(a,b);k(d);if(c===h.Concat)a.push.apply(a,b);else{var e=Math.max(a.length,b.length);for(var f=0;f<e;f++)q(a,b,f,c,d)}},q=function(a,b,c,d,e){var f=b[c];b=Object.prototype.hasOwnProperty.call(b,c);var i=b&&m(f),j=b&&Array.isArray(f),k=b&&!j&&!j,l=a[c],n=Object.prototype.hasOwnProperty.call(a,c),q=n&&m(l),r=n&&Array.isArray(l),s=n&&!r&&!r;q?i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k?(a[c]={},o(a[c],f,d,e+1)):b||(a[c]=l):r?i?a[c]=f:j?(d&&h[d]||g(0,5117),d===h.Clobber&&(l.length=0),p(l,f,d,e+1)):k&&(a[c]={},o(a[c],f,d,e+1)):s?i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k&&o(l,f,d,e+1):n||(i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k&&(a[c]={},o(a[c],f,d,e+1)))};function a(a,b,c){b=n(b);i(c);o(a,b,c,0)}f["default"]=a}),66);
__d("mergeDeep",["mergeDeepInto","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){var e;a=(e=c("mergeHelpers")).normalizeMergeArg(a);b=e.normalizeMergeArg(b);e.checkMergeObjectArgs(a,b);e.checkArrayStrategy(d);e={};c("mergeDeepInto")(e,a,d);c("mergeDeepInto")(e,b,d);return e}g["default"]=a}),98);
__d("LSVoprfLoggingUtils",["Env","MemoryUtils","QPLUserFlow","justknobx","mergeDeep","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=d("MemoryUtils").getCurrentMemory();a=a.usedJSHeapSize;return{"int":{usedJSHeapSizeStart:a}}}function k(a){var b=d("MemoryUtils").getCurrentMemory(),c=b.deviceMemory,e=b.jsHeapSizeLimit,f=b.totalJSHeapSize;b=b.usedJSHeapSize;return{"int":{deviceMemory:c,jsHeapSizeLimit:e,totalJSHeapSize:f,usedJSHeapSize:b,wasmMemorySize:a}}}function l(a){return(h||(h=c("performanceAbsoluteNow")))()-a}function a(a){var b=Math.floor(Math.random()*1e6);return{addPoint:function(d){c("QPLUserFlow").addPoint(a,d,{instanceKey:b})},addTimeSinceCreationAnnotation:function(){},addVoprfLoadedPoint:function(d){c("QPLUserFlow").addPoint(a,"loaded_xplat_react_voprf",{instanceKey:b}),c("QPLUserFlow").addAnnotations(a,{"int":{timeSinceVoprfInstanceCreationNs:l(d)}},{instanceKey:b})},endFailure:function(d){var e=d.error;d=d.wasmMemorySize;c("QPLUserFlow").addAnnotations(a,k(d));c("QPLUserFlow").endFailure(a,e.name,{error:e,instanceKey:b})},endSuccess:function(d){d=d.wasmMemorySize;c("QPLUserFlow").addAnnotations(a,k(d),{instanceKey:b});c("QPLUserFlow").endSuccess(a,{instanceKey:b})},start:function(){c("QPLUserFlow").start(a,{instanceKey:b,onFlowTimeout:function(d,e){c("QPLUserFlow").addAnnotations(a,k(),{instanceKey:b})},timeoutInMs:6e4}),c("QPLUserFlow").addAnnotations(a,c("mergeDeep")(j(),{string:{brsid:c("justknobx")._("3105")&&(i||(i=c("Env"))).brsid!=null?String((i||(i=c("Env"))).brsid):void 0}}),{instanceKey:b})}}}g.getMemoryAnnotationsStart=j;g.getMemoryAnnotationsEnd=k;g.getTimeSinceInstanceCreationNs=l;g.getAcsQplEventLogger=a}),98);
__d("MWPBumpEntityKey",["CurrentAppID","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){(h||(h=d("ODS"))).bumpEntityKey(3185,a,b)}function a(a,b){var c=d("CurrentAppID").getAppID();c=c==null?"unknown":c;return i(a,b+"."+c)}g.bumpEntityKey=i;g.bumpEntityKeyWithAppId=a}),98);
__d("WAPromiseCallSync",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){try{for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return(g||(g=b("Promise"))).resolve(a.apply(c,e))}catch(a){return(g||(g=b("Promise"))).reject(a)}}f.promiseCallSync=a}),66);
__d("WAPromiseManagement",["WAPromiseCallSync"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=null,c=function(){b||(b=d("WAPromiseCallSync").promiseCallSync(a)["finally"](function(){b=null}));return b};c.isPending=function(){return!!b};return c}function b(a,b){var c=new Map();return function(d){var e=a(d),f=c.get(e);if(f)return f;try{f=Promise.resolve(b(d))}catch(a){f=Promise.reject(a)}d=f["finally"](function(){return void c["delete"](e)});c.set(e,d);return d}}var h=new Set();function c(a){h.add(a),a["finally"](function(){h["delete"](a)})}g.nullaryCacheWhilePending=a;g.cacheWhilePending=b;g.preventGarbageCollection=c}),98);
__d("WAWasmModuleCache",["WAPromiseManagement","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=a.fetch,i=new Map();c=d("WAPromiseManagement").cacheWhilePending(function(a){return a},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=i.get(a);if(b!=null)return b;b=(yield j(a));i.set(a,b);return b});return function(b){return a.apply(this,arguments)}}());function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=h(a);if(typeof WebAssembly.compileStreaming==="function")return WebAssembly.compileStreaming(a);a=(yield a);return WebAssembly.compile(yield a.arrayBuffer())});return k.apply(this,arguments)}g.loadWasmModule=c}),98);
__d("XPlatReactVoprf",["Promise","WAWasmModuleCache","asyncToGeneratorRuntime","performanceAbsoluteNow","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSVoprfWasm").__setRef("XPlatReactVoprf");function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a==null?void 0:a.addPoint("build_acs_client_start");var b=(yield j.load()),e=b.LSVoprfWasm,f=b.locateFile;a==null?void 0:a.addPoint("wasm_module_loaded");b=(yield e({getWasmModule:function(){return d("WAWasmModuleCache").loadWasmModule(f())}},a));a==null?void 0:a.addPoint("wasm_module_initialized");var g,h;try{g=b.createCurveRistretto();h=b.createVoprfExpTwohashdh(g);e={voprfInfo:{curvePtr:g,voprfPtr:h},voprfWasm:b};a==null?void 0:a.addPoint("build_acs_client_success");return{instanceCreationTimestampNs:(i||(i=c("performanceAbsoluteNow")))(),voprfInstance:e}}catch(c){a==null?void 0:a.addPoint("build_acs_client_failure");g!=null&&b.freeCurve(g);h!=null&&b.freeVoprf(h);throw c}});return l.apply(this,arguments)}function a(a){return(h||(h=b("Promise"))).resolve(k(a))}function e(a){var b=a.voprfInfo;a=a.voprfWasm;var c=b.curvePtr;b=b.voprfPtr;a.freeCurve(c);a.freeVoprf(b)}g.loadXPlatReactVoprf=a;g.freeVoprfInstance=e}),98);/*FB_PKG_DELIM*/
__d("EBDBMetricsConsistencyOperationEnum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Upload:0});f.EBConsistencyOperation=a}),66);
__d("MWChatEncryptedBackupsLogging",["MWEBODSCategory","MWEBODSEntityKey.enum","ODS","QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){var b=a.cancelEndPoint,d=a.event,e=a.instanceKey;a=a.source;a!=null&&c("QPLUserFlow").addAnnotations(d,{string:{source:a}},{instanceKey:e});c("QPLUserFlow").addPoint(d,"cancel",{instanceKey:e});c("QPLUserFlow").addAnnotations(d,{string:{cancel_end_point:b}},{instanceKey:e});c("QPLUserFlow").endCancel(d,{instanceKey:e})}function a(a){var b=a.event,d=a.instanceKey,e=a.onClose;a=a.source;a!=null&&c("QPLUserFlow").addAnnotations(b,{string:{source:a}},{instanceKey:d});i({cancelEndPoint:"dialog_x_button",event:b,instanceKey:d});e()}function b(a){var b=a.annotations,e=a.event,f=a.instanceKey;a=a.odsEntityName;c("QPLUserFlow").addPoint(e,"success",{instanceKey:f});c("QPLUserFlow").endSuccess(e,{annotations:b,instanceKey:f});a&&(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),a,c("MWEBODSEntityKey.enum").SUCCESS)}function e(a){var b=a.annotations,e=a.errorName,f=a.event,g=a.instanceKey,i=a.odsEntityKey;a=a.odsEntityName;c("QPLUserFlow").addPoint(f,"failure",{instanceKey:g});c("QPLUserFlow").endFailure(f,e,{annotations:b,instanceKey:g});a&&(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),a,(f=i)!=null?f:c("MWEBODSEntityKey.enum").FAIL)}g.cancelFlow=i;g.closeDialogCancelFlow=a;g.endSuccess=b;g.endFailure=e}),98);
__d("MWChatEncryptedBackupsQPLEvents",["qpl"],(function(a,b,c,d,e,f,g){"use strict";b=(a=c("qpl"))._(521476140,"378");d=a._(521472542,"295");e=a._(521482085,"409");f=a._(521485406,"272");c=a._(521482763,"296");var h=a._(521484295,"1460"),i=a._(521482969,"1519"),j=a._(521479124,"1939"),k=a._(521474385,"263"),l=a._(521476098,"504"),m=a._(521482858,"1290"),n=a._(521473194,"1331");a=a._(521471024,"2275");g.pinCodeChangeQplEvent=b;g.optOutQplEvent=d;g.backupSetupQplEvent=e;g.mobileOnboardingQplEvent=f;g.restoreQplEvent=c;g.restoreDeviceAuthQplEvent=h;g.messageRestoreQplEvent=i;g.restoreWithAutoRestoreConsentQplEvent=j;g.hsmFleetMigrationQplEvent=k;g.virtualDeviceRevocationQplEvent=l;g.onboardingAuthQplEvent=m;g.processBackupIdsQPLEvent=n;g.fetchBackupIdsQPLEvent=a}),98);
__d("EBWorkerEBDBApi",["EBDB","EBDBApi","EBLS","WALogger","WAResolvable","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error on EBDB init in Worker: ",""]);h=function(){return a};return a}var i=new(d("WAResolvable").Resolvable)(),j=new(d("WAResolvable").Resolvable)();function a(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("EBLS").getLSStorage());try{yield j.promise,yield d("EBDBApi").startListeningDeviceRegistrations(a,d("EBDB").getEBDB(),d("EBDB").StateHistoryEnvironment.Worker)}catch(a){d("WALogger").ERROR(h(),a)}finally{i.resolve(a)}});return k.apply(this,arguments)}function c(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield i.promise);yield j.promise;yield d("EBDBApi").trackAddingDevice(b,d("EBDB").getEBDB(),d("EBDB").StateHistoryEnvironment.Worker,a)});return l.apply(this,arguments)}function e(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){try{yield d("EBDB").makeEBDB(a,b,c,d("EBDB").StateHistoryEnvironment.Worker),j.resolve()}catch(a){j.reject(a)}});return m.apply(this,arguments)}function f(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield i.promise);yield j.promise;void d("EBDBApi").trackConsistency(b,d("EBDB").StateHistoryEnvironment.Worker,a);return d("EBDBApi").getDeviceId()});return n.apply(this,arguments)}g.startListeningEBDeviceRegistrations=a;g.trackAddingDevice=c;g.initEBDB=e;g.trackConsistency=f}),98);
__d("MpsMessageToLoadResponse",["MpsMessageToBridge"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],c=[],e=[];for(var a=a,f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;h=(h=d("MpsMessageToBridge").mpsFullMessagetoBridge(h))!=null?h:{};var i=h.supplementals;h=h.topLevel;i==null?void 0:i.forEach(function(a){a.kind==="bridgeEditHistoryMsg"&&b.push(a.value),a.kind==="bridgeReactionAction"&&c.push(a.value)});(h==null?void 0:h.kind)==="bridgeMsg"&&e.push(h.value)}return{editMsgHistory:b,medias:[],msgs:e,polls:[],reactions:c,receiverFetchInfoPayloads:[],xmas:[]}}g.messageToLoadMsgsResponse=a}),98);
__d("WAErrorMessage",[],(function(a,b,c,d,e,f){"use strict";var g="NoErrorMessageProvided";function a(a){if(typeof a==="string")return a;if(a instanceof Error)return a.toString();if(typeof a==="object")if(typeof (a==null?void 0:a.description)==="string")return a.description;else if(typeof (a==null?void 0:a.message)==="string")return a.message;return g}f.NO_ERROR_MESSAGE_PROVIDED=g;f.maybeGetMessageFromError=a}),66);
__d("fillArray",[],(function(a,b,c,d,e,f){function a(a,b){var c=new Array(a);for(var d=0;d<a;d++)c[d]=b;return c}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("XPlatReactVoprf.shared",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.message=b;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.VoprfWasmError=a}),66);
__d("mapVoprfWasmError",["XPlatReactVoprf.shared"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case-1:return new h();case 1:return new i();case 2:return new j();case 3:return new k();case 4:return new l();default:return new m()}}var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Unknown error encountered by VOPRF WASM");a=b.call(this,a)||this;a.name="VoprfUnknownError";return a}return a}((b=d("XPlatReactVoprf.shared")).VoprfWasmError),i=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Incorrect buffer length encountered by VOPRF WASM");a=b.call(this,a)||this;a.name="VoprfBufferLengthError";return a}return a}(b.VoprfWasmError),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Error while performing curve operation by VOPRF WASM");a=b.call(this,a)||this;a.name="VoprfCurveOperationError";return a}return a}(b.VoprfWasmError),k=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Error while performing hash operation by VOPRF WASM");a=b.call(this,a)||this;a.name="VoprfHashOperationError";return a}return a}(b.VoprfWasmError),l=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Error while performing proof operation by VOPRF WASM");a=b.call(this,a)||this;a.name="VoprfProofError";return a}return a}(b.VoprfWasmError),m=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Unknown error code received from WASM binary");a=b.call(this,a)||this;a.name="UnknownErrorCode";return a}return a}(b.VoprfWasmError);g.mapVoprfWasmError=a;g.VoprfUnknownError=h;g.VoprfBufferLengthError=i;g.VoprfCurveOperationError=j;g.VoprfHashOperationError=k;g.VoprfProofError=l;g.UnknownErrorCode=m}),98);
__d("LSVoprfWasmBuilder",["FBLogger","Promise","asyncToGeneratorRuntime","err","mapVoprfWasmError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return function(d,e){var f=d.locateFile!=null?{locateFile:d.locateFile}:{instantiateWasm:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{e==null?void 0:e.addPoint("wasm_module_fetch_start");var f=(yield d.getWasmModule());e==null?void 0:e.addPoint("wasm_module_intstantiation_start");f=(yield WebAssembly.instantiate(f,a));e==null?void 0:e.addPoint("wasm_module_intstantiation_end");b(f);return{}}catch(a){c("FBLogger")("LSVoprfWasmBuilder").mustfix("instantiateWasm failed with error: %s",a.toString());return!1}});function f(b,c){return a.apply(this,arguments)}return f}()};return i(f,a)}}function i(a,e){return new(h||(h=b("Promise")))(function(b,f){e(a).then(function(a){var e=a._sodiumInit();e!==0&&f(c("err")("Failed to initialize Sodium!"));b({createCurveRistretto:function(){var b;try{b=a._curve_create();a._curve_init_ristretto(b);return b}catch(c){b!=null&&a._curve_free(b);throw c}},freeCurve:function(b){a._curve_free(b)},createVoprfExpTwohashdh:function(b){var c;try{c=a._voprf_create();a._voprf_init_exp_twohashdh(c,b);return c}catch(b){c!=null&&a._voprf_free(c);throw b}},freeVoprf:function(b){a._voprf_free(b)},getCurveBytes:function(b){return a._get_curve_element_bytes(b.curvePtr)},getCurveScalarBytes:function(b){return a._get_curve_scalar_bytes(b.curvePtr)},blind:function(b,c){var e,f,g;try{var h=a._get_curve_element_bytes(b.curvePtr),i=a._get_curve_scalar_bytes(b.curvePtr);e=a._malloc(h);f=a._malloc(i);g=k(a,c);b=a._blind(b.voprfPtr,e,h,f,i,g,c.length);if(b!==0)throw d("mapVoprfWasmError").mapVoprfWasmError(b);c=j(a,e,h);b=j(a,f,i);return{blindedElement:c,blindingFactor:b}}finally{[e,f,g].forEach(function(b){b!=null&&a._free(b)})}},verifiableUnblind:function(b,c,e,f,g,h,i,l){var m,n,o,p,q,r,s;try{m=c?k(a,c):null;n=e?k(a,e):null;o=k(a,h);p=k(a,f);q=k(a,g);r=k(a,i);var t=a._get_curve_element_bytes(b.curvePtr);s=a._malloc(t);b=a._verifiable_unblind(b.voprfPtr,s,t,m,c?c.length:0,n,e?e.length:0,p,f.length,q,g.length,o,h.length,r,i.length,+l);if(b!==0)throw d("mapVoprfWasmError").mapVoprfWasmError(b);c=j(a,s,t);return{unblindedElement:c}}finally{[m,n,o,p,q,r,s].forEach(function(b){b!=null&&a._free(b)})}},clientFinalize:function(b,c,e){var f,g,h;try{f=k(a,c);g=k(a,e);var i=a._get_voprf_final_evaluation_bytes(b.voprfPtr);h=a._malloc(i);b=a._voprf_client_finalize(b.voprfPtr,h,i,f,c.length,g,e.length);if(b!==0)throw d("mapVoprfWasmError").mapVoprfWasmError(b);c=j(a,h,i);return{finalEvaluation:c}}finally{[f,g,h].forEach(function(b){b!=null&&a._free(b)})}},setup:function(b){var c,e;try{var f=a._get_curve_scalar_bytes(b.curvePtr),g=a._get_curve_element_bytes(b.curvePtr);c=a._malloc(f);e=a._malloc(g);b=a._voprf_setup(b.voprfPtr,e,g,c,f);if(b!==0)throw d("mapVoprfWasmError").mapVoprfWasmError(b);b=j(a,e,g);g=j(a,c,f);return{sk:b,pk:g}}finally{[c,e].forEach(function(b){b!=null&&a._free(b)})}},evaluate:function(b,c,e,f){var g,h,i,l,m;try{var n=a._get_curve_element_bytes(b.curvePtr);g=a._malloc(n);var o=f?a._get_curve_scalar_bytes(b.curvePtr):0;h=o>0?a._malloc(o):null;var p=f?a._get_curve_scalar_bytes(b.curvePtr):0;i=p>0?a._malloc(p):null;l=k(a,e);m=k(a,c);b=a._voprf_evaluate(b.voprfPtr,g,n,h,o,i,p,m,c.length,l,e.length,+f);if(b!==0)throw d("mapVoprfWasmError").mapVoprfWasmError(b);c=h!==null?j(a,h,o):null;e=i!==null?j(a,i,p):null;f=j(a,g,n);return{proofC:c,proofS:e,evaluatedElement:f}}finally{[g,h,i,l,m].forEach(function(b){b!=null&&a._free(b)})}},serverFinalize:function(b,c,e){var f,g,h;try{f=k(a,c);g=k(a,e);var i=a._get_voprf_final_evaluation_bytes(b.voprfPtr);h=a._malloc(i);b=a._voprf_server_finalize(b.voprfPtr,h,i,f,c.length,g,e.length);if(b!==0)throw d("mapVoprfWasmError").mapVoprfWasmError(b);c=j(a,h,i);return{finalEvaluation:c}}finally{[f,g,h].forEach(function(b){b!=null&&a._free(b)})}},wasmMemory:(e=a.wasmMemory)!=null?e:void 0})})["catch"](function(a){throw c("err")("Failed to initialize wasm module, "+a)})})}function j(a,b,c){var d=new Uint8Array(c);for(var e=0;e<c;++e)d[e]=a.getValue(e+b,"i8");return d}function k(a,b){var c=b.length;c=a._malloc(c);a.writeArrayToMemory(b,c);return c}g["default"]=a}),98);
__d("LSVoprfWasm",["LSVoprfWasmBuilder","bx","ls_voprf_utils_v2"],(function(a,b,c,d,e,f,g){"use strict";var h=c("bx").getURL(c("bx")("30933"));a=function(){return h};b=c("LSVoprfWasmBuilder")(c("ls_voprf_utils_v2"));g.locateFile=a;g.LSVoprfWasm=b}),98);/*FB_PKG_DELIM*/
__d("PolarisAppStoreLauncher.react",["InstagramODS","PolarisUA","URI","polarisGetInstallAppHref","react","react-compiler-runtime","usePolarisDynamicIpadUpsell"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect,k="launch_app_store",l="instagram_carbon",m="utm_campaign",n="utm_medium";function o(a){a=d("PolarisUA").isMobile()||a;var b=new URLSearchParams(location.search);if(!a||!b.get(k))return null;a=new URL(location.href);var e=b.get(l)==="true";a.searchParams["delete"](k);a.searchParams["delete"](l);history.replaceState({},document.title,a.toString());if(e){c("InstagramODS").incr("web.logging.preload_ods.iglite_open_app_store");c("InstagramODS").incr("web.logging.preload_ods.polaris_iglite_open_app_store");a=b.get(m);e=b.get(n);return d("polarisGetInstallAppHref").getInstallIGLiteCarbonAppHref(a!=null&&a!==""?a:"instagramlitecarbon",e!=null?e:"")}return d("polarisGetInstallAppHref").getInstallAppHref()}function a(){var a=d("react-compiler-runtime").c(3),b=d("usePolarisDynamicIpadUpsell").usePolarNewIpadUpsellExperience(),e,f;a[0]!==b?(e=function(){var a=o(b);a!=null&&(h||(h=c("URI"))).goURIOnWindow(a)},f=[b],a[0]=b,a[1]=e,a[2]=f):(e=a[1],f=a[2]);j(e,f);return null}g["default"]=a}),98);
__d("PolarisMiniToast.react",["cx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(5),c=a.className;a=a.text;var e;b[0]!==a?(e=j.jsx("div",{className:"_ac7s",children:j.jsx("div",{className:"_ac7t",children:j.jsx("p",{className:"_ac7u",children:a})})}),b[0]=a,b[1]=e):e=b[1];b[2]!==c||b[3]!==e?(a=j.jsx("div",{className:c,children:e}),b[2]=c,b[3]=e,b[4]=a):a=b[4];return a}g["default"]=a}),98);
__d("PolarisSnackbar.react",["cx","CometAccessibilityAnnouncement.react","PolarisIGCoreButton.react","joinClasses","react","warning"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){a.preventDefault(),c.props.onActionClick&&c.props.onActionClick(a)},b)||babelHelpers.assertThisInitialized(c)}var d=b.prototype;d.render=function(){var a=this.props,b=a.actionText,d=a.className,e=a.onActionClick;a=a.text;c("warning")(!!(b!=null&&e!=null)||b==null&&e==null,"Having action text without a callback, or vice versa, makes no sense");return j.jsxs("div",{className:c("joinClasses")(d,"_abmn"),children:[j.jsxs("div",{className:"_abmo",children:[j.jsx("p",{className:"_abmp",children:a}),j.jsx(c("CometAccessibilityAnnouncement.react"),{children:a})]}),b!=null&&j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,color:"ig-primary-button",onClick:this.$1,children:b})]})};return b}(j.Component);g["default"]=a}),98);
__d("PolarisToastWrapper.react",["cx","BasePortal.react","PolarisEventLoop","PolarisMiniToast.react","PolarisReactRedux.react","PolarisSnackbar.react","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.$1=null;c.state={currentToast:b.toast,hasNextToast:!1,nextToast:null};return c}var d=b.prototype;d.componentWillUnmount=function(){c("PolarisEventLoop").clearTimeout(this.$1)};b.getDerivedStateFromProps=function(a,b){return b.currentToast!==a.toast?{hasNextToast:!0,nextToast:a.toast}:null};d.componentDidUpdate=function(a,b){var d=this;!b.hasNextToast&&this.state.hasNextToast&&(c("PolarisEventLoop").clearTimeout(this.$1),this.$1=c("PolarisEventLoop").setTimeout(function(){d.$1=null,d.setState(function(a){return{currentToast:a.nextToast,hasNextToast:!1,nextToast:null}})},200))};d.render=function(){var a=this.state.currentToast,b=c("joinClasses")(this.props.className,"_acb3"),d="_acb4"+(this.state.hasNextToast?" _acb5":""),e=c("joinClasses")(this.props.className,"_acb6"),f="_acb7"+(this.state.hasNextToast?" _acb8":""),g=null,h=null;if(a)switch(a==null?void 0:a.toastType){case"MINI_TOAST":g=j.jsx(c("PolarisMiniToast.react"),{className:"_acb9",text:a.text});break;case"DEFAULT_TOAST":default:h=j.jsx(c("PolarisSnackbar.react"),{actionText:a.actionText,className:"_acba",onActionClick:a.actionHandler,text:a.text});break}return j.jsxs(c("BasePortal.react"),{children:[j.jsx("div",{className:b,children:j.jsx("div",{className:d,children:h})}),j.jsx("div",{className:e,children:j.jsx("div",{className:f,children:g})})]})};return b}(j.PureComponent);function a(a){return{toast:a.toasts.toast}}e=d("PolarisReactRedux.react").connect(a)(b);g["default"]=e}),98);/*FB_PKG_DELIM*/
__d("PolarisFeedActionLoadFeedPageExtras",["CometRelay","FBLogger","PolarisFeedLogger","PolarisFeedVariants","PolarisInstajax","PolarisLoggerUtils","PolarisQueryParams","PolarisRelayEnvironment","PolarisStoriesV3Gating","PolarisStoryAPIActions","PolarisUA","Promise","QuickPerformanceLogger","ReelTrayRefreshFalcoEvent","asyncToGeneratorRuntime","nullthrows","polarisGetXDTMaterialTray","polarisLogAction","polarisStorySelectors","polarisUserSelectors","prefetchPolarisStoriesV3Ads","qpl","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){var e=d("polarisStorySelectors").getStoriesContent(a),f=e.feedTray,g=e.traySession;e=c("nullthrows")(d("polarisUserSelectors").getViewer__DEPRECATED(a));var h=c("nullthrows")(d("polarisStorySelectors").getSeenCountInStoryTray(a)),i=c("nullthrows")(f).count()-h,j=d("polarisStorySelectors").currentFeedIsHome(a)&&c("nullthrows")(d("polarisStorySelectors").userHasReel(a,e.id));c("ReelTrayRefreshFalcoEvent").log(function(){return{has_my_reel:j?"1":"0",new_reel_count:String(i),tray_refresh_time:Number(d("PolarisLoggerUtils").msToLogSeconds(Date.now()-b)),tray_refresh_type:"network",tray_session_id:g,viewed_reel_count:String(h),was_successful:!0}})}function k(){var a=d("PolarisQueryParams").parseQueryParams();a=a.variant;return(a=c("PolarisFeedVariants").cast(String(a)))!=null?a:"home"}function a(){return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a({type:"FEED_PAGE_EXTRAS_LOADING"});var f=Date.now(),g=k();c("polarisLogAction")("loadFeedPageExtrasAttempt");(i||(i=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(27459585,"2172"),"stories_network_request");var l=new(h||(h=b("Promise")))(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){try{c("polarisLogAction")("fetchStoriesDataAttempt");var f=(yield d("PolarisStoryAPIActions").loadStoryTray(a,g));c("polarisLogAction")("fetchStoriesDataSuccess");b(f)}catch(a){c("polarisLogAction")("fetchStoriesDataFailure"),d("PolarisFeedLogger").logStoriesLoadFailure(a),e(a)}});return function(a,b){return e.apply(this,arguments)}}());try{l=(yield l);l!=null&&a(l);if(d("PolarisUA").isDesktop()&&!d("PolarisStoriesV3Gating").hasRelayStoriesTray()){var m;l=e();m=(m=(m=d("polarisStorySelectors").getFeedStoryTrayWithoutOwn(l))==null?void 0:(m=m.toArray())==null?void 0:(m=m.map(function(a){return a.userId}))==null?void 0:m.filter(Boolean))!=null?m:[];l=d("polarisStorySelectors").getStoriesContent(l).traySession;c("prefetchPolarisStoriesV3Ads")(m,l)}c("polarisLogAction")("loadFeedPageExtrasSuccess");(i||(i=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(27459585,"2172"),"stories_network_response");if(d("PolarisStoriesV3Gating").hasRelayStoriesTray())d("CometRelay").commitLocalUpdate(c("PolarisRelayEnvironment"),function(a){a=c("polarisGetXDTMaterialTray")(a,g==="following");a==null?void 0:(a=a.setValue(c("uuidv4")(),"tray_session_id"))==null?void 0:(a=a.setValue(Date.now(),"refresh_key"))==null?void 0:a.setValue(Date.now()-f,"refresh_latency")});else try{c("polarisLogAction")("logReelTrayRefreshAttempt"),j(e(),f),c("polarisLogAction")("logReelTrayRefreshSuccess")}catch(a){c("polarisLogAction")("logReelTrayRefreshFailure"),d("PolarisFeedLogger").logReelTrayRefreshFailure(a)}}catch(b){c("polarisLogAction")("loadFeedPageExtrasFailure",{errorMessage:(b==null?void 0:b.name)+" "+(b==null?void 0:b.message)}),d("PolarisFeedLogger").logFeedPageExtrasLoadFailure(b),(i||(i=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(27459585,"2172"),"stories_network_response_failure"),a({type:"FEED_PAGE_EXTRAS_FAILED"}),b instanceof d("PolarisInstajax").AjaxError||c("FBLogger")("ig_web").catching(b).mustfix("unexpected")}h.resolve()});return function(b,c){return a.apply(this,arguments)}}()}g.loadFeedPageExtras=a}),98);
__d("getViewportDimensions",["UserAgent"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){var a=null;return function(){var b=document.body;if(b==null)return null;(a==null||!b.contains(a))&&(a=document.createElement("div"),a.style.left=Number.MAX_SAFE_INTEGER+"px",a.style.width="100%",a.style.height="100%",a.style.position="fixed",b.appendChild(a));return a}}();function i(){var a;document.documentElement&&(a=document.documentElement.clientWidth);a==null&&document.body&&(a=document.body.clientWidth);return a||0}function j(){var a;document.documentElement&&(a=document.documentElement.clientHeight);a==null&&document.body&&(a=document.body.clientHeight);return a||0}function k(){return{width:window.innerWidth||i(),height:window.innerHeight||j()}}k.withoutScrollbars=function(){return c("UserAgent").isPlatform("Android")?k():{width:i(),height:j()}};k.layout=function(){var a,b=h();return{width:(a=b==null?void 0:b.clientWidth)!=null?a:i(),height:(a=b==null?void 0:b.clientHeight)!=null?a:j()}};g["default"]=k}),98);/*FB_PKG_DELIM*/
__d("ScriptPath",["ErrorGuard","SubscriptionList","TimeSlice","WebStorage","isInIframe"],(function(a,b,c,d,e,f){"use strict";var g,h,i="sp_pi",j=1e3*30,k=null,l=null,m=new(b("SubscriptionList"))(),n=null,o=[],p=b("TimeSlice").guard(function(a,c){m.getCallbacks().forEach(function(d){(g||(g=b("ErrorGuard"))).applyWithGuard(function(){d({source:k,dest:l,cause:a,extraData:c})},null,[])})},"ScriptPath Notifying callbacks",{propagationType:b("TimeSlice").PropagationType.ORPHAN});function q(){return l?l.scriptPath:void 0}function r(){var a=(h||(h=b("WebStorage"))).getSessionStorage();if(!a||b("isInIframe")())return;h.setItemGuarded(a,i,JSON.stringify({pageInfo:l,clickPoint:n,time:Date.now()}))}function a(){var a=(h||(h=b("WebStorage"))).getSessionStorageForRead();if(!a)return;var c=a.getItem(i);if(c){c=JSON.parse(c);c&&(c.time<Date.now()-j&&(a=(h||(h=b("WebStorage"))).getSessionStorage(),a&&a.removeItem(i)),l=c.pageInfo,n=c.clickPoint,l&&(l.restored=!0))}}a();c={set:function(a,b,c){k=l,l={scriptPath:a,categoryToken:b,extraData:c||{}},o=[],window._script_path=a,p()},openOverlayView:function(a,b,c){if(!a)return;var d=o.length;(d===0||o[d-1]!==a)&&(k=babelHelpers["extends"]({},l),l&&(l.topViewEndpoint=a),c&&c.replaceTopOverlay&&d>0?(o[d-1]=a,p("replace_overlay_view",b)):(o.push(a),p("open_overlay_view",b)))},closeOverlayView:function(a,b){a=o.lastIndexOf(a);if(a===-1)return;k=babelHelpers["extends"]({},l);l&&(a>0?l.topViewEndpoint=o[a-1]:l.topViewEndpoint=null);o=o.slice(0,a);p("close_overlay_view",b)},setClickPointInfo:function(a){n=a,r()},getClickPointInfo:function(){return n},getScriptPath:q,getCategoryToken:function(){return l?l.categoryToken:void 0},getEarlyFlushPage:function(){var a;return(a=l)==null?void 0:(a=a.extraData)==null?void 0:a.ef_page},getTopViewEndpoint:function(){var a=o.length;return a>0?o[a-1]:q()},getPageInfo:function(){return l},getSourcePageInfo:function(){return k},subscribe:function(a){return m.add(b("TimeSlice").guard(a,"ScriptPath.subscribe"))},shutdown:function(){r()}};e.exports=c}),null);/*FB_PKG_DELIM*/
__d("Base64Utils",["XPlatReactTextEncoder","base64Binary"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("base64Binary").encode(new(d("XPlatReactTextEncoder").TextEncoder)().encode(a))}function b(a){return d("base64Binary").encode(new Uint8Array(a))}function c(a){return d("base64Binary").decode(a).buffer}g.encodeUnicode=a;g.fromArrayBuffer=b;g.toArrayBuffer=c}),98);
__d("CryptoLogger",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("FBLogger")("labyrinth_web","crypto."+a)}function b(a,b){return b instanceof Error?a.catching(b):a}g.CryptoLogger=a;g.captureError=b}),98);
__d("LSBase64Decode",["Base64Utils","CryptoLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.replace(/-/g,"+").replace(/_/g,"/").replace(/\./g,"=").replace("/,/","=");var b=4-a.length%4;if(b<4)for(var c=0;c<b;c++)a+="=";return a}function a(a){var b=d("CryptoLogger").CryptoLogger("base64decode");try{return a!=null?d("Base64Utils").toArrayBuffer(h(a)):void 0}catch(c){if((c==null?void 0:c.message)==null)return;if(c instanceof Error)b.catching(c).mustfix(c.message);else{b.mustfix("Base64decode : empty error message for exception: %s, input string: %s",c.message,(b=a)!=null?b:"undefined")}}}g.decode=a}),98);
__d("LSBase64Decode.nop",["LSBase64Decode","LSResult","LSSynchronousPromise"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,e){return d("LSSynchronousPromise").maybeMakeSynchronousPromise(c("LSResult")(d("LSBase64Decode").decode(e)))};a.__nop_name__="LSBase64Decode";g["default"]=a}),98);
__d("LSWriteMinosPublicKey.nop",["FBLogger","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d,e,f,g,i,j,k){if(e==null){c("FBLogger")("wmi_eb").mustfix("LSWriteMinosPublicKey: no contact id found on contact sync");return(h||(h=b("Promise"))).resolve()}if(f==null||g==null||i==null||j==null||k==null){c("FBLogger")("wmi_eb").info("LSWriteMinosPublicKey: no mailbox keys found on contact sync");return(h||(h=b("Promise"))).resolve()}return(h||(h=b("Promise"))).resolve()});function d(b,c,d,e,f,g,h,i){return a.apply(this,arguments)}return d}();a.__nop_name__="LSWriteMinosPublicKey";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("Base64",[],(function(a,b,c,d,e,f){var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function h(a){a=a.charCodeAt(0)<<16|a.charCodeAt(1)<<8|a.charCodeAt(2);return String.fromCharCode(g.charCodeAt(a>>>18),g.charCodeAt(a>>>12&63),g.charCodeAt(a>>>6&63),g.charCodeAt(a&63))}var i=">___?456789:;<=_______\0\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19______\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123";function j(a){a=i.charCodeAt(a.charCodeAt(0)-43)<<18|i.charCodeAt(a.charCodeAt(1)-43)<<12|i.charCodeAt(a.charCodeAt(2)-43)<<6|i.charCodeAt(a.charCodeAt(3)-43);return String.fromCharCode(a>>>16,a>>>8&255,a&255)}var k={encode:function(a){a=unescape(encodeURI(a));var b=(a.length+2)%3;a=(a+"\0\0".slice(b)).replace(/[\s\S]{3}/g,h);return a.slice(0,a.length+b-2)+"==".slice(b)},decode:function(a){a=a.replace(/[^A-Za-z0-9+\/]/g,"");var b=a.length+3&3;a=(a+"AAA".slice(b)).replace(/..../g,j);a=a.slice(0,a.length+b-3);try{return decodeURIComponent(escape(a))}catch(a){throw new Error("Not valid UTF-8")}},encodeObject:function(a){return k.encode(JSON.stringify(a))},decodeObject:function(a){return JSON.parse(k.decode(a))},encodeNums:function(a){return String.fromCharCode.apply(String,a.map(function(a){return g.charCodeAt((a|-(a>63?1:0))&-(a>0?1:0)&63)}))}};a=k;f["default"]=a}),66);
__d("TrustedTypesNoOpPolicy_DO_NOT_USE",["TrustedTypes","TrustedTypesUtils"],(function(a,b,c,d,e,f,g){"use strict";a={createScriptURL:d("TrustedTypesUtils").noop,createHTML:d("TrustedTypesUtils").noop,createScript:d("TrustedTypesUtils").noop};b=c("TrustedTypes").createPolicy("noop-do-not-use",a);e=b;g["default"]=e}),98);/*FB_PKG_DELIM*/
__d("EncryptedBackupsDYIHandleMessageRestore",["EncryptedBackupsDYISingleton","I64","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Issuing next range query for thread with thread key ",", server generated next reference timestamp: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["nextTimestampMs was not supplied for thread with thread key ","."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handling message range query for thread with thread key ",", hasMoreBefore: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread key for thread id: ",""]);l=function(){return a};return a}function a(a,b,c,d,e,f,g){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,m){var o=d("EncryptedBackupsDYISingleton").getSingleton(),p=o.getLogger();o=o.getThreadKeyForThreadId(b);if(o==null){p.WARN(l(),b);return}void p.LOG(k(),b,e);c.length>0&&(yield g(o,b,c));if(!e||f==null){e&&f==null&&void p.ERROR(j(),b);n(o);return}g=(h||(h=d("I64"))).to_string(f);void p.LOG(i(),b,g);void m(a,g,b)});return m.apply(this,arguments)}function n(a){var b=d("EncryptedBackupsDYISingleton").getSingleton();b.deleteThreadKeyFromThreadsRestoreInProgress(a)}g.handleMessageRangeQueryRestore=a}),98);/*FB_PKG_DELIM*/
__d("CAAFetaSavePasswordInterstitial.entrypoint",["CAAFetaSavePasswordInterstitialDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{query:{parameters:c("CAAFetaSavePasswordInterstitialDialogQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("CAAFetaSavePasswordInterstitialDialog.react").__setRef("CAAFetaSavePasswordInterstitial.entrypoint")};g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("Dsp2Utils",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("13284")||c("gkx")("13383")||c("gkx")("13286")}g.enableDsp2ThemeInXMDSComponents=a}),98);